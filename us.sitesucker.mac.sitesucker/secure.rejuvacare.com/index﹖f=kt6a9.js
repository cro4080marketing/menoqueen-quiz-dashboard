const funnelJson = {"funnelData":{"referenceId":"a0b114f4-e357-4c4e-8376-d166552631ef","campaign":"210","salt":"1352aad0-4837-11ee-bb4a-09482893b9b9","headTrackingCode":"<script type=\"text/javascript\">\n    (function(c,l,a,r,i,t,y){\n        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};\n        t=l.createElement(r);t.async=1;t.src=\"https://www.clarity.ms/tag/\"+i;\n        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);\n    })(window, document, \"clarity\", \"script\", \"ubpk14cyce\");\n</script>","bodyTrackingCode":"<script async src=\"https://pixel.wetracked.io/cc/init.js?shop=signatureskin-7398-2.myshopify.com\"></script>\n<script>\n  !(function () {\n    requestAnimationFrame(function report() {\n      if (!location.pathname.includes('checkout')) return;\n      if ('fbq' in window) fbq('track', 'InitiateCheckout');\n      else requestAnimationFrame(report);\n    });\n  })();\n</script>\n</script>\n<script src=\"https://rum-agent.na-01.cloud.solarwinds.com/ra-e-1816259273843949568.js\" async></script>\n\n<script>\n(function() {\n    // Function to get URL parameter\n    function getUrlParameter(name) {\n        name = name.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n        var regex = new RegExp('[\\\\?&]' + name + '=([^&#]*)');\n        var results = regex.exec(location.search);\n        return results === null ? '' : decodeURIComponent(results[1].replace(/\\+/g, ' '));\n    }\n    \n    // Function to set cookie\n    function setCookie(name, value, days) {\n        var expires = \"\";\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = \"; expires=\" + date.toUTCString();\n        }\n        // Get the root domain (works across subdomains)\n        var hostname = window.location.hostname;\n        var domain = hostname.substring(hostname.lastIndexOf(\".\", hostname.lastIndexOf(\".\") - 1) + 1);\n        document.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/; domain=.\" + domain;\n    }\n    \n    // Function to get cookie\n    function getCookie(name) {\n        var nameEQ = name + \"=\";\n        var ca = document.cookie.split(';');\n        for(var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n        }\n        return null;\n    }\n    \n    // Capture click ID from URL parameter (c1 is what Voluum uses)\n    var clickId = getUrlParameter('c1');\n    \n    // If click ID exists in URL, store it in cookie\n    if (clickId) {\n        setCookie('voluum_c1', clickId, 30);\n        sessionStorage.setItem('voluum_c1', clickId);\n        localStorage.setItem('voluum_c1', clickId);\n        console.log('Voluum Click ID captured:', clickId);\n    } else {\n        // Try to retrieve from storage\n        clickId = getCookie('voluum_c1') || sessionStorage.getItem('voluum_c1') || localStorage.getItem('voluum_c1');\n        if (clickId) {\n            console.log('Voluum Click ID retrieved from storage:', clickId);\n        }\n    }\n    \n    // Make click ID globally accessible\n    window.voluumClickId = clickId;\n    \n})();\n</script>\n\n<script>\n    function applyDesktopBannerStyles() {\n\n        // âŒ Exit if element does not exist\n        if ($(\".desktop-banner\").length === 0) {\n            return;\n        }\n        var custom_height = \"111px\";\n         if(pageData.pageTypeId && parseInt(pageData.pageTypeId) === 2){\n              custom_height = \"77px\";\n         }\n        if (window.innerWidth >= 480) {\n            $(\".desktop-banner\").css({\n                \"height\": custom_height,\n                \"display\": \"flex\",\n                \"background-size\": \"cover\",\n                \"background-position\": \"center top\",\n                \"background-repeat\": \"no-repeat\"\n            });\n        } else {\n            $(\".desktop-banner\").css({\n                \"height\": \"\",\n                \"display\": \"\",\n                \"background-size\": \"\",\n                \"background-position\": \"\",\n                \"background-repeat\": \"\"\n            });\n        }\n    }\n\n    // Run once\n    $(document).ready(function () {\n        applyDesktopBannerStyles();\n    });\n\n    // Run on resize\n    $(window).on(\"resize\", function () {\n        applyDesktopBannerStyles();\n    });\n</script>","title":"Last Day of Sale!","addOns":[{"keyName":"PAAY_AUTH_MSTR","keyValue":"1"},{"keyName":"PAAY_AUTH_VISA","keyValue":"1"},{"keyName":"Google_Places","keyValue":"AIzaSyCWI9JoJy5CKvJIXMraj4dktm1MoaXRA8I"},{"keyName":"RECAPT_TYPE","keyValue":"1"},{"keyName":"RECAPT_THRESHOLD","keyValue":"0.1"},{"keyName":"RECAPT_TRIGGER","keyValue":"1"},{"keyName":"PayPal_Fastlane","keyValue":"1"},{"keyName":"PAYPAL_ADDRESS","keyValue":"false"},{"keyName":"GPay_CountryCode","keyValue":"US"},{"keyName":"applePayCountryCode","keyValue":"US"},{"keyName":"APPLEPAY_ADDRESS","keyValue":"false"},{"keyName":"REACH_LOCALE","keyValue":"en-US"},{"keyName":"REACH_THEME_VALUE","keyValue":"light"},{"keyName":"insureShipEnabled","keyValue":"false"},{"keyName":"insureShipPlacement","keyValue":"1"},{"keyName":"PayPal_Venmo","keyValue":"true"},{"keyName":"PayPal_PayLater","keyValue":"true"},{"keyName":"PAAY_CH_MIN_AMT","keyValue":"0.00"},{"keyName":"PAAY_AUTH_MIN_AMT","keyValue":"0.00"},{"keyName":"paypalVenmoHide","keyValue":"false"},{"keyName":"paypalPayLaterHide","keyValue":"false"},{"keyName":"paypalFastlaneHide","keyValue":"false"},{"keyName":"Purchase_Event_FB","keyValue":"2"},{"keyName":"Purchase_Event_SC","keyValue":"3"},{"keyName":"Paypal_billerId","keyValue":"29"},{"keyName":"PayPal_Reference","keyValue":"0"},{"keyName":"PayPal_Vault","keyValue":"1"},{"keyName":"PayPal_Merchant","keyValue":"JPCKZAJRCKAV2"},{"keyName":"PayPal_WithReach","keyValue":"false"},{"keyName":"FB_ADV_TRACKING","keyValue":"false"},{"keyName":"SYGNAL_ADV_TRACKING","keyValue":"false"},{"keyName":"LISTRAK_CART_UPDATE","keyValue":"false"},{"keyName":"EXTERNAL_TRACK_REQ","keyValue":"false"},{"keyName":"ADD_TO_CART_TCK","keyValue":"false"},{"keyName":"LEAD_VIEW_CONT_TCK","keyValue":"false"},{"keyName":"SEND_USER_DATA","keyValue":"false"},{"keyName":"PRODUCTS_PER_ORDER","keyValue":"false"},{"keyName":"TRIPLE_WHALE_REQ","keyValue":"true"},{"keyName":"AD_BEACON_REQ","keyValue":"false"},{"keyName":"APPLOVIN_REQ","keyValue":"false"},{"keyName":"SEND_UNIQUE_TRANS_ID","keyValue":"false"},{"keyName":"TTK_ADV_TRACKING","keyValue":"false"},{"keyName":"SC_ADV_TRACKING","keyValue":"false"},{"keyName":"DISABLE_LAZY_LOAD","keyValue":"true"}],"providers":[{"id":1,"name":"Google","keyValue":"GTM-5WR57ZD7"}],"pages":[{"referenceId":"ef10b92d-38af-4ba4-890e-967e8ee9808e","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","templateTypeId":2,"pageType":2}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"5369bf1a-d8f6-4332-bf75-eccdca8ca131","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Checkout Nooro style","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","templateTypeId":4,"pageType":4}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"35ba3386-4e35-44e0-86d2-ded944df2d32","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","templateTypeId":2,"pageType":2}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"acc7d1c9-f28e-455c-8c08-f4e8a58323a5","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Checkout Nooro style","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","templateTypeId":4,"pageType":4}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"445eb2fa-a57b-4220-8fae-6a08d7deb227","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee - 1x RejuvaKnee 2.0 - OTO1","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"8ef5ef05-6bd0-4f9d-a49a-34a535700e80","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"f84ff87d-af26-4219-b164-d91a0bef1ea5","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upgrade vsl both options shown","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"e04a012d-4a95-4f70-b6a8-dfc66743a439","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"f4d191ff-dafa-4c4f-8e1f-6a16d2cfd6c2","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee - 1x RejuvaKnee 2.0 - OTO1","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"919e712d-dbb6-4ee7-bfee-74849f87a713","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"bdb48e90-7751-4606-a1c1-b871eed42835","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upgrade vsl both options shown","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"bc994761-a5b3-493e-8978-907e4fed6979","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"f6384421-8b0e-4f28-b986-576bf31c4fde","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":null,"externalURL":null,"pageView":[{"referenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"9cdcb9cd-a1ec-4345-8dd6-c4be32b5b530","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Downsell 2","urlSlug":"Downsell-Split-test-bd-I","externalURL":null,"pageView":[{"referenceId":"65829328-fe54-4312-a266-775498931d47","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"030206b8-11b3-48cb-80e1-051ead8e1268","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Downsell 2","urlSlug":"Downsell-Split-test-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"91359873-cabb-4b46-a18a-c967fb2388b4","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"d8264725-a9d2-4bbf-b832-d756a6585202","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RK - Zainab adv","urlSlug":"adv-rj-bd-I","externalURL":null,"pageView":[{"referenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","templateTypeId":2,"pageType":2}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Checkout Nooro style","urlSlug":"checkout-rj-bd-I-new","externalURL":null,"pageView":[{"referenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","templateTypeId":4,"pageType":4}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Checkout Nooro style","urlSlug":"checkout-rj-bd-I-new-lp","externalURL":null,"pageView":[{"referenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","templateTypeId":4,"pageType":4}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"f8ff33ea-9f8b-43d8-bc97-94cd6156f7a2","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upgrade vsl both options shown","urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I","externalURL":null,"pageView":[{"referenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"0a7da439-34fe-45dd-87b1-f474b2bbb447","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upgrade vsl both options shown","urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"bab88c2e-9341-42c2-83cc-3e20409010f1","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee - 1x RejuvaKnee 2.0 - OTO1","urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I","externalURL":null,"pageView":[{"referenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"21cbd479-9fd9-444b-81ea-87c7b4723f9f","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee - 1x RejuvaKnee 2.0 - OTO1","urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","externalURL":null,"pageView":[{"referenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","externalURL":null,"pageView":[{"referenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"765147d3-faab-4386-a507-c7fd9cb19796","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 2","urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"fab038a1-c39e-4d00-a176-996a2423005a","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 3","urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","externalURL":null,"pageView":[{"referenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 3","urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"92b8d516-2508-4678-9110-81bcc802048d","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"ba66b338-6a77-4e88-add8-c96461efa991","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 3","urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","externalURL":null,"pageView":[{"referenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"fbee5044-6608-41d7-b169-b233c9296be5","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Upsell 3","urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaFlow - OTO3 Porch pirates","urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","externalURL":null,"pageView":[{"referenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaFlow - OTO3 Porch pirates","urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaFlow - OTO3 Porch pirates","urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","externalURL":null,"pageView":[{"referenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaFlow - OTO3 Porch pirates","urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"b8ea0a5d-5e60-442e-9aab-d8a05604af39","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Downsell 3","urlSlug":"oto-ds-upgrade-rejuvaknee-2.0-d-bd-I","externalURL":null,"pageView":[{"referenceId":"db46fa4b-213b-4add-b3f1-151c1be980ce","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"e0a0e1dc-3d8f-45ca-8463-f21015806dd3","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Downsell 3","urlSlug":"oto-ds-upgrade-rejuvaknee-2.0-d-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"65f95810-2728-4ec6-ac41-139f826812c8","templateTypeId":3,"pageType":3}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"dbdf1c02-11b6-4371-8f3f-2f6fd5e0cb03","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee","urlSlug":"sp-rj-bd-I","externalURL":null,"pageView":[{"referenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","templateTypeId":2,"pageType":2}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"fbe904d5-387e-43df-9770-edca7b5e00ab","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"RejuvaKnee","urlSlug":"sp-rj-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","templateTypeId":2,"pageType":2}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"673a10a1-e560-4743-8b13-488809856b92","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Thank You","urlSlug":"thank-you-upgrade-bd-I","externalURL":null,"pageView":[{"referenceId":"6816b08e-580e-4645-9970-5b57183cb68d","templateTypeId":5,"pageType":5}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]},{"referenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","splitReferenceId":null,"splitEnabled":false,"isMembershipRequired":false,"title":"Thank You","urlSlug":"thank-you-upgrade-bd-I-lp","externalURL":null,"pageView":[{"referenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","templateTypeId":5,"pageType":5}],"pageProducts":[],"pagebillingCycles":[],"pageVariants":[],"isPageTitle":false,"pageProperties":[]}],"disableBadge":false,"name":"RejuvaKnee Baidu Igor","whitelabelId":10,"affiliateId":null,"isMenuEnabled":false},"elements":[{"elementId":"fkt-button-491-99c-963","href":null,"status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-b5f-f81-9f1","href":null,"status":"Success","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-button-b5f-f81-9f1-Decline","href":null,"status":"Decline","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-link-0a0-4aa-a1c","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-2d9-885-868","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[],"products":[]},{"elementId":"fkt-link-415-29b-85d","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[],"products":[]},{"elementId":"fkt-link-486-a9e-9c6","href":null,"status":"Success","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-486-a9e-9c6-Decline","href":null,"status":"Decline","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-4e4-c84-aa2","href":null,"status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-608-6ac-827","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ca-0b3-9f5","href":"#irtpjyv","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6f1-18b-9e3","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[],"products":[]},{"elementId":"fkt-link-776-297-84f","href":null,"status":"Success","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-776-297-84f-Decline","href":null,"status":"Decline","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-8c3-099-9fb","href":null,"status":"Success","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-8c3-099-9fb-Decline","href":null,"status":"Decline","pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-c7f-cb2-9f9","href":null,"status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-d2a-dbd-aa2","href":"","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-f2e-3ab-891","href":"#irtpjyv","status":null,"pageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","linkDetails":[{"targetPageReferenceId":"a9d1a929-19eb-44da-8e21-f702cb21b4ce","targetPageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687955,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-03f-880-b09","href":null,"status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[{"targetPageReferenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","targetPageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","products":[],"urlSlug":"checkout-rj-bd-I-new","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687896,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0d4-ea4-910","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[],"products":[]},{"elementId":"fkt-link-828-08f-9eb","href":null,"status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[{"targetPageReferenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","targetPageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","products":[],"urlSlug":"checkout-rj-bd-I-new","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687896,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-be6-8bb-a7d","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[],"products":[]},{"elementId":"fkt-link-c0a-7ad-81c","href":null,"status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[{"targetPageReferenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","targetPageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","products":[],"urlSlug":"checkout-rj-bd-I-new","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687896,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-de7-da1-9a8","href":null,"status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[{"targetPageReferenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","targetPageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","products":[],"urlSlug":"checkout-rj-bd-I-new","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687896,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-e3b-289-a69","href":null,"status":null,"pageViewReferenceId":"1361a59c-989d-4eca-aaa5-0ac1d3a62b41","linkDetails":[{"targetPageReferenceId":"64e5b811-dbec-463c-bfd9-e26afebb5748","targetPageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","products":[],"urlSlug":"checkout-rj-bd-I-new","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687896,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"144fa6d1-661d-417a-9547-dfe8fb8f89f7","linkDetails":[],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"1a83152b-a471-448b-8dff-2c682877a2d8","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"e0a0e1dc-3d8f-45ca-8463-f21015806dd3","targetPageViewReferenceId":"65f95810-2728-4ec6-ac41-139f826812c8","products":[],"urlSlug":"oto-ds-upgrade-rejuvaknee-2.0-d-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710229,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[],"products":[]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710226,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","linkDetails":[],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710222,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710222,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-a1d-ab7-88f","href":null,"status":null,"pageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710222,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-03f-880-b09","href":null,"status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[{"targetPageReferenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","targetPageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","products":[],"urlSlug":"checkout-rj-bd-I-new-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710217,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0d4-ea4-910","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[],"products":[]},{"elementId":"fkt-link-828-08f-9eb","href":null,"status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[{"targetPageReferenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","targetPageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","products":[],"urlSlug":"checkout-rj-bd-I-new-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710217,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-be6-8bb-a7d","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[],"products":[]},{"elementId":"fkt-link-c0a-7ad-81c","href":null,"status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[{"targetPageReferenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","targetPageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","products":[],"urlSlug":"checkout-rj-bd-I-new-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710217,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-de7-da1-9a8","href":null,"status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[{"targetPageReferenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","targetPageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","products":[],"urlSlug":"checkout-rj-bd-I-new-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710217,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-e3b-289-a69","href":null,"status":null,"pageViewReferenceId":"32e0feff-71ff-4c53-84f6-29cc7e537e1d","linkDetails":[{"targetPageReferenceId":"88897fc6-9a5f-4ae7-a6a2-ad32a64b177b","targetPageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","products":[],"urlSlug":"checkout-rj-bd-I-new-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710217,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-1b3-3a7-86b","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-458-b95-9fd","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-715-e9a-af4","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-8aa-d85-b28","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-8bd-8ae-a82","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-912-b8e-a05","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-c69-c95-992","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-button-ea6-28e-97f","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-link-1a4-4a0-a19","href":"https://www.rejuvacare.com/policies/privacy-policy","status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-link-303-7a5-ac7","href":"https://www.rejuvacare.com/policies/terms-of-service","status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-link-afa-fb4-a09","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-link-ea1-69a-85c","href":null,"status":null,"pageViewReferenceId":"339438fe-c4c0-47ee-ae90-4479848ac476","linkDetails":[],"products":[]},{"elementId":"fkt-link-25b-ea1-97e","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[],"products":[]},{"elementId":"fkt-link-39b-38a-90e","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[],"products":[]},{"elementId":"fkt-link-69f-7b2-8a5","href":"tel:+1 (833) 647-1075","status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[{"targetPageReferenceId":"0a7da439-34fe-45dd-87b1-f474b2bbb447","targetPageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710225,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"21cbd479-9fd9-444b-81ea-87c7b4723f9f","targetPageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","products":[15443],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":710218,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6ab-bab-957","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d","href":null,"status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[{"targetPageReferenceId":"0a7da439-34fe-45dd-87b1-f474b2bbb447","targetPageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710225,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"21cbd479-9fd9-444b-81ea-87c7b4723f9f","targetPageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","products":[15443],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":710218,"Name":"CustomProductTags","Value":""}]}],"products":[9350]},{"elementId":"fkt-link-cde-1bd-97d-CREDITCARD","href":null,"status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[{"targetPageReferenceId":"0a7da439-34fe-45dd-87b1-f474b2bbb447","targetPageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710225,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"21cbd479-9fd9-444b-81ea-87c7b4723f9f","targetPageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","products":[15443],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":710218,"Name":"CustomProductTags","Value":""}]}],"products":[9350]},{"elementId":"fkt-link-cde-1bd-97d-PAYPAL","href":null,"status":null,"pageViewReferenceId":"3464c7de-2e75-4559-b7cf-fc2a17192bea","linkDetails":[{"targetPageReferenceId":"0a7da439-34fe-45dd-87b1-f474b2bbb447","targetPageViewReferenceId":"2e6943f5-cdb8-4ce2-9b00-b3c36bf0b245","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710225,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"21cbd479-9fd9-444b-81ea-87c7b4723f9f","targetPageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","products":[15443],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":710218,"Name":"CustomProductTags","Value":""}]}],"products":[9350]},{"elementId":"fkt-link-03f-880-b09","href":null,"status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-0d4-ea4-910","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-828-08f-9eb","href":null,"status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-be6-8bb-a7d","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-c0a-7ad-81c","href":null,"status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-de7-da1-9a8","href":null,"status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-link-e3b-289-a69","href":null,"status":null,"pageViewReferenceId":"43711d4b-7cf3-4cef-bc32-cc773e493620","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"b8ea0a5d-5e60-442e-9aab-d8a05604af39","targetPageViewReferenceId":"db46fa4b-213b-4add-b3f1-151c1be980ce","products":[],"urlSlug":"oto-ds-upgrade-rejuvaknee-2.0-d-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687960,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1468]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[9361]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[],"products":[]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687957,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","linkDetails":[],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"65829328-fe54-4312-a266-775498931d47","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687962,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"65829328-fe54-4312-a266-775498931d47","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687962,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-84c-1a2-b12","href":null,"status":null,"pageViewReferenceId":"65829328-fe54-4312-a266-775498931d47","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687962,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":"","status":"Success","pageViewReferenceId":"65f95810-2728-4ec6-ac41-139f826812c8","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710230,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-5de-c80-849-Decline","href":"","status":"Decline","pageViewReferenceId":"65f95810-2728-4ec6-ac41-139f826812c8","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710230,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-84c-1a2-b12","href":"","status":null,"pageViewReferenceId":"65f95810-2728-4ec6-ac41-139f826812c8","linkDetails":[{"targetPageReferenceId":"765147d3-faab-4386-a507-c7fd9cb19796","targetPageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710230,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-491-99c-963","href":null,"status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-b5f-f81-9f1","href":null,"status":"Success","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-button-b5f-f81-9f1-Decline","href":null,"status":"Decline","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-link-0a0-4aa-a1c","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-2d9-885-868","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[],"products":[]},{"elementId":"fkt-link-415-29b-85d","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[],"products":[]},{"elementId":"fkt-link-486-a9e-9c6","href":null,"status":"Success","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-486-a9e-9c6-Decline","href":null,"status":"Decline","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-4e4-c84-aa2","href":null,"status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-608-6ac-827","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ca-0b3-9f5","href":"#irtpjyv","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6f1-18b-9e3","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[],"products":[]},{"elementId":"fkt-link-776-297-84f","href":null,"status":"Success","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-776-297-84f-Decline","href":null,"status":"Decline","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-8c3-099-9fb","href":null,"status":"Success","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-8c3-099-9fb-Decline","href":null,"status":"Decline","pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-c7f-cb2-9f9","href":null,"status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-d2a-dbd-aa2","href":"","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-f2e-3ab-891","href":"#irtpjyv","status":null,"pageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","linkDetails":[{"targetPageReferenceId":"0e3c13d2-1eb6-4e96-afc0-0a35e3495378","targetPageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710228,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","linkDetails":[{"targetPageReferenceId":"ba66b338-6a77-4e88-add8-c96461efa991","targetPageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688010,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-333-78c-ae6","href":"https://","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-link-437-fa5-ac7","href":"mailto:support@myrejuvaknee.com","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-link-620-f8d-9b2","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-link-805-b8b-b10","href":"mailto:support@myrejuvaknee.com","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-link-d50-b89-b8b","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-link-ef7-a83-8e5","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"9cdcb9cd-a1ec-4345-8dd6-c4be32b5b530","targetPageViewReferenceId":"65829328-fe54-4312-a266-775498931d47","products":[],"urlSlug":"Downsell-Split-test-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687952,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[],"products":[]},{"elementId":"fkt-link-974-6b1-b17","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-974-6b1-b17-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[{"targetPageReferenceId":"d2d220ca-50bc-4e83-b0dc-970962da4bf8","targetPageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687953,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","linkDetails":[],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"7d17800b-8db5-4ab7-a403-c4978feffe7c","linkDetails":[{"targetPageReferenceId":"fab038a1-c39e-4d00-a176-996a2423005a","targetPageViewReferenceId":"0f2ac747-2fe5-4db7-85b7-bf6333024e5f","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687954,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"7db7756c-38e6-4b1e-8a9c-69fb58e1e138","linkDetails":[],"products":[]},{"elementId":"fkt-link-25b-ea1-97e","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[],"products":[]},{"elementId":"fkt-link-39b-38a-90e","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[],"products":[]},{"elementId":"fkt-link-69f-7b2-8a5","href":"tel:+1 (833) 647-1075","status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[{"targetPageReferenceId":"bab88c2e-9341-42c2-83cc-3e20409010f1","targetPageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","products":[9304],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":687948,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"f8ff33ea-9f8b-43d8-bc97-94cd6156f7a2","targetPageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687950,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6ab-bab-957","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d","href":null,"status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[{"targetPageReferenceId":"bab88c2e-9341-42c2-83cc-3e20409010f1","targetPageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","products":[9304],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":687948,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"f8ff33ea-9f8b-43d8-bc97-94cd6156f7a2","targetPageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687950,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-cde-1bd-97d-CREDITCARD","href":null,"status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[{"targetPageReferenceId":"bab88c2e-9341-42c2-83cc-3e20409010f1","targetPageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","products":[9304],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":687948,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"f8ff33ea-9f8b-43d8-bc97-94cd6156f7a2","targetPageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687950,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-cde-1bd-97d-PAYPAL","href":null,"status":null,"pageViewReferenceId":"81122734-79d6-45b7-87f1-0c062eb298fb","linkDetails":[{"targetPageReferenceId":"bab88c2e-9341-42c2-83cc-3e20409010f1","targetPageViewReferenceId":"72161cd6-fecc-4296-939c-5fb5bcaf2f89","products":[9304],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-v2-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":"{}","countryStates":null,"customLinkViewEntities":[{"LinkId":687948,"Name":"CustomProductTags","Value":""}]},{"targetPageReferenceId":"f8ff33ea-9f8b-43d8-bc97-94cd6156f7a2","targetPageViewReferenceId":"5a2a2d6a-844a-4285-8fe6-78522cf21335","products":[],"urlSlug":"oto-1-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687950,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687956,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687956,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-a1d-ab7-88f","href":null,"status":null,"pageViewReferenceId":"85e8355b-9a12-409c-86f7-361bc7e03186","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687956,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1468]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"8714be6d-b61a-4c07-96b5-31cca872f332","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1467]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9365]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9365]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-link-974-6b1-b17","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-974-6b1-b17-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"8b5ead1a-bf6e-486b-b5be-985f33cfa611","linkDetails":[],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"91359873-cabb-4b46-a18a-c967fb2388b4","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710224,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"91359873-cabb-4b46-a18a-c967fb2388b4","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710224,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-84c-1a2-b12","href":null,"status":null,"pageViewReferenceId":"91359873-cabb-4b46-a18a-c967fb2388b4","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710224,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"918409b7-190d-4a6a-a7e1-1ea66c75ee44","linkDetails":[{"targetPageReferenceId":"fbee5044-6608-41d7-b169-b233c9296be5","targetPageViewReferenceId":"6793fc06-2910-4413-a28d-1ec53f2c98a2","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-b-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759861,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-491-99c-963","href":null,"status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-b5f-f81-9f1","href":null,"status":"Success","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-button-b5f-f81-9f1-Decline","href":null,"status":"Decline","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-link-0a0-4aa-a1c","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-2d9-885-868","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[],"products":[]},{"elementId":"fkt-link-415-29b-85d","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[],"products":[]},{"elementId":"fkt-link-486-a9e-9c6","href":null,"status":"Success","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-486-a9e-9c6-Decline","href":null,"status":"Decline","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-4e4-c84-aa2","href":null,"status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-608-6ac-827","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ca-0b3-9f5","href":"#irtpjyv","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6f1-18b-9e3","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[],"products":[]},{"elementId":"fkt-link-776-297-84f","href":null,"status":"Success","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-776-297-84f-Decline","href":null,"status":"Decline","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-8c3-099-9fb","href":null,"status":"Success","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-8c3-099-9fb-Decline","href":null,"status":"Decline","pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-c7f-cb2-9f9","href":null,"status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-d2a-dbd-aa2","href":"","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-f2e-3ab-891","href":"#irtpjyv","status":null,"pageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","linkDetails":[{"targetPageReferenceId":"ad1dad31-e4bc-4587-bf44-d3991ea0c38f","targetPageViewReferenceId":"2ebc5ad7-0dcf-4bda-92f0-976de97ab0b6","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710221,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710231,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710231,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-a1d-ab7-88f","href":null,"status":null,"pageViewReferenceId":"a47c95f7-9e80-4509-b24e-f0834371ab94","linkDetails":[{"targetPageReferenceId":"32149011-6fde-45f7-9e5e-7c0d8acf67a7","targetPageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","products":[],"urlSlug":"thank-you-upgrade-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710231,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"030206b8-11b3-48cb-80e1-051ead8e1268","targetPageViewReferenceId":"91359873-cabb-4b46-a18a-c967fb2388b4","products":[],"urlSlug":"Downsell-Split-test-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710223,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1467]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9365]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[],"products":[]},{"elementId":"fkt-link-974-6b1-b17","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-974-6b1-b17-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[9364]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[{"targetPageReferenceId":"b871952b-9f9c-4725-be07-7a75be49cf46","targetPageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":710219,"Name":"CustomProductTags","Value":""}]}],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"a933ff7a-6a81-46e4-8273-d1ea63d1777e","linkDetails":[],"products":[]},{"elementId":"fkt-button-491-99c-963","href":null,"status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-button-b5f-f81-9f1","href":null,"status":"Success","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-button-b5f-f81-9f1-Decline","href":null,"status":"Decline","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9336]},{"elementId":"fkt-link-0a0-4aa-a1c","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-2d9-885-868","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[],"products":[]},{"elementId":"fkt-link-415-29b-85d","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[],"products":[]},{"elementId":"fkt-link-486-a9e-9c6","href":null,"status":"Success","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-486-a9e-9c6-Decline","href":null,"status":"Decline","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9293]},{"elementId":"fkt-link-4e4-c84-aa2","href":null,"status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-608-6ac-827","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ca-0b3-9f5","href":"#irtpjyv","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-6f1-18b-9e3","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[],"products":[]},{"elementId":"fkt-link-776-297-84f","href":null,"status":"Success","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-776-297-84f-Decline","href":null,"status":"Decline","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9294]},{"elementId":"fkt-link-8c3-099-9fb","href":null,"status":"Success","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-8c3-099-9fb-Decline","href":null,"status":"Decline","pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[9292]},{"elementId":"fkt-link-c7f-cb2-9f9","href":null,"status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-d2a-dbd-aa2","href":"","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-f2e-3ab-891","href":"#irtpjyv","status":null,"pageViewReferenceId":"a980c262-1896-42f9-bcbc-6119f5e1bfdb","linkDetails":[{"targetPageReferenceId":"e0ed55d0-1212-4848-8568-c685b2c01d1c","targetPageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","products":[],"urlSlug":"oto-4-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":688011,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-25b-ea1-97e","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-39b-38a-90e","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-69f-7b2-8a5","href":"tel:+1 (833) 647-1075","status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ab-bab-957","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d","href":null,"status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d-CREDITCARD","href":null,"status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d-PAYPAL","href":null,"status":null,"pageViewReferenceId":"b0af7661-c2f2-448a-aba6-182eace774c3","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1468]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1468]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[9361]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"bc994761-a5b3-493e-8978-907e4fed6979","linkDetails":[],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"bcd631d7-2529-4ee5-a835-e4759848e43e","linkDetails":[{"targetPageReferenceId":"d0040de7-3513-4bc4-95b2-2038b28c6d95","targetPageViewReferenceId":"92b8d516-2508-4678-9110-81bcc802048d","products":[],"urlSlug":"oto-3-upgrade-rejuvaknee-2.0-a-bd-I-lp","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":759857,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-0f9-88e-922","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[]},{"elementId":"fkt-link-110-c97-afe","href":null,"status":"Success","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-110-c97-afe-Decline","href":null,"status":"Decline","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9330]},{"elementId":"fkt-link-408-784-a35","href":null,"status":"Success","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-408-784-a35-Decline","href":null,"status":"Decline","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9329]},{"elementId":"fkt-link-4ed-091-bde","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[]},{"elementId":"fkt-link-a36-383-8c7","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[]},{"elementId":"fkt-link-c43-db3-b64","href":null,"status":"Success","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-c43-db3-b64-Decline","href":null,"status":"Decline","pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[9328]},{"elementId":"fkt-link-cc4-396-a3c","href":null,"status":null,"pageViewReferenceId":"c4e30dbe-8461-4edc-9958-9ef0b1022aa8","linkDetails":[],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":null,"status":"Success","pageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687959,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-5de-c80-849-Decline","href":null,"status":"Decline","pageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687959,"Name":"CustomProductTags","Value":""}]}],"products":[9366]},{"elementId":"fkt-link-a1d-ab7-88f","href":null,"status":null,"pageViewReferenceId":"c632b5a7-4f21-4115-8017-b0539d1f1418","linkDetails":[{"targetPageReferenceId":"673a10a1-e560-4743-8b13-488809856b92","targetPageViewReferenceId":"6816b08e-580e-4645-9970-5b57183cb68d","products":[],"urlSlug":"thank-you-upgrade-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687959,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-333-78c-ae6","href":"https://","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-437-fa5-ac7","href":"mailto:support@myrejuvaknee.com","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-620-f8d-9b2","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-805-b8b-b10","href":"mailto:support@myrejuvaknee.com","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-d50-b89-b8b","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-ef7-a83-8e5","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"ca87f0c3-6c61-4e86-bf54-d1e4565f25f5","linkDetails":[],"products":[]},{"elementId":"fkt-link-5de-c80-849","href":"","status":"Success","pageViewReferenceId":"db46fa4b-213b-4add-b3f1-151c1be980ce","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687961,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-5de-c80-849-Decline","href":"","status":"Decline","pageViewReferenceId":"db46fa4b-213b-4add-b3f1-151c1be980ce","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687961,"Name":"CustomProductTags","Value":""}]}],"products":[9303]},{"elementId":"fkt-link-84c-1a2-b12","href":"","status":null,"pageViewReferenceId":"db46fa4b-213b-4add-b3f1-151c1be980ce","linkDetails":[{"targetPageReferenceId":"207936a2-da60-4411-9bb5-4461573dd5dd","targetPageViewReferenceId":"67e83ee9-dc2e-4dfc-8e14-107fe2fd6e23","products":[],"urlSlug":"oto-2-upgrade-rejuvaknee-2.0-b-bd-I","billingCycleIds":[],"isAllProducts":false,"previouslyPurchasedProducts":false,"customerType":0,"pageVariants":null,"countryStates":null,"customLinkViewEntities":[{"LinkId":687961,"Name":"CustomProductTags","Value":""}]}],"products":[]},{"elementId":"fkt-link-03f-880-b09","href":null,"status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-0d4-ea4-910","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-828-08f-9eb","href":null,"status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-be6-8bb-a7d","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-c0a-7ad-81c","href":null,"status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-de7-da1-9a8","href":null,"status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-link-e3b-289-a69","href":null,"status":null,"pageViewReferenceId":"dd17a2ac-2c68-43bc-997f-e8cd9ae3b214","linkDetails":[],"products":[]},{"elementId":"fkt-button-7e9-da5-ab2","href":null,"status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-button-c09-5b4-bca-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1467]},{"elementId":"fkt-link-1b0-38f-838","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-link-3e4-bb4-b06","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-3e4-bb4-b06-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-4c1-8a0-b31","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9365]},{"elementId":"fkt-link-4c1-8a0-b31-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9365]},{"elementId":"fkt-link-647-c8b-8d0","href":null,"status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-link-724-390-b09","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-link-974-6b1-b17","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-974-6b1-b17-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[9364]},{"elementId":"fkt-link-986-5b1-874","href":null,"status":"Success","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-986-5b1-874-Decline","href":null,"status":"Decline","pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[1469]},{"elementId":"fkt-link-d30-694-9eb","href":null,"status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-link-f05-abd-b42","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"de8a713f-cfd7-432b-893d-fdd524a7ee8b","linkDetails":[],"products":[]},{"elementId":"fkt-link-25b-ea1-97e","href":"https://myrejuvaknee.com/policies/refund-policy","status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[]},{"elementId":"fkt-link-39b-38a-90e","href":"https://myrejuvaknee.com/policies/privacy-policy","status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[]},{"elementId":"fkt-link-69f-7b2-8a5","href":"tel:+1 (833) 647-1075","status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[]},{"elementId":"fkt-link-6ab-bab-957","href":"https://myrejuvaknee.com/policies/terms-of-service","status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[]},{"elementId":"fkt-link-cde-1bd-97d","href":null,"status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[9350]},{"elementId":"fkt-link-cde-1bd-97d-CREDITCARD","href":null,"status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[9350]},{"elementId":"fkt-link-cde-1bd-97d-PAYPAL","href":null,"status":null,"pageViewReferenceId":"f69dd0d8-2f07-46f3-a2e3-c365238d4e0b","linkDetails":[],"products":[9350]}],"isFunnel":true,"faviconUrl":"https://assets.checkoutchamp.com/Funnel/assets/favicons/a0b114f4-e357-4c4e-8376-d166552631ef/favicon.ico?versionId=20E1dl.8En1s5PkYAZo9BwaPHXiSnkaR","logoUrl":"https://assets.checkoutchamp.com/assets.funnelkonnekt.com/Funnel/assets/logo/a0b114f4-e357-4c4e-8376-d166552631ef/1730482159944_rejuvaknee_logo_dark (1).png"};const campaignJson = {"selectedCampaign":{"campaignId":210,"dateCreated":"2023-09-01 10:34:40","campaignName":"RejuvaKnee  Baidu Igor","campaignType":"ECOMMERCE","currency":"USD","requireQA":0,"listSalesEntry":0,"captureOnShipment":0,"requireTOS":0,"eSignature":0,"campaignTOS":null,"preauthOnly":0,"enableFraudPlugin":0,"insureShipId":0,"insureShipProductId":null,"insureShipBillerId":null,"defaultShipProfileId":null,"externalCampaignId":null,"qaPercent":0,"campaignCategoryId":1,"pinlessDebitRoute":0,"prPercent":0,"codOrders":0,"blockPrepaid":0,"blockDebit":0,"blockMastercard":0,"blockVisa":0,"blockAmex":0,"blockDiscover":0,"disableExternalPayments":0,"disableRecycleBilling":0,"singleTransaction":0,"bundleFulfillment":0,"blockChargebackBlacklist":0,"couponMax":1,"visible":1,"isLocked":0,"taxServiceId":null,"autoTax":0,"upsellWindow":120,"maxBundleHours":96,"reOrderDays":null,"currencySymbol":"$","currencyNumber":"840","defaultCouponCode":null,"campaignCategoryName":"CheckoutChamp","hasAutomaticCoupons":0,"singleTxnGateways":["AcquiredV2","AltoPay","Amazon","Apcopay","Authorize.netV2","Braintree","cardinity","Cardstream","Celerispay","CentroBill","CheckoutV2","Corvia","Dummy Gateway","Easytransac","Finix","Fluid Pay","Gala Technology","Gate2Payments","maverick","MiCamp","NMI","NomuPay","Oonex","Open Payment Platform","PayCom","Payfirma","PaymentFlo","Paynetworx","Payon Gateway","PayPal Commerce","PaysafeDirect","Paystrax","Poynt","Prismpay","Revolv3","StripeV2","Swipen","VantivV2","Whitelabel Payments","WithReach","WorldlineV2","Worldpay Corporate"],"shopPayUrl":"https://signatureskin-7398-2.myshopify.com","products":[{"campaignProductId":9350,"productName":"RejuvaCare+ (14 Day Access)","productType":"OFFER","price":"0.00","shippingPrice":"0.00","compareAtPrice":"300.00","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":4,"loadBalancerName":"Main Router (Sub allowed)","billingCycleType":"RECURRING","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"0.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":17,"cycle2_price":"37.95","cycle2_shipPrice":"0.00","cycle2_isShippable":0,"cycle2_billDelay":28,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3062,"clientProductId":null,"baseProductName":"RejuvaCare 14-day Free All Access (BONUS) [N-I-B-RK]","productSku":"RC-VIP-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399956623700","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Bonus3.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Bonus3.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3270,"externalVariantDetailId":"53072649027924","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"cycle1_productId":3062,"cycle1_combinationId":0,"cycle1_variantDetailId":0,"cycle2_productId":179,"cycle2_combinationId":0,"cycle2_variantDetailId":0,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9291,"productName":"Expedited Shipping","productType":"OFFER","price":"9.95","shippingPrice":"0.00","compareAtPrice":null,"billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"9.95","cycle1_shipPrice":"0.00","cycle1_isShippable":0,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3054,"clientProductId":null,"baseProductName":"Expedited Shipping [N-I-B-RK]","productSku":"RC-ESH-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"NO_SHIPPING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399948759380","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_b787c6cc-9239-4ad3-848c-09dbb89edd19.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_b787c6cc-9239-4ad3-848c-09dbb89edd19.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3262,"externalVariantDetailId":"53072636346708","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9292,"productName":"Cartilage Pro+","productType":"UPSALE","price":"39.99","shippingPrice":"0.00","compareAtPrice":null,"billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"39.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3052,"clientProductId":null,"baseProductName":"Cartilage Pro+ [N-I-B-RK]","productSku":"RC-CPR-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399963799892","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3260,"externalVariantDetailId":"53072660562260","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9293,"productName":"Cartilage Pro+ (3 Bottles)","productType":"UPSALE","price":"79.99","shippingPrice":"0.00","compareAtPrice":null,"billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"79.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3048,"clientProductId":null,"baseProductName":"Cartilage Pro+ (3 Bottles) [N-I-B-RK]","productSku":"RC-CPR-03","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399965012308","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3256,"externalVariantDetailId":"53072662233428","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9294,"productName":"Cartilage Pro+ (6 Bottles)","productType":"UPSALE","price":"139.99","shippingPrice":"0.00","compareAtPrice":null,"billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"139.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3050,"clientProductId":null,"baseProductName":"Cartilage Pro+ (6 Bottles) [N-I-B-RK]","productSku":"RC-CPR-06","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399966454100","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3258,"externalVariantDetailId":"53072664068436","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9295,"productName":"Extension Straps For RejuvaKnee","productType":"OFFER","price":"9.99","shippingPrice":"0.00","compareAtPrice":"19.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"9.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3056,"clientProductId":null,"baseProductName":"Extension Straps For RejuvaKnee [N-I-B-RK]","productSku":"RC-EXS-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399953281364","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/6.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/6.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3264,"externalVariantDetailId":"53072644112724","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9300,"productName":"RejuvaKnee (2 Units)","productType":"OFFER","price":"134.99","shippingPrice":"0.00","compareAtPrice":"239.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"134.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":843,"clientProductId":null,"baseProductName":"RejuvaKnee (2 Units) [N-I-B-RK]","productSku":"RC-RKN-02","productDescription":null,"productCost":"16.20","shippingCost":"16.20","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198916391252","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3_1.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3_1.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1005,"externalVariantDetailId":"52437844263252","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9301,"productName":"RejuvaKnee (4 Units)","productType":"OFFER","price":"239.99","shippingPrice":"0.00","compareAtPrice":"479.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"239.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":847,"clientProductId":null,"baseProductName":"RejuvaKnee (4 Units) [N-I-B-RK]","productSku":"RC-RKN-04","productDescription":null,"productCost":"32.40","shippingCost":"30.00","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198917767508","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1_1.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1_1.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1009,"externalVariantDetailId":"52437844361556","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9303,"productName":"Red Light Pro (DS)","productType":"UPSALE","price":"97.00","shippingPrice":"0.00","compareAtPrice":"117.00","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"97.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3060,"clientProductId":null,"baseProductName":"Red Light Pro (Special Offer) [N-I-B-RK]","productSku":"RC-RLP-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399958327636","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/2_a323e421-68a6-4460-b3e5-b2f8db3acb42.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/2_a323e421-68a6-4460-b3e5-b2f8db3acb42.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3268,"externalVariantDetailId":"53072651125076","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9304,"productName":"RejuvaKnee (1 Unit)","productType":"OFFER","price":"79.99","shippingPrice":"0.00","compareAtPrice":"119.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"79.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":841,"clientProductId":null,"baseProductName":"RejuvaKnee (1 Unit) [N-I-B-RK]","productSku":"RC-RKN-01","productDescription":null,"productCost":"8.10","shippingCost":"9.30","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198917210452","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_84f2e959-3834-410e-a009-7fe9149e8de5.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_84f2e959-3834-410e-a009-7fe9149e8de5.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1003,"externalVariantDetailId":"52437844296020","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9328,"productName":"1x RejuvaKnee NeuroMuscular Stimulator","productType":"UPSALE","price":"49.99","shippingPrice":"0.00","compareAtPrice":"64.99","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"49.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3046,"clientProductId":null,"baseProductName":"1x RejuvaKnee NeuroMuscular Stimulator [N-I-B-RK]","productSku":"RC-BSP-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399959572820","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1_53af4f40-7dec-4a87-a406-9302d04f801d.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1_53af4f40-7dec-4a87-a406-9302d04f801d.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3254,"externalVariantDetailId":"53072652501332","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9329,"productName":"RejuvaKnee NeuroMuscular Stimulator (Buy 2 Get 1 FREE)","productType":"UPSALE","price":"99.99","shippingPrice":"0.00","compareAtPrice":"194.99","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"99.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3064,"clientProductId":null,"baseProductName":"RejuvaKnee NeuroMuscular Stimulator (Buy 2 Get 1 FREE) [N-I-B-RK]","productSku":"RC-BSP-03","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399961145684","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1723524598454_3x_rejuvaknee_neuromuscular_stimulator.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1723524598454_3x_rejuvaknee_neuromuscular_stimulator.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3272,"externalVariantDetailId":"53072654401876","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9330,"productName":"RejuvaKnee NeuroMuscular Stimulator (Buy 3 Get 3 FREE)","productType":"UPSALE","price":"149.99","shippingPrice":"0.00","compareAtPrice":"389.99","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"149.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3066,"clientProductId":null,"baseProductName":"RejuvaKnee NeuroMuscular Stimulator (Buy 3 Get 3 FREE) [N-I-B-RK]","productSku":"RC-BSP-06","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399962456404","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1723525058012_6x_rejuvaknee_neuromuscular_stimulator.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/1723525058012_6x_rejuvaknee_neuromuscular_stimulator.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3274,"externalVariantDetailId":"53072656236884","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9336,"productName":"Cartilage Pro+ (DS)","productType":"UPSALE","price":"19.99","shippingPrice":"0.00","compareAtPrice":"49.99","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"19.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3052,"clientProductId":null,"baseProductName":"Cartilage Pro+ [N-I-B-RK]","productSku":"RC-CPR-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399963799892","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Cartilage_Pro_Front.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3260,"externalVariantDetailId":"53072660562260","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9345,"productName":"RejuvaKnee (3 Units)","productType":"OFFER","price":"185.99","shippingPrice":"0.00","compareAtPrice":"359.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"185.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":845,"clientProductId":null,"baseProductName":"RejuvaKnee (3 Units) [N-I-B-RK]","productSku":"RC-RKN-03","productDescription":null,"productCost":"24.30","shippingCost":"23.10","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198918422868","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3x.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3x.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1007,"externalVariantDetailId":"52437844853076","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9360,"productName":"1x RejuvaKnee 2.0","productType":"UPSALE","price":"197.00","shippingPrice":"0.00","compareAtPrice":"1200.00","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"197.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":849,"clientProductId":null,"baseProductName":"1x RejuvaKnee 2.0 [N-I-B-RK]","productSku":"RC-RK2-01","productDescription":null,"productCost":"19.80","shippingCost":"13.90","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12199466533204","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1011,"externalVariantDetailId":"52439360635220","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9361,"productName":"2x RejuvaKnee 2.0","productType":"UPSALE","price":"294.00","shippingPrice":"0.00","compareAtPrice":"2400.00","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"294.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":853,"clientProductId":null,"baseProductName":"2x RejuvaKnee 2.0 [N-I-B-RK]","productSku":"RC-RK2-02","productDescription":null,"productCost":"39.60","shippingCost":"26.40","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12199467024724","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1015,"externalVariantDetailId":"52439361356116","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9364,"productName":"1x RejuvaKnee 2.0","productType":"UPSALE","price":"134.00","shippingPrice":"0.00","compareAtPrice":null,"billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"134.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":849,"clientProductId":null,"baseProductName":"1x RejuvaKnee 2.0 [N-I-B-RK]","productSku":"RC-RK2-01","productDescription":null,"productCost":"19.80","shippingCost":"13.90","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12199466533204","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1011,"externalVariantDetailId":"52439360635220","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9365,"productName":"2x RejuvaKnee 2.0","productType":"UPSALE","price":"198.00","shippingPrice":"0.00","compareAtPrice":null,"billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"198.00","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":853,"clientProductId":null,"baseProductName":"2x RejuvaKnee 2.0 [N-I-B-RK]","productSku":"RC-RK2-02","productDescription":null,"productCost":"39.60","shippingCost":"26.40","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12199467024724","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/Untitled_design_63.png"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1015,"externalVariantDetailId":"52439361356116","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":9366,"productName":"Protected Priority Shipping","productType":"UPSALE","price":"9.99","shippingPrice":"0.00","compareAtPrice":"49.99","billerId":2147483648,"billerName":null,"showToAffiliates":0,"useOfferMid":1,"loadBalancerId":null,"loadBalancerName":null,"billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"9.99","cycle1_shipPrice":"0.00","cycle1_isShippable":0,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":3058,"clientProductId":null,"baseProductName":"Protected Priority Shipping [N-I-B-RK]","productSku":"RC-PPS-01","productDescription":null,"productCost":null,"shippingCost":null,"weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"NO_SHIPPING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12399967666516","imageUrl":"","imageUrls":"","stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":3266,"externalVariantDetailId":"53072665444692","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":15442,"productName":"RejuvaKnee (2 Units)","productType":"OFFER","price":"99.99","shippingPrice":"0.00","compareAtPrice":"239.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"99.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":843,"clientProductId":null,"baseProductName":"RejuvaKnee (2 Units) [N-I-B-RK]","productSku":"RC-RKN-02","productDescription":null,"productCost":"16.20","shippingCost":"16.20","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198916391252","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3_1.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/3_1.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1005,"externalVariantDetailId":"52437844263252","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]},{"campaignProductId":15443,"productName":"RejuvaKnee (1 Unit)","productType":"OFFER","price":"59.99","shippingPrice":"0.00","compareAtPrice":"119.99","billerId":null,"billerName":null,"showToAffiliates":1,"useOfferMid":0,"loadBalancerId":5,"loadBalancerName":"Main Router (No SUB)","billingCycleType":"ONE_TIME","finalBillingCycle":null,"staggerFulfillments":0,"staggerIntervalCycles":null,"customMessageOptions":null,"cycle1_price":"59.99","cycle1_shipPrice":"0.00","cycle1_isShippable":1,"cycle1_billDelay":null,"cycle2_price":null,"cycle2_shipPrice":null,"cycle2_isShippable":0,"cycle2_billDelay":null,"cycle3_price":null,"cycle3_shipPrice":null,"cycle3_isShippable":0,"cycle3_billDelay":null,"trialEnabled":0,"trialType":null,"trialAuthType":null,"trialBillerId":null,"trialBillerName":null,"trialLoadBalancerId":null,"trialLoadBalancerName":null,"minOrderPrice":"0.00","maxOrderPrice":null,"maxOrderQty":null,"productId":841,"clientProductId":null,"baseProductName":"RejuvaKnee (1 Unit) [N-I-B-RK]","productSku":"RC-RKN-01","productDescription":null,"productCost":"8.10","shippingCost":"9.30","weight":"0.000","msrp":null,"isVariantBundle":0,"bundleProductQty":null,"productQty":1,"campaignProductQty":null,"productCategoryId":"1","productCategoryName":"signatureskin-7398-2.myshopify.com","isProductCombo":null,"fulfillmentCycleType":"RECURRING","fulfillmentHouseId":null,"fulfillmentDelayHours":0,"clubPluginId":null,"externalProductId":"12198917210452","imageUrl":"https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_84f2e959-3834-410e-a009-7fe9149e8de5.webp","imageUrls":["https://cdn.shopify.com/s/files/1/0756/4876/2196/files/4_84f2e959-3834-410e-a009-7fe9149e8de5.webp"],"stockQuantity":"0","allowStorePickup":null,"productTags":null,"variantDetailId":1003,"externalVariantDetailId":"52437844296020","isEditable":0,"storefront":1,"taxServiceId":null,"descriptor":null,"fixedBillingDay":null,"persistentRebillDay":0,"isPricePercent":0,"bundleSubscription":0,"hasVariants":false,"recurringProductId":null,"subscriptionOptions":null,"defaultProduct":null,"currencyPrices":null,"variants":[],"memberPricing":[],"combinations":[]}],"countries":[{"countryName":"United States","countryCode":"US","continent":"NA","currencyCode":"USD","numericCode":"840"},{"countryName":"Canada","countryCode":"CA","continent":"NA","currencyCode":"CAD","numericCode":"124"},{"countryName":"Australia","countryCode":"AU","continent":"AU","currencyCode":"AUD","numericCode":"036"},{"countryName":"Austria","countryCode":"AT","continent":"EU","currencyCode":"EUR","numericCode":"040"},{"countryName":"Denmark","countryCode":"DK","continent":"EU","currencyCode":"DKK","numericCode":"208"},{"countryName":"Finland","countryCode":"FI","continent":"EU","currencyCode":"EUR","numericCode":"246"},{"countryName":"France","countryCode":"FR","continent":"EU","currencyCode":"EUR","numericCode":"250"},{"countryName":"Germany","countryCode":"DE","continent":"EU","currencyCode":"EUR","numericCode":"276"},{"countryName":"Ireland","countryCode":"IE","continent":"EU","currencyCode":"EUR","numericCode":"372"},{"countryName":"Netherlands","countryCode":"NL","continent":"EU","currencyCode":"EUR","numericCode":"528"},{"countryName":"Norway","countryCode":"NO","continent":"EU","currencyCode":"NOK","numericCode":"578"},{"countryName":"Singapore","countryCode":"SG","continent":"AS","currencyCode":"SGD","numericCode":"702"},{"countryName":"Sweden","countryCode":"SE","continent":"EU","currencyCode":"SEK","numericCode":"752"},{"countryName":"United Kingdom","countryCode":"GB","continent":"EU","currencyCode":"GBP","numericCode":"826"}],"currencies":[{"currencyCode":"USD","symbolAlign":"LEFT","includeShipping":1,"isComma":0,"decimals":2,"rounding":null,"currencyFee":"0.00","sendToGateway":1,"currencySymbol":"$","currencyNumber":"840","currencyName":"US Dollar"},{"currencyCode":"EUR","symbolAlign":"LEFT","includeShipping":0,"isComma":0,"decimals":2,"rounding":99,"currencyFee":"0.00","sendToGateway":1,"currencySymbol":"â‚¬","currencyNumber":"978","currencyName":"Euro"},{"currencyCode":"GBP","symbolAlign":"LEFT","includeShipping":0,"isComma":0,"decimals":2,"rounding":99,"currencyFee":"0.00","sendToGateway":1,"currencySymbol":"Â£","currencyNumber":"826","currencyName":"British Pound Sterling"},{"currencyCode":"HUF","symbolAlign":"LEFT","includeShipping":0,"isComma":0,"decimals":2,"rounding":99,"currencyFee":"0.00","sendToGateway":1,"currencySymbol":"Ft","currencyNumber":"348","currencyName":"Hungarian Forint"},{"currencyCode":"NOK","symbolAlign":"LEFT","includeShipping":0,"isComma":0,"decimals":2,"rounding":99,"currencyFee":"0.00","sendToGateway":1,"currencySymbol":"kr","currencyNumber":"578","currencyName":"Norwegian Krone"}],"taxes":[],"surcharges":[],"coupons":[],"shipProfiles":[{"shipProfileId":301,"profileName":"Standard Shipping","shipCarrier":"UPS","shipMethod":null,"shipRefCode":null,"highestShipPriceOnly":0,"isUpcharge":0,"applyEntireOrder":1,"freeShipThreshold":null,"skipUpsell":0,"includeCoupons":0,"rules":[{"region":"","state":"","productTypeSelect":"ENTIREORDER","productCategoryId":"","campaignProductId":"","productTags":"","valueThreshold":"0.00","weightThreshold":"0.000","maxWeightThreshold":"0.000","itemCountThreshold":"","ruleCarrier":"","ruleMethod":"","zoneId":"","shipPrice":"0.00","shipCost":"0.00"}]},{"shipProfileId":302,"profileName":"Expedited Shipping","shipCarrier":"UPS","shipMethod":"Next Day Air","shipRefCode":null,"highestShipPriceOnly":0,"isUpcharge":0,"applyEntireOrder":1,"freeShipThreshold":null,"skipUpsell":0,"includeCoupons":0,"rules":[{"region":"","state":"","productTypeSelect":"PRODUCTS","productCategoryId":"","campaignProductId":"","productTags":"","valueThreshold":"0.00","weightThreshold":"0.000","maxWeightThreshold":"0.000","itemCountThreshold":"","ruleCarrier":"","ruleMethod":"","zoneId":"","shipPrice":"9.95","shipCost":"0.00"}]}],"zones":[],"storePickup":[],"blacklist":null}};/**FUNNELDATA**/
    const ccEnableOfferEvents = false;
    const ccEnableUpsellEvents = false;
    const ccEnableLeadEvents = false;
  "use strict";function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t["return"]||t["return"]()}finally{if(u)throw o}}}}function _slicedToArray(r,e){return _arrayWithHoles(r)||_iterableToArrayLimit(r,e)||_unsupportedIterableToArray(r,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t["return"]&&(u=t["return"](),Object(u)!==u))return}finally{if(o)throw n}}return a}}function _arrayWithHoles(r){if(Array.isArray(r))return r}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function define(t,e,r){return t[e]=r}}function wrap(t,e,r,n){var i=e&&e.prototype instanceof Generator?e:Generator,a=Object.create(i.prototype),c=new Context(n||[]);return o(a,"_invoke",{value:makeInvokeMethod(t,r,c)}),a}function tryCatch(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=wrap;var h="suspendedStart",l="suspendedYield",f="executing",s="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var p={};define(p,a,function(){return this});var d=Object.getPrototypeOf,v=d&&d(d(values([])));v&&v!==r&&n.call(v,a)&&(p=v);var g=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(p);function defineIteratorMethods(t){["next","throw","return"].forEach(function(e){define(t,e,function(t){return this._invoke(e,t)})})}function AsyncIterator(t,e){function invoke(r,o,i,a){var c=tryCatch(t[r],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==_typeof(h)&&n.call(h,"__await")?e.resolve(h.__await).then(function(t){invoke("next",t,i,a)},function(t){invoke("throw",t,i,a)}):e.resolve(h).then(function(t){u.value=t,i(u)},function(t){return invoke("throw",t,i,a)})}a(c.arg)}var r;o(this,"_invoke",{value:function value(t,n){function callInvokeWithMethodAndArg(){return new e(function(e,r){invoke(t,n,e,r)})}return r=r?r.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,r,n){var o=h;return function(i,a){if(o===f)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=maybeInvokeDelegate(c,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var p=tryCatch(e,r,n);if("normal"===p.type){if(o=n.done?s:l,p.arg===y)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function maybeInvokeDelegate(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator["return"]&&(r.method="return",r.arg=t,maybeInvokeDelegate(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=tryCatch(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function next(){for(;++o<e.length;)if(n.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=t,next.done=!0,next};return i.next=i}}throw new TypeError(_typeof(e)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,o(g,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),o(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,c,function(){return this}),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new AsyncIterator(wrap(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},defineIteratorMethods(g),define(g,u,"Generator"),define(g,a,function(){return this}),define(g,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function next(){for(;r.length;){var t=r.pop();if(t in e)return next.value=t,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var r=this;function handle(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function complete(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function finish(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),y}},"catch":function _catch(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;resetTryEntry(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function delegateYield(e,r,n){return this.delegate={iterator:values(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:i+""}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}var providerUrl="https://pages-live-api.checkoutchamp.com/providersApi/V1";var rootUrl="https://pages-live-api.checkoutchamp.com/api/V1";var assetsUrl="https://assets.checkoutchamp.com";var ccIdMeClientId="73eadf5ebbc1ebac9a6fe97d671d06c7";var iframeURL="secure.checkoutchamp.com";var stripeLinkPublicId="pk_live_51Rgr0y2MbFpnA82ZcmBIkpi2X88EdzB5qnjL356OdXq0rzvd904DAVWAqqnsDQf0uuxM5ueAHJjQE0i8TLDJvPwG00uDN7asIU";var message={membershipNoProductError:"There are no products listed on the Page. Please contact customer service.",cardUpdateSuccessMessage:"Card Details have been updated successfully",provideDetailsForAllFields:"Please provide valid card number, month, and year",membershipBillingCycleError:"Please provide valid billing cycle number"};var membershipState={active:"ACTIVE",inActive:"INACTIVE"};var defaultImagePlaceHolder="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3R5bGU9ImZpbGw6IHJnYmEoMCwwLDAsMC4xNSk7IHRyYW5zZm9ybTogc2NhbGUoMC43NSkiPgogICAgICAgIDxwYXRoIGQ9Ik04LjUgMTMuNWwyLjUgMyAzLjUtNC41IDQuNSA2SDVtMTYgMVY1YTIgMiAwIDAgMC0yLTJINWMtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxNGMxLjEgMCAyLS45IDItMnoiPjwvcGF0aD4KICAgICAgPC9zdmc+";var rightPanelStyles=".sidepanel { height: 100%; visibility: hidden; width: 300px; position: fixed; z-index: 1; top: 0; right: 0; background-color: white; overflow-x: hidden; padding-top: 10px; } .sidepanel a { padding: 8px 8px 8px 32px; text-decoration: none; font-size: 25px; color: #818181; display: block; } .sidepanel a:hover { color: #f1f1f1; } .sidepanel .closebtn { position: absolute; top: 0; right: 25px; font-size: 36px; margin-left: 50px; } .openbtn { font-size: 20px; cursor: pointer; background-color: #111; color: white; padding: 10px 15px; border: none; } .openbtn:hover { background-color: #444; } .image-quantity-container{ margin: 0 auto; width: 100px; height: auto; position: relative; } .image-cart-header { width: 300px; height: 56px; float:left; margin-left:10%; max-height:100px; } @media (max-width:480px) { .image-quantity-container { margin: 0 auto; width: 55px; position: relative; } .image-cart-header { margin-left: 5%; width: 150px; height: 28px; margin-top: 3%; } } .close-panel{float:right;margin-right:8%;cursor:pointer} .sidepanel .cc-panel-view-cart, .sidepanel .cc-panel-checkout{font-size:16px;padding:5px 0;margin: 0px auto;}";var overlayStyles="\n    <style>\n    #overlayEffectDiv {\n        position: fixed;\n        display: none;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: rgba(0,0,0,0.5);\n        z-index: 100;\n        cursor: pointer;\n    }\n    #overlayEffectDiv div{\n        position: absolute;\n        top: 35%;\n        left: 50%;\n        font-size: 50px;\n        color: white;\n        transform: translate(-50%,-50%);\n        -ms-transform: translate(-50%,-50%);\n        width: 50%;\n    }\n    .cc-overlay-effect-div {\n        line-height: 1;\n    }\n    #overlayEffectDiv .cc-overlay-effect-spinner {\n        position: static;\n        margin: 0px auto;\n    }\n    @media screen and (max-width: 1024px) {\n        #overlayEffectDiv div{\n            font-size: 40px;\n        }\n    }\n    @media screen and (max-width: 600px) {\n        #overlayEffectDiv div{\n            width: 80%;\n            font-size: 30px;\n        }\n    }\n    #importURLModalContent {\n        color: #ffffff;\n    }\n    </style>\n";var reachBadgeStyles="\n<style ccreachstyles=\"true\">\n.reach--disclosure {\n    background-color: #ced4da;\n    font-family: \"Inter\", sans-serif;\n    font-size: 10px;\n    line-height: 14px;\n    border-color: #626264;\n    color: #626264;\n    letter-spacing: 0em;\n}\n.reach--payment--banner {\n    padding-left: 0.875rem;\n    padding-right: 0.875rem;\n    padding-top: 0.625rem;\n    padding-bottom: 0.625rem;\n    border-radius: 0.5rem;\n    display: flex;\n    margin-top: 0.75rem;\n}\n.reach--logo {\n    /* background-image: url(&quot;https://st.rch.how/logos/reach-verified-logo-grey.svg&quot;); */\n    background-position: center;\n    background-repeat: no-repeat;\n    background-size: cover;\n    width: 100px;\n    height: 50px;\n    border-color: #626264;\n    display: flex;\n    position: relative; /* Add position relative to the parent */\n    padding-right: 2rem;\n}\n.reach--logo::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #626264; /* Adjust the color of the vertical bar */\n    border-right: 2px solid #626264; /* Border color and width */\n    margin-right: 0.875rem; /* Margin for spacing */\n}\n.reach--payment--banner-light {\n    color: #626264; \n    background-color: #ffffff;\n}\n.reach--inline-link {\n    text-decoration: underline;\n}\n</style>";var ccReachBadgeHtml=function ccReachBadgeHtml(termsUrl,theme){return"\n<div class=\"reach--disclosure reach--payment--banner reach--payment--banner-light\"\n    style=\" font-family: 'Inter', sans-serif; font-size: 10px; line-height: 14px; border-color: #626264; color: #626264; letter-spacing: 0em;padding-left: 0.875rem; padding-right: 0.875rem; padding-top: 0.625rem; padding-bottom: 0.625rem; border-radius: 0.5rem; display: flex; margin-top: 0.75rem;background-color: #ffffff\">\n    <div class=\"reach--logo\"\n        style=\"width: 100px; height: auto; background-position: center center; background-repeat: no-repeat; background-size: cover; border-color: #626264; border-right: 2px solid #626264;display: flex; position: relative; padding-right: 1rem;\">\n        <img style=\"width: 100%; height: 50px;\" src=\"https://st.rch.how/logos/reach-verified-logo-".concat(theme==="dark"?"white":"grey",".svg\" alt=\"Reach Verified Badge\">\n    </div>\n    <div class=\"reach--content\" style=\"padding-left: 13px;\">\n        <p style=\" font-size: 10px; line-height: 1.5;\">\n            By completing your order, you will check out with our preferred international seller Reach US, CA, UK, EU,\n            or AU and agree to the\n            <a class=\"reach--inline-link\" href=\"").concat(termsUrl,"\"\n                title=\"Read Terms of Service\" target=\"_blank\">\n                Terms of Service</a> of <strong style=\"font-weight: bold;\">Reach</strong>\n        </p>\n    </div>\n</div>\n")};var overlayHTML="<div id='overlayEffectDiv' class=\"cc-overlay-effect-div\">\n        <div>\n            Please wait.  Do not refresh your browser.\n            <br/><br/><br/>\n            <div class=\"fa fa-spinner fa-pulse fa-lg m-r-xs cc-overlay-effect-spinner\" style=\"display: block; text-align: center;\"></div>\n        </div>\n    </div>\n";var productCardLoaderStyles="\n    <style>\n    .fk-product-loader-wrapper {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin: 10px 0;\n    }\n    .fk-product-loader {\n        border-radius: 50%;\n        height: 30px;\n        width: 30px;\n        border: 3px solid #8080802e;\n        border-top-color: #0f0f0f;\n        animation: fkRotateProductLoader 1s infinite linear;\n    }\n    @keyframes fkRotateProductLoader {\n        from {\n            transform: rotate3d(0, 0, 1, 0deg);\n        }\n        to {\n            transform: rotate3d(0, 0, 1, 360deg);\n        }\n    }\n    </style>\n";var productCardLoaderHTML="<div id=\"infiniteCardLoader\" class=\"fk-product-loader-wrapper\">\n            <div class=\"fk-product-loader\"></div>\n        </div>\n";var fflHTML="\n<div id=\"fflWrapper\" class=\"ffl-modal-overlay\">\n    <div class=\"ffl-modal-wrapper\">\n        <div class=\"ffl-modal-container\">\n            <div class=\"ffl-modal-header ffl-fields-spacing\">Products on this order must ship to a licensed firearm dealer</div>\n            <div class=\"ffl-fields-spacing\">\n                <div class=\"ffl-modal-field-label\">Search By</div>\n                <div>\n                    <select class=\"form-control\" id=\"fflOptions\" name=\"fflFieldOptions\" onchange=\"handleFFLSearchTypeChange()\">\n                        <option value=\"fflZipCode\">Zip Code</option>\n                        <option value=\"fflNumber\">FFL Number</option>\n                        <option value=\"fflName\">FFL Name</option>\n                    </select>\n                </div>\n            </div>\n            <div class=\"ffl-fields-spacing\" id=\"fflSearchFieldBlock\">\n                <div class=\"ffl-fields-spacing\" style=\"display: flex;\">\n                    <div class=\"ffl-input-field-side-spacing\">\n                        <div class=\"ffl-modal-field-label\">Zip Code</div>\n                        <div><input type=\"text\" class=\"form-control\" name=\"fflZipCode\"/></div>\n                    </div>\n                    <div class=\"ffl-input-field-side-spacing\">\n                        <div class=\"ffl-modal-field-label\">Radius (Miles) <span style=\"font-size:12px;\">Optional</span></div>\n                        <div><input type=\"text\" class=\"form-control\" oninput=\"fflRadiusChange()\" name=\"fflRadius\"/></div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"ffl-fields-spacing ffl-margin-botton-30\" style=\"position: relative;\">\n                <button id=\"ffl-search-btn\" class=\"form-control ffl-btn-styles\" onclick=\"searchFFL()\">SEARCH</button>\n                <div class=\"ffl-icon-container\" id=\"fflSelectLoader\">\n                    <i class=\"loader\"></i>\n                </div>\n            </div>\n            <div class=\"ffl-container\" id=\"fflContainer\">\n                <div class=\"ffl-fields-spacing\">\n                    <div class=\"ffl-modal-field-label\">Select a licensed firearm dealer</div>\n                    <div>\n                        <select class=\"form-control\" id=\"fflOptions\" name=\"fflOptions\" required>\n                            <option value=\"\">Select FFL</option>\n                        </select>\n                    </div>\n                </div>\n                <div class=\"ffl-fields-spacing\">\n                    <button class=\"form-control ffl-btn-styles\" onclick=\"addFFL()\">Done</button>\n                </div>\n            </div>\n        </div>\n        <div class=\"ffl-btn-styles ffl-modal-close\" onclick=\"hideFFLPopUp()\">\n            <i class=\"fa fa-times\"></i>\n        </div>\n    </div>\n</div>\n";var comboStyles="\n<style>\n.combo {\n    padding: 5px 15px;\n    background-color: rgb(244 245 249);\n    border-radius: 5px;\n    text-wrap: wrap;\n    text-align:left;\n}\n.combo-caret {\n    cursor: pointer;\n}\n.rotateComboCaret {\n    rotate: 90deg;\n}\n.combo hr{\n    margin: 0;\n}\n</style>";var accordionStyles="\n<style>\ntable.fold-table > tbody > tr.fk-custom-cart-view td, table.fold-table > tbody > tr.fk-custom-cart-view th {\n    cursor: pointer;\n}\ntable.fold-table > tbody > tr.fk-custom-cart-view.fk-custom-open td:nth-child(2) > i.fa.fa-caret-right.fk-caret-rotate {\n    color: #333;\n  }\ntable.fold-table > tbody > tr.fk-custom-cart-view.fk-custom-open td:nth-child(2) > i.fa.fa-caret-right {\n    -webkit-transform: rotate(90deg);\n    -ms-transform: rotate(90deg);\n    transform: rotate(90deg);\n    color: #333;\n}\ntable.fold-table > tbody > tr.fk-custom-cart-fold {\n  display: none;\n}\ntable.fold-table > tbody > tr.fk-custom-cart-fold.fk-custom-open {\n  display: table-row;\n}\n.fold-content > p {\n    margin: 6px;\n    color: #212529;\n}\n.fold-content > p > hr {\n    margin: 12px 0;\n    border-top: 1px solid #2125;\n}\n.fold-content {\n  padding: 0.5em;\n}\n.fk-custom-cart-fold > td {\n    background: #eee;\n}\n</style>";var fflStyles="\n<style>\n.ffl-btn-styles {\n    background-color: #0d6efd;\n    color: white;\n    margin: 15px 0;\n}\n.ffl-btn-styles:focus {\n    background-color: #0d6efd;\n    color: white;\n}\n.ffl-modal-overlay {\n    position: fixed;\n    background-color: #afacaca6;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 10001;\n    display: none;\n}\n.ffl-modal-wrapper {\n    width: 400px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n    -ms-transform: translate(-50%, -50%);\n    transform: translate(-50%, -50%);\n    z-index: 10002;\n}\n.ffl-modal-container {\n    height: auto;\n    background-color: white;\n    border-radius: 10px;\n    padding: 20px;\n    -webkit-box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n}\n.ffl-modal-header {\n    font-size: 20px;\n    text-align: center;\n    line-height: 1.2;\n}\n.ffl-modal-field-label {\n    font-size: 16px;\n    margin: 5px 0;\n}\n.ffl-fields-spacing {\n    margin: 15px 0;\n}\n.ffl-modal-close {\n    position: absolute;\n    top: -10px;\n    right: -10px;\n    padding: 8px 10px;\n    cursor: pointer;\n    background-color: #0d6efd;\n    color: white;\n    border-radius: 50%;\n    margin: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n}\n.ffl-margin-botton-30 {\n    margin-bottom: 30px;\n}\n.ffl-input-field-side-spacing {\n    margin-left: 5px;\n    margin-right: 5px;\n}\n.ffl-input-field-side-spacing:first-child {\n    margin-left: 0;\n}\n.ffl-input-field-side-spacing:last-child {\n    margin-right: 0;\n}\n.ffl-icon-container {\n    position: absolute;\n    right: 50%;\n    top: calc(50% - 10px);\n    display: none;\n    -webkit-transform: translateX(+50%);\n    -ms-transform: translateX(+50%);\n    transform: translateX(+50%);\n}\n.ffl-container {\n    display: none;\n}\n.loader {\n    position: relative;\n    height: 20px;\n    width: 20px;\n    display: inline-block;\n    -webkit-animation: around 5.4s infinite;\n    animation: around 5.4s infinite;\n}\n@-webkit-keyframes around {\n    0% {\n        -webkit-transform: rotate(0deg);\n        -ms-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        -ms-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n@keyframes around {\n    0% {\n        -webkit-transform: rotate(0deg);\n        -ms-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(360deg);\n        -ms-transform: rotate(360deg);\n        transform: rotate(360deg);\n    }\n}\n.loader::after, .loader::before {\n    content: \"\";\n    background: transparent;\n    position: absolute;\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    border-width: 2px;\n    border-color: #333 #333 transparent transparent;\n    border-style: solid;\n    border-radius: 20px;\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    top: 0;\n    left: 0;\n    -webkit-animation: around 0.7s ease-in-out infinite;\n    animation: around 0.7s ease-in-out infinite;\n}\n.loader::after {\n    webkit-animation: around 0.7s ease-in-out 0.1s infinite;\n    animation: around 0.7s ease-in-out 0.1s infinite;\n    background: transparent;\n}\n@media screen and (max-width: 500px) {\n    .ffl-modal-wrapper {\n        width: 90%;\n    }\n}\n</style>\n";var preventConversionEvent=function preventConversionEvent(data,pageTypeId){return pageTypeId===4&(data===null||data===void 0?void 0:data.hasOwnProperty("cardType"))?data.cardType==="TESTCARD":false};var creditCardOnload=function creditCardOnload(){var integerRegex=/\D/g;var alphabetsRegex=/[A-Z]/i;var cardDateRegex="(1[0-2]|0[1-9])";var cardNumberRegex="\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}";var dinerFormatRegex="\\d{4}?[\\s.-]?\\d{6}?[\\s.-]?\\d{4}";var amexFormatRegex="\\d{4}?[\\s.-]?\\d{6}?[\\s.-]?\\d{5}";var amexRegex=/^3[47]\d{0,13}$/;var dinersClubRegex=/^3(?:0[0-5]|[68]\d)\d{0,11}$/gm;var regularCCard=/^\d{0,16}$/;var other19DigitsCCard=/^\d{0,23}$/;var other19DigitsCardNumberRegex="\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{3}?";var masking=function masking(input,name,example){input.classList.add("fkmasked");input.removeAttribute("maxlength");input.dataset.validDataExample=example;input.addEventListener("keyup",function(e){handleMaskedInputChange(e)});window.addEventListener("keyup",function(e){e.target.name===name&&handleMaskedInputChange(e)})};var cardDateInput=document.getElementsByName("cardDate")[0];if(cardDateInput){cardDateInput.dataset.pattern=cardDateRegex;masking(cardDateInput,"cardDate","11/18")}var placeHolderMasking=function placeHolderMasking(input,attributeName){var placeHolder=input.getAttribute(attributeName);var alphabetsRegex=new RegExp("[a-z]","i");if(placeHolder){return!alphabetsRegex.test(placeHolder)}else{return false}};var cardNumberInput=document.getElementsByName("cardNumber")[0];var ccCCardSupport19Digits=cardNumberInput&&cardNumberInput.classList.contains("ccExtended");function formatCardNumber(e,userDefinedPlaceholder){var value=e.target.value;value=value.replace(integerRegex,"");var format;if(value==""){format=userDefinedPlaceholder.length>0?userDefinedPlaceholder:"";setInputAttributes("",format,"")}else if(amexRegex.test(value)){setInputAttributes(17,"1111 111111 11111",amexFormatRegex)}else if(dinersClubRegex.test(value)){setInputAttributes(16,"1111 111111 1111",dinerFormatRegex)}else if(ccCCardSupport19Digits&&other19DigitsCCard.test(value)){setInputAttributes(23,"1111 1111 1111 1111 111",other19DigitsCardNumberRegex)}else if(regularCCard.test(value)){setInputAttributes(19,"1111 1111 1111 1111",cardNumberRegex)}function setInputAttributes(maxLength,format,inputPattern){e.target.setAttribute("placeholder",format);e.target.dataset.pattern=inputPattern;format!=""?masking(cardNumberInput,"cardNumber",format):"";e.target.setAttribute("maxlength",maxLength)}}function handleMaskedInputChange(e){var name=e.target.getAttribute("name");switch(e.keyCode){// allows navigating thru input
case 20:// caplocks
case 17:// control
case 18:// option
case 16:// shift
case 37:// arrow keys
case 9:// tab (let blur handle tab)
return}var placeholder=e.target.getAttribute("placeholder");if(e.keyCode==8&&(e.target.value.length==2||e.target.value.length==3)&&placeholder.toUpperCase().substr(0,3)=="MM/"){document.getElementsByName(name)[0].value=e.target.value.substr(0,2)}else{document.getElementsByName(name)[0].value=handleCurrentValue(e)}}function handleCurrentValue(e){var placeholder=e.target.getAttribute("placeholder");if(e.target.getAttribute("name")==="phoneNumber"){var phoneNumberFormat=e.target.getAttribute("format");placeholder=phoneNumberFormat||placeholder}if(e.target.getAttribute("name")==="cardDate"){var cardDateSplit=placeholder.split("/");if(cardDateSplit&&cardDateSplit.length>1){placeholder=cardDateSplit[1].length===2?"MM/YY":"MM/YYYY"}else{placeholder="MMYY"}}var value=e.target.value,l=placeholder.length;var i,j,isInt,newValue="",isLetter,strippedValue;var maskedNumber="dDmMyY0123456789";// strip special characters
strippedValue=value.replace(integerRegex,"");var matchesNumber;for(i=0,j=0;i<l;i++){isInt=!isNaN(parseInt(strippedValue[j]));isLetter=strippedValue[j]?strippedValue[j].match(alphabetsRegex):false;matchesNumber=maskedNumber.indexOf(placeholder[i])>=0;if(matchesNumber&&isInt){newValue+=strippedValue[j++]}else if(matchesNumber&&!isInt){return newValue}else{newValue+=placeholder[i]}// break if no characters left and the pattern is non-special character
if(strippedValue[j]==undefined){break}}if(value==""){newValue=""}if(e.target.dataset.validDataExample){var retval=validateProgress(e,newValue);return retval}return newValue}function validateProgress(e,value){var validExample=e.target.dataset.validDataExample,pattern=new RegExp(e.target.dataset.pattern),placeholder=e.target.getAttribute("placeholder");var testValue="";//convert to months
if(value.length==1&&placeholder.toUpperCase().substr(0,2)=="MM"){if(value>1&&value<10){value="0"+value}return value}if(value.length==2&&placeholder.toUpperCase().substr(0,3)=="MM/"){return value+"/"}// test the value, removing the last character, until what you have is a submatch
for(i=value.length;i>=0;i--){testValue=value+validExample.substr(value.length);if(pattern.test(testValue)){return value}else{value=value.substr(0,value.length-1)}}return value}if(cardNumberInput&&placeHolderMasking(cardNumberInput,"placeholder")){cardNumberInput.dataset.pattern=cardNumberRegex;masking(cardNumberInput,"cardNumber",cardNumberInput.getAttribute("placeholder"))}else if(cardNumberInput){var userDefinedPlaceholder=cardNumberInput.getAttribute("placeholder");cardNumberInput.addEventListener("input",function(){return formatCardNumber(event,userDefinedPlaceholder)})}};var creditCardAction=function creditCardAction(providerUrl,sessionId,companyToken,funnelReferenceId,origin){var cardNumberInput=document.getElementsByName("cardNumber")[0];if(cardNumberInput){var sendSlicedCardNumber=function sendSlicedCardNumber(value){var cardValue=value.replace(/-/g,"").replace(/ /g,"");return cardValue?cardValue.slice(0,8).padEnd(16,"0"):""};var sendCardNumberDetails=function sendCardNumberDetails(value){var cardValue=value.replace(/-/g,"").replace(/ /g,"");sendCreditCardDetails({"cardNumber":cardValue},{"cardNumber":sendSlicedCardNumber(value)})};cardNumberInput.onchange=function(event){sendCardNumberDetails(event.target.value)};var cardFailure=false;cardNumberInput.addEventListener("input",function(event){var extractedValue=event.target.value.replace(/-/g,"").replace(/ /g,"");if(extractedValue.length>=15){sendCardNumberDetails(event.target.value);cardFailure=false}else if(!cardFailure){sendCardNumberDetails(event.target.value);cardFailure=true}else{sendMessageToParent({"cardNumber":sendSlicedCardNumber(event.target.value)},origin)}});cardNumberInput.onblur=function(event){sendMessageToParent({"cardNumber":sendSlicedCardNumber(event.target.value)},origin)};cardNumberInput.onfocus=function(event){sendMessageToParent({"cardNumber":sendSlicedCardNumber(event.target.value||"0")},origin)};if(cardNumberInput.value){sendCardNumberDetails(cardNumberInput.value)}detectAutofill("cardNumber")}var cardDateInput=document.getElementsByName("cardDate")[0];if(cardDateInput){var sendCardDateDetails=function sendCardDateDetails(value){var cardDateValueParsed=value.replace("/","");var month=cardDateValueParsed.substring(0,2);var year=cardDateValueParsed.substr(cardDateValueParsed.length-2);sendCreditCardDetails({"cardMonth":month,"cardYear":year},{"cardMonth":month?"00":"","cardYear":year?"00":"","cardDate":value?"0000":""})};cardDateInput.onchange=function(event){sendCardDateDetails(event.target.value)};var dateFailure=false;cardDateInput.addEventListener("input",function(event){if(event.target.value.length>=4){sendCardDateDetails(event.target.value);dateFailure=false}else if(!dateFailure){sendCardDateDetails(event.target.value);dateFailure=true}});cardDateInput.onblur=function(event){sendMessageToParent({"cardDate":event.target.value?"0000":""},origin)};cardDateInput.onfocus=function(){sendMessageToParent({"cardDate":"0000"},origin)};if(cardDateInput.value){sendCardDateDetails(cardDateInput.value)}detectAutofill("cardDate")}var cardMonthInput=document.getElementsByName("cardMonth")[0];if(cardMonthInput){var sendCardMonthDetails=function sendCardMonthDetails(value){var month=parseInt(value)||null;sendCreditCardDetails({"cardMonth":month},{"cardMonth":month?"00":""})};cardMonthInput.onchange=function(event){sendCardMonthDetails(event.target.value)};cardMonthInput.addEventListener("input",function(event){sendCardMonthDetails(event.target.value)});cardMonthInput.onblur=function(event){sendMessageToParent({"cardMonth":event.target.value?"00":""},origin)};cardMonthInput.onfocus=function(){sendMessageToParent({"cardMonth":"00"},origin)};if(cardMonthInput.value){sendCardMonthDetails(cardMonthInput.value)}detectAutofill("cardDate")}var cardYearInput=document.getElementsByName("cardYear")[0];if(cardYearInput){var sendCardYearDetails=function sendCardYearDetails(value){var year=parseInt(value)||null;sendCreditCardDetails({"cardYear":year},{"cardYear":year?"00":""})};cardYearInput.onchange=function(event){sendCardYearDetails(event.target.value)};cardYearInput.addEventListener("input",function(event){sendCardYearDetails(event.target.value)});cardYearInput.onblur=function(event){window.parent.postMessage({"cardYear":event.target.value?"00":""},origin);sendMessageToParent({"cardYear":event.target.value?"00":""},origin)};cardYearInput.onfocus=function(){sendMessageToParent({"cardYear":"00"},origin)};if(cardYearInput.value){sendCardYearDetails(cardYearInput.value)}detectAutofill("cardDate")}var cardSecurityCodeInput=document.getElementsByName("cardSecurityCode")[0];if(cardSecurityCodeInput){var sendCardSecurityDetails=function sendCardSecurityDetails(value){sendCreditCardDetails({"cardSecurityCode":value},{"cardSecurityCode":value?"000":""})};cardSecurityCodeInput.onchange=function(event){sendCardSecurityDetails(event.target.value)};var cvvFailure=false;cardSecurityCodeInput.addEventListener("input",function(event){if(event.target.value.length>=3){sendCardSecurityDetails(event.target.value);cvvFailure=false}else if(!cvvFailure){sendCardSecurityDetails(event.target.value);cvvFailure=true}});cardSecurityCodeInput.onblur=function(event){sendMessageToParent({"cardSecurityCode":event.target.value?"000":""},origin)};cardSecurityCodeInput.onfocus=function(){window.parent.postMessage({"cardSecurityCode":"000"},origin);sendMessageToParent({"cardSecurityCode":"000"},origin)};if(cardSecurityCodeInput.value){sendCardSecurityDetails(cardSecurityCodeInput.value)}detectAutofill("cardSecurityCode")}function sendCreditCardDetails(data,fData){if(!sessionId){return}fetch("".concat(providerUrl,"/CC/").concat(funnelReferenceId,"/").concat(sessionId),{method:"POST",headers:getDefaultHeaders(),body:JSON.stringify(data)}).then(function(res){if(res.ok){sendMessageToParent(fData,origin)}else{sendMessageToParent(data,origin)}})["catch"](function(err){sendMessageToParent(data,origin)})}function sendMessageToParent(data,origin){data.ccSecureApp=true;window.parent.postMessage(data,origin)}function getDefaultHeaders(){var headers={"Content-Type":"application/json; charset=utf-8","Cache-Control":"no-cache","Access-Control-Allow-Origin":"*",companyToken:companyToken,funnelReferenceId:funnelReferenceId};return headers}window.addEventListener("message",function(event){var _event$data;if((_event$data=event.data)!==null&&_event$data!==void 0&&_event$data.ccSecureAppChild){for(var name in event.data){if(event.data.hasOwnProperty(name)&&name!="ccSecureAppChild"){var el=document.querySelector("[name=\"".concat(name,"\"]"));if(el){el.value=event.data[name]}}}}});function detectAutofill(name){var fields={"cardNumber":"cc-number","cardDate":"cc-exp","cardSecurityCode":"cc-csc"};var others=Object.fromEntries(Object.entries(fields).filter(function(field){return field[0]!==name}));setInterval(function(){for(var _i=0,_Object$entries=Object.entries(others);_i<_Object$entries.length;_i++){var entry=_Object$entries[_i];var _name=entry[0];var id=entry[1];var element=document.getElementById(id);if(element&&element.value){var obj={ccFwd:true};obj[_name]=element.value;if(id=="cc-exp"){var cardDateValueParsed=element.value.replace("/","");obj.cardMonth=cardDateValueParsed.substring(0,2);obj.cardYear=cardDateValueParsed.substr(cardDateValueParsed.length-2)}sendMessageToParent(obj,origin);element.value=""}}},300)}};var ccFastlaneMemberComponentsCommonStyles="\n    <style type=\"text/css\">\n        .cc-fastlane-shipping-address-container {\n            font-family: PayPalOpen-Regular, \"Helvetica Neue\", Arial, sans-serif;\n            font-size: 16px;\n        }\n        .cc-fastlane-edit {\n            background-color: transparent;\n            color: #000;\n            border-color: #cfd3d8;\n            border-radius: 1000px;\n            justify-content: center;\n            border-style: solid;\n            border-width:  1.5px;\n            min-width: 3.75rem;\n            padding:  0px 10px;\n            min-height:  1.8rem;\n            font-weight: 400;\n            font-size: 14px;\n            cursor: pointer !important;\n            outline: none !important;\n        }\n        .cc-fastlane-edit-box {\n            display: flex;\n            padding: 5px 0;\n        }\n        .cc-fastlane-svg-box {\n            height: 18px;\n            width: 18px;\n            margin-right: 5px;\n        }\n        .cc-fastlane-edit svg {\n            height: 100%;\n            width: 100%;\n        }\n        .cc-fastlane-edit:hover {\n            border-color: #1161ca;\n            color: #1161ca;\n        }\n        .cc-fastlane-shipping-details {\n            text-align: left;\n        }\n        .cc-fastlane-header {\n            font-size: 18px;\n            font-weight: 500;\n        }\n    </style>\n";var ccDisplayDefaultComponents=function ccDisplayDefaultComponents(){$(".cc-fastlane-member-hide, .ccBtnFastlane, .cc-fastlane-hide").removeClass("d-none");$("#cc-fastlane-payment, .cc-fastlane-shipping, #cc-fastlane-watermark, .cc-fastlane-cancel, .cc-fastlane-profile, .cc-fastlane-show").addClass("d-none");$("[name=fk-payment-option-toggler], [name=payment_method]").first().click()};function ccInitPayPalFastlane(){return _ccInitPayPalFastlane.apply(this,arguments)}function _ccInitPayPalFastlane(){_ccInitPayPalFastlane=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee15(){var memberAuthenticatedSuccessfully,shippingAddress,paymentToken,billingWatermark,shippingCountries,_yield$window$paypal$,identity,profile,FastlaneCardComponent,FastlaneWatermarkComponent,paymentComponent,validEmail,ccDisplayFastlaneComponents,ccEmailAddressChangeDebounce,ccEmailChangeHandler,ccGetShippingAndBillingDetails,ccShippingEditButtonListener,ccBillingEditButtonListener,ccDisplayShippingDetails,ccDisplayBillingDetails,ccUpdatePageInputsWithProfileData,ccLookupAndAuthenticateFastlaneEmail,ccGetFastlaneCheckoutDetails,ccInitFastlaneCheckout,sessionFastlaneEnabled,emailValue,allPayPalPayment;return _regeneratorRuntime().wrap(function _callee15$(_context15){while(1)switch(_context15.prev=_context15.next){case 0:_context15.prev=0;shippingCountries=pageData.selectedCampaign&&pageData.selectedCampaign.countries&&pageData.selectedCampaign.countries.map(function(item){return item.countryCode});_context15.next=4;return window.paypal.Fastlane({shippingAddressOptions:{allowedLocations:shippingCountries.length?shippingCountries:["US"]}});case 4:_yield$window$paypal$=_context15.sent;identity=_yield$window$paypal$.identity;profile=_yield$window$paypal$.profile;FastlaneCardComponent=_yield$window$paypal$.FastlaneCardComponent;FastlaneWatermarkComponent=_yield$window$paypal$.FastlaneWatermarkComponent;_context15.next=11;return FastlaneCardComponent();case 11:paymentComponent=_context15.sent;_context15.prev=12;_context15.next=15;return FastlaneWatermarkComponent({includeAdditionalInfo:true});case 15:_context15.sent.render("#cc-fastlane-watermark");_context15.next=21;break;case 18:_context15.prev=18;_context15.t0=_context15["catch"](12);_context15.t0;case 21:_context15.prev=21;_context15.next=24;return FastlaneWatermarkComponent({includeAdditionalInfo:false});case 24:billingWatermark=_context15.sent;_context15.next=30;break;case 27:_context15.prev=27;_context15.t1=_context15["catch"](21);_context15.t1;case 30:validEmail=function validEmail(email){var pattern=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return pattern.test(email)};ccDisplayFastlaneComponents=function ccDisplayFastlaneComponents(){$("#cc-fastlane-payment").parent().css({"display":"block","height":"auto"});if(memberAuthenticatedSuccessfully){$(".cc-fastlane-member-hide, .ccBtnFastlane, .cc-fastlane-hide").addClass("d-none");$(".cc-fastlane-shipping, #cc-fastlane-watermark, #cc-fastlane-payment, .cc-fastlane-cancel, .cc-fastlane-profile, .cc-fastlane-show").removeClass("d-none")}else{$(".cc-fastlane-shipping, .ccBtnFastlane, .cc-fastlane-hide").addClass("d-none");$(".cc-fastlane-member-hide, #cc-fastlane-watermark, #cc-fastlane-payment, .cc-fastlane-cancel, .cc-fastlane-profile, .cc-fastlane-show").removeClass("d-none")}!$("[value=PAYPAL_FASTLANE]").first().prop("checked")&&$("[value=PAYPAL_FASTLANE]").first().click()};ccEmailAddressChangeDebounce=function ccEmailAddressChangeDebounce(){var timer;return function(email){clearTimeout(timer);timer=setTimeout(function(){validEmail(email)?$(".cc-fastlane-profile").removeAttr("disabled"):$(".cc-fastlane-profile").attr("disabled",true);paymentComponent.render("#cc-fastlane-payment");memberAuthenticatedSuccessfully=undefined;shippingAddress=undefined;paymentToken=undefined;ccDisplayFastlaneComponents()},100)}};ccEmailChangeHandler=ccEmailAddressChangeDebounce();$("[name=emailAddress]").first().on("input change",function(event){event.preventDefault();if(sessionStorage.getItem("ccFastlaneEnabled")==="true"){var target=event.currentTarget;var email=target.value||"";ccEmailChangeHandler(email)}});$(".cc-fastlane-profile").on("click",function(event){event.preventDefault();event.stopImmediatePropagation();$(".cc-fastlane-profile").attr("disabled",true);ccLookupAndAuthenticateFastlaneEmail($("[name=emailAddress]").first().val())});$(".ccBtnFastlane:not(.cc-fastlane-submit)").on("click",function(){if(validEmail($("[name=emailAddress]").first().val())){$(".cc-fastlane-profile").removeAttr("disabled")}else{$(".cc-fastlane-profile").attr("disabled",true)}sessionStorage.setItem("ccFastlaneEnabled",true);memberAuthenticatedSuccessfully=undefined;shippingAddress=undefined;paymentToken=undefined;paymentComponent.render("#cc-fastlane-payment");ccDisplayFastlaneComponents();sessionStorage.setItem("ccEnabledStripeLinkPayment",false)});$(".cc-fastlane-cancel").on("click",function(){sessionStorage.setItem("ccFastlaneMemberCheckout",false);sessionStorage.setItem("ccFastlaneEnabled",false);ccDisplayDefaultComponents()});ccGetShippingAndBillingDetails=function ccGetShippingAndBillingDetails(shippingAddress,paymentToken){var shipAddress=shippingAddress&&shippingAddress.address||{};var shipAddressName=shippingAddress&&shippingAddress.name||{};var shipAddressPhone=shippingAddress&&shippingAddress.phoneNumber||{};var cardDetails=paymentToken&&paymentToken.paymentSource&&paymentToken.paymentSource.card;var billAddress=cardDetails&&cardDetails.billingAddress||{};var billName=cardDetails&&cardDetails.name&&cardDetails.name.split(" ")||[];var detail={formCardNonce:paymentToken.id,shipAddress1:shipAddress.addressLine1||"",shipAddress2:shipAddress.addressLine2||"",shipCity:shipAddress.adminArea2||"",shipCountry:shipAddress.countryCode||"",shipState:shipAddress.adminArea1||"",shipPostalCode:shipAddress.postalCode||"",shipFirstName:shipAddressName.firstName||"",shipLastName:shipAddressName.lastName||"",phoneNumber:(shipAddressPhone.nationalNumber?(shipAddressPhone.countryCode||"")+shipAddressPhone.nationalNumber:"")||"",address1:billAddress.addressLine1||billAddress.streetAddress||"",address2:billAddress.addressLine2||billAddress.extendedAddress||"",city:billAddress.adminArea2||billAddress.locality||"",country:billAddress.countryCode||billAddress.countryCodeAlpha2||"",state:billAddress.adminArea1||billAddress.region||"",postalCode:billAddress.postalCode||"",firstName:billName[0]||"",lastName:billName[1]||"",billShipSame:0};return detail};ccShippingEditButtonListener=/*#__PURE__*/function(){var _ref38=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(){var _yield$profile$showSh,selectionChanged,selectedAddress,details;return _regeneratorRuntime().wrap(function _callee11$(_context11){while(1)switch(_context11.prev=_context11.next){case 0:if(!(memberAuthenticatedSuccessfully&&profile)){_context11.next=7;break}_context11.next=3;return profile.showShippingAddressSelector();case 3:_yield$profile$showSh=_context11.sent;selectionChanged=_yield$profile$showSh.selectionChanged;selectedAddress=_yield$profile$showSh.selectedAddress;if(selectionChanged){shippingAddress=selectedAddress;details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);delete details["formCardNonce"];sessionStorage.setItem("ccFastlaneMemberDetails",JSON.stringify(details));ccDisplayShippingDetails();calculateTotals()}case 7:case"end":return _context11.stop()}},_callee11)}));return function ccShippingEditButtonListener(){return _ref38.apply(this,arguments)}}();ccBillingEditButtonListener=/*#__PURE__*/function(){var _ref39=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee12(){var _yield$profile$showCa,selectionChanged,selectedCard,details,countryDetails,currency,currencySelect;return _regeneratorRuntime().wrap(function _callee12$(_context12){while(1)switch(_context12.prev=_context12.next){case 0:if(!(memberAuthenticatedSuccessfully&&profile)){_context12.next=7;break}_context12.next=3;return profile.showCardSelector();case 3:_yield$profile$showCa=_context12.sent;selectionChanged=_yield$profile$showCa.selectionChanged;selectedCard=_yield$profile$showCa.selectedCard;if(selectionChanged){paymentToken=selectedCard;details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);delete details["formCardNonce"];ccDisplayBillingDetails();sessionStorage.setItem("ccFastlaneMemberDetails",JSON.stringify(details));countryDetails=pageData.selectedCampaign.countries.find(function(o){return o.countryCode===selectedCard.paymentSource.card.billingAddress.countryCode});currency=countryDetails?countryDetails.currencyCode:pageData.selectedCampaign.currency;currencySelect=$("[name=currency]").first();if(currencySelect.length){currencySelect.val(currency).change()}else{setPriceAndCurrency(currency)}calculateTotals()}case 7:case"end":return _context12.stop()}},_callee12)}));return function ccBillingEditButtonListener(){return _ref39.apply(this,arguments)}}();ccDisplayShippingDetails=function ccDisplayShippingDetails(){var details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);$(".cc-fastlane-shipping").html("\n                ".concat(ccFastlaneMemberComponentsCommonStyles,"\n                <div class=\"cc-fastlane-shipping-address-container\">\n                    <div class=\"d-flex justify-content-between align-items-center\">\n                        <div class=\"cc-fastlane-header\">\n                            Shipping Details\n                        </div>\n                        <div>\n                            <button class=\"cc-fastlane-edit cc-fastlane-shipping-edit\">\n                                <div class=\"cc-fastlane-edit-box\">\n                                    <div class=\"cc-fastlane-svg-box\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\" data-ppui=\"true\"><path d=\"M21.31 6.879l-4.188-4.19a1.5 1.5 0 0 0-2.122 0L3.44 14.25A1.487 1.487 0 0 0 3 15.31v4.19A1.5 1.5 0 0 0 4.5 21h4.19a1.485 1.485 0 0 0 1.06-.44L21.31 9a1.5 1.5 0 0 0 0-2.121zM8.69 19.5H4.5v-4.19l8.25-8.25 4.19 4.19-8.25 8.25zM18 10.19L13.81 6l2.25-2.25 4.19 4.189-2.25 2.25z\" data-ppui=\"true\"></path></svg>\n                                    </div>\n                                    Edit\n                                </div>  \n                            </button>\n                        </div>\n                    </diV>\n                    <div class=\"cc-fastlane-shipping-details\">\n                        <div>").concat(details.shipFirstName," ").concat(details.shipLastName,"</div>\n                        <div>").concat(details.shipAddress1,"</div>\n                        <div>").concat(details.shipAddress2,"</div>\n                        <div>").concat(details.shipCity,", ").concat(details.shipState," (").concat(details.shipPostalCode,"), ").concat(details.shipCountry,"</div>\n                        <div>").concat(details.phoneNumber,"</div>\n                    </div>   \n                </div>\n            "));$(".cc-fastlane-shipping-edit").on("click",function(event){event.preventDefault();ccShippingEditButtonListener()})};ccDisplayBillingDetails=function ccDisplayBillingDetails(){var details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);$("#cc-fastlane-payment").html("\n                ".concat(ccFastlaneMemberComponentsCommonStyles,"\n                <div class=\"cc-fastlane-shipping-address-container\">\n                    <div class=\"d-flex justify-content-between align-items-center\">\n                        <div class=\"cc-fastlane-header\">\n                            Billing Details\n                        </div>\n                        <div>\n                            <button class=\"cc-fastlane-edit cc-fastlane-billing-edit\">\n                                <div class=\"cc-fastlane-edit-box\">\n                                    <div class=\"cc-fastlane-svg-box\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"1em\" height=\"1em\" data-ppui=\"true\"><path d=\"M21.31 6.879l-4.188-4.19a1.5 1.5 0 0 0-2.122 0L3.44 14.25A1.487 1.487 0 0 0 3 15.31v4.19A1.5 1.5 0 0 0 4.5 21h4.19a1.485 1.485 0 0 0 1.06-.44L21.31 9a1.5 1.5 0 0 0 0-2.121zM8.69 19.5H4.5v-4.19l8.25-8.25 4.19 4.19-8.25 8.25zM18 10.19L13.81 6l2.25-2.25 4.19 4.189-2.25 2.25z\" data-ppui=\"true\"></path></svg>\n                                    </div>\n                                    Edit\n                                </div>  \n                            </button>\n                        </div>\n                    </diV>\n                    <div class=\"cc-fastlane-shipping-details\">\n                        <div>\uD83D\uDCB3 \u2022\u2022\u2022\u2022 ").concat(paymentToken.paymentSource.card.lastDigits,"</div>\n                        <div id=\"billing-payment-watermark\"></div>\n                        <div class=\"mt-1\">").concat(details.firstName," ").concat(details.lastName,"</div>\n                        <div>").concat(details.address1,"</div>\n                        <div>").concat(details.address2,"</div>\n                        <div>").concat(details.city,", ").concat(details.state," (").concat(details.postalCode,"), ").concat(details.country,"</div>\n                    </div>   \n                </div>\n            "));$(".cc-fastlane-billing-edit").on("click",function(event){event.preventDefault();ccBillingEditButtonListener()});billingWatermark&&billingWatermark.render("#billing-payment-watermark")};ccUpdatePageInputsWithProfileData=function ccUpdatePageInputsWithProfileData(fullName,firstName,lastName,address1,address2,city,postalCode,state,country,phoneNumber){var shipAddress1Input=$("[name=shipAddress1]"),address1Input=$("[name=address1]");$("[name=phoneNumber]").val(phoneNumber);if(shipAddress1Input.length&&shipAddress1Input[0].offsetHeight>0){$("[name=shipFullName]").val(fullName);$("[name=shipFirstName]").val(firstName);$("[name=shipLastName]").val(lastName);$("[name=shipAddress1]").val(address1);$("[name=shipAddress2]").val(address2);$("[name=shipCity]").val(city);$("[name=shipPostalCode]").val(postalCode);ccSetCountryAndStateValues($("[name=shipCountry]")[0],country,$("[name=shipState]")[0],state)}else if(address1Input.length&&address1Input[0].offsetHeight>0){$("[name=fullName]").val(fullName);$("[name=firstName]").val(firstName);$("[name=lastName]").val(lastName);$("[name=address1]").val(address1);$("[name=address2]").val(address2);$("[name=city]").val(city);$("[name=postalCode]").val(postalCode);ccSetCountryAndStateValues($("[name=country]")[0],country,$("[name=state]")[0],state)}calculateTotals()};ccLookupAndAuthenticateFastlaneEmail=/*#__PURE__*/function(){var _ref40=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee13(email){var _yield$identity$looku,customerContextId,_authResponse$profile,_authResponse$profile2,authResponse,shipDetails,cardDetails,details,_details,shipAddress1,shipAddress2,shipCity,shipCountry,shipState,shipPostalCode,shipFirstName,shipLastName,phoneNumber,shipFullName,_details2,address1,address2,city,country,state,postalCode,firstName,lastName,fullName;return _regeneratorRuntime().wrap(function _callee13$(_context13){while(1)switch(_context13.prev=_context13.next){case 0:if(validEmail(email)){_context13.next=4;break}ccDisplayFastlaneComponents();$(".cc-fastlane-profile").removeAttr("disabled");return _context13.abrupt("return");case 4:memberAuthenticatedSuccessfully=undefined;shippingAddress=undefined;paymentToken=undefined;sessionStorage.setItem("ccFastlaneMemberCheckout",false);_context13.prev=8;_context13.next=11;return identity.lookupCustomerByEmail(email);case 11:_yield$identity$looku=_context13.sent;customerContextId=_yield$identity$looku.customerContextId;if(!customerContextId){_context13.next=21;break}_context13.next=16;return identity.triggerAuthenticationFlow(customerContextId);case 16:authResponse=_context13.sent;shipDetails=authResponse===null||authResponse===void 0||(_authResponse$profile=authResponse.profileData)===null||_authResponse$profile===void 0?void 0:_authResponse$profile.shippingAddress,cardDetails=authResponse===null||authResponse===void 0||(_authResponse$profile2=authResponse.profileData)===null||_authResponse$profile2===void 0?void 0:_authResponse$profile2.card;if((authResponse===null||authResponse===void 0?void 0:authResponse.authenticationState)==="succeeded"&&shipDetails&&cardDetails){sessionStorage.setItem("ccFastlaneMemberCheckout",true);memberAuthenticatedSuccessfully=true;shippingAddress=shipDetails;paymentToken=cardDetails;details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);delete details["formCardNonce"];sessionStorage.setItem("ccFastlaneMemberDetails",JSON.stringify(details));ccDisplayShippingDetails();ccDisplayBillingDetails();calculateTotals()}else{if(shipDetails){_details=ccGetShippingAndBillingDetails(shipDetails,{});shipAddress1=_details.shipAddress1,shipAddress2=_details.shipAddress2,shipCity=_details.shipCity,shipCountry=_details.shipCountry,shipState=_details.shipState,shipPostalCode=_details.shipPostalCode,shipFirstName=_details.shipFirstName,shipLastName=_details.shipLastName,phoneNumber=_details.phoneNumber;shipFullName=shipFirstName?shipFirstName+" "+shipLastName:shipLastName;ccUpdatePageInputsWithProfileData(shipFullName,shipFirstName,shipLastName,shipAddress1,shipAddress2,shipCity,shipPostalCode,shipState,shipCountry,phoneNumber)}else if(cardDetails){_details2=ccGetShippingAndBillingDetails({},cardDetails);address1=_details2.address1,address2=_details2.address2,city=_details2.city,country=_details2.country,state=_details2.state,postalCode=_details2.postalCode,firstName=_details2.firstName,lastName=_details2.lastName;fullName=firstName?firstName+" "+lastName:lastName;ccUpdatePageInputsWithProfileData(fullName,firstName,lastName,address1,address2,city,postalCode,state,country,"")}else{window.ccShowBSAlert&&ccShowBSAlert("Fastlane profile details not found.","cc-fastlane-alert",true)}paymentComponent.render("#cc-fastlane-payment")}_context13.next=23;break;case 21:window.ccShowBSAlert&&ccShowBSAlert("Fastlane profile details not found.","cc-fastlane-alert",true);paymentComponent.render("#cc-fastlane-payment");case 23:ccDisplayFastlaneComponents();_context13.next=29;break;case 26:_context13.prev=26;_context13.t0=_context13["catch"](8);ccDisplayFastlaneComponents();case 29:_context13.prev=29;$(".cc-fastlane-profile").removeAttr("disabled");return _context13.finish(29);case 32:case"end":return _context13.stop()}},_callee13,null,[[8,26,29,32]])}));return function ccLookupAndAuthenticateFastlaneEmail(_x64){return _ref40.apply(this,arguments)}}();ccGetFastlaneCheckoutDetails=function ccGetFastlaneCheckoutDetails(){var obj={};var fullName=$("[name=fullName]").first();if(fullName.length){var _fullName2=_fullName2.val().trim();var pos=_fullName2.indexOf(" ");obj.firstName=pos>-1?_fullName2.substring(0,pos):_fullName2;obj.lastName=pos>-1?_fullName2.substring(pos+1):null}else{obj.firstName=$("[name=firstName]").first().val()||"";obj.lastName=$("[name=lastName]").first().val()||""}obj.address1=$("[name=address1]").first().val()||"";obj.address2=$("[name=address2]").first().val()||"";obj.postalCode=$("[name=postalCode]").first().val()||"";obj.city=$("[name=city]").first().val()||"";obj.state=$("[name=state]").first().val()||"";obj.country=$("[name=country]").first().val()||"";var phoneNumber=$("[name=phoneNumber]").first();if(phoneNumber.length){if(window.phFormatByCountry==="true"){obj.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+phoneNumber.val():"";obj.phoneNumber=obj.phoneNumber?obj.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else{obj.phoneNumber=phoneNumber.val().replace(/[^0-9+]/g,"").replace(/[+]{1,}/g,"+").replace(/[-]{1,}/g,"-")}}var billShipSame=$("[type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").first();if(billShipSame.length){obj.billShipSame=billShipSame.prop("checked")?1:0}else if($("[name=address1]").first().length&&!$("[name=shipAddress1]").first().length){obj.billShipSame=1}fetchLeadDetails(obj);return obj};ccInitFastlaneCheckout=/*#__PURE__*/function(){var _ref41=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee14(buttonId){var targetButton,details;return _regeneratorRuntime().wrap(function _callee14$(_context14){while(1)switch(_context14.prev=_context14.next){case 0:sessionStorage.setItem("paySource","PAYPAL_FASTLANE");$("#ccFastlaneError").remove();targetButton=$("[data-id='"+buttonId+"']");if(checkRequiredInputs()){_context14.next=7;break}sessionStorage.removeItem("paySource");targetButton.removeAttr("disabled");return _context14.abrupt("return");case 7:_context14.prev=7;details={};if(memberAuthenticatedSuccessfully){_context14.next=17;break}details=ccGetFastlaneCheckoutDetails();_context14.next=13;return paymentComponent.getPaymentToken({billingAddress:{addressLine1:details.address1,addressLine2:details.address2,adminArea2:details.city,adminArea1:details.state,postalCode:details.postalCode,countryCode:details.country,firstName:details.firstName,lastName:details.lastName}});case 13:paymentToken=_context14.sent;details.formCardNonce=paymentToken.id;_context14.next=18;break;case 17:details=ccGetShippingAndBillingDetails(shippingAddress,paymentToken);case 18:window.callMethodApply&&callMethodApply(buttonId,"PAYPAL_FASTLANE",null,null,details);_context14.next=26;break;case 21:_context14.prev=21;_context14.t0=_context14["catch"](7);targetButton.removeAttr("disabled");$("<div class='"+window.commonErrorClass+"' id='ccFastlaneError' style='color: red;'>"+_context14.t0.message+"</div>").insertAfter(targetButton);sessionStorage.removeItem("paySource");case 26:case"end":return _context14.stop()}},_callee14,null,[[7,21]])}));return function ccInitFastlaneCheckout(_x65){return _ref41.apply(this,arguments)}}();$(".cc-fastlane-submit").attr("onclick","").on("click",function(){ccInitFastlaneCheckout($(this).attr("data-id"))});window.addEventListener("ccFastlaneCheckoutEvent",function(event){ccInitFastlaneCheckout(event.dataId)});$(".ccBtnFastlane").removeAttr("disabled");sessionFastlaneEnabled=sessionStorage.getItem("ccFastlaneEnabled");emailValue=$("[name=emailAddress]").first().val();if(!validEmail(emailValue)){$(".cc-fastlane-profile").attr("disabled",true)}allPayPalPayment=ccIsPayPalFastlaneEnabled()&&!$(".ccBtnFastlane").length&&!$("[name=cardNumber]").length;if(sessionFastlaneEnabled==="true"||allPayPalPayment){allPayPalPayment&&sessionStorage.setItem("ccFastlaneEnabled",true);memberAuthenticatedSuccessfully=undefined;shippingAddress=undefined;paymentToken=undefined;paymentComponent.render("#cc-fastlane-payment");ccDisplayFastlaneComponents()}else{ccDisplayDefaultComponents()}_context15.next=61;break;case 57:_context15.prev=57;_context15.t2=_context15["catch"](0);console.error(_context15.t2);$(".ccBtnFastlane").attr("disabled",true);case 61:case"end":return _context15.stop()}},_callee15,null,[[0,57],[12,18],[21,27]])}));return _ccInitPayPalFastlane.apply(this,arguments)}function ccPayPalFastlaneTaxDetails(params){if(sessionStorage.getItem("ccFastlaneMemberCheckout")==="true"){var obj={};var details=sessionStorage.getItem("ccFastlaneMemberDetails");details=details?JSON.parse(details):{};delete details["formCardNonce"];obj=_objectSpread(_objectSpread({},params),details);return obj}return params}function ccPayPalFastlaneShipProfileAddress(){if(sessionStorage.getItem("ccFastlaneMemberCheckout")==="true"){var details=sessionStorage.getItem("ccFastlaneMemberDetails"),continent;details=details?JSON.parse(details):{};var shipCountry=details.shipCountry;if(shipCountry){var selectedCampaignCountry=pageData.selectedCampaign.countries.find(function(data){return data.countryCode===shipCountry});if(selectedCampaignCountry)continent=selectedCampaignCountry.continent}return{address1:details.shipAddress1,address2:details.shipAddress2,city:details.shipCity,country:shipCountry,state:details.shipState,postalCode:details.shipPostalCode,firstName:details.shipFirstName,lastName:details.shipLastName,phoneNumber:details.phoneNumber,continent:continent}}}function ccIsPayPalFastlaneEnabled(){return window.getAddOnKeyValue(window.findAddOn("paypalFastlaneHide"))==="false"&&window.getAddOnKeyValue(window.findAddOn("PayPal_Fastlane"))=="1"}function ccDispatchPayPalFastlaneEvent(paypalUserDetails,btnId){if(sessionStorage.getItem("paySource")==="PAYPAL_FASTLANE"&&!paypalUserDetails){window.ccFastlaneEvent.dataId=btnId;sessionStorage.removeItem("paySource");window.dispatchEvent(window.ccFastlaneEvent);return true}}function ccSetPayPalFastlanePayload(paypalSdkPrePaidType,paypalUserDetails,obj){if(paypalSdkPrePaidType==="PAYPAL_FASTLANE"&&paypalUserDetails){obj.paySource="PAYPAL";obj.prepaidType=paypalSdkPrePaidType;obj.forceMerchantId=parseInt(window.getAddOnKeyValue(window.findAddOn("Paypal_billerId")));obj=_objectSpread(_objectSpread({},obj),paypalUserDetails);delete obj["paypalBillerId"];delete obj["paypalSdk"];return obj}return obj}function ccSetParamsForFastlaneToken(data){try{if(pageData&&pageData.pageTypeId===4&&window.ccIsPayPalFastlaneEnabled&&ccIsPayPalFastlaneEnabled()){var billerId=Number(window.getAddOnKeyValue(window.findAddOn("Paypal_billerId")));if(billerId){data.paypalFastlaneBillerId=billerId;if(!data.requestUri){data.requestUri=sessionStorage.getItem("requestUri")}}}}catch(err){err}}function ccOneTimePayPalConfiguration(){try{if(!pageData.ccOneTimePayPalConfiguration){pageData.ccOneTimePayPalConfiguration=true;$(".ccBtnFastlane").attr("disabled",true);$(".cc-fastlane-cancel, .ccBtnFastlane, .cc-fastlane-profile").attr("onclick","");ccDisplayDefaultComponents()}}catch(err){err}}function ccAddFastlaneParams(fastlaneEnabled,messageComp,datasetObj,sessionObj){try{var fastlaneToken;if(fastlaneEnabled){!$("[data-cc='fastlaneToolTipSvg']").length&&$("head").append("<link data-cc='fastlaneToolTipSvg' rel='preload' href='https://www.paypalobjects.com/fastlane-v1/assets/fastlane-with-tooltip_en_sm_light.0808.svg' as='image' type='image/avif' />");var sessionData=sessionObj;if(!sessionObj){sessionData=sessionStorage.getItem("sessionId");sessionData=sessionData?JSON.parse(sessionData):null}fastlaneToken=sessionData&&sessionData.message&&sessionData.message.paypalFastlane&&sessionData.message.paypalFastlane.accessToken;if(fastlaneToken){messageComp+=",fastlane";datasetObj.push({key:"sdkClientToken",value:fastlaneToken})}}return{messageComp:messageComp,fastlaneToken:fastlaneToken}}catch(error){return{}}}function tokenConfirmPaypal(){if(window.ccUrlParams.has("paypalAccept")&&window.ccUrlParams.get("paypalAccept")==="1"&&(window.ccUrlParams.has("token")&&window.ccUrlParams.has("PayerID")||window.ccUrlParams.has("ba_token"))){var _token=window.ccUrlParams.get("token");var payerID=window.ccUrlParams.get("PayerID");var baToken=window.ccUrlParams.get("ba_token");var funnelData=sessionStorage.getItem("funnelData");if(funnelData&&(!(_token===null||payerID===null)||!(baToken===null))){window.addOverlayEffectScripts();window.showOverlayEffect();sessionStorage.setItem("ccConfirmPayPalCalled",true);confirmPaypal(_token,payerID,baToken)}}}function loadPaypalButtons(paypalButtons){var paypalButtonsLength=paypalButtons.length;for(var _i2=0;_i2<paypalButtonsLength;_i2++){var paypalButton=paypalButtons[_i2];paypalButton.onclick=function(event){var source=getAddOnKeyValue(findAddOn("PayPal_WithReach"))==="true"?"WITHREACH_PAYPAL":"PAYPAL";sessionStorage.setItem("paySource",source);window.callMethod(event)}}}function configurePayPalSmartButtons(sessionObj){$("[data-partner-attribution-id=CheckoutChampLLC_PPFM_PPCP]").remove();window.ccOneTimePayPalConfiguration&&ccOneTimePayPalConfiguration();var fastlaneSelected=window.ccIsPayPalFastlaneEnabled&&ccIsPayPalFastlaneEnabled();var isBuildOrTemplate=checkBuildOrTemplate();var pageTypeId=pageData.pageTypeId;if(isBuildOrTemplate||![3,4].includes(pageTypeId)){return}var isUpsellPage=pageTypeId===3;var ispaypalSmartButtonUsed=sessionStorage.getItem("paypalSmartButton");var isReferencedTransaction=getAddOnKeyValue(findAddOn("PayPal_Reference"))==="1"?1:0;var isPayPalVaultEnabled=getAddOnKeyValue(findAddOn("PayPal_Vault"))==="1"?1:0;var singleTransaction=isReferencedTransaction&&parseInt(pageData.selectedCampaign.singleTransaction);var shippableCheckout=sessionStorage.getItem("ccShippableCheckout");var captureOnShipment=(!shippableCheckout||shippableCheckout==="true")&&Number(pageData.selectedCampaign.captureOnShipment);var orderData=sessionStorage.getItem("orderData");orderData=orderData?JSON.parse(orderData):{};var orderPrepaidType=orderData.prepaidType;if(isUpsellPage&&(ispaypalSmartButtonUsed!=="true"||(isPayPalVaultEnabled?isReferencedTransaction&&!["PAYPAL_PAYLATER","PAYPAL_VENMO"].includes(orderPrepaidType):isReferencedTransaction))){window.ccSetSpecificButtonLoadStatus(".btnPayPal, .btnPayPal2");return}var isPayPalGatewaySelected=getAddOnKeyValue(findAddOn("paypalPayLaterHide"))==="true"?true:false,paymentButtonValueArray=["1","true"];var isVenmoSelected=getAddOnKeyValue(findAddOn("PayPal_Venmo"));isVenmoSelected=paymentButtonValueArray.includes(isVenmoSelected);var isPayLaterSelected=getAddOnKeyValue(findAddOn("PayPal_PayLater"));isPayLaterSelected=paymentButtonValueArray.includes(isPayLaterSelected);var enableFunding=[];var disableFunding="card,bancontact,blik,eps,ideal,mercadopago,mybank,p24,sepa";if(isVenmoSelected&&(!isUpsellPage||isUpsellPage&&orderPrepaidType==="PAYPAL_VENMO")){enableFunding.push("venmo")}else{disableFunding=disableFunding+",venmo"}var messageComponent="";if(isPayLaterSelected&&!singleTransaction&&(!isUpsellPage||isUpsellPage&&orderPrepaidType==="PAYPAL_PAYLATER")){messageComponent=",messages";enableFunding.push("paylater")}else{disableFunding=disableFunding+",credit,paylater"}enableFunding=enableFunding.join();var merchantId=getAddOnKeyValue(findAddOn("PayPal_Merchant"));var fastlaneEnabled=pageTypeId===4&&isReferencedTransaction&&isPayPalVaultEnabled&&fastlaneSelected;!fastlaneEnabled&&$(".ccBtnFastlane, .cc-fastlane-cancel, #cc-fastlane-watermark, .cc-fastlane-profile, .cc-fastlane-shipping, #cc-fastlane-payment, .cc-fastlane-show, .cc-fastlane-submit").addClass("d-none");var skipSmartButtonsLoad=isPayPalGatewaySelected||(isUpsellPage?false:!enableFunding)||!merchantId||!(!isReferencedTransaction||isPayPalVaultEnabled);var exitConfig=fastlaneEnabled?false:skipSmartButtonsLoad;if(exitConfig){$(".btnPayPal, .btnPayPal2").css("pointer-events","auto");window.ccSetSpecificButtonLoadStatus(".btnPayPal, .btnPayPal2");return}$(".btnPayPal, .btnPayPal2").css("pointer-events","none");disableFunding="&disable-funding="+disableFunding;enableFunding=enableFunding?"&enable-funding="+enableFunding:"";window.addOverlayEffectScripts();var transactionParams="";if(parseInt(pageData.selectedCampaign.requireQA)||singleTransaction||captureOnShipment){transactionParams="&intent=authorize"}var payPalSandbox=document.URL.includes("dev-funnels")||getAddOnKeyValue(findAddOn("PayPal_Sandbox"))==="1";var datasetObj=[{key:"partnerAttributionId",value:"CheckoutChampLLC_PPFM_PPCP"}];var fastlaneParams=window.ccAddFastlaneParams&&ccAddFastlaneParams(fastlaneEnabled,messageComponent,datasetObj,sessionObj)||{};var fastlaneToken=fastlaneParams.fastlaneToken,messageComp=fastlaneParams.messageComp;messageComponent=messageComp||messageComponent;var clientId=payPalSandbox?"AdATBZ6vUtyH5FQ3weG-63lWwkNioUYJ0b07KEdVwrw0z_DkctGqnz2Q7O-59Dh5nLAOo0LsQOw5GTqY":"AWGTxJ1AlWxI4ZyxZ8J-Mrc_gkVkPR-CFBcT4UnlYUFvEulP6ItFrm_DnLhpZ7dlB94KhqFGd3t7dMQs";var paypalUrl="https://www.paypal.com/sdk/js?client-id="+clientId+disableFunding+enableFunding+"&merchant-id="+merchantId+transactionParams+"&components=buttons"+messageComponent+"&currency="+(window.returnCurrencyCode()||pageData.selectedCampaign.currency);var scriptAttrs=[{key:"async",value:true}];window.loadScript(paypalUrl,handleScriptSuccess,false,false,datasetObj,scriptAttrs,null,handleScriptLoadError);function handleScriptLoadError(event){$(".paypalSdkLoadFailureError").remove();$(".btnPayPal, .btnPayPal2").css("pointer-events","none");$("<div style='color: red;' class='paypalSdkLoadFailureError'>PayPal transaction is not supported with selected currency.</div>").insertAfter($(".btnPayPal, .btnPayPal2"))}function handleScriptSuccess(){fastlaneToken&&window.ccInitPayPalFastlane&&ccInitPayPalFastlane();addPayPalSmartButton()}function addPayPalSmartButton(){var paypalSdkParams="";var pageType=pageData.pageTypeId;var paypalButtonCollection=document.querySelectorAll(".btnPayPal, .btnPayPal2");var buttonAndLinkCollection=[],productAttr=isUpsellPage?"upsell":"offer";if(isUpsellPage&&ispaypalSmartButtonUsed==="true"){var linkCollection=document.querySelectorAll("a");var buttonCollection=document.querySelectorAll("button");[].concat(_toConsumableArray(linkCollection),_toConsumableArray(buttonCollection)).forEach(function(element){if(element.getAttribute("action")==="submit"){buttonAndLinkCollection.push(element)}})}[].concat(_toConsumableArray(paypalButtonCollection),buttonAndLinkCollection).forEach(function(payPalButton){var divId=payPalButton.id,dataSetId=payPalButton.dataset.id;var payPalButtonDiv=document.createElement("div");payPalButtonDiv.classList=payPalButton.classList;payPalButtonDiv.dataset.id=dataSetId;payPalButtonDiv.attributes=payPalButton.attributes;payPalButtonDiv.title=payPalButton.title;payPalButtonDiv.style.backgroundImage="none";payPalButtonDiv.style.backgroundColor="transparent";payPalButtonDiv.style.padding="0px";payPalButtonDiv.style.height="auto";payPalButtonDiv.style.width="auto";payPalButtonDiv.style.display="inline-flex";payPalButtonDiv.style.border="none";payPalButtonDiv.setAttribute(productAttr,payPalButton.getAttribute(productAttr)||"");payPalButtonDiv.setAttribute("variantvalue",payPalButton.getAttribute("variantvalue")||"");payPalButtonDiv.setAttribute("replaceproductid",payPalButton.getAttribute("replaceproductid")||"");payPalButtonDiv.setAttribute("quantity",payPalButton.getAttribute("quantity")||"");payPalButtonDiv.setAttribute("price",payPalButton.getAttribute("price")||"");payPalButtonDiv.setAttribute("altvalue",payPalButton.getAttribute("altvalue")||"");window.ccSetAltValues(payPalButtonDiv);payPalButton.insertAdjacentElement("beforebegin",payPalButtonDiv);payPalButton.remove();payPalButtonDiv.id=divId;var smartButtonReplacementId="#"+divId;var buttonId=payPalButton.dataset.id;var buttonItem=getNavigationItemFromPageData(buttonId);var buttonData=window.getButtonOrLinkData(buttonItem,pageType);var route=redirectPath(buttonData,true);var paypalPrePaidType=null;var smartButtonConfig={style:{layout:"vertical",shape:"rect",label:"paypal"},onClick:function onClick(data,actions){try{if(window.fflPopUpRequired&&window.fflPopUpRequired(buttonId)){window.updateFFLModalButtonCSS&&window.updateFFLModalButtonCSS(buttonId);window.showFFLPopUp&&window.showFFLPopUp();return actions.reject()}sessionStorage.setItem("paypalSdk",true);sessionStorage.setItem("paySource","PAYPAL");var fundingSource=data&&data.fundingSource&&data.fundingSource.toUpperCase();if(["VENMO","PAYLATER"].includes(fundingSource)){paypalPrePaidType="PAYPAL_"+fundingSource}if(isUpsellPage&&orderPrepaidType!==paypalPrePaidType){customerNotificationHandler("PayPal's payment method must match the method used on the checkout page.",divId);return actions.reject()}return window.callMethodApply(buttonId,paypalPrePaidType).then(function(res){if(res&&res.result==="SUCCESS"&&res.message&&res.message.paypalSdkParams){paypalSdkParams=res.message.paypalSdkParams;return actions.resolve()}else{return actions.reject()}})}catch(err){if(!(window.paypal&&window.paypal.Buttons)){throw new Error("Error: Unable to load PayPal script.")}else{throw new Error("Error: Please configure PayPal credentials properly.")}}},onApprove:function onApprove(data,actions){try{sessionStorage.setItem("ccConfirmPayPalCalled",true);confirmPaypal(data.orderID,data.payerID,data.billingToken,paypalPrePaidType)}catch(err){throw new Error("Error: Unable to confirm order.")}},onCancel:function onCancel(data){customerNotificationHandler("Payment cancelled",divId)},onError:function onError(err){customerNotificationHandler(err,divId)}};if($(".cc-express-checkout").find("[data-id='"+dataSetId+"']").length){smartButtonConfig.onInit=function(){window.ccSetButtonLoadStatus(null,dataSetId,true)}}smartButtonConfig.createOrder=function(data,actions){try{var _orderId=paypalSdkParams&&paypalSdkParams.id;if(!_orderId)throw new Error("Insufficient data to process PayPal checkout.");return _orderId}catch(err){throw err.message}};window.paypal.Buttons(smartButtonConfig).render(smartButtonReplacementId)});$(".btnPayPal, .btnPayPal2").css("pointer-events","auto")}}function customerNotificationHandler(message,buttonId){enableInteractions();sessionStorage.removeItem("paySource");var tag=document.getElementById("paypal-notify");if(tag===null){tag=document.createElement("p");tag.setAttribute("id","paypal-notify")}tag.innerHTML=message;var color=tag.style.color="red";var paypalButton=document.getElementById(buttonId);paypalButton?$(tag).insertAfter(paypalButton):alert(message);clearCCPayPalSessionData()}function clearCCPayPalSessionData(){sessionStorage.removeItem("paySource");sessionStorage.removeItem("paypalSuccessRoute");sessionStorage.removeItem("paypalSdk");sessionStorage.removeItem("paypalButtonId");var pageTypeId=pageData&&pageData.pageTypeId;if(pageTypeId===4){sessionStorage.removeItem("paypalCart");sessionStorage.removeItem("paypalSmartButton")}else if(pageTypeId===3){sessionStorage.removeItem("paypalUpsaleSuccessRoute");sessionStorage.removeItem("paypalUpsaleCart");sessionStorage.removeItem("upsalefkCart")}}function confirmPaypal(token,payerID,baToken,paypalPrePaidType){//2 click Paypal upsells
var upsaleRoute=sessionStorage.getItem("paypalUpsaleSuccessRoute");var buttonId=sessionStorage.getItem("paypalButtonId");if(upsaleRoute&&buttonId){sessionStorage.setItem("upsalePaypalToken",token);sessionStorage.setItem("upsalePaypalPayerId",payerID);window.importUpsale(buttonId,upsaleRoute);return}var funnelData=JSON.parse(sessionStorage.getItem("funnelData"));var data={};data.token=token;data.payerId=payerID;data.baToken=baToken;data.orderId=JSON.parse(sessionStorage.getItem("orderId"));var session=sessionStorage.getItem("ccExternalSessionId");session?data.sessionId=session:null;var fkCart=JSON.parse(sessionStorage.getItem("paypalCart"));var rebillCart=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):null;var index=0;var customerDetails=JSON.parse(sessionStorage.getItem("userDetails"));var totalShipping=customerDetails.totalShipping?parseFloat(customerDetails.totalShipping):null;for(var sessionItemCpId in fkCart){if(!Number(sessionItemCpId))continue;index++;if(sessionItemCpId.indexOf(".")>0){var _productData=sessionItemCpId.split(".");data["product"+index+"_id"]=_productData[0];data["variant"+index+"_id"]=_productData[1]}else{data["product"+index+"_id"]=sessionItemCpId}data["product"+index+"_qty"]=fkCart[sessionItemCpId];if($("input[type=checkbox][freeshipping=true]").is(":checked")||totalShipping===0){data["product"+index+"_shipPrice"]=0;totalShipping=0}if(rebillCart&&rebillCart[sessionItemCpId])data["product"+index+"_recur"]=rebillCart[sessionItemCpId];if(window.altValues[sessionItemCpId+"|"+fkCart[sessionItemCpId]])data["product"+index+"_alt"]=window.getItemAlt(sessionItemCpId,fkCart[sessionItemCpId])}if(window.customCart){var customCartLength=Object.keys(window.customCart).length;for(var _i3=0;_i3<customCartLength;_i3++){data["product_custom"+(_i3+1)]=window.customCart[_i3]}}data=window.getBundleVariants(data,index).params;data.cartId=sessionStorage.getItem("cartId");data.campaignId=parseInt(funnelData.campaign);data.paypalBillerId=parseInt(funnelData.addOns.find(function(_ref){var keyName=_ref.keyName;return keyName==="Paypal_billerId"}).keyValue);data.paypalClientMetadataId=sessionStorage.getItem("paypalClientMetadataId");if(customerDetails.couponCode)data.couponCode=customerDetails.couponCode;data.shipProfileId=customerDetails.shipProfileId&&customerDetails.shipProfileId.includes("pickup-")?null:customerDetails.shipProfileId;if(customerDetails.externalShipProfileId){var shipData=customerDetails.externalShipProfileId.split(":");data.shipProfileId=null;data.shipCarrier=shipData[1];data.shipMethod=shipData[3];totalShipping=shipData[4]}window.ccSendIdmeCouponCodeToImportPayPal&&window.ccSendIdmeCouponCodeToImportPayPal(customerDetails,data);data.custom1=customerDetails.custom1;data.custom2=customerDetails.custom2;data.custom3=customerDetails.custom3;data.custom4=customerDetails.custom4;data.custom5=customerDetails.custom5;data.emailAddress=customerDetails.emailAddress;data.phoneNumber=customerDetails.phoneNumber;if(totalShipping===0||customerDetails.externalShipProfileId){data.totalShipping=totalShipping}data.currencyCode=window.returnCurrencyCode()||pageData.selectedCampaign.currency;var paypalSmartButtonSdk=sessionStorage.getItem("paypalSdk");if(paypalSmartButtonSdk&&paypalSmartButtonSdk==="true"){data.paypalSdk=true;if(paypalPrePaidType){data.prepaidType=paypalPrePaidType}}var customerDetailsKeys=Object.keys(customerDetails);customerDetailsKeys.forEach(function(key){if(key.indexOf("custom_")===0)data[key]=customerDetails[key]});var ageVerificationPlugin=getAddOnKeyValue(findAddOn("AV_PLUGIN"));if(ageVerificationPlugin==="AgeChecker"){var ageCheckerPluginId=parseInt(getAddOnKeyValue(findAddOn("AGE_CHECKER_ID")));if(ageCheckerPluginId)data["custom_order_AgeChecker"]=ageCheckerPluginId}else if(ageVerificationPlugin==="1account"){var ageVerificationPluginId=parseInt(getAddOnKeyValue(findAddOn("AV_PLUGIN_ID")));if(ageVerificationPluginId)data["custom_order_1Account"]=ageVerificationPluginId}if(customerDetails.dob)data.dob=customerDetails.dob;data=window.ccRemoveEmptyKeysForPayload(data);data=JSON.stringify(data);window.showOverlayEffect();sessionStorage.removeItem("ccConfirmPayPalCalled");var response=window.httpMethod(window.providerUrl+"/Import/Paypal",data).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){var _route,tag,_buttonId,payPalButton,pageForm,color;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(data.result==="SUCCESS")){_context2.next=9;break}_route=sessionStorage.getItem("paypalSuccessRoute");_route=window.routeByCustomer(data.message,_route,buttonId,data.message.shipCountry,data.message.shipState);if(_route){_context2.next=6;break}window.routingNotFound();return _context2.abrupt("return");case 6:window.registerClick(1,/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(regClickData){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:window.ccUpdateCartWithOrderData(data.message.items);sessionStorage.setItem("orderData",JSON.stringify(data.message));sessionStorage.setItem("checkoutOrderData",JSON.stringify({items:data.message.items,totalAmount:data.message.totalAmount,taxTotal:data.message.taxTotal,shipTotal:data.message.shipTotal}));sessionStorage.setItem("orderId",JSON.stringify(data.message.orderId));sessionStorage.setItem("importOrderSuccess",true);window.ccTrackSygnalEvents&&sessionStorage.setItem("importOrderSuccessSygnal",true);pageData.funnelData.GA_MEASUREMENT_ID?sessionStorage.setItem("importOrderSuccessGA",true):"";pageData.funnelData.snapchatPixelID?sessionStorage.setItem("importOrderSuccessSC",true):"";sessionStorage.removeItem("cartId");sessionStorage.removeItem("currentItem");if(_route&&_route.includes("__ORDERID__")){_route=_route.replace("__ORDERID__",data.message.orderId)}_context.t0=ccEnableOfferEvents&&window.ccCallPageOfferEvents;if(!_context.t0){_context.next=15;break}_context.next=15;return ccCallPageOfferEvents("offer-success");case 15:window.replaceCurrentWindow(_route);case 16:case"end":return _context.stop()}},_callee)}));return function(_x2){return _ref3.apply(this,arguments)}}());_context2.next=26;break;case 9:window.hideOverlayEffect();sessionStorage.removeItem("paySource");tag=document.getElementById("error-paypal");if(tag===null){tag=document.createElement("p");tag.setAttribute("id","error-paypal");tag.classList.add(window.commonErrorClass)}else{tag.innerHTML=""}_buttonId=sessionStorage.getItem("paypalButtonId");payPalButton=$("button[data-id='"+_buttonId+"']").length?$("button[data-id='"+_buttonId+"']"):$("a[data-id='"+_buttonId+"']");pageForm=payPalButton&&payPalButton[0]&&$(payPalButton[0]).closest("div");tag.innerHTML="Error Processing PayPal Payment: "+data.message;color=tag.style.color="red";$(tag).insertAfter(pageForm);clearCCPayPalSessionData();enableInteractions();removePayPalQueryParams();_context2.t0=ccEnableOfferEvents&&window.ccCallPageOfferEvents;if(!_context2.t0){_context2.next=26;break}_context2.next=26;return ccCallPageOfferEvents("offer-decline");case 26:sessionStorage.removeItem("paypalSdk");case 27:case"end":return _context2.stop()}},_callee2)}));return function(_x){return _ref2.apply(this,arguments)}}())}function removePayPalQueryParams(){["paypalAccept","token","PayerID","ba_token"].forEach(window.removeQueryParam)}function loadCCPayPalFraudNetScripts(){if(getAddOnKeyValue(findAddOn("PayPal_WithReach"))==="true")return;var sessionPaypalClientMetadataId=sessionStorage.getItem("paypalClientMetadataId");if(sessionPaypalClientMetadataId||pageData.pageTypeId!==4){return}var paypalFraudnetEnabled=getAddOnKeyValue(findAddOn("PayPal_Fraudnet"))==="1";var paypalMerchantId=getAddOnKeyValue(findAddOn("PayPal_Merchant"));if(paypalFraudnetEnabled&&paypalMerchantId){var paypalSandbox=document.URL.includes("dev-funnels");var sessionId=sessionStorage.getItem("ccExternalSessionId");if(sessionId){var scriptAttrs=[{key:"type",value:"application/json"},{key:"fncls",value:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99"}];var scriptContent="{ 'f': '"+sessionId+"', 's': '"+paypalMerchantId+"_"+"checkout-page"+"', 'sandbox': "+paypalSandbox+" }";window.loadScript("",null,null,"",null,scriptAttrs,scriptContent);var loadingScriptAttrs=[{key:"type",value:"text/javascript"},{key:"async",value:true}];window.loadScript("https://c.paypal.com/da/r/fb.js",null,null,"",null,loadingScriptAttrs);$("body").append("<input type='text' name='paypalClientMetadataId' value='"+sessionId+"' readonly hidden />")}}}function importOrderPayPal(obj,externalShipProfileSelected,shipData,route,orderItems,buttonId){window.captureLead();var _JSON$parse=JSON.parse(sessionStorage.getItem("totals")),salesTax=_JSON$parse.salesTax;obj.salesTax=salesTax?salesTax.toString():"0.00";externalShipProfileSelected?obj.totalShipping=shipData[4]:obj.totalShipping===0?obj.totalShipping="0":null;obj.paypalBillerId=parseInt(pageData.funnelData.addOns.find(function(_ref4){var keyName=_ref4.keyName;return keyName==="Paypal_billerId"}).keyValue);if(document.getElementsByName("paypalClientMetadataId")[0]){obj.paypalClientMetadataId=document.getElementsByName("paypalClientMetadataId")[0].value;sessionStorage.setItem("paypalClientMetadataId",obj.paypalClientMetadataId)}sessionStorage.setItem("paypalSuccessRoute",route);sessionStorage.setItem("paypalCart",JSON.stringify(orderItems));sessionStorage.setItem("paypalButtonId",buttonId)}function importUpsalePayPal(obj,paypalSmartButtonSdk,route,buttonId,orderItems){sessionStorage.setItem("paySource","PAYPAL");obj.paypalBillerId=parseInt(pageData.funnelData.addOns.find(function(_ref5){var keyName=_ref5.keyName;return keyName==="Paypal_billerId"}).keyValue);//2 click Paypal upsells
var token=sessionStorage.getItem("upsalePaypalToken");var payerId=sessionStorage.getItem("upsalePaypalPayerId");if(token&&payerId){obj.token=token;obj.payerId=payerId;paypalSmartButtonSdk&&window.showOverlayEffect()}else{sessionStorage.setItem("paypalUpsaleSuccessRoute",route);sessionStorage.setItem("paypalButtonId",buttonId);sessionStorage.setItem("paypalUpsaleCart",JSON.stringify(orderItems))}if(paypalSmartButtonSdk&&paypalSmartButtonSdk==="true"){sessionStorage.setItem("paypalSuccessRoute",route)}}function clearPayPalUpsaleSession(){sessionStorage.removeItem("paypalUpsaleSuccessRoute");sessionStorage.removeItem("paypalUpsaleButtonId");sessionStorage.removeItem("upsalePaypalToken");sessionStorage.removeItem("upsalePaypalPayerId");sessionStorage.removeItem("paypalCart");sessionStorage.removeItem("paypalUpsaleCart")}var ccAutoCompleteRequest={input:""};var ccAutoCompleteRequestId=0,ccPlacesBillAddressInputs=["address1","city","country","postalCode","state","address2"],ccPlacesShipAddressInputs=ccPlacesBillAddressInputs.map(function(o){return"ship"+o[0].toUpperCase()+o.substring(1)});var ccAutoCompleteStyles="\n<style>\n    .cc-autocomplete-dropdown * {\n        text-align: left;\n    }\n    .cc-autocomplete-item {\n        height: 45px;\n        line-height: 26px;\n        border-top: 1px solid #d9d9d9;\n        position: relative;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        font-family: Roboto;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n        font-weight: 300;\n        color: #000000;\n    }\n    .cc-autocomplete-location-icon {\n        margin-right: 5px;\n        color: #000000;\n        font-size: 16px;\n    }\n    .cc-autocomplete-bold-text {\n        font-size: 16px;\n        font-weight: 600px;\n    }\n    .cc-autocomplete-sub-text {\n        font-size: 12px;\n    }\n    .cc-autocomplete-search-text {\n        font-size: 16px;\n    }\n    .cc-autocomplete-dropdown.cc-auto-complete-provider-logo::after {\n        content: \"\";\n        padding: 1px 1px 1px 0;\n        height: 18px;\n        box-sizing: border-box;\n        text-align: right;\n        display: block;\n        background-image: url(https://maps.gstatic.com/mapfiles/api-3/images/powered-by-google-on-white3_hdpi.png);\n        background-position: right;\n        background-repeat: no-repeat;\n        background-size: 120px 14px;\n    }\n    .cc-autocomplete-dropdown {\n        position: absolute;\n        border: 1px solid #ccc;\n        background: white;\n        display: none;\n        box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        z-index: 1000;\n    }\n    .cc-autocomplete-dropdown ul {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    .cc-autocomplete-dropdown ul li {\n        padding: 10px;\n        cursor: pointer;\n    }\n    .cc-autocomplete-dropdown ul li:hover {\n        background-color: #e4e4e45c;\n    }\n</style>\n";function getAddressField(field,address_components){var fieldObj=address_components.filter(function(e){return e.types.includes(field)});if(fieldObj.length){if(["country","administrative_area_level_1","administrative_area_level_2"].includes(field)){return fieldObj[0].shortText}else{return fieldObj[0].longText}}else{return""}}function ccFillInAddress(fields,address_components,placePredictionText){try{var placePredictionTextSplit=placePredictionText.split(",");var address2=document.getElementsByName(fields[5])[0],subpremise=getAddressField("subpremise",address_components);address2?address2.value=subpremise:null;var address1=document.getElementsByName(fields[0])[0];address1.value=[getAddressField("street_number",address_components),getAddressField("route",address_components)].filter(function(o){return o}).join(" ");document.getElementsByName(fields[1])[0].value=getAddressField("locality",address_components)||getAddressField("postal_town",address_components);var country=document.getElementsByName(fields[2])[0],countryValue=getAddressField("country",address_components);country.value=countryValue;if(!country.value){var list=pageData.selectedCampaign.countries||[],length=list.length;for(var _i4=0;_i4<length;_i4++){if(list[_i4].countryName.toLowerCase()===countryValue.toLowerCase()){country.value=list[_i4].countryCode;break}}}if(!address1.value.trim()&&placePredictionTextSplit.length>3){address1.value=placePredictionTextSplit[0]}else if(!address2&&subpremise&&["US","CA"].includes(country.value)){address1.value=address1.value+" "+subpremise}document.getElementsByName(fields[3])[0].value=getAddressField("postal_code",address_components);loadStates(fields[4],country.value);var state=document.getElementsByName(fields[4])[0];var stateKeys=["administrative_area_level_1","administrative_area_level_2"],stateKeysLength=stateKeys.length,stateList=pageData.selectedCampaign.states[country.value]||[],stateListLength=stateList.length;for(var _i5=0;_i5<stateKeysLength;_i5++){var stateValue=getAddressField(stateKeys[_i5],address_components);state.value=stateValue;if(state.value){break}for(var _i6=0;_i6<stateListLength;_i6++){if(stateList[_i6].stateName.toLowerCase()===stateValue.toLowerCase()){state.value=stateList[_i6].stateCode;break}}}}catch(err){err}}function ccDebounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments;var later=function later(){timeout=null;if(!immediate)func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)func.apply(context,args)}}function ccRefreshAutoCompleteToken(request){if(request)request.sessionToken=new google.maps.places.AutocompleteSessionToken}function ccOnAutoCompletePlaceSelect(_x3,_x4,_x5){return _ccOnAutoCompletePlaceSelect.apply(this,arguments)}function _ccOnAutoCompletePlaceSelect(){_ccOnAutoCompletePlaceSelect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee16(place,inputName,placePredictionText){var addressComponents;return _regeneratorRuntime().wrap(function _callee16$(_context16){while(1)switch(_context16.prev=_context16.next){case 0:_context16.next=2;return place.fetchFields({fields:["addressComponents"]});case 2:addressComponents=place.addressComponents;if(addressComponents){ccFillInAddress(inputName==="address1"?ccPlacesBillAddressInputs:ccPlacesShipAddressInputs,addressComponents,placePredictionText);window.displayPrices()}ccRefreshAutoCompleteToken(ccAutoCompleteRequest);case 5:case"end":return _context16.stop()}},_callee16)}));return _ccOnAutoCompletePlaceSelect.apply(this,arguments)}function ccDisplayAutoCompleteSuggestions(suggestions,inputId,searchText,inputName){var dropdown=document.getElementById("ccGooglePlacesDropdown"+inputId);var dropdownUl=dropdown.querySelector("ul"),searchTextLength=searchText.length;if(!dropdownUl)return;dropdownUl.innerHTML="";suggestions===null||suggestions===void 0||suggestions.forEach(function(prediction){var placePrediction=prediction.placePrediction;var listElement=document.createElement("li");listElement.classList.add("cc-autocomplete-item");var placePredictionText=placePrediction.text.toString();var placePredictionTextSplit=placePredictionText.split(",");listElement.addEventListener("click",function(){ccOnAutoCompletePlaceSelect(placePrediction.toPlace(),inputName,placePredictionText)});var indexAddress=placePredictionTextSplit.splice(0,1)[0]||"";var hasSearchText=indexAddress.toLowerCase().startsWith(searchText.toLowerCase());listElement.innerHTML="\n            <span class=\"cc-autocomplete-location-icon\"> <i class=\"fa fa-map-marker-alt\"></i> </span>\n            <span>\n                <span class=\"cc-autocomplete-search-text\">\n                    ".concat(hasSearchText?"<b class=\"cc-autocomplete-bold-text\">".concat(indexAddress.slice(0,searchTextLength),"</b>"):"").concat(indexAddress.slice(hasSearchText?searchTextLength:0),"\n                </span> \n                ").concat(placePredictionTextSplit.length?"<span class=\"cc-autocomplete-sub-text\">".concat(placePredictionTextSplit.join(","),"</span>"):"","\n            </span>\n        ");dropdownUl.append(listElement)});suggestions!==null&&suggestions!==void 0&&suggestions.length?dropdown.classList.add("cc-auto-complete-provider-logo"):dropdown.classList.remove("cc-auto-complete-provider-logo");dropdown.style.display="block"}function ccHandleAutoCompleteInput(_x6){return _ccHandleAutoCompleteInput.apply(this,arguments)}function _ccHandleAutoCompleteInput(){_ccHandleAutoCompleteInput=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee17(event){var _event$target,inputId,inputContainer,_inputContainer$value,_event$target2,dropdown,searchText,dropdownUl,requestId,_response4;return _regeneratorRuntime().wrap(function _callee17$(_context17){while(1)switch(_context17.prev=_context17.next){case 0:_context17.prev=0;inputId=event===null||event===void 0||(_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.id;inputContainer=inputId&&document.getElementById(inputId);if(!(inputContainer&&$(inputContainer).is(":focus"))){_context17.next=17;break}dropdown=document.getElementById("ccGooglePlacesDropdown"+inputId);searchText=(inputContainer===null||inputContainer===void 0||(_inputContainer$value=inputContainer.value)===null||_inputContainer$value===void 0?void 0:_inputContainer$value.trim())||"";if(!(searchText.length<3)){_context17.next=9;break}if(dropdown){dropdown.classList.remove("cc-auto-complete-provider-logo");dropdown.style.display="none";dropdownUl=dropdown.querySelector("ul");if(dropdownUl)dropdownUl.innerHTML=""}return _context17.abrupt("return");case 9:ccAutoCompleteRequest.input=searchText;requestId=++ccAutoCompleteRequestId;_context17.next=13;return google.maps.places.AutocompleteSuggestion.fetchAutocompleteSuggestions(ccAutoCompleteRequest);case 13:_response4=_context17.sent;if(!(requestId!==ccAutoCompleteRequestId)){_context17.next=16;break}return _context17.abrupt("return");case 16:ccDisplayAutoCompleteSuggestions(_response4===null||_response4===void 0?void 0:_response4.suggestions,inputId,searchText,event===null||event===void 0||(_event$target2=event.target)===null||_event$target2===void 0?void 0:_event$target2.name);case 17:_context17.next=22;break;case 19:_context17.prev=19;_context17.t0=_context17["catch"](0);_context17.t0;case 22:case"end":return _context17.stop()}},_callee17,null,[[0,19]])}));return _ccHandleAutoCompleteInput.apply(this,arguments)}function ccHandleAutoCompleteDropdown(addressInputId,display,skipPositioning){var input=document.getElementById(addressInputId);if(input){var dropdown=document.getElementById("ccGooglePlacesDropdown"+input.getAttribute("id"));if(dropdown){dropdown.style.display=display?"block":"none";if(skipPositioning)return;var rect=input.getBoundingClientRect();dropdown.style.top="".concat(rect.bottom+window.scrollY,"px");dropdown.style.left="".concat(rect.left+window.scrollX,"px");dropdown.style.width="".concat(rect.width,"px")}}}function ccInitAutoCompleteInputs(){var _window$google,_pageData;if(!((_window$google=window.google)!==null&&_window$google!==void 0&&(_window$google=_window$google.maps)!==null&&_window$google!==void 0&&_window$google.places))return;$("head").append(ccAutoCompleteStyles);var ccAddressInputs=document.querySelectorAll("[name=address1], [name=shipAddress1]");ccRefreshAutoCompleteToken(ccAutoCompleteRequest);var campaignCountries=((_pageData=pageData)===null||_pageData===void 0||(_pageData=_pageData.selectedCampaign)===null||_pageData===void 0||(_pageData=_pageData.countries)===null||_pageData===void 0?void 0:_pageData.map(function(e){return e.countryCode}))||[];if(campaignCountries.length&&campaignCountries.length<=15){ccAutoCompleteRequest.includedRegionCodes=campaignCountries}ccAddressInputs.forEach(function(input){var dropdown=document.createElement("div"),inputId=input.getAttribute("id");dropdown.id="ccGooglePlacesDropdown"+inputId;dropdown.classList.add("cc-autocomplete-dropdown");dropdown.innerHTML="<ul></ul>";document.body.append(dropdown);input.addEventListener("focus",function(event){ccHandleAutoCompleteDropdown(event.target.id,true)});input.addEventListener("input",ccDebounce(ccHandleAutoCompleteInput,500));input.addEventListener("blur",function(event){setTimeout(function(){ccHandleAutoCompleteDropdown(event.target.id,false,true)},250)});window.addEventListener("resize",function(){ccHandleAutoCompleteDropdown(inputId,false,true)})})};function loadPlacesAutocomplete(){if([1,2,4,8].includes(pageData.pageTypeId)){var googlePlacesKey=window.getAddOnKeyValue(window.findAddOn("Google_Places"));if(googlePlacesKey!==null&&googlePlacesKey!==void 0&&googlePlacesKey.trim()){window.loadScript("https://maps.googleapis.com/maps/api/js?key="+googlePlacesKey+"&loading=async&libraries=places&callback=ccInitAutoCompleteInputs",null,null,null,null,[{key:"async",value:true}])}}}function generateTransactionId(orderInfo){var transactionId=orderInfo.orderData.orderId;if(window.orderPurchaseEvent&&window.sendUniqueId==="true"){transactionId=orderInfo.orderData.orderId+"-"+new Date().getSeconds()+Math.random().toString(36).substr(2,2)}return transactionId}function callPurchaseEventOnGTM(){if(sessionStorage.getItem("importOrderSuccessGA")==="true"||sessionStorage.getItem("importUpsellSuccessGA")==="true"){var orderInfo=window.getOrderDataObj("GTM");window.dataLayer.push({"ecommerce":null});var preOrderData=JSON.parse(sessionStorage.getItem("preUpsellOrderDataItems"));var newCustomer=orderInfo.orderData.newCustomer?true:false;var dataLayerObj={"event":"purchase","ecommerce":{"transaction_id":generateTransactionId(orderInfo),"value":parseFloat(orderInfo.orderData.totalAmount),"tax":parseFloat(orderInfo.orderData.taxTotal),"shipping":parseFloat(orderInfo.orderData.shipTotal),"currency":orderInfo.orderData.currencyCode,"coupon":orderInfo.orderData.couponCode,"items":orderInfo.contents,"purchase":{"actionField":{"id":orderInfo.orderData.orderId,"currency":orderInfo.orderData.currencyCode,"revenue":parseFloat(orderInfo.orderData.totalAmount),"tax":parseFloat(orderInfo.orderData.taxTotal),"shipping":parseFloat(orderInfo.orderData.shipTotal),"coupon":orderInfo.orderData.couponCode,"eventUniqueId":window.getUniqueId(),"pageRevenue":preOrderData?parseFloat(orderInfo.orderData.totalAmount-preOrderData.totalAmount).toFixed(2):parseFloat(orderInfo.orderData.totalAmount)},"products":orderInfo.contents,"pageProducts":orderInfo.pageProducts,"new_customer":newCustomer,"customer_lifetime_value":parseFloat(orderInfo.orderData.totalAmount)}}};if(orderInfo.orderData.upsell){dataLayerObj.ecommerce.purchase.upsell=orderInfo.orderData.upsell;if(orderPurchaseEvent&&getAddOnKeyValue(findAddOn("PRODUCTS_PER_ORDER"))==="true"){var pageProducts=dataLayerObj.ecommerce.purchase.pageProducts;var calculatedTotals=pageProducts.reduce(function(total,product){return total+(product.price+product.tax+product.shipping)*product.quantity},0);dataLayerObj.ecommerce.value=calculatedTotals.toFixed(2);dataLayerObj.ecommerce.items=pageProducts}}if(getAddOnKeyValue(findAddOn("SEND_USER_DATA"))==="true"){var userinfo={emailAddress:orderInfo.orderData.emailAddress,phoneNumber:orderInfo.orderData.phoneNumber,address1:orderInfo.orderData.address1,address2:orderInfo.orderData.address2,firstName:orderInfo.orderData.firstName,lastName:orderInfo.orderData.lastName,city:orderInfo.orderData.city,state:orderInfo.orderData.state,country:orderInfo.orderData.country,postalCode:orderInfo.orderData.postalCode};var hashPromises=Object.keys(userinfo).map(function(key){return window.generateSHA256Hash(userinfo[key])});Promise.all(hashPromises).then(function(hashes){Object.keys(userinfo).forEach(function(key,index){userinfo[key]=hashes[index]});dataLayerObj.ecommerce.purchase.userinfo=userinfo;window.dataLayer.push(dataLayerObj)})["catch"](function(error){console.error("Error generating hashes:",error)})}else{window.dataLayer.push(dataLayerObj)}}sessionStorage.removeItem("importOrderSuccessGA")}function callPurchaseEventBasedOnType(methodToCall){var purchaseEventType=getAddOnKeyValue(findAddOn("Purchase_Event_FB"));switch(pageData.pageTypeId){// Upsell Page
case 3:(purchaseEventType==="2"||purchaseEventType==="3")&&methodToCall();break;// Thank You Page
case 5:methodToCall();break;default:break}}function callPurchaseEventOnGA(gtag){var orderInfo=window.getOrderDataObj("GA");var gtagCall=function gtagCall(){return gtag("event","purchase",{transaction_id:generateTransactionId(orderInfo),value:parseFloat(orderInfo.orderData.totalAmount),currency:orderInfo.orderData.currencyCode,tax:parseFloat(orderInfo.orderData.taxTotal),shipping:parseFloat(orderInfo.orderData.shipTotal),items:orderInfo.contents})};(sessionStorage.getItem("importOrderSuccessGA")==="true"||sessionStorage.getItem("importUpsellSuccessGA")==="true")&&gtagCall();sessionStorage.removeItem("importOrderSuccessGA")}function getGoogleAnalyticsCode(){var _pageData$funnelData$;window.dataLayer=window.dataLayer||[];function gtag(){window.dataLayer.push(arguments)}var rawUrl=(_pageData$funnelData$=pageData.funnelData.GTM_SERVER_URL)===null||_pageData$funnelData$===void 0?void 0:_pageData$funnelData$.trim();var serverURL=rawUrl&&!rawUrl.startsWith("http://")&&!rawUrl.startsWith("https://")?"https://"+rawUrl:rawUrl||null;if(pageData.funnelData.GA_MEASUREMENT_ID.trim().substring(0,3)==="GTM"){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!=="dataLayer"?"&l="+l:"";j.async=true;j.src=serverURL?serverURL+"/gtm.js?id="+i+dl:"https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f)})(window,document,"script","dataLayer",pageData.funnelData.GA_MEASUREMENT_ID);var noscript=document.createElement("noscript");var iframe=document.createElement("iframe");iframe.src=serverURL?serverURL+"/ns.html?id="+pageData.funnelData.GA_MEASUREMENT_ID:"https://www.googletagmanager.com/ns.html?id="+pageData.funnelData.GA_MEASUREMENT_ID;iframe.height="0";iframe.width="0";iframe.style.display="none";iframe.style.visibility="hidden";noscript.append(iframe);document.body.prepend(noscript);callPurchaseEventBasedOnType(callPurchaseEventOnGTM)}else{var script=document.createElement("script");script.src="https://www.googletagmanager.com/gtag/js?id="+pageData.funnelData.GA_MEASUREMENT_ID;script.async=false;document.head.appendChild(script);var referrer=sessionStorage.getItem("httpReferer")?sessionStorage.getItem("httpReferer"):document.referrer;gtag("js",new Date);var gtagConfig={};if(serverURL){gtagConfig.server_container_url=serverURL}if(referrer&&referrer.indexOf(getCurrentWindowLocation().host)<0){var linkElement=document.createElement("a");linkElement.href=referrer;gtagConfig.linker={domains:[linkElement.hostname,getCurrentWindowLocation().host],accept_incoming:true}}gtag("config",pageData.funnelData.GA_MEASUREMENT_ID,gtagConfig);callPurchaseEventBasedOnType(function(){callPurchaseEventOnGA(gtag)})}}var stripeConstants={publishableKey:{name:"googlePayStripePublishableKey",paramName:"stripe:publishableKey",label:"Publishable Key",addOnName:"STRIPE_KEY",action:"STRIPE_KEY_UPDATE",tooltip:"Publishable Key received from Stripe"}};var gPayGatewayWithOtherFields=["stripe"];var gPayGatewayFieldsForOthers={stripe:[{// componentType: component[1],
args:{paramName:stripeConstants.publishableKey.paramName,addOnName:stripeConstants.publishableKey.addOnName}}]};var membershipNoProductError=message.membershipNoProductError,cardUpdateSuccessMessage=message.cardUpdateSuccessMessage,provideDetailsForAllFields=message.provideDetailsForAllFields,membershipBillingCycleError=message.membershipBillingCycleError;var active=membershipState.active,inActive=membershipState.inActive;var cardRegex=/\d{12,16}/;var integerRegex=/\D/g;var alphabetsRegex=/[A-Z]/i;var cardDateRegex="(1[0-2]|0[1-9])";var cardNumberRegex="\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}";var dinerFormatRegex="\\d{4}?[\\s.-]?\\d{6}?[\\s.-]?\\d{4}";var amexFormatRegex="\\d{4}?[\\s.-]?\\d{6}?[\\s.-]?\\d{5}";var phoneNumberRegex="^(\\+\\d{1,2}\\s?)?1?\\-?\\.?\\s?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$";var commonPhoneNumberRegex=/[^0-9+-/()]/g;var breakTagRegex="/(<br/>|<br>|</br>)/g";var amexRegex=/^3[47]\d{0,13}$/;var dinersClubRegex=/^3(?:0[0-5]|[68]\d)\d{0,11}$/gm;var regularCCard=/^\d{0,16}$/;var other19DigitsCCard=/^\d{0,23}$/;var other19DigitsCardNumberRegex="\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{4}?[\\s.-]?\\d{3}?";// Constants
//------------------------------------------
var ccProductSectionsOnPage=$(".fk-product-section").length;ccProductSectionsOnPage&&disableInteractions(null,true,true);var percentage="%";var zeroPercentage="0%";var allowedCardNetworks=["AMEX","DISCOVER","INTERAC","JCB","MASTERCARD","VISA"];var prepaidGateways=["SKRILL","CENTROBILL","QUICKPAY","CCBILL","WITHREACH_PAYPAL"];var pagBrasilGateways=["BOLETO","PIX"];var stripeAlternateGateways=["BANCONTACT","IDEAL","SWISH","BLIK","MOBILEPAY","SEPA_DEBIT","P24","EPS"];var multiPayRebillGateways=["AFTERPAY","SEZZLE","KLARNA","AFFIRM"];var ccAlternatePaymentGateways=[].concat(stripeAlternateGateways,pagBrasilGateways,multiPayRebillGateways,["SPLITIT","TRUSTLY","TWINT","WELLNESS","MULTIBANCO","MBWAY","BIZUM","PAYU","KAKAOPAY","NAVERPAY","PAYCO","ALIPAY","WECHATPAY","PAYPAY"]);var allowedFraudPixelPages=[1,2,3,4,5,17,18,21,33,34];// const gPayGatewayFieldsForOthers = JSON.stringify(gPayGatewayFieldsForOthers);
// const gPayGatewayWithOtherFields = JSON.stringify(gPayGatewayWithOtherFields);
var todayDate=new Date;var todayDateLong=todayDate.getTime()+todayDate.getMilliseconds();var userRef=Math.floor(Math.random()*Math.random()*todayDateLong);var tokenType="MembershipBearer";var cookieData={};var scrollCardsSlotSize=30;var fkCheckboxAndRadioProductIdHashMap={};var checkoutChampWhiteLabelId="10";var ccUpsellPageFFLProducts={};var excludeInputs={"product":true,"shipProfileId":true,"fk-payment-option-toggler":true,"payment_method":true};var excludeClassName={"variant-radio":true};var commonErrorClass="ccError";/*
Fields supported to authenticate a card transaction.
PAN_ONLY: This authentication method is associated with payment cards stored on file with the user's Google Account. Returned payment data includes personal account number (PAN) with the expiration month and the expiration year.
CRYPTOGRAM_3DS: This authentication method is associated with cards stored as Android device tokens. Returned payment data includes a 3-D Secure (3DS) cryptogram generated on the device.
*/var allowedCardAuthMethods=["PAN_ONLY","CRYPTOGRAM_3DS"];var baseCardPaymentMethod={type:"CARD",/*Other options - 'PAYPAL - https://developer.paypal.com/docs/archive/checkout/how-to/googlepay-integration/ */parameters:{allowedAuthMethods:allowedCardAuthMethods,allowedCardNetworks:allowedCardNetworks,assuranceDetailsRequired:false}};var baseRequest={apiVersion:2,apiVersionMinor:0};var browserData={acceptHeader:"application/json",userAgent:navigator.userAgent,language:navigator.language,timezone:new Date().getTimezoneOffset().toString(),colorDepth:screen.colorDepth,screen:{height:screen.height.toString(),width:screen.width.toString()},javaScriptEnabled:true,javaEnabled:navigator.javaEnabled()};window.ccHandleIdmeRedirect&&ccHandleIdmeRedirect(pageData);window.ccDisableOrderPerksControls&&ccDisableOrderPerksControls();var ccUrlParams=new URLSearchParams(getCurrentWindowLocation().search);var ship=["shipFirstName","shipLastName","shipAddress1","shipAddress2","shipCity","shipCountry","shipState","shipPostalCode","shipFullName"];var ccBillingFields=["firstName","lastName","address1","address2","city","country","state","postalCode","fullName"];var memberFields=["emailAddress","phoneNumber","address1","address2","city","state","country","postalCode"];var ccDynamicProductSection=document.querySelector(".cc-dynamic-product-section");var subscribeAndSave=document.getElementById("Subscribe");var twoWaySubscription=document.querySelector(".cc-twoway-subscription");var dynamicOrderBump=document.getElementsByClassName("cc-dynamic-order-bump")[0];var refreshOrderBumps=document.getElementsByClassName("cc-refresh-order-bump");var captchaTrigger=getAddOnKeyValue(findAddOn("RECAPT_TRIGGER"));var captchaSiteKey=getAddOnKeyValue(findAddOn("RECAPT_SITE_KEY"));var captchaAssessmentKey=getAddOnKeyValue(findAddOn("RECAPT_ASSESS_KEY"));var captchaProjectId=getAddOnKeyValue(findAddOn("RECAPT_PROJ_ID"));var captchaThresholdScore=getAddOnKeyValue(findAddOn("RECAPT_THRESHOLD"));var captchaType=getAddOnKeyValue(findAddOn("RECAPT_TYPE"));var captchaFailRedirect=getAddOnKeyValue(findAddOn("RECAPT_FAIL_URL"));var reachMerchantId=getAddOnKeyValue(findAddOn("REACH_MERCH_ID"));var reachLocale=getAddOnKeyValue(findAddOn("REACH_LOCALE"));var reachTheme=getAddOnKeyValue(findAddOn("REACH_THEME_VALUE"));var orderPurchaseEvent=getAddOnKeyValue(findAddOn("Purchase_Event_FB"))==="3";var sendUniqueId=getAddOnKeyValue(findAddOn("SEND_UNIQUE_TRANS_ID"));var ccTriggerAddToCartForUrlProducts=getAddOnKeyValue(findAddOn("ADD_TO_CART_TCK"))==="true";var btnClasses=["btnPayPal","btnPayPal2","klarnaButton","affirmButton","sezzleButton","afterpayButton","bancontactButton","idealButton","swishButton","blikButton","mobilepayButton","p24Button","epsButton","boletoButton","pixButton","sepaButton","shopPayButton","bitPayButton","btnGoogle1","btnGoogle2","gpay-button","btnAmazonLight","btnAmazonDark","btnAmazonGold","btnAmazonYellow","cod-button","btnApplePay","splitItButton","radomButton","coinsubButton","trustlyButton","twintButton","multibancoButton","mbwayButton","bizumButton","payuButton","kakaopayButton","wellnessPayButton","naverPayButton","paycoButton","alipayButton","weChatPayButton","payPayButton"];var removeBundleFromCart=[],ccMinPaginationSize=1;var ccPopupConfigData={ccdesktoppopupheight:0.75,ccdesktoppopupwidth:0.75,ccmobilepopupheight:0.75,ccmobilepopupwidth:0.75};var ccPaginationElementExists=$(".cc-pagination-bar").find(".cc-pagination-tab-container").find(".cc-pagination-tab").length;var ccStampedPluginId=getAddOnKeyValue(findAddOn("STAMPED_PLUGIN_ID")),ccSygnalPixelId=(getAddOnKeyValue(findAddOn("SYGNAL_PIXEL_ID"))||"").trim(),ccSygnalTrackingGateway=(getAddOnKeyValue(findAddOn("SYGNAL_GATEWAY"))||"").trim(),ccTrackSygnalEvents=ccSygnalPixelId&&ccSygnalTrackingGateway;var ccOpenPathId=getAddOnKeyValue(findAddOn("OPEN_PATH_ID")),ccOpenPathUser=getAddOnKeyValue(findAddOn("OPEN_PATH_USER"));var productOrderArray=JSON.parse(sessionStorage.getItem("productOrderArray"))||[];var urlProdOrderTracker=[];var ccLoadingButtonsMap={},ccMemberAreaPageTableImages={},ccMemberPriceProductMap={};var ccFastlaneEvent=new Event("ccFastlaneCheckoutEvent");var ccStripeLinkEvent=new Event("ccStripeLinkCheckoutEvent");var ccCCardSupport19Digits=$("[name=cardNumber").hasClass("ccExtended");var getPrice=function getPrice(product){var useVariantPrice=product.variants&&product.variants.length&&!product.isVariantBundle&&!product.isEditable;var newVariantPrice=useVariantPrice&&Number(ccGetProductCurrencyPrice(product.campaignProductId+"."+product.variants[0].variantDetailId)||product.variants[0].price);return newVariantPrice>0?newVariantPrice:Number(ccGetProductCurrencyPrice(product.campaignProductId,1)||product.cycle1_price)};var ccProdSectionProducts={},ccEncCustomOrderKey="cc_enc",ccSurchargeInflightRequests=new Map,ccTaxInflightRequests=new Map;var multiProdColMap={};var multiCollectionMenu=document.querySelector(".cc-multi-collection-menu");var ccCollectionsResponse={};var ccPaginationData={};var ccPaginatedProducts={};// CODE
// -------------------------------------------------
var cellFormat=[];var ccProductId;var variantSelectFlag=0;var checkedElement;setShoppingCartSpinner();var isVisited=true;var response=null;var prevProdSelectValue=null;var isVisitedOnScroll=true;var isVisitedOnLoad=true;var isStickyBar=true;var isVisitedStickyOnLoad=true;var captureLeadInterval;var ccIsVisitedOnScrollUp=true;var ccScrollOffset=0;var products=[];var fkCart={};var rebillCart={};var customCart={};var altValues=[];var orderId;var result=true;var surveySectionCount=1;var ccProgressBar=[];var decrementSectionCount=0;var parentSection="";var cartProduct=[];var defaultCountryCode="US";var appliedCouponCode=[];var address1FieldAutoComplete,address1FieldAutoCompleteTimer;var shipAddress1FieldAutoComplete,shipAddress1FieldAutoCompleteTimer;var maskShellCssAdded=false;var lisTrakCapturedEmail="";var lisTrakCartUpdated=false;/*Google Pay fields starts*/var googlePaymentsClient=null;var googlePaymentDataRequest;var shippingCostIncluded=false;var shippingCostApplePayIncluded=false;var campaignBaseCurrencySymbol;var staticCurrencyValues=[];var fkMenuList=[];var fkConfiguredProductCol=null;var fkCollectionData=[];var fkProductCollection=[];var scrolledCardsCount=30;var fkCollectionSize=0;var fkCollectionLoader=false;var vatTaxRate=1;var globalOrderData;var isVatOnOrder;var isSubscribeOn=sessionStorage.getItem("isSubscribeOn")!==null?JSON.parse(sessionStorage.getItem("isSubscribeOn")):null;var ccSkipStaticCurrencyConversion=false,ccStopSPPopups=false;var globalStoreDetails=[];var ccSavings=0,ccCompareAtTotal=0;var handleBundleEle=true;var phInputCode;var recommendationFlag;var ccMaxCollectionProducts=100,ccMaxCollectionProductsOnPage=100,ccMaxPaginationSize=1,ccCurrentPagePosition=1,ccCurrentPaginationArray=[],ccCurrentCollectonId;var ccCampaignProductsData;var prevOrderItems,glOrderItems,glDetailedOrderItems;var ccCheckExpressBtnsLoadStateVar,ccCheckExpressBtnsLoadStatePromise,ccUpdatedDiscount=0;var recommendationsList=[];var cartChanged=false;var cartProductLength=Object.keys(getOrderItemDetails).length;var pageProductIdsOnly=[];var campaignCalled=false;var campaignRecommendations=[];var ccPageDiscountAPIRequestId=0,ccPreDiscountTotals={},ccPageTaxAPIRequestId=0,ccSurchargeAPIRequestId=0;var initialCollectionId=null;var sortOrderQuery="";var twoWayProductList=[];var nonRebillSubscriptions=[];if($(".cc-express-checkout").length){ccCheckExpressBtnsLoadStatePromise=new Promise(function(resolve){ccCheckExpressBtnsLoadStateVar=setInterval(function(){if(!document.body.classList.contains("dom-pending")){clearInterval(ccCheckExpressBtnsLoadStateVar);resolve();ccDisplayExpressCheckoutButtons()}},200)});setTimeout(function(){$(".cc-express-checkout").removeClass("cc-express-checkout")},5000)}$(".cc-show-av-popup").hide();$(".cc-surcharge-name").each(function(){this.setAttribute("cc-label-default-text",this.innerHTML)});if(document.cookie){var cookies=document.cookie.split(";");cookies.forEach(function(d){var cookieName=d.split("=")[0].trim();var cookieVal=d.split("=")[1].trim();if(cookieVal){cookieData[cookieName]=cookieVal}})}function createAppendOptions(recurringOptions,dropdown,id){recurringOptions&&recurringOptions.forEach(function(opt){var option=document.createElement("option");option.value=opt;option.innerText=opt;dropdown.appendChild(option)});var rebillCart=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):{};if(rebillCart[id]){$(dropdown).val(rebillCart[id])}}function setRebillCart(id,cart,subscribe,remove){if(!id||!twoWaySubscription)return;var rebillCart=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):{};var flag=false;if(remove&&rebillCart[id]){delete rebillCart[id];flag=true}else if((subscribe||rebillCart[id]||rebillCart[id]==0)&&!nonRebillSubscriptions.includes(id)){// checking 0 for case before item clone is appended.
var attrValue=$("[cc-value='".concat(id,"']"));var cartDropdown,elementDropdown;if(attrValue.length&&attrValue[0].closest(".cc-twoway-subscription")){elementDropdown=attrValue[0];cartDropdown=attrValue[1]}else if(attrValue.length){elementDropdown=attrValue[1];cartDropdown=attrValue[0]}var data=cart?$(cartDropdown).val()||rebillCart[id]||$(elementDropdown).val():$(elementDropdown).val()||rebillCart[id]||$(cartDropdown).val();rebillCart[id]=data;flag=true}if(flag){sessionStorage.setItem("rebillCart",JSON.stringify(rebillCart))}}function ccCheckBase64CustomDataKey(key){var _key$trim;if(key!==null&&key!==void 0&&(_key$trim=key.trim())!==null&&_key$trim!==void 0&&(_key$trim=_key$trim.toLowerCase())!==null&&_key$trim!==void 0&&_key$trim.startsWith(ccEncCustomOrderKey))return true}function ccHandleMissingAddress1(obj){var _obj$shipAddress,_obj$address;if(!(obj!==null&&obj!==void 0&&(_obj$shipAddress=obj.shipAddress1)!==null&&_obj$shipAddress!==void 0&&_obj$shipAddress.trim()))obj.shipAddress2="";if(!(obj!==null&&obj!==void 0&&(_obj$address=obj.address1)!==null&&_obj$address!==void 0&&_obj$address.trim()))obj.address2="";return obj}function ccGetPurchasedUpsells(upsells,orderDataItems){if(orderDataItems&&upsells){var orderDataProductsObj={};orderDataItems.forEach(function(item){var variantId=item.variantDetailId;orderDataProductsObj[item.productId+(variantId?"."+variantId:"")]=item.qty});for(var _item in upsells){if(!orderDataProductsObj[_item]){delete upsells[_item]}}}return upsells}function ccUpdateCartWithOrderData(orderDataItems){if(orderDataItems){var cart={};orderDataItems.forEach(function(item){var variantId=item.variantDetailId;cart[item.productId+(variantId?"."+variantId:"")]=item.qty});sessionStorage.setItem("fkCart",JSON.stringify(cart))}}function ccGetSetTrackingEventFireStatus(eventName,value,setEvent){try{var eventData=sessionStorage.getItem("ccTrackingEvents");eventData=eventData?JSON.parse(eventData):{};if(setEvent){eventData[eventName]=value;sessionStorage.setItem("ccTrackingEvents",JSON.stringify(eventData))}return Number(eventData[eventName])||0}catch(err){return 0}}function ccSetDefaultExpressButtonsStatus(){var excludeBtns={"btnAmazonLight":true,"btnAmazonDark":true,"btnAmazonGold":true};if(!window.configureGooglePay){excludeBtns["btnGoogle1"]=true;excludeBtns["btnGoogle2"]=true}var btnArr=btnClasses&&btnClasses.length&&btnClasses.filter(function(item){return!excludeBtns[item]}).join(",.")||"";if(btnArr&&btnArr.length){var btns=$(".cc-express-checkout").find("."+btnArr);if(btns.length){btns.each(function(){var dataId=$(this).attr("data-id");if(dataId){ccLoadingButtonsMap[dataId]=false}})}else{ccCheckButtonsLoadingStatus()}}}function ccSetSpecificButtonLoadStatus(classIdentifier){if(classIdentifier&&ccCheckExpressBtnsLoadStatePromise){ccCheckExpressBtnsLoadStatePromise.then(function(){$(".cc-express-checkout").find(classIdentifier).each(function(){var dataId=$(this).attr("data-id"),src=ccGetButtonBackgroundUrl(dataId);dataId&&src&&ccSetButtonLoadStatus(src,dataId)})})}}function ccCheckButtonsLoadingStatus(){if(ccLoadingButtonsMap&&Object.keys(ccLoadingButtonsMap).length){for(var _i7 in ccLoadingButtonsMap){if(!ccLoadingButtonsMap[_i7]){return}}}$(".cc-express-checkout").removeClass("cc-express-checkout")}function ccSetButtonLoadStatus(src,id,eventBased){function setLoadStatus(btnId){ccLoadingButtonsMap[btnId]=true;ccCheckButtonsLoadingStatus()}if(eventBased){setLoadStatus(id)}else{var image=new Image;image.addEventListener("load",function(){setLoadStatus(id)});image.addEventListener("error",function(){setLoadStatus(id)});image.src=src}}function ccGetButtonBackgroundUrl(dataId){if(!dataId)return"";var element=$("[data-id='"+dataId+"']").first();if(!element.length)return"";var src=element.css("background-image");if(!src||src==="none")return"";var match=src.match(/^url\(["']?(.+?)["']?\)$/);return match?match[1]:""}function ccDisplayExpressCheckoutButtons(){var excludeBtns={"btnAmazonLight":true,"btnAmazonDark":true,"btnAmazonGold":true,"btnPayPal":true,"btnPayPal2":true,"btnGoogle1":true,"btnGoogle2":true};var expressBtns=$(".cc-express-checkout");if(expressBtns.length){var btnArr=btnClasses&&btnClasses.length&&btnClasses.filter(function(item){return!excludeBtns[item]}).join(",.");if(btnArr&&btnArr.length){expressBtns.find("."+btnArr).each(function(){var dataId=$(this).attr("data-id");var src=ccGetButtonBackgroundUrl(dataId);if(src){ccSetButtonLoadStatus(src,dataId)}})}}}ccSetDefaultExpressButtonsStatus();var displayPricesApplyClosure=function displayPricesApplyClosure(){var timer;return function(){clearTimeout(timer);timer=setTimeout(function(){displayPricesApplyMethod()},100)}};var displayPricesApply=displayPricesApplyClosure();function ccLoadPaginationTabs(){try{var container=$(".cc-pagination-bar").find(".cc-pagination-tab-container"),containerLength=container.length;if(containerLength){ccMaxPaginationSize=Math.ceil(ccMaxCollectionProducts/ccMaxCollectionProductsOnPage);var paginationArray=[];if(ccMaxPaginationSize<=6){for(var _i8=1;_i8<=ccMaxPaginationSize;_i8++){paginationArray.push(_i8)}}else{if(ccCurrentPagePosition<=ccMaxPaginationSize/2){if(ccCurrentPagePosition===ccMinPaginationSize){paginationArray=[1,2,3,4,"...",ccMaxPaginationSize]}else{paginationArray=[ccCurrentPagePosition-1,ccCurrentPagePosition,ccCurrentPagePosition+1,ccCurrentPagePosition+2,"...",ccMaxPaginationSize];if(ccCurrentPaginationArray[2]===ccCurrentPagePosition&&ccCurrentPaginationArray[1]!=="..."){paginationArray=ccCurrentPaginationArray}}}else{if(ccCurrentPagePosition==ccMaxPaginationSize){paginationArray=[ccMinPaginationSize,"...",ccCurrentPagePosition-3,ccCurrentPagePosition-2,ccCurrentPagePosition-1,ccCurrentPagePosition]}else if(ccCurrentPaginationArray[4]===ccCurrentPagePosition){paginationArray=ccCurrentPaginationArray}else if(ccCurrentPagePosition==ccMaxPaginationSize-1){paginationArray=[ccMinPaginationSize,"...",ccCurrentPagePosition-2,ccCurrentPagePosition-1,ccCurrentPagePosition,ccMaxPaginationSize]}else{paginationArray=[ccMinPaginationSize,"...",ccCurrentPagePosition-1,ccCurrentPagePosition,ccCurrentPagePosition+1,ccCurrentPagePosition+2]}}}paginationArray=paginationArray||[1];ccCurrentPaginationArray=paginationArray;var _loop=function _loop(_i9){var tab=container[_i9]&&$(container[_i9]).find(".cc-pagination-tab").first();if(tab&&tab.length){$(container[_i9]).empty();$(".cc-pagination-tab-prev, .cc-pagination-tab-next").removeClass("cc-disabled-pagination-tab");paginationArray&&paginationArray.forEach(function(item){var page=item&&Number(item);var clonedTab=tab.clone(true);if(isNaN(page)){clonedTab.find(".cc-pagination-tab-number").html("...");clonedTab.addClass("cc-disabled-pagination-tab")}else if(ccCurrentPagePosition===ccMinPaginationSize&&page===ccMinPaginationSize){clonedTab.find(".cc-pagination-tab-number").html(ccMinPaginationSize);clonedTab.attr("onclick","ccPageTabClick("+ccMinPaginationSize+")");$(".cc-pagination-tab-prev").addClass("cc-disabled-pagination-tab");if(ccCurrentPagePosition===ccMaxPaginationSize)$(".cc-pagination-tab-next").addClass("cc-disabled-pagination-tab")}else if(ccCurrentPagePosition===ccMaxPaginationSize&&page===ccMaxPaginationSize){clonedTab.find(".cc-pagination-tab-number").html(ccMaxPaginationSize);clonedTab.attr("onclick","ccPageTabClick("+ccMaxPaginationSize+")");$(".cc-pagination-tab-next").addClass("cc-disabled-pagination-tab")}else{clonedTab.find(".cc-pagination-tab-number").html(page);clonedTab.attr("onclick","ccPageTabClick("+page+")")}if(ccCurrentPagePosition===page){clonedTab.addClass("cc-active-pagination-tab")}else{clonedTab.removeClass("cc-active-pagination-tab")}$(container[_i9]).append(clonedTab)});tab.remove()}};for(var _i9=0;_i9<containerLength;_i9++){_loop(_i9)}}}catch(err){console.log(err)}}function ccPageTabClick(pageNumber){try{ccCurrentPagePosition=Number(pageNumber)||1;invokeCollectionApi(ccCurrentCollectonId,true,false,ccMaxCollectionProductsOnPage,ccCurrentPagePosition)}catch(err){console.log(err)}}function ccPageNext(){try{ccCurrentPagePosition=ccCurrentPagePosition%ccMaxPaginationSize+1;invokeCollectionApi(ccCurrentCollectonId,true,false,ccMaxCollectionProductsOnPage,ccCurrentPagePosition)}catch(err){console.log(err)}}function ccPagePrev(){try{ccCurrentPagePosition=(ccCurrentPagePosition-1)%ccMaxPaginationSize;ccCurrentPagePosition=ccCurrentPagePosition===0?1:ccCurrentPagePosition;invokeCollectionApi(ccCurrentCollectonId,true,false,ccMaxCollectionProductsOnPage,ccCurrentPagePosition)}catch(err){console.log(err)}}function ccGetBuilderScreenSizeStats(){var width=window.innerWidth;if(width<=480){return{device:"mobilesize",defaultMaxProducts:30}}else if(width<=600){return{device:"largemobilesize",defaultMaxProducts:40}}else if(width<=768){return{device:"tabletsize",defaultMaxProducts:60}}else if(width<=992){return{device:"largetabletsize",defaultMaxProducts:80}}return{device:"desktopsize",defaultMaxProducts:100}}function ccGenerateRandomUUID(){var funnelRefIdPrefix=pageData.funnelReferenceId&&pageData.funnelReferenceId.slice(0,4)||"";var timestamp=new Date().getTime(),timestampHex=funnelRefIdPrefix+timestamp.toString(16);var randomHex=Array.from({length:32-timestampHex.length},function(){return Math.floor(Math.random()*16).toString(16)}).join("");return(timestampHex+randomHex).substring(0,32)}function trackProductOrder(productId,orderItems){var _pageData2;var id=productId&&productId.split(".")[0];var noMatch=true;var product=(_pageData2=pageData)===null||_pageData2===void 0||(_pageData2=_pageData2.selectedCampaign)===null||_pageData2===void 0||(_pageData2=_pageData2.products)===null||_pageData2===void 0?void 0:_pageData2.find(function(prod){return prod.campaignProductId==id});if(product&&product.billingCycleType!=="RECURRING"){productId=product.isVariantBundle?id:productId;for(var _i10 in productOrderArray){if(productOrderArray[_i10]==productId){noMatch=false;break}}noMatch===true&&productOrderArray.push(productId)}if(Object.keys(orderItems).length){var trackerLength=productOrderArray.length-1;for(var _i11=trackerLength;_i11>=0;_i11--){removefromTracker(productOrderArray[_i11],orderItems,_i11)}}else sessionStorage.setItem("productOrderArray",JSON.stringify(productOrderArray))}function removefromTracker(productId,orderItems,i){var noMatch=true,id;var _loop2=function _loop2(){var campaignProductId=id.split(".")[0];var product=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==campaignProductId});id=product&&product.isVariantBundle&&product.campaignProductId==campaignProductId?campaignProductId:id;if(id==productId){noMatch=false;return 1;// break
}};for(id in orderItems){if(_loop2())break}noMatch===true&&productOrderArray.splice(i,1);sessionStorage.setItem("productOrderArray",JSON.stringify(productOrderArray))}var ccVideoLogs=$("[data-video-logs]");var ccVSLKeyMap={86:false,83:false,76:false};if(ccVideoLogs.length){$(window).on("keydown",function(event){if(ccVSLKeyMap[event.keyCode]!==undefined){ccVSLKeyMap[event.keyCode]=true}if(event.shiftKey&&ccVSLKeyMap[86]&&ccVSLKeyMap[83]&&ccVSLKeyMap[76]){ccVSLKeyMap={86:false,83:false,76:false};ccVideoLogs.each(function(){try{var attrValue=$(this).attr("data-video-logs");attrValue&&attrValue.replace(/\s+/g,"").split(";").forEach(function(log){var id=log.split(":")[1];id&&$("#"+id).removeClass("fk-display-none-on-load")})}catch(err){console.log(err)}})}})}window.ccAdjustCarouselArrowDimensions&&window.ccAdjustCarouselArrowDimensions();function ccHideShoppingCartOnLoad(toggleTarget,toggleElement,hide){if(!(toggleTarget&&toggleElement&&toggleTarget.length&&toggleElement.length))return;if(hide){toggleTarget.hide();toggleElement.find(".cc-cart-hidden-text").hide();toggleElement.find(".cc-cart-open-text").show()}else{toggleTarget.show();toggleElement.find(".cc-cart-hidden-text").show();toggleElement.find(".cc-cart-open-text").hide()}}$(".cc-cart-toggle").each(function(){try{var toggleElement=$(this);var hideOnLoad=toggleElement.attr("hideonload");var toggleTarget=toggleElement.closest(".cc-cart-wrapper").find(".cc-cart-toggle-target");if(hideOnLoad==="true"){ccHideShoppingCartOnLoad(toggleTarget,toggleElement,true)}else{var deviceWidth=window.innerWidth;if(deviceWidth<=480){ccHideShoppingCartOnLoad(toggleTarget,toggleElement,toggleElement.attr("hideonloadformobile")==="true")}else if(deviceWidth<=600){ccHideShoppingCartOnLoad(toggleTarget,toggleElement,toggleElement.attr("hideonloadforlargemobile")==="true")}else if(deviceWidth<=768){ccHideShoppingCartOnLoad(toggleTarget,toggleElement,toggleElement.attr("hideonloadfortablet")==="true")}else if(deviceWidth<=992){ccHideShoppingCartOnLoad(toggleTarget,toggleElement,toggleElement.attr("hideonloadforlargetablet")==="true")}else{ccHideShoppingCartOnLoad(toggleTarget,toggleElement,toggleElement.attr("hideonloadfordesktop")==="true")}}}catch(err){console.log(err)}});$(".cc-cart-toggle").on("click",function(event){try{var toggleElement=$(this);var toggleTarget=toggleElement.closest(".cc-cart-wrapper").find(".cc-cart-toggle-target");if(toggleTarget&&toggleTarget.length){if(toggleTarget.is(":hidden")){toggleTarget.show();toggleElement.find(".cc-cart-hidden-text").show();toggleElement.find(".cc-cart-open-text").hide()}else{toggleTarget.hide();toggleElement.find(".cc-cart-hidden-text").hide();toggleElement.find(".cc-cart-open-text").show()}}}catch(err){console.log(err)}});function ccRemoveEmptyKeysForPayload(obj){for(var key in obj){var val=obj[key];if(val===""||val===null||val===undefined){delete obj[key]}}return obj}function ccInitializeStamped(){if(![3,5,7].includes(pageData.pageTypeId)&&ccStampedPluginId){var ccStampedLoadScriptCallback=function ccStampedLoadScriptCallback(){if(window.StampedFn){StampedFn.init({apiKey:stampedPublicKey,storeUrl:stampedStoreHash});if(cookieData["access_token"]){StampedFn.initRewards({customerId:cookieData["stampedCustomerId"],customerEmail:cookieData["stampedCustomerEmail"],customerFirstName:cookieData["stampedCustomerFirstName"],customerLastName:cookieData["stampedCustomerLastName"],customerTags:cookieData["stampedCustomerTags"],totalOrders:Number(cookieData["stampedCustomerOrders"])||0,totalSpent:Number(cookieData["stampedCustomerSpent"])||0,isAcceptMarketing:cookieData["stampedCustomerAcceptMarketing"]==="true",authToken:cookieData["stampedCustomerToken"]})}else{StampedFn.initRewards({})}}};var ccStampedLoadScriptFail=function ccStampedLoadScriptFail(){console.log("Stamped script load failed")};var stampedPublicKey=getAddOnKeyValue(findAddOn("STAMPED_PUBLIC_KEY"));var stampedStoreHash=getAddOnKeyValue(findAddOn("STAMPED_STORE_HASH"));$("#stamped-rewards-init").remove();$("body").append("<div id='stamped-rewards-init' data-widget-type='full-page'></div>");loadScript("https://cdn1.stamped.io/files/widget.min.js",ccStampedLoadScriptCallback,null,"ccStampedScript",null,[{key:"async",value:true}],null,ccStampedLoadScriptFail)}}function ccResetAddToCartButtonStyles(item){try{if(!item)return;var initBtnValue=item.getAttribute("data-text-value")||"Select";var btnSelectedText=item.getAttribute("selectedText")||"Selected";var btnSelectedTextColor=item.getAttribute("selectedTextColor")||"Selected";var initTextColor=$(item).attr("initTextColor"),initBgColor=$(item).attr("initBgColor");if(!initBgColor){var currentBgColor=$(item).css("background-color");$(item).attr("initBgColor",currentBgColor);initBgColor=currentBgColor}if(!initTextColor){var currentTextColor=$(item).css("color");$(item).attr("initTextColor",currentTextColor);initTextColor=currentTextColor}if(item.innerHTML===btnSelectedText){item.innerHTML=initBtnValue;initBgColor?item.style.setProperty("background-color",initBgColor,"important"):item.className="btn btn-primary";btnSelectedTextColor&&initTextColor?item.style.setProperty("color",initTextColor,"important"):null}}catch(err){err}}function ccHandleButtonStylesForRemovedProducts(productId){try{if(!productId)return;var _productData2=productId.toString().split("."),campaignId=Number(_productData2[0]),variantId=Number(_productData2[1]);var query=campaignId&&"[offer='"+campaignId+"']";if(query){query+=variantId?"[variantvalue='"+variantId+"']":"[variantvalue='']";var buttons=$(":not(.fk-product-section)[action='addToCart']"+query+", :not(.fk-product-section)[action='addAndOpenCart']"+query);buttons.each(function(index,btn){ccResetAddToCartButtonStyles(btn)});var buttonSections=$("[action='addToCart'], [action='addAndOpenCart']").closest(".fk-product-section[value='"+campaignId+"']");buttonSections.each(function(index,item){var variantSectionOptions=$(item).find("select[name='variant1'], select[name='variant2'], select[name='variant3'], select[name='productVariant'], .variant-label1, .variant-label2, .variant-label3");var isSelectPresent=variantSectionOptions.length&&!$(variantSectionOptions[0]).is(":visible");var variantSelectionSection=variantId||[17,18].includes(pageData.pageTypeId)&&isSelectPresent?variantSectionOptions.length:!variantSectionOptions.length;variantSelectionSection&&$(item).find("[action='addToCart'], [action='addAndOpenCart']").each(function(index,btn){ccResetAddToCartButtonStyles(btn)})})}}catch(err){err}}function capitalize(s){return s&&s[0].toUpperCase()+s.slice(1)||""}function ccGetTrackingDetails(){var orderData=sessionStorage.getItem("orderData");var params={};var inputs=[].concat(ship,ccBillingFields,["emailAddress","phoneNumber","gender","dob"]);orderData=orderData?JSON.parse(orderData):{};if([3,5].includes(pageData&&pageData.pageTypeId)||["COMPLETE","PENDING","COD_PENDING"].includes(orderData.orderStatus)){inputs.forEach(function(name){params[name]=orderData[name]});params["couponCode"]=orderData["couponCode"];params["currencyCode"]=orderData["currencyCode"]}else{var ccGetTrackingInputValue=function ccGetTrackingInputValue(name,urlParamsObj,orderData){return $("[name='"+name+"']").first().val()||urlParamsObj&&urlParamsObj.get(name)||orderData&&orderData[name]};var ccUpdateNameParams=function ccUpdateNameParams(name,firstNameType,lastNameType,obj){var fullName=name.trim(),pos=fullName.indexOf(" ");obj[firstNameType]=pos>-1?fullName.substring(0,pos):fullName;obj[lastNameType]=pos>-1?fullName.substring(pos+1):null};params["couponCode"]=appliedCouponCode&&appliedCouponCode.length>0?appliedCouponCode.toString():null;params["currencyCode"]=returnCurrencyCode()||pageData.selectedCampaign.currency;inputs.forEach(function(name){params[name]=ccGetTrackingInputValue(name,ccUrlParams,orderData)});params.country=params.country||defaultCountryCode;params.shipCountry=params.shipCountry||defaultCountryCode;params.fullName&&!params.firstName&&ccUpdateNameParams(params.fullName,"firstName","lastName",params);params.shipFullName&&!params.shipFirstName&&ccUpdateNameParams(params.shipFullName,"shipFirstName","shipLastName",params)}delete params["fullName"];delete params["shipFullName"];return params}function ccTrackAddToCartEvent(productDetails){try{var campaignProductId=productDetails&&productDetails.campaignProductId;if(campaignProductId){var params=ccGetTrackingDetails();params["eventType"]="eventAddToCart";params["product1_id"]=campaignProductId;params["product1_qty"]=productDetails.quantity;var variantId=productDetails.variantDetailId;if(variantId)params["variant1_id"]=productDetails.variantDetailId;httpMethod("".concat(providerUrl,"/Plugin/Events"),JSON.stringify(params))}}catch(err){err}}function ccTrackProductViewEvent(productsCollection){try{if(productsCollection){var params=ccGetTrackingDetails();params["eventType"]="eventProductView";var _i12=1;for(var id in productsCollection){if(!Number(id))continue;params["product"+_i12+"_id"]=id;params["product"+_i12+"_qty"]=1;_i12++}httpMethod("".concat(providerUrl,"/Plugin/Events"),JSON.stringify(params))}}catch(err){err}}hidePaymentTemplateButtons();hideInsureShipmentCheckbox();var cardPaymentMethod;/*Google Pay fields ends*/var finishProcessing=false;function checkDomainForRoute(){if(getCurrentWindowLocation().hostname.indexOf("funnelkonnekt.com")>0){return true}if(getCurrentWindowLocation().hostname.indexOf("thisisatestsiteonly.com")>0){return true}return false}function setRadioTilesOnLoad(){var currentItem=sessionStorage.getItem("currentItem");var prodValueLength=currentItem&&currentItem.split(".").length||0;if(prodValueLength<2){var variantRadioTiles=document.querySelectorAll(".variant-parent-div");var variantRadioTilesLength=variantRadioTiles.length;for(var _i13=0;_i13<variantRadioTilesLength;_i13++){var variantRadioTile=variantRadioTiles[_i13];var variantFirstChild=variantRadioTile&&variantRadioTile.firstElementChild;variantFirstChild=variantFirstChild.tagName.toLowerCase()=="div"?variantFirstChild.firstElementChild:variantFirstChild;if(variantFirstChild&&variantFirstChild.firstElementChild){variantFirstChild.firstElementChild.checked=true;if(variantFirstChild.offsetHeight>0){selectRadioTiles(variantFirstChild,"from-on-load")}}}}}//get parameters from the URL query string
if(ccUrlParams.has("couponCode")){sessionStorage.setItem("couponCode",ccUrlParams.get("couponCode"))}if(ccUrlParams.has("paypalAccept")&&ccUrlParams.get("paypalAccept")==="1"&&(ccUrlParams.has("token")&&ccUrlParams.has("PayerID")||ccUrlParams.has("ba_token"))||ccUrlParams.has("finalizeTransaction")&&ccUrlParams.get("finalizeTransaction")==="1"&&ccUrlParams.has("orderId")){finishProcessing=true}//support for products and variants from Shopify
//https://yourcheckoutpage.com/?products=productId:qty;productId:qty;...
//example:  https://yourcheckoutpage.com/?products=32.47:1;159:2;6:1
else if(ccUrlParams.has("products")){sessionStorage.removeItem("ccPageUrlProducts");var orderData=JSON.parse(sessionStorage.getItem("orderData"));var ccPageReferrer=document.referrer||"";var ccPageOrigin=window&&window.location&&window.location.origin;if(orderData&&(orderData.orderStatus==="COMPLETE"||orderData.orderStatus==="PENDING")&&ccPageReferrer&&!ccPageReferrer.startsWith(ccPageOrigin)){//clear orderId, orderData, session, requestUr, totals, leadParams, taxParams, shipParams
sessionStorage.removeItem("orderId");sessionStorage.removeItem("orderData");sessionStorage.removeItem("sessionId");sessionStorage.removeItem("ccExternalSessionId");sessionStorage.removeItem("requestUri");sessionStorage.removeItem("totals");sessionStorage.removeItem("leadParams");sessionStorage.removeItem("taxParams");sessionStorage.removeItem("shipParams")}fkCart={};rebillCart={};customCart={};var ccPageUrlProductsObj={};var urlProducts=ccUrlParams.get("products").split(";");var urlProductsLength=urlProducts.length;for(var _i14=0;_i14<urlProductsLength;_i14++){var product=urlProducts[_i14];var _productData3=product.split(":");var deliveryData=_productData3[0].split("|");var cartKey=Object.keys(fkCart).length.toString()+"~"+deliveryData[0];ccProductId=urlProductsLength==1?deliveryData[0]:null;urlProdOrderTracker.push(_productData3[0]);fkCart[cartKey]=_productData3[1];ccPageUrlProductsObj[deliveryData[0]]=_productData3[1];if(deliveryData.length>1&&deliveryData[1].length>0){rebillCart[cartKey]=deliveryData[1]}if(deliveryData.length>2&&deliveryData[2].length>0){deliveryData[1]=_productData3[1];var len=Object.keys(customCart).length;customCart[len]=deliveryData.join("|").replace(/~/g,":")}}sessionStorage.setItem("fkCart",JSON.stringify(fkCart));sessionStorage.removeItem("rebillCart");if(Object.keys(rebillCart).length>0)sessionStorage.setItem("rebillCart",JSON.stringify(rebillCart));if(Object.keys(customCart).length>0)sessionStorage.setItem("customCart",JSON.stringify(customCart));if(ccTriggerAddToCartForUrlProducts&&Object.keys(ccPageUrlProductsObj).length>0)sessionStorage.setItem("ccPageUrlProducts",JSON.stringify(ccPageUrlProductsObj))}//support for products from WooCommerce
else if(ccUrlParams.has("productId")){fkCart={};var urlProduct=ccUrlParams.get("productId");var urlProductQty=ccUrlParams.has("qty")?ccUrlParams.get("qty"):1;fkCart[urlProduct]=urlProductQty;sessionStorage.setItem("fkCart",JSON.stringify(fkCart));ccProductId=urlProduct}if(ccUrlParams.has("cartId")){sessionStorage.setItem("cartId",ccUrlParams.get("cartId"))}fetchPageData();vatTaxRate=getTaxRate().vatTaxRate;if(ccProductId&&([2,4].includes(pageData.pageTypeId)&&ccDynamicProductSection||pageData.pageTypeId===34)){fkCart={};sessionStorage.setItem("fkCart",JSON.stringify(fkCart));sessionStorage.setItem("currentItem",ccProductId)}//Confirm PayPal
window.tokenConfirmPaypal&&tokenConfirmPaypal();window.ccDisplayOverlayForAmazonPayV2Checkout&&window.ccDisplayOverlayForAmazonPayV2Checkout();if(ccUrlParams.has("errorMsg")){alert("Error Processing Payment: "+ccUrlParams.get("errorMsg"));removeQueryParam("errorMsg")}function removeQueryParam(key){var regex=new RegExp("[?&]"+key+"=[^&]+","gi");history.replaceState({},"",location.pathname+location.search.replace(regex,"").replace(/^&/,"?"))}//Check if the session already available
if(!sessionStorage.length){localStorage.setItem("getSessionStorage".concat(location.host),Date.now())}if(!ccUrlParams.has("PayerID")&&!ccUrlParams.has("ba_token")){sessionStorage.removeItem("paySource");sessionStorage.removeItem("paypalSuccessRoute")}window.addEventListener("storage",function(event){if(event.key==="getSessionStorage".concat(location.host)){localStorage.setItem("sessionStorage".concat(location.host),JSON.stringify(sessionStorage));localStorage.removeItem("sessionStorage".concat(location.host))}else if(event.key==="sessionStorage".concat(location.host)&&!sessionStorage.length){var eventData=JSON.parse(event.newValue);for(var key in eventData){sessionStorage.setItem(key,eventData[key])}}});window.addEventListener("openSectionTimer",function(event){getCurrentWindowLocation().hash=event.detail;$(event.detail).slideDown("slow");smoothScrolling(null)},{once:true});$("[onclick^='goToStep2'], [onclick^='slide'], .fk-2step-link").on("mouseup",function(){setTimeout(function(){return hideCheckBoxSection()},100)});function hideCheckBoxSection(){$("input[type='checkbox']").each(function(){var openCheckboxSectionValue=$(this).attr("opencheckboxsection");if(openCheckboxSectionValue){if($(this).closest(".bump-div-class").length===0){this.checked&&$("#"+openCheckboxSectionValue).hide()}else{this.checked===false&&$("#"+openCheckboxSectionValue).hide()}}})}function hidePaymentTemplateButtons(){document.querySelectorAll(".btnGoogle1, .btnGoogle2").forEach(function(gPayButton){var btnWidth=$(gPayButton.parentNode).css("width");gPayButton.style.display="none";gPayButton.parentNode.style.width=btnWidth})}function ccUpdateSectionCarouselImage(prodSection,imageList){var _imageList;var imageSection=$(prodSection).find(".cc-section-multiple-images");imageList=imageList.filter(function(o){return o});var imageListLength=(_imageList=imageList)===null||_imageList===void 0?void 0:_imageList.length;if(!imageList[0]){imageSection.hide();return}else{imageSection.show()}var container=imageSection.find(".cc-carousel-container, .cc-swiper-carousel-container");container.each(function(){var _this$classList,_slickObj$;var carouselType=this!==null&&this!==void 0&&(_this$classList=this.classList)!==null&&_this$classList!==void 0&&_this$classList.contains("cc-swiper-carousel-container")?"-swiper":"";var slide=(this===null||this===void 0?void 0:this.querySelector(".cc"+carouselType+"-carousel-slide"))||(this===null||this===void 0?void 0:this.querySelector(".cc-thumbnail"+carouselType+"-carousel-slide"));var id=this.getAttribute("id");var slickObj=id&&$("#"+id);if(slide&&slickObj&&(slickObj.slick||slickObj!==null&&slickObj!==void 0&&(_slickObj$=slickObj[0])!==null&&_slickObj$!==void 0&&_slickObj$.swiper)){var findSlideClass=slide.classList.contains("cc"+carouselType+"-carousel-slide")?".cc"+carouselType+"-carousel-slide":".cc-thumbnail"+carouselType+"-carousel-slide";var slides=$(this).find(findSlideClass),slidesLength=slides.length;for(var _i15=slidesLength-1;_i15>=0;_i15--){if(carouselType){!this.swiper?slides[_i15].remove():this.swiper.removeSlide(_i15)}else{slickObj.slick("slickRemove",_i15)}}var slideClone=slide.cloneNode(true);if(carouselType){var wrapper=this.querySelector(".cc-swiper-slider-wrapper");if(wrapper){wrapper.innerHTML=""}}else{this.innerHTML=""}for(var _i16=0;_i16<imageListLength;_i16++){var node=slideClone.cloneNode(true);var img=node.querySelector(".cc"+carouselType+"-carousel-image")||node.querySelector(".cc-thumbnail"+carouselType+"-carousel-image");img.setAttribute("src",imageList[_i16]);img.src=imageList[_i16];if(carouselType){var _wrapper=this.querySelector(".cc-swiper-slider-wrapper");!this.swiper?_wrapper===null||_wrapper===void 0?void 0:_wrapper.append(node):this.swiper.addSlide(_i16,node.outerHTML)}else{slickObj.slick("slickAdd",node.outerHTML)}}slideClone.remove();carouselType?this.swiper&&this.swiper.update():slickObj.slick("refresh")}})}function showVariantImage(prodSection,prodImage,prodValue,prodPrice,prodShipPrice,selectedVariant){if(prodSection&&!prodSection.closest(".fk-product-variant-select")){var _pageData3,_product2;var currentItem=sessionStorage.getItem("currentItem");var sectionClassList=prodSection.classList;var isRefreshBump=sectionClassList.contains("cc-refresh-order-bump");var noDynamicSections=!ccDynamicProductSection&&!dynamicOrderBump;var isDynamicSection=sectionClassList.contains("cc-dynamic-product-section")||sectionClassList.contains("cc-dynamic-order-bump");var isChangeProdSection=sectionClassList.contains("cc-dynamic-change-product")||sectionClassList.contains("cc-change-product-section");var isMultiChangeProductSection=((_pageData3=pageData)===null||_pageData3===void 0?void 0:_pageData3.pageTypeId)===13&&sectionClassList.contains("cc-multi-change-product-section");if(currentItem&&(noDynamicSections||isDynamicSection)&&!isChangeProdSection&&!isMultiChangeProductSection){prodValue=currentItem.split(".")[0]}var variantValues={};var productVariantRadios=prodSection.querySelectorAll("input[class='variant-radio']:checked");var productVariants=prodSection.querySelectorAll("select[name='variant1'], select[name='variant2'], select[name='variant3'], select[name='productVariant']");if(productVariants.length>0){productVariants&&productVariants.forEach(function(variantName){var variantVal=$(variantName).find(":selected").val();var name=$(variantName).attr("name");if(variantVal&&variantVal!=="null"){variantValues[name]=variantVal.replace(/ /g,"")}})}if(productVariantRadios.length>0){var productVariantRadiosLength=productVariantRadios.length;for(var _i17=0;_i17<productVariantRadiosLength;_i17++){var productVariantRadio=productVariantRadios[_i17];if(productVariantRadio.parentElement.offsetHeight>0){var name=productVariantRadio.parentElement.getAttribute("name");var selOption=$(productVariantRadio.parentElement).attr("variantoptionvalue")||productVariantRadio.parentElement.innerText;variantValues[name]=selOption.replace(/ /g,"")}}}var _product=pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.find(function(product){return product.campaignProductId==prodValue});if(!_product)return;if(pageData.pageTypeId===34){var subscriptionRadio=$(prodSection).find(".recurring")[0];if(subscriptionRadio&&subscriptionRadio.checked){var recurringProd=pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==subscriptionRadio.value});_product=recurringProd||_product}}var imagePath=_product.imageUrl,isIncluded=false;isRefreshBump&&imagePath&&$(prodImage).css("display","block");var variantValue=prodSection.getAttribute("variantvalue");var variantDetail=_product.variants.find(function(variant){return variant.variantDetailId.toString()==variantValue});populateDataClass(prodSection,_product,variantDetail,prodValue,1,null,true);var selectedVariantValuesLength=Object.keys(variantValues).length;var productVariantsLength=_product.variants.length;if(selectedVariantValuesLength){var isProductNameSelectorExists=prodSection.querySelectorAll("select[name='productVariant']")[0];var variantId=null;if(isProductNameSelectorExists){variantId=$(isProductNameSelectorExists).val()}for(var o=0;o<productVariantsLength;o++){var variant=_product.variants[o];imagePath=variant.imageUrl!==""?variant.imageUrl:imagePath;isIncluded=false;if(variantId){isIncluded=Number(variantId)===variant.variantDetailId}else{var matchedVariants=0;for(var _i18=1;_i18<=selectedVariantValuesLength;_i18++){var variantOptionName=variant["variantOptionName"+_i18];variantOptionName=variantOptionName&&variantOptionName.replace(/ /g,"");if(variantOptionName===variantValues["variant"+_i18]){matchedVariants+=1}}isIncluded=matchedVariants===selectedVariantValuesLength}if(isIncluded){var variantPrice=parseFloat(variant.price||0);var variantShipPrice=variant.shippingPrice;var productPrice=parseFloat(_product.cycle1_price||0);var currency=pageData.selectedCampaign.currencySymbol;if(imagePath!==""&&prodImage){prodImage.setAttribute("src",imagePath);prodImage.setAttribute("data-src",imagePath)}if(prodPrice){var _pageData4;var itemId=_product.campaignProductId+"."+variant.variantDetailId;var currencyVariantPrice=ccGetProductCurrencyPrice(itemId);var useVariantPrice=(currencyVariantPrice||variant.price)!==null&&!_product.isEditable&&!_product.isVariantBundle;prodPriceValue=useVariantPrice?variantPrice:productPrice;var recommendationDiscount=(_pageData4=pageData)===null||_pageData4===void 0||(_pageData4=_pageData4.currentPage)===null||_pageData4===void 0||(_pageData4=_pageData4.pageProperties)===null||_pageData4===void 0?void 0:_pageData4.find(function(property){return property.pageAttributeName==="RecommendationDiscount"});var recommendationValue=recommendationDiscount&&Number(recommendationDiscount.pageAttributeValue);var currencyPrice=useVariantPrice?Number(currencyVariantPrice):Number(ccGetProductCurrencyPrice(_product.campaignProductId,1));if(recommendationValue){if(currencyPrice)currencyPrice=currencyPrice-currencyPrice*recommendationValue/100;prodPriceValue=prodPriceValue-prodPriceValue*recommendationValue/100}prodPrice.innerHTML=ccFormatCurrency(currencyPrice?currencyPrice:getItemPrice(null,prodPriceValue,1,null).toFixed(2),currency)}if(variantShipPrice!==""&&prodShipPrice){prodShipPrice.innerHTML=variantShipPrice!==null&&!_product.isVariantBundle?ccFormatCurrency(variantShipPrice,currency):ccFormatCurrency(_product.cycle1_shipPrice,currency)}populateDataClass(prodSection,_product,variant,prodValue,1,null,true);break}}}if(!productVariantsLength&&(isDynamicSection||isRefreshBump)){if(imagePath&&prodImage){prodImage.setAttribute("src",imagePath);prodImage.setAttribute("data-src",imagePath)}}var imageUrls=((_product2=_product)===null||_product2===void 0?void 0:_product2.imageUrls)||[""];if(imageUrls!==null&&imageUrls!==void 0&&imageUrls.length){ccUpdateSectionCarouselImage(prodSection,isIncluded&&imagePath?[imagePath].concat(_toConsumableArray(imageUrls)):imageUrls)}isRefreshBump&&!imagePath&&$(prodImage).hide()}}window.onpageshow=function(event){if(event.persisted){window.location.reload()}};var validPhoneNumberFlag="";var phFormatByCountry=getAddOnKeyValue(findAddOn("PH_FORMAT_BY_COUNTRY"));var validPages=pageData.pageTypeId!==17&&pageData.pageTypeId!==18&&pageData.pageTypeId!==34?true:false;var prodStockVerify=getAddOnKeyValue(findAddOn("PROD_STOCK_VERIFY"));var verifyStock=prodStockVerify==="true"&&validPages?true:false;function setSortOrderQuery(){if(ccPaginationElementExists){var sortOrderValue=$("select[name=\"sortOrder\"]").val()||sessionStorage.getItem("productSortOrder");switch(sortOrderValue){case"priceHighToLow":sortOrderQuery="&sortBy=price&sortDir=1";break;case"priceLowToHigh":sortOrderQuery="&sortBy=price&sortDir=0";break;case"nameAToZ":sortOrderQuery="&sortBy=productName&sortDir=0";break;case"nameZToA":sortOrderQuery="&sortBy=productName&sortDir=1";break}}}function callEachCollection(_x7){return _callEachCollection.apply(this,arguments)}function _callEachCollection(){_callEachCollection=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee18(collectionIdArray){var defaultPageSize,_iterator7,_step7,_loop41;return _regeneratorRuntime().wrap(function _callee18$(_context19){while(1)switch(_context19.prev=_context19.next){case 0:setSortOrderQuery();defaultPageSize=ccMaxCollectionProductsOnPage;// Sequentially process each collection
_iterator7=_createForOfIteratorHelper(collectionIdArray.filter(Boolean));_context19.prev=3;_loop41=/*#__PURE__*/_regeneratorRuntime().mark(function _loop41(){var collectionId,_pageData10,_firstResponse$messag,_firstResponse$messag2,baseUrl,campaignId,pgSize,buildUrl,firstResponse,firstProducts,totalProducts,totalPages,pageNum,res,_res$message,pageProducts;return _regeneratorRuntime().wrap(function _loop41$(_context18){while(1)switch(_context18.prev=_context18.next){case 0:collectionId=_step7.value;_context18.prev=1;baseUrl="".concat(providerUrl,"/Collection/live/").concat(collectionId);campaignId=(_pageData10=pageData)===null||_pageData10===void 0||(_pageData10=_pageData10.selectedCampaign)===null||_pageData10===void 0?void 0:_pageData10.campaignId;pgSize=Number(ccPaginationData[collectionId])||defaultPageSize;// Helper to form request URL using pgSize if available
buildUrl=function buildUrl(pageNum){return"".concat(baseUrl,"?resultsPerPage=").concat(pgSize,"&page=").concat(pageNum,"&collections=1").concat(sortOrderQuery)};// Initialize storage
ccPaginatedProducts[collectionId]={};ccCollectionsResponse[collectionId]={};// === First API call ===
_context18.next=10;return httpMethod(buildUrl(1),JSON.stringify({skipRecommendations:1}));case 10:firstResponse=_context18.sent;if(!(!firstResponse||firstResponse.result!=="SUCCESS")){_context18.next=13;break}return _context18.abrupt("return",1);case 13:// Save first response
ccCollectionsResponse[collectionId][1]=firstResponse;firstProducts=((_firstResponse$messag=firstResponse.message)===null||_firstResponse$messag===void 0||(_firstResponse$messag=_firstResponse$messag.data)===null||_firstResponse$messag===void 0||(_firstResponse$messag=_firstResponse$messag[campaignId])===null||_firstResponse$messag===void 0?void 0:_firstResponse$messag.products)||[];ccPaginatedProducts[collectionId][1]=firstProducts;// Compute total products & pages
totalProducts=Number((_firstResponse$messag2=firstResponse.message)===null||_firstResponse$messag2===void 0||(_firstResponse$messag2=_firstResponse$messag2.queryArgs)===null||_firstResponse$messag2===void 0?void 0:_firstResponse$messag2.totalProducts)||0;ccMaxCollectionProducts=totalProducts;totalPages=Math.ceil(totalProducts/pgSize);ccMaxPaginationSize=totalPages;// === Fetch remaining pages (if any) ===
if(!(totalPages>1)){_context18.next=36;break}pageNum=2;case 22:if(!(pageNum<=totalPages)){_context18.next=36;break}_context18.prev=23;_context18.next=26;return httpMethod(buildUrl(pageNum),JSON.stringify({skipRecommendations:1}));case 26:res=_context18.sent;if((res===null||res===void 0?void 0:res.result)==="SUCCESS"){ccCollectionsResponse[collectionId][pageNum]=res;pageProducts=((_res$message=res.message)===null||_res$message===void 0||(_res$message=_res$message.data)===null||_res$message===void 0||(_res$message=_res$message[campaignId])===null||_res$message===void 0?void 0:_res$message.products)||[];// Store current pageâ€™s products
ccPaginatedProducts[collectionId][pageNum]=pageProducts}_context18.next=33;break;case 30:_context18.prev=30;_context18.t0=_context18["catch"](23);_context18.t0;case 33:pageNum++;_context18.next=22;break;case 36:_context18.next=41;break;case 38:_context18.prev=38;_context18.t1=_context18["catch"](1);_context18.t1;case 41:case"end":return _context18.stop()}},_loop41,null,[[1,38],[23,30]])});_iterator7.s();case 6:if((_step7=_iterator7.n()).done){_context19.next=12;break}return _context19.delegateYield(_loop41(),"t0",8);case 8:if(!_context19.t0){_context19.next=10;break}return _context19.abrupt("continue",10);case 10:_context19.next=6;break;case 12:_context19.next=17;break;case 14:_context19.prev=14;_context19.t1=_context19["catch"](3);_iterator7.e(_context19.t1);case 17:_context19.prev=17;_iterator7.f();return _context19.finish(17);case 20:return _context19.abrupt("return",ccCollectionsResponse);case 21:case"end":return _context19.stop()}},_callee18,null,[[3,14,17,20]])}));return _callEachCollection.apply(this,arguments)}function loadCollections(_x8){return _loadCollections.apply(this,arguments)}function _loadCollections(){_loadCollections=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee19(menu){var collectionIdArray,items,collections;return _regeneratorRuntime().wrap(function _callee19$(_context20){while(1)switch(_context20.prev=_context20.next){case 0:if(menu){_context20.next=2;break}return _context20.abrupt("return");case 2:collectionIdArray=[];items=menu.querySelectorAll(".cc-menu-item");items.forEach(function(item,index){var linkElement=item.querySelector("a");if(!linkElement)return;var linkAttrValue=linkElement.getAttribute("link");if(index===0&&linkAttrValue){initialCollectionId=linkAttrValue;// Set initial collection ID from first menu item
}linkElement.setAttribute("onclick","routeMenuItem(event, attributes)");if(linkAttrValue){// Find the matching product row by link
var productRow=$(".fk-product-row[link='".concat(linkAttrValue,"']")).first();if(ccPaginationElementExists){var builderStat=ccGetBuilderScreenSizeStats();var rowMaxProducts=productRow.attr(builderStat.device+"products")||Number(productRow.attr("maxproducts"))||builderStat.defaultMaxProducts;ccPaginationData[linkAttrValue]=rowMaxProducts}// Find and clone the first product column to not loose token string configuration
var firstProductCol=productRow.find(".fk-product-col").first().clone(true);if(firstProductCol.length){multiProdColMap[linkAttrValue]=firstProductCol;collectionIdArray.push(parseInt(linkAttrValue))}}});if(!(Object.keys(ccCollectionsResponse).length===0||collectionIdArray.length!==Object.keys(ccCollectionsResponse).length)){_context20.next=9;break}_context20.next=8;return callEachCollection(collectionIdArray);case 8:collections=_context20.sent;case 9:case"end":return _context20.stop()}},_callee19)}));return _loadCollections.apply(this,arguments)}function callWindowLoad(){sessionStorage.removeItem("previousCurrencySymbol");sessionStorage.removeItem("previousExchangeRate");if(pageData&&pageData.pageTypeId===9){sessionStorage.setItem("fkCart",JSON.stringify({}));sessionStorage.removeItem("ccChangeProductCampaignId");sessionStorage.removeItem("ccCampaignId");var sessionLoginOrder=sessionStorage.getItem("loginOrder");sessionLoginOrder=sessionLoginOrder&&sessionLoginOrder!=="undefined"&&sessionLoginOrder!=="null"&&JSON.parse(sessionLoginOrder);updateMap(sessionLoginOrder)}if(pageData&&[13,17,18,34].includes(pageData.pageTypeId)){$("select[name=quantity]").each(function(){var optionsAsString="";for(var i=1;i<100;i++){optionsAsString+="<option value='"+i+"'>"+i+"</option>"}$(this).empty();$(this).append(optionsAsString);$(this).val(1)});var _currentItem=sessionStorage.getItem("currentItem");var currentQty=sessionStorage.getItem("currentProductQty");var currentNextBillDate=sessionStorage.getItem("currentNextBillDate");var billingIntervalDays=sessionStorage.getItem("billingIntervalDays");var currentPrice=sessionStorage.getItem("currentPrice");if(_currentItem&&pageData.pageTypeId!=18&&pageData.pageTypeId!=17){var _orderItems=getOrderItems();var quantityValue=_orderItems[_currentItem]?_orderItems[_currentItem]:currentQty?currentQty:1;if(quantityValue){$("select[name='quantity'],input[name='quantity']").each(function(){$(this).val(quantityValue)})}if(currentNextBillDate){$("input[name='nextBillDate']").each(function(){$(this).val(currentNextBillDate)})}if(billingIntervalDays){$("input[name='frequency']").each(function(){$(this).val(billingIntervalDays)})}if(currentPrice){$("input[name='price']").each(function(){$(this).val(currentPrice)})}}}if($("select[name=currency]").length){$("select[name=currency]").first().on("change",function(){setPriceAndCurrency(this.value)})}$("a").css({"cursor":"pointer"});loadYoutubeThumbnails();$("input[name=emailAddress]").each(function(){$(this).attr({inputmode:"email"})});$("input[name=postalCode], input[name=shipPostalCode]").each(function(){var checkText=$(this).attr("type")==="text";if(checkText){$(this).removeAttr("pattern inputmode")}var checkNumber=$(this).attr("type")==="numeric";if(checkNumber){$(this).attr({pattern:"[0-9-]*",inputmode:"numeric"})}});$(".fk-product-checkbox-button-parent, .fk-product-radio-button-parent, .fk-form-radio-button-parent").on("click",function(){if(this.classList.contains("fk-product-checkbox-button-parent")){var checkInput=$(this).find("input[type=checkbox]");checkInput&&checkInput.length>0&&checkInput[0].click()}else if(this.classList.contains("fk-product-radio-button-parent")||this.classList.contains("fk-form-radio-button-parent")){var radInput=$(this).find("input[type=radio]");radInput&&radInput.length>0&&radInput[0].click()}});var header=document.getElementsByClassName("cartPanelHeader")[0];if(header){var headerHeight=$(header).css("height");$(header).css({"position":"fixed","top":"0px","width":"100%",boxShadow:"0 3px 5px -1px #0003, 0 6px 10px 0 #00000024, 0 1px 18px 0 #0000001f",zIndex:"10000"});$("body").css({marginTop:headerHeight})}$("[type='radio'][name='billShipSame']").each(function(){if($(this).is(":checked")&&!$(this).hasClass("cc-same-as-shipping")){var id=$(this).attr("opencheckboxsection");id&&$("#"+id).slideDown()}});var surveyOptions=null;if(document.forms["survey-form-radio"]){surveyOptions=document.forms["survey-form-radio"].getElementsByTagName("input")}var surveyOptionsLength=surveyOptions&&surveyOptions.length;for(var _i19=0;_i19<surveyOptionsLength;_i19++){var element=surveyOptions[_i19];var surveySectionElement=$(element).closest("section.fk-section");if(element.attributes.opensurveysection){var nonSurveySectionID="#"+element.attributes.opensurveysection.value;if(nonSurveySectionID.length>1&&$(nonSurveySectionID)&&!$(nonSurveySectionID).is(":hidden")){$(nonSurveySectionID).hide();if($(nonSurveySectionID)[0]&&$(nonSurveySectionID)[0].className==="fk-section"){if(parentSection===""||surveySectionElement.length>0&&parentSection!==surveySectionElement[0].id){surveySectionCount++}parentSection=surveySectionElement.length>0&&surveySectionElement[0].id}}}}decrementSectionCount=surveySectionCount;ccProgressBar=document.getElementById("progressbar");if(ccProgressBar){ccProgressBar.style.width=zeroPercentage;ccProgressBar.innerHTML=zeroPercentage}if(cellFormat.length>0||pageData.pageTypeId===9){displayPrices()}document.querySelector("tr[id='fk-dynamic-orders-row']")&&window.displayOrdersTable&&displayOrdersTable();$(".cc-member-order-table").find(".cc-order-table-row").length&&window.displayOrdersTable&&displayOrdersTable(null,true);document.querySelector("tr[id='fk-dynamic-shipments-row']")&&window.displayShipmentsTable&&displayShipmentsTable();$(".cc-member-shipment-table").find(".cc-shipment-table-row").length&&window.displayShipmentsTable&&displayShipmentsTable(null,true);document.querySelector("tr[id='fk-dynamic-purchases-row']")&&window.displayPurchasesTable&&displayPurchasesTable();$(".cc-member-purchase-table").find(".cc-purchase-table-row").length&&window.displayPurchasesTable&&displayPurchasesTable(null,true);var surveyInputs=$("input[name*='fk-survey-radio']");stopEventPropogationForInputs(surveyInputs,"surveyInputs");var productInputs=_toConsumableArray(document.getElementsByName("product"));for(var _i20=1;_i20<=2;_i20++){var inputSelector="product"+_i20;productInputs=[].concat(_toConsumableArray(productInputs),_toConsumableArray(document.getElementsByName(inputSelector)))}stopEventPropogationForInputs(productInputs,"productInputs");var ccBundleVariant=document.getElementsByClassName("cc-bundle-variants")[0];ccBundleVariant&&ccBundleVariant.addEventListener("change",function(e){e.stopPropagation();displayPrices()});var orderBumpInputs=document.getElementsByName("orderBump");if(orderBumpInputs){var orderBumpInputsLength=orderBumpInputs.length;for(var _i21=0;_i21<orderBumpInputsLength;_i21++){var input=orderBumpInputs[_i21];if(input.type==="checkbox"){var orderBumpParent=$("#"+input.id).closest(".bump-div-class");adjustVariantOrderBump(orderBumpParent,input.checked);displayPrices()}}}// PAYMENT METHODS CONFIGURATION
var PAYMENT_METHODS_CONFIG={affirm:{paySource:"AFFIRM",className:"affirmButton",hasScript:true,scriptLoader:function scriptLoader(pageData){var affirm_api_key=pageData.funnelData.addOns.filter(function(addOns){return addOns.keyName==="AFFIRM_API_KEY"});window._affirm_config={public_api_key:affirm_api_key[0]&&affirm_api_key[0].keyValue,script:"https://cdn1.affirm.com/js/v2/affirm.js"};(function(l,g,m,e,a,f,b){var d,c=l[m]||{},h=document.createElement(f),n=document.getElementsByTagName(f)[0],k=function k(a,b,c){return function(){a[b]._.push([c,arguments])}};c[e]=k(c,e,"set");d=c[e];c[a]={};c[a]._=[];d._=[];c[a][b]=k(c,a,b);a=0;for(b="set add save post open empty reset on off trigger ready setProduct".split(" ");a<b.length;a++)d[b[a]]=k(c,e,b[a]);a=0;for(b=["get","token","url","items"];a<b.length;a++)d[b[a]]=function(){};h.async=!0;h.src=g[f];n.parentNode.insertBefore(h,n);delete g[f];d(g);l[m]=c})(window,window._affirm_config,"affirm","checkout","ui","script","ready")}},klarna:{paySource:"KLARNA",className:"klarnaButton"},sezzle:{paySource:"SEZZLE",className:"sezzleButton"},afterpay:{paySource:"AFTERPAY",className:"afterpayButton",hasScript:true,scriptLoader:function scriptLoader(){var script="<script src=\"https://js.afterpay.com/afterpay-1.x.js\" data-analytics-enabled async></script>";$("head").append(script)}},bancontact:{paySource:"BANCONTACT",className:"bancontactButton"},ideal:{paySource:"IDEAL",className:"idealButton"},swish:{paySource:"SWISH",className:"swishButton"},blik:{paySource:"BLIK",className:"blikButton"},mobilepay:{paySource:"MOBILEPAY",className:"mobilepayButton"},p24:{paySource:"P24",className:"p24Button"},eps:{paySource:"EPS",className:"epsButton"},splitit:{paySource:"SPLITIT",className:"splitItButton"},radom:{paySource:"RADOM",className:"radomButton"},coinsub:{paySource:"COINSUB",className:"coinsubButton"},trustly:{paySource:"TRUSTLY",className:"trustlyButton"},twint:{paySource:"TWINT",className:"twintButton"},multibanco:{paySource:"MULTIBANCO",className:"multibancoButton"},mbway:{paySource:"MBWAY",className:"mbwayButton"},bizum:{paySource:"BIZUM",className:"bizumButton"},payu:{paySource:"PAYU",className:"payuButton"},kakaopay:{paySource:"KAKAOPAY",className:"kakaopayButton"},naverPay:{paySource:"NAVERPAY",className:"naverPayButton"},payco:{paySource:"PAYCO",className:"paycoButton"},alipay:{paySource:"ALIPAY",className:"alipayButton"},weChatPay:{paySource:"WECHATPAY",className:"weChatPayButton"},payPay:{paySource:"PAYPAY",className:"payPayButton"},wellnessPay:{paySource:"WELLNESS",className:"wellnessPayButton"},sepa:{paySource:"SEPA_DEBIT",className:"sepaButton"},boleto:{paySource:"BOLETO",className:"boletoButton"},pix:{paySource:"PIX",className:"pixButton"},shopPay:{paySource:"SHOPPAY",className:"shopPayButton"},bitPay:{paySource:"BITPAY",className:"bitPayButton"},cod:{paySource:"COD",className:"cod-button"},prepaid:{paySource:"PREPAID-TYPE",className:"prepaidButton"}};// GENERIC PAYMENT BUTTON INITIALIZER
/**
     * Initialize all payment buttons with click handlers and scripts
     * Callback function to execute on button click
     * Page data for script configuration (optional)
     */function initializePaymentButtons(){var pageData=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};// Initialize standard payment methods
Object.entries(PAYMENT_METHODS_CONFIG).forEach(function(_ref6){var _ref7=_slicedToArray(_ref6,2),key=_ref7[0],config=_ref7[1];var buttons=document.querySelectorAll(".".concat(config.className));if(buttons.length>0){// Attach click handlers to all buttons
buttons.forEach(function(button){button.onclick=function(event){sessionStorage.setItem("paySource",config.paySource);callMethod(event)}});// Load external scripts if needed
if(config.hasScript&&config.scriptLoader){config.scriptLoader(pageData)}}});// Handle PayPal special case
initializePayPalButtons()}/**
     * Initialize PayPal buttons (special case with custom handling)
     */function initializePayPalButtons(){var paypalButtons=document.querySelectorAll(".btnPayPal, .btnPayPal2");if(window.loadPaypalButtons){window.loadPaypalButtons(paypalButtons)}else{paypalButtons.forEach(function(payPalButton){var btnWidth=$(payPalButton.parentNode).css("width");payPalButton.style.display="none";payPalButton.parentNode.style.width=btnWidth})}}initializePaymentButtons(pageData);var setUpMasking=function setUpMasking(input,name,example){input.classList.add("fkmasked");input.removeAttribute("maxlength");input.dataset.validDataExample=example;input.addEventListener("keyup",function(e){handleMaskedInputChange(e)});window.addEventListener("keyup",function(e){e.target.name===name&&handleMaskedInputChange(e)})};var cardDateInput=document.getElementsByName("cardDate")[0];if(cardDateInput){cardDateInput.dataset.pattern=cardDateRegex;setUpMasking(cardDateInput,"cardDate","11/18")}var placeHolderMasked=function placeHolderMasked(input,attributeName){var placeHolder=input.getAttribute(attributeName);var alphabetsRegex=new RegExp("[a-z]","i");if(placeHolder){return!alphabetsRegex.test(placeHolder)}else{return false}};var phoneNumberInput=document.getElementsByName("phoneNumber")[0];if(phoneNumberInput){try{if(phFormatByCountry==="true"){phoneNumberInput.removeAttribute("format");$("head").append("<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/css/intlTelInput.css'>");$("head").append("<script src='https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/js/intlTelInput.min.js'></script>");$("head").append("<script src='https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/js/utils.js'></script>");phoneNumberInput.classList.add("intelPhoneInput");$("<span id='error-msg' class='"+commonErrorClass+" hide floatRight"+"'></span>").insertAfter("[name='phoneNumber']");var intlPhoneNumberInput=document.getElementsByClassName("intelPhoneInput")[0];if(intlPhoneNumberInput){var _orderData=JSON.parse(sessionStorage.getItem("orderData"));var customerOrders=JSON.parse(sessionStorage.getItem("customerOrders"));var customerCountry=customerOrders?customerOrders.country:"";var orderCountry=_orderData?_orderData.shipCountry:"";$("head").append("<style> #error-msg{color:red;} .floatRight{float: right; } .hide{ display:none; } .intelPhoneInput{ width:100% !important;padding-left: 100px !important; } .iti{width:100% !important;}</style>");var shipCountry=document.getElementsByName("shipCountry")[0];var billCountry=document.getElementsByName("country")[0];var _input=document.querySelector(".intelPhoneInput");var errorMsg=document.querySelector("#error-msg");$.when($.getScript("https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/js/utils.js"),$.getScript("https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/js/intlTelInput.min.js"),$.Deferred(function(deferred){$(deferred.resolve)})).done(function(){var errorMap=["Invalid number","Invalid country code","Invalid number","Invalid number","Invalid number","Invalid number","Invalid number"];// init plugin
var iti=window.intlTelInput(_input,{formatOnDisplay:true,separateDialCode:true,strictMode:true,autoPlaceholder:"aggressive",initialCountry:customerCountry||orderCountry||defaultCountryCode,preferredCountries:["us","ca"],utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@23.0.12/build/js/utils.js"// just for formatting/placeholders etc
});iti&&iti.promise&&iti.promise.then(function(){validateNumber();$(_input).on("blur",function(){// on blur: validate
validateNumber()})});_input.addEventListener("countrychange",function(e){_input.value="";maskingPhoneNumber()});maskingPhoneNumber();function maskingPhoneNumber(){if(placeHolderMasked(_input,"placeholder")){setUpMasking(_input,"phoneNumber",_input.getAttribute("placeholder"))}}billCountry?billCountry.addEventListener("change",function(){iti.setCountry(this.value)}):"";shipCountry?shipCountry.addEventListener("change",function(){iti.setCountry(this.value)}):"";var reset=function reset(){validPhoneNumberFlag="";_input.classList.remove("error");errorMsg.innerHTML="";errorMsg.classList.add("hide");$(".intelPhoneInput").css("outline","1px solid transparent")};function validateNumber(){reset();var placeholder=_input.getAttribute("placeholder").replace(/[\(\)\-\s]/g,"");placeholder=placeholder.replace(integerRegex,"");var phLength=placeholder.length;var valueLength=_input.value.replace(/[\(\)\-\s]/g,"").length;function errorDisplay(){validPhoneNumberFlag="false";_input.classList.add("error");var errorCode=iti.getValidationError();errorMsg.classList.remove("hide");$(".intelPhoneInput").css("outline","1px solid red");if(errorMsg){errorMsg.innerHTML=errorMap[errorCode]?errorMap[errorCode]:"Please correct the number"}}phInputCode=iti.getSelectedCountryData().dialCode;var userInput=_input.value;if(phInputCode==="49"){var phoneValue=_input.value.replaceAll(" ","");var numberOfZeros=11-phoneValue.length;var zeroString="0";for(var _i22=1;_i22<numberOfZeros;_i22++){zeroString+="0"}_input.value=zeroString+_input.value}if(_input.value.trim()){if(iti.isValidNumber()){_input.value=userInput;phInputCode=iti.getSelectedCountryData().dialCode;if(valueLength&&phLength&&phLength>=4&&phInputCode!="49"&&valueLength!==phLength){errorDisplay()}else{validPhoneNumberFlag="true";$(".intelPhoneInput").css("outline","1px solid transparent")}}else{errorDisplay()}}}// on keyup / change flag: reset
_input.addEventListener("change",reset);_input.addEventListener("keyup",reset)})}}else{var format=phoneNumberInput.getAttribute("format");var attributeToMask=format?"format":"placeholder";if(placeHolderMasked(phoneNumberInput,attributeToMask)){phoneNumberInput.dataset.pattern=phoneNumberRegex;setUpMasking(phoneNumberInput,"phoneNumber",format||phoneNumberInput.getAttribute("placeholder"))}else{phoneNumberInput.addEventListener("keyup",function(){phoneNumberInput.value=phoneNumberInput.value.replace(commonPhoneNumberRegex,"").replace(",","").replace("/","")})}}}catch(err){console.log(err)}}var cardNumberInput=document.getElementsByName("cardNumber")[0];function formatCardNumber(e,userDefinedPlaceholder){var value=e.target.value;value=value.replace(integerRegex,"");var maxLength,inputPattern,format;if(value==""){format=userDefinedPlaceholder.length>0?userDefinedPlaceholder:"";setInputAttributes("",format,"")}else if(amexRegex.test(value)){setInputAttributes(17,"1111 111111 11111",amexFormatRegex)}else if(dinersClubRegex.test(value)){setInputAttributes(16,"1111 111111 1111",dinerFormatRegex)}else if(ccCCardSupport19Digits&&other19DigitsCCard.test(value)){setInputAttributes(23,"1111 1111 1111 1111 111",other19DigitsCardNumberRegex)}else if(regularCCard.test(value)){setInputAttributes(19,"1111 1111 1111 1111",cardNumberRegex)}function setInputAttributes(maxLength,format,inputPattern){e.target.setAttribute("placeholder",format);e.target.dataset.pattern=inputPattern;format!=""?setUpMasking(cardNumberInput,"cardNumber",format):"";e.target.setAttribute("maxlength",maxLength)}}if(cardNumberInput&&placeHolderMasked(cardNumberInput,"placeholder")){cardNumberInput.dataset.pattern=cardNumberRegex;setUpMasking(cardNumberInput,"cardNumber",cardNumberInput.getAttribute("placeholder"))}else if(cardNumberInput){var userDefinedPlaceholder=cardNumberInput.getAttribute("placeholder");cardNumberInput.addEventListener("input",function(){return formatCardNumber(event,userDefinedPlaceholder)})}var currentItem=sessionStorage.getItem("currentItem");setRadioTilesOnLoad();showVariantImageOnProductSection();autoLoadInputs();if(pageData.pageTypeId===4||pageData.pageTypeId==="Checkout"){initInputAutoLoad();!finishProcessing&&captureLead(true,null,true)}if(pageData.funnelData.isMenuEnabled){getMenuList()}paymentOptionElementDisplayHandler();hideCollapsibleListBodyOnLoad();// Menu list functionality
$("ul.dropdown-menu [data-toggle='dropdown']").on("click",function(event){event.preventDefault();event.stopPropagation();$(this).siblings().toggleClass("show");if(!$(this).next().hasClass("show")){$(this).parents(".dropdown-menu").first().find(".show").removeClass("show")}$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(e){$(".dropdown-submenu .show").removeClass("show")})});$(".overlay").on("click",function(){$(".overlay").removeClass("active")});$(".side-nav-list-item, .side-nav-list-item-child").on("click",function(e){e.stopPropagation();$(this).find("ul").first().toggleClass("show");$(this).toggleClass("active")});handlePaymentElement();var slideAttributes=document.querySelectorAll("button, a, input[type='checkbox'], input[type='radio']");var imageElements=document.querySelectorAll("img");slideAttributes.forEach(function(element){var surveySectionElement=$(element).closest("section.fk-section");if(element.attributes.openid){var hideLinkID="#"+element.attributes.openid.value;$(hideLinkID).hide()}if(element.tagName=="A"&&element.title=="Product Images"){imageElements.forEach(function(img){var prodSection=$(img).closest("section.fk-product-section");var prodSectionValue=prodSection&&$(prodSection).attr("value");var productCardContainerObj=$(img).closest(".fk-product-card-container");var productCardContainerElementExists=productCardContainerObj.length;if(prodSectionValue||productCardContainerElementExists){$(element).attr("offer",prodSectionValue);$(element).attr("action","route");element.style.display="block";element.style.cursor="pointer";productCardContainerElementExists?$(productCardContainerObj).wrap(element):$(img).wrap(element)}})}if(element.attributes.opensurveysection){var _nonSurveySectionID="#"+element.attributes.opensurveysection.value;if(_nonSurveySectionID.length>1&&$(_nonSurveySectionID)&&!$(_nonSurveySectionID).is(":hidden")){$(_nonSurveySectionID).hide();if($(_nonSurveySectionID)[0]&&$(_nonSurveySectionID)[0].className==="fk-section"){if(parentSection===""||surveySectionElement.length>0&&parentSection!==surveySectionElement[0].id){surveySectionCount++}parentSection=surveySectionElement.length>0&&surveySectionElement[0].id}}}if(element.attributes.openCheckBoxSection&&element.attributes.openCheckBoxSection.value!=""){var attrType=element.attributes.type;if(attrType&&attrType.nodeValue=="radio"){var openCheckBoxSectionValue=element.attributes.openCheckBoxSection.value;if(openCheckBoxSectionValue){var checkedValue=element.checked;if(checkedValue){$("#"+openCheckBoxSectionValue).slideDown()}else{$("#"+openCheckBoxSectionValue).hide()}}}else{var shippingSectionID="#"+element.attributes.openCheckBoxSection.value;if($(shippingSectionID)&&!$(shippingSectionID).is(":hidden")){$(shippingSectionID).hide()}}}if(element.classList.contains("fk-hide-on-load")){var classes=element.classList;classes.forEach(function(e){if(e&&(e.substring(0,5)==="delay"||e.includes("fk-animation-delay")))element.classList.remove(e)});var minutesDelayAttribute=element.attributes["data-minutesdelay"]&&element.attributes["data-minutesdelay"].value;var secondsDelayAttribute=element.attributes["data-secondsdelay"]&&element.attributes["data-secondsdelay"].value;var delayValue=parseInt(parseInt(minutesDelayAttribute===""||isNaN(minutesDelayAttribute)?0:parseInt(minutesDelayAttribute))*60)+parseInt(parseInt(secondsDelayAttribute==="")||isNaN(secondsDelayAttribute)?0:secondsDelayAttribute);if(minutesDelayAttribute!==undefined||secondsDelayAttribute!==undefined){$("#"+element.attributes["id"].value).css("animation-delay",delayValue+"s")}};});if([17,18].includes(pageData.pageTypeId)&&multiCollectionMenu){loadCollections(multiCollectionMenu)}if((pageData.pageTypeId===18||pageData.pageTypeId===17)&&$(".fk-product-row").first().find(".fk-product-col").length){var pageSize,pageNumber=1;if(ccPaginationElementExists){var builderStat=ccGetBuilderScreenSizeStats();var productRow=multiCollectionMenu?$(".fk-product-row[link='".concat(initialCollectionId,"']")).first():$(".fk-product-row").first();ccMaxCollectionProductsOnPage=Number(productRow.attr(builderStat.device+"products"))||(multiCollectionMenu?Number(productRow.attr("maxproducts")):builderStat.defaultMaxProducts);pageSize=ccMaxCollectionProductsOnPage}ccCurrentCollectonId=multiCollectionMenu?initialCollectionId:getCurrentCollectionId();invokeCollectionApi(ccCurrentCollectonId,false,true,pageSize,pageNumber).then(function(){$(".fk-hide-on-load").css("visibility","visible");replaceTokens();var collectionName=sessionStorage.getItem("ccCollectionName");collectionName&&$(".cc-collection-name-label").html(collectionName)})}else{$(".fk-hide-on-load").css("visibility","visible");pageData.pageTypeId!==34&&replaceTokens()}}var removedClassMap=new Map;function removeClassNames(classNames){removedClassMap.clear();classNames.forEach(function(className){var elements=Array.from(document.querySelectorAll(".".concat(className)));removedClassMap.set(className,elements);elements.forEach(function(el){return el.classList.remove(className)})})}function restoreClassNames(){removedClassMap.forEach(function(elements,className){elements.forEach(function(el){return el.classList.add(className)})});removedClassMap.clear()}function isVisible(el){return!!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}function makeElementAndParentsVisible(el){if(!el){return}var visibilityChanges=[];var current=el.parentElement;while(current&&!isVisible(el)){var computed=window.getComputedStyle(current);if(computed.display==="none"){visibilityChanges.push({element:current,originalDisplay:current.style.display});current.style.display="block"}current=current.parentElement}return visibilityChanges}function restoreOriginalVisibility(changes){if(!changes){return}changes.forEach(function(_ref8){var element=_ref8.element,originalDisplay=_ref8.originalDisplay;element.style.display=originalDisplay||""})}var ccAvlElements;function findCardContainerByName(){var names=["cardNumber","cardDate","cardMonth","cardYear","cardSecurityCode"];ccAvlElements=names.map(function(name){return document.querySelector("[name=\"".concat(name,"\"]"))}).filter(Boolean);if(ccAvlElements.length===0)return null;var forms=ccAvlElements.map(function(el){return el.closest("form")}).filter(Boolean);if(forms.length){var form=forms[0];if(forms.every(function(f){return f===form})&&isContainerStrict(form,ccAvlElements)){return form}}var div=findStrictCommonDiv(ccAvlElements);return div||null}function findStrictCommonDiv(elements){var first=elements[0];var divAncestors=getDivAncestors(first);var _iterator=_createForOfIteratorHelper(divAncestors),_step;try{var _loop3=function _loop3(){var div=_step.value;if(elements.every(function(el){return div.contains(el)})&&isContainerStrict(div,elements)){return{v:div}}},_ret;for(_iterator.s();!(_step=_iterator.n()).done;){_ret=_loop3();if(_ret)return _ret.v}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null}function isContainerStrict(container,elements){var allowed=new Set(elements);var inputs=container.querySelectorAll("input, select, textarea");var _iterator2=_createForOfIteratorHelper(inputs),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var input=_step2.value;if(!allowed.has(input))return false}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return true}function getDivAncestors(el){var divs=[];var cur=el.parentElement;while(cur){if(cur.tagName.toLowerCase()==="div")divs.push(cur);cur=cur.parentElement}return divs}var wrapFlexParent=function wrapFlexParent(el){var style=window.getComputedStyle(el);if(style.display==="flex"&&style.flexWrap==="nowrap"){el.style.flexWrap="wrap"}};function replaceCardContainerWithIframe(_ref9){var sessionId=_ref9.sessionId,token=_ref9.token,referenceId=_ref9.referenceId,origin=_ref9.origin;var container=findCardContainerByName();if(!container){console.warn("Card container not found");return}var _cloneWithComputedSty=cloneWithComputedStyles(container),computedHtml=_cloneWithComputedSty.computedHtml,computedStyle=_cloneWithComputedSty.computedStyle;var styleContent=getAllStyleTags()+computedStyle;var parent=container.parentElement;wrapFlexParent(parent);var parentStyles=window.getComputedStyle(parent);var rect=container.getBoundingClientRect();var rectStyle=window.getComputedStyle(container);var iframeSrc="https://".concat(iframeURL,"/?s=").concat(sessionId,"&t=").concat(token,"&r=").concat(referenceId,"&o=").concat(origin);var iframe=document.createElement("iframe");if(container.id){iframe.id=container.id}if(container.className){iframe.className=container.className}iframe.name="cc-secured-form";iframe.setAttribute("scrolling","no");iframe.setAttribute("frameborder","0");iframe.style.display=parentStyles.display==="flex"?"flex":"block";iframe.style.boxSizing=parentStyles.boxSizing||"border-box";iframe.style.position=parentStyles.position;iframe.style.margin="0";iframe.style.border="none";var propsToCopy=["width","height","minWidth","minHeight","maxWidth","maxHeight","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderRadius","borderWidth","borderStyle","borderColor","backgroundColor","boxShadow","transform","alignSelf","justifySelf","placeSelf","float","clear"];for(var _i23=0,_propsToCopy=propsToCopy;_i23<_propsToCopy.length;_i23++){var prop=_propsToCopy[_i23];iframe.style[prop]=parentStyles.getPropertyValue(prop)}iframe.style.width=rect.width+"px";var padBottom=parseFloat(rectStyle.paddingBottom)||0;iframe.style.height=rect.height+padBottom+"px";iframe.style.paddingBottom="0";iframe.setAttribute("allow","payment");var currentPaddingRight=rectStyle.paddingRight;iframe.src=iframeSrc;container.replaceWith(iframe);createHiddenInputsFromElements(iframe,ccAvlElements);window.addEventListener("message",function(event){var _event$data2,_event$data3,_event$data4,_event$data5;if((_event$data2=event.data)!==null&&_event$data2!==void 0&&_event$data2.ccSecureApp&&(_event$data3=event.data)!==null&&_event$data3!==void 0&&_event$data3.init){iframe.contentWindow.postMessage({ccSecureAppChild:true,init:true,html:computedHtml,styles:styleContent},"*");elementSecured=true}else if((_event$data4=event.data)!==null&&_event$data4!==void 0&&_event$data4.ccSecureApp&&(_event$data5=event.data)!==null&&_event$data5!==void 0&&_event$data5.pr){var paddingRight=parseFloat(currentPaddingRight);if(paddingRight>0){var _event$data6;var newPaddingRight=Math.max(0,paddingRight-((_event$data6=event.data)===null||_event$data6===void 0?void 0:_event$data6.pr));iframe.style.paddingRight=newPaddingRight+"px"}}})}function createHiddenInputsFromElements(iframe,elements){if(!iframe||!Array.isArray(elements)||elements.length===0)return null;var hiddenContainer=document.createElement("div");hiddenContainer.setAttribute("data-hidden-fields","true");elements.forEach(function(el){var hiddenInput=document.createElement("input");hiddenInput.type="hidden";hiddenInput.name=el.name;hiddenInput.value=el.value||"";hiddenContainer.appendChild(hiddenInput)});if(hiddenContainer.children.length>0){iframe.insertAdjacentElement("afterend",hiddenContainer);return hiddenContainer}return null}function getInheritedBackgroundColorCSS(el){var stopAt=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document.body;var selector=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"body";var current=el;var foundColor=null;while(current&&current!==stopAt){var color=window.getComputedStyle(current).backgroundColor;if(color&&color!=="transparent"&&!color.endsWith(", 0)")){foundColor=color;break}current=current.parentElement}if(!foundColor){var stopColor=window.getComputedStyle(stopAt).backgroundColor;if(stopColor&&stopColor!=="transparent"&&!stopColor.endsWith(", 0)")){foundColor=stopColor}}if(!foundColor){foundColor="#ffffff"}return"".concat(selector," { background-color: ").concat(foundColor," !important; }")}function cloneWithComputedStyles(element){var clone=element.cloneNode(true);var baseRect=element.getBoundingClientRect();var pseudoCSS=[];var placeholderProps=["color","opacity","font-size","font-family","font-style","font-weight","letter-spacing","line-height","text-transform","text-align","-webkit-text-fill-color"];var ALLOWED_PROPS=["display","position","top","left","right","bottom","width","height","padding","margin","border","border-radius","font-size","font-family","font-weight","font-style","line-height","color","background","background-color","text-align","vertical-align","align-items","justify-content","gap","flex","flex-direction","flex-wrap","white-space","text-transform","opacity","transform","box-sizing"];function applyComputed(source,target,baseRect){var _source$tagName;if(((_source$tagName=source.tagName)===null||_source$tagName===void 0?void 0:_source$tagName.toLowerCase())==="script"){target.remove();return}var style=window.getComputedStyle(source);var rect=source.getBoundingClientRect();var computed={};for(var _i24=0,_ALLOWED_PROPS=ALLOWED_PROPS;_i24<_ALLOWED_PROPS.length;_i24++){var prop=_ALLOWED_PROPS[_i24];computed[prop]=style.getPropertyValue(prop)}if(["absolute","fixed"].includes(style.position)){var ancestor=source.parentElement;while(ancestor&&ancestor!==element){var _ancestorStyle=window.getComputedStyle(ancestor);if(["relative","absolute","fixed","sticky"].includes(_ancestorStyle.position))break;ancestor=ancestor.parentElement}var referenceRect=ancestor?ancestor.getBoundingClientRect():baseRect;var ancestorStyle=ancestor?window.getComputedStyle(ancestor):window.getComputedStyle(element);var padTop=parseFloat(ancestorStyle.paddingTop)||0;var padLeft=parseFloat(ancestorStyle.paddingLeft)||0;var borderTop=parseFloat(ancestorStyle.borderTopWidth)||0;var borderLeft=parseFloat(ancestorStyle.borderLeftWidth)||0;computed.position="absolute";computed.top=Math.ceil(rect.top-referenceRect.top-padTop-borderTop)+"px";computed.left=Math.round(rect.left-referenceRect.left-padLeft-borderLeft)+"px";computed.width=Math.ceil(rect.width)+"px";computed.height=Math.round(rect.height)+"px";computed.right="auto";computed.bottom="auto";computed.transform="none"}var parent=source.parentElement;if(parent){var parentStyle=window.getComputedStyle(parent);var parentHeightFixed=parentStyle.height!=="auto"&&parentStyle.display!=="flex"&&parentStyle.display!=="grid";if(parentHeightFixed){var mt=parseFloat(style.marginTop)||0;var mb=parseFloat(style.marginBottom)||0;if(mt){computed.transform="".concat(computed.transform||""," translateY(").concat(mt,"px)");computed.marginTop="0px"}if(mb&&parent!==element){var _target$parentElement;var newHeight=parseFloat(parentStyle.height)+mb;(_target$parentElement=target.parentElement)===null||_target$parentElement===void 0||(_target$parentElement=_target$parentElement.style)===null||_target$parentElement===void 0||_target$parentElement.setProperty("height","".concat(newHeight,"px"),"important");computed.marginBottom="0px"}}}var parentIsFlex=source!==element&&source.parentElement&&source.parentElement!=element&&window.getComputedStyle(source.parentElement).display==="flex";var inline="";for(var _i25=0,_Object$entries2=Object.entries(computed);_i25<_Object$entries2.length;_i25++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i25],2),key=_Object$entries2$_i[0],val=_Object$entries2$_i[1];if(parentIsFlex&&(key==="padding"||key.startsWith("padding-"))){inline+="padding:0px;"}else{inline+="".concat(key,":").concat(val,";")}}target.setAttribute("style",inline);var _loop4=function _loop4(){var pseudo=_arr[_i26];var pseudoStyle=window.getComputedStyle(source,pseudo);var content=pseudoStyle.content;if(content&&content!=="none"){var cls="pseudo-".concat(pseudo.replace("::",""),"-").concat(pseudoCSS.length);target.classList.add(cls);var propertyNames=pseudo=="::placeholder"?placeholderProps:Array.from(pseudoStyle);var cssText=propertyNames.map(function(p){return"".concat(p,":").concat(pseudoStyle.getPropertyValue(p),";")}).join("");if(pseudo=="::placeholder"){var sourceElementName=source.getAttribute("name");if(sourceElementName){pseudoCSS.push("[name=\"".concat(sourceElementName,"\"]").concat(pseudo,"{").concat(cssText,"}"));pseudoCSS.push("[name=\"".concat(sourceElementName,"\"]::-webkit-input-placeholder{").concat(cssText,"}"))}else{pseudoCSS.push(".".concat(cls).concat(pseudo,"{").concat(cssText,"}"));pseudoCSS.push(".".concat(cls,"::-webkit-input-placeholder{").concat(cssText,"}"))}}else{pseudoCSS.push(".".concat(cls).concat(pseudo,"{").concat(cssText,"}"))}}};for(var _i26=0,_arr=["::before","::after"];_i26<_arr.length;_i26++){_loop4()}var srcChildren=Array.from(source.children);var tgtChildren=Array.from(target.children);for(var _i27=0;_i27<srcChildren.length;_i27++){applyComputed(srcChildren[_i27],tgtChildren[_i27],baseRect)}if(source.children.length>0){var _srcChildren=Array.from(source.children);var firstRect=_srcChildren[0].getBoundingClientRect();var lastRect=_srcChildren[_srcChildren.length-1].getBoundingClientRect();var parentRect=source.getBoundingClientRect();var visualTop=firstRect.top-parentRect.top;var visualBottom=lastRect.bottom-parentRect.top;var totalVisualHeight=visualBottom-visualTop;var _style=window.getComputedStyle(source);var hasFixedHeight=_style.height!=="auto";if(hasFixedHeight&&totalVisualHeight>parentRect.height){target.style.setProperty("height",Math.round(totalVisualHeight)+"px","important")}}}applyComputed(element,clone,baseRect);return{computedHtml:clone.outerHTML,computedStyle:"<style>".concat(getInheritedBackgroundColorCSS(element)).concat(pseudoCSS.join("\n"),"</style>")}}function getAllStyleTags(){var combined="";document.querySelectorAll("style").forEach(function(style){combined+=style.outerHTML+"\n"});document.querySelectorAll("link[rel=\"stylesheet\"]").forEach(function(link){combined+=link.outerHTML+"\n"});return combined}var paymentElementHandled=false;function handlePaymentElement(){if(pageData.pageTypeId==4&&!paymentElementHandled){var sessionId=sessionStorage.getItem("ccExternalSessionId");if(sessionId){paymentElementHandled=true;var classList=["fk-payment-options-hide-on-load","fk-display-none-on-load"];var params={apiUrl:providerUrl,sessionId:sessionId,token:pageData.salt,referenceId:pageData.funnelReferenceId,origin:window.location.origin};removeClassNames(classList);var cardNumberElement=document.getElementsByName("cardNumber");var tempDisplayedElements=makeElementAndParentsVisible(cardNumberElement[0]);if(PAAYinitialized){replaceElementWithIframe("cardSecurityCode",params)}else{replaceCardContainerWithIframe(params)}restoreClassNames();restoreOriginalVisibility(tempDisplayedElements);window.addEventListener("message",function(event){var _event$data7,_event$data8,_event$data9;if((_event$data7=event.data)!==null&&_event$data7!==void 0&&_event$data7.ccSecureApp&&(_event$data8=event.data)!==null&&_event$data8!==void 0&&_event$data8.ccFwd){for(var _i28=0,_Object$entries3=Object.entries(event.data);_i28<_Object$entries3.length;_i28++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i28],2),key=_Object$entries3$_i[0],value=_Object$entries3$_i[1];if(key!="ccSecureApp"&&key!="ccFwd"){var iframe=document.getElementById("".concat(key,"_secured"));if(iframe){var payload={ccSecureAppChild:true,ccFwd:true};payload[key]=value;iframe.contentWindow.postMessage(payload,"*")}}}}else if((_event$data9=event.data)!==null&&_event$data9!==void 0&&_event$data9.ccSecureApp){for(var _i29=0,_Object$entries4=Object.entries(event.data);_i29<_Object$entries4.length;_i29++){var _Object$entries4$_i=_slicedToArray(_Object$entries4[_i29],2),_key=_Object$entries4$_i[0],_value=_Object$entries4$_i[1];if(_key!="ccSecureApp"){updateCCElementValue(_key,_value)}}}})}else{setTimeout(handlePaymentElement,100)}}}function updateCCElementValue(name,value){if(name){value=value?String(value):"";var el=document.querySelector("input[name=\"".concat(name,"\"]"));if(!el){el=document.createElement("input");el.type="hidden";el.name=name;document.body.appendChild(el)}el.value=value;el.classList.toggle("cc-has-class",!!value.trim());el.dispatchEvent(new Event("change",{bubbles:true}))}}var elementSecured=false;function replaceElementWithIframe(name,_ref10){var apiUrl=_ref10.apiUrl,sessionId=_ref10.sessionId,token=_ref10.token,referenceId=_ref10.referenceId,origin=_ref10.origin;var elements=document.getElementsByName(name);if(elements.length===0){return}var el=document.createElement("input");el.type="hidden";el.name=name;var target=elements[0];if(target.hasAttribute("required")){el.required=true}if(target.hasAttribute("placeholder")){el.setAttribute("placeholder",target.getAttribute("placeholder"))}var parent=target.parentNode;var cloned=target.cloneNode(true);var originalStyles=copyStyles(target,cloned);var rect=target.getBoundingClientRect();var style=getComputedStyle(target);var iframe=document.createElement("iframe");iframe.id="".concat(name,"_secured");iframe.style.width=rect.width+"px";iframe.style.height=rect.height+"px";iframe.style.display=style.display;iframe.style.verticalAlign=style.verticalAlign;if(style.margin){iframe.style.margin=style.margin}iframe.style.padding="0px";iframe.style.overflow="hidden";iframe.style.border="none";iframe.setAttribute("frameBorder","0");iframe.setAttribute("scrolling","no");iframe.setAttribute("tabindex","0");iframe.setAttribute("allow","shared-autofill payment");var pseudoProerty=getPseudoProperty(target);var pseudoStyle="<style>.cc-class{ ".concat(originalStyles," } ::placeholder { ").concat(pseudoProerty,"} </style>");cloned.classList.add("cc-class");iframe.srcdoc="<html><head>".concat(getCSSLinks()).concat(pseudoStyle,"</head><body style=\"margin:0px; padding:0px; overflow: hidden;\">").concat(cloned.outerHTML,"<script>(function() {").concat(creditCardOnload.toString(),"; ").concat(creditCardAction.toString(),"creditCardOnload();creditCardAction(\"").concat(apiUrl,"\",\"").concat(sessionId,"\",\"").concat(token,"\",\"").concat(referenceId,"\",\"").concat(origin,"\")})();</script></body></html>");window.addEventListener("message",function(event){var _event$data10,_event$data11;if((_event$data10=event.data)!==null&&_event$data10!==void 0&&_event$data10.ccSecureApp&&(_event$data11=event.data)!==null&&_event$data11!==void 0&&_event$data11.init){iframe.contentWindow.postMessage({ccSecureAppChild:true,init:true,html:cloned.outerHTML,styles:getCSSLinks()+pseudoStyle},"*");elementSecured=true}});parent.replaceChild(iframe,target);parent.insertBefore(el,iframe.nextSibling)}function copyStyles(source,target){var desiredProps=["color","font-family","font-size","font-style","font-weight","line-height","text-align","text-decoration","padding","height","display","position","top","right","bottom","left","box-sizing","z-index","background-color","border","border-radius","box-shadow","opacity","transform","outline","background","appearance","-webkit-appearance","-moz-appearance"];var computed=window.getComputedStyle(source);var styleObj={};desiredProps.forEach(function(prop){var value=computed.getPropertyValue(prop);if(value){styleObj[prop]=value}});styleObj["width"]="99.8%";return Object.entries(styleObj).map(function(_ref11){var _ref12=_slicedToArray(_ref11,2),key=_ref12[0],val=_ref12[1];return"".concat(key,": ").concat(val,";")}).join("\n")}function getCSSLinks(){return Array.from(document.querySelectorAll("link[rel=\"stylesheet\"]")).filter(function(link){return link.getAttribute("cc")!="true"}).map(function(link){return link.outerHTML}).join("\n");;}function getPseudoProperty(source){var pseudoProps=["color","font-family","font-size","font-style","font-weight","letter-spacing","line-height","opacity","text-transform"];var result={};pseudoProps.forEach(function(prop){var val=source.style.getPropertyValue(prop);if(val)result[prop]=val});var _iterator3=_createForOfIteratorHelper(document.styleSheets),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var sheet=_step3.value;if(!(sheet.ownerNode instanceof HTMLStyleElement))continue;var rules=void 0;try{rules=sheet.cssRules}catch(_unused){continue;// Ignore security errors
}var _iterator4=_createForOfIteratorHelper(rules),_step4;try{var _loop5=function _loop5(){var rule=_step4.value;if(rule.type===CSSRule.STYLE_RULE){var selector=rule.selectorText;if(selector&&selector.includes("::placeholder")&&source.matches(selector.replace("::placeholder","").trim())){pseudoProps.forEach(function(prop){var val=rule.style.getPropertyValue(prop);if(val)result[prop]=val})}}};for(_iterator4.s();!(_step4=_iterator4.n()).done;){_loop5()}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return Object.entries(result).map(function(_ref13){var _ref14=_slicedToArray(_ref13,2),prop=_ref14[0],val=_ref14[1];return"".concat(prop,": ").concat(val,";")}).join("")}function toggleSideMenuItems(e){$("#sideNavMenu").toggleClass("active");$(".sidenav-menu-overlay").toggleClass("active");$(".collapse.in").toggleClass("in");$("#sideNavMenu a[aria-expanded=true]").attr("aria-expanded","false")}var price=0;function getCurrentCollectionId(){var pageCollectionId,pageCollectionName;pageCollectionId=sessionStorage.getItem("collectonId");pageCollectionName=sessionStorage.getItem("ccCollectionName");sessionStorage.removeItem("collectonId");if(!pageCollectionId){var menuListLength=fkMenuList.length;var pageViewRefId=pageData&&pageData.pageViewReferenceId;for(var _i30=0;_i30<menuListLength;_i30++){var _item2=fkMenuList[_i30];if(_item2.linkType==="collection"){pageCollectionId=_item2.link;pageCollectionName=_item2.name;if(pageViewRefId&&pageViewRefId===_item2.pageLink){pageCollectionId=_item2.link;pageCollectionName=_item2.name;break}}}}pageCollectionName&&sessionStorage.setItem("ccCollectionName",pageCollectionName);return pageCollectionId&&parseInt(pageCollectionId)}function getTargetPageData(targetPageViewRefId){try{if(!(targetPageViewRefId&&pageData&&pageData.funnelData&&pageData.funnelData.pages&&pageData.funnelData.pages.length)){return}var targetPageData=pageData.funnelData.pages.filter(function(page){var pageViewReferenceId=page&&page.pageView&&page.pageView[0]&&page.pageView[0].referenceId;return pageViewReferenceId===targetPageViewRefId})[0];return targetPageData}catch(error){console.log(error)}}function logPageAnalyticsOnNavigation(currentPageType,targetPageType){var pageSubmitNavigationMap={1:[1,2,4],2:[1,17,18],21:[2,4],17:[2,4,33],18:[2,4,33],33:[2,4],34:[2,4,33]};var targetPageCollection=pageSubmitNavigationMap[currentPageType];if(targetPageCollection&&targetPageCollection.length&&targetPageCollection.includes(targetPageType)){registerClick(1)}}function routeMenuItem(e,attributes){if(!attributes){return}var sidebar=document.getElementById("sideNavMenu");if(sidebar&&sidebar.classList.contains("active")){toggleSideMenuItems()}e&&e.preventDefault()&&e.stopImmediatePropagation();var linkType=attributes.linktype&&attributes.linktype.value;var linkValue=attributes.link&&attributes.link.value;var urlSlug=attributes&&attributes.urlslug&&attributes.urlslug.value;var url="";switch(linkType){case"collection":var targetPageViewRefId=attributes.pagelink&&attributes.pagelink.value;var collectionExits=document.querySelector("div.cc-menu-item > a[link=\"".concat(linkValue,"\"]"));if(multiCollectionMenu&&targetPageViewRefId&&collectionExits)return;var currentPageViewRefId=pageData&&pageData.pageViewReferenceId;targetPageViewRefId=multiCollectionMenu&&!targetPageViewRefId?currentPageViewRefId:targetPageViewRefId;var collectionName=attributes.collectionname&&attributes.collectionname.value;collectionName&&sessionStorage.setItem("ccCollectionName",collectionName);if(currentPageViewRefId!==targetPageViewRefId){url=urlSlug||targetPageViewRefId&&targetPageViewRefId+".html";sessionStorage.setItem("collectonId",linkValue);window.open(url,"_self");return}collectionName&&$(".cc-collection-name-label").html(collectionName);ccCurrentCollectonId=parseInt(linkValue);ccCurrentPagePosition=1;ccMaxCollectionProductsOnPage=multiCollectionMenu?ccPaginationData[linkValue]:ccMaxCollectionProductsOnPage;invokeCollectionApi(parseInt(linkValue),true,false,ccPaginationElementExists?ccMaxCollectionProductsOnPage:null,1);break;case"product":url=urlSlug||attributes.pagelink&&attributes.pagelink.value&&attributes.pagelink.value+".html";window.open(url,"_self");sessionStorage.setItem("currentItem",linkValue);break;case"page":var targetPageViewRefIdPage=attributes.link&&attributes.link.value;var targetPageData=getTargetPageData(targetPageViewRefIdPage);if(targetPageData){var currentPage=pageData&&pageData.pageTypeId;var targetPageId=targetPageData&&targetPageData.pageView&&targetPageData.pageView[0]&&targetPageData.pageView[0].templateTypeId;logPageAnalyticsOnNavigation(currentPage,targetPageId)}url=urlSlug||targetPageViewRefIdPage&&targetPageViewRefIdPage+".html";window.open(url,"_self");break;case"url":var targetUrl=attributes.link&&attributes.link.value;targetUrl&&window.open(targetUrl,"_self");break}}function generateSideNavMenuItems(menuItems){var menuDropDownImage="<svg width='36' height='36' viewBox='0 0 36 36' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M9.115 12L18 20.87L26.885 12L29 14.115L18 25.115L7 14.115L9.115 12Z' fill='#161C0D'></path></svg>";$("body").append("<div class='sidenav-menu-overlay'></div>");$("body").append("<style>#sideNavMenu { width: 250px; position: fixed; left: -250px; height: 100vh; z-index: 999; background: #D7DBDA; color: #161c0d; transition: all 0.3s; overflow-y: scroll;}#sideNavMenu.active { left: 0; display: none; }.list-unstyled-child { padding-left: 36px; list-style: none;}.side-nav-list-item { background-color: #D7DBDA; border-bottom: 1px solid #575C5B;} .side-nav-list-item.active { background-color: #A3A8A8;} .sidenav-menu-overlay { display: none; position: fixed; top: 0px; left: 0px; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.7); z-index: 998; opacity: 0; transition: all 0.5s ease-in-out;}.sidenav-menu-overlay.active { display: none; opacity: 1;}#sideNavMenu .sidenav-menu-header { padding: 20px 16px; background: #6d7fcc;}#sideNavMenu ul p { color: #fff; padding: 10px;}#sideNavMenu ul .side-nav-list-item a { padding: 20px 16px; font-size: 1.1em; color: #161C0D; display: block; text-decoration: none;}#sideNavMenu ul .side-nav-list-item.active>a, #sidenav a[aria-expanded='true'] { color: #161c0d; text-decoration: none;}#sideNavMenu .side-nav-list-item ul side-nav-list-item-child { margin-bottom: 12px;}#sideNavMenu .side-nav-list-item .list-unstyled > .side-nav-list-item-child > a { padding: 0px 16px 12px 32px; text-decoration: none;}#sideNavMenu .side-nav-list-item .list-unstyled-child > .side-nav-list-item-child > a { padding: 0px 16px 12px; text-decoration: none;}#sideNavMenu ul .side-nav-list-item svg {transform: rotate(0deg); width: 1.5rem; float: right;transition: all .4s cubic-bezier(.16,.87,.5,1);}#sideNavMenu ul .side-nav-list-item.active > a > svg, #sideNavMenu ul .side-nav-list-item-child.active > a > svg {transform: rotate(180deg); transition: all .4s cubic-bezier(.16,.87,.5,1);}a[data-toggle='collapse'] { position: relative;} @media (max-width: 768px) { .sidenav-menu-overlay.active { display: block } #sideNavMenu.active { display: block }}</style>");$("body").prepend("<nav id='sideNavMenu'><ul class='list-unstyled components side-nav-menu-container'></ul></nav>");var menuItemsTemplateString=[];menuItems&&menuItems.length>0&&menuItems.map(function(item,index){var menuAttrs="link='"+item.link+"' linktype='"+item.linkType+"' menuname='"+item.name+"' pagelink='"+item.pageLink+"' urlslug='"+(item.urlSlug?item.urlSlug:"")+"' collectionname='"+item.name+"'";switch(item.depth){case 0:if(menuItems[index+1]&&menuItems[index+1].depth>item.depth){menuItemsTemplateString.push("<li class='side-nav-list-item'> <a data-toggle='collapse' aria-expanded='false'><span>"+item.name+"</span>"+menuDropDownImage+"</a> <ul class='list-unstyled collapse' id='dropDownMenu"+index+"'>")}else if(menuItems[index+1]&&menuItems[index+1].depth===item.depth){menuItemsTemplateString.push("<li class='side-nav-list-item'> <a data-toggle='collapse' aria-expanded='false' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'><span>"+item.name+"</span></a></li>")}else{menuItemsTemplateString.push("<li class='side-nav-list-item'> <a data-toggle='collapse' aria-expanded='false' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'><span>"+item.name+"</span></a></li>");menuItemsTemplateString.push("</ul></li>")}break;default:if(menuItems[index+1]&&menuItems[index+1].depth>item.depth){menuItemsTemplateString.push("<li class='side-nav-list-item-child'><a data-toggle='collapse' aria-expanded='false'><span>"+item.name+"</span>"+menuDropDownImage+"</a><ul id='dropDownMenu"+index+"' aria-labelledby='dropdownMenu"+index+"' class='collapse list-unstyled-child'>")}else if(menuItems[index+1]&&menuItems[index+1].depth===item.depth){menuItemsTemplateString.push("<li class='side-nav-list-item-child'><a data-toggle='collapse' aria-expanded='false' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'><span>"+item.name+"</span></a></li>")}else if(menuItems[index+1]&&menuItems[index+1].depth<item.depth){menuItemsTemplateString.push("<li class='side-nav-list-item-child'><a data-toggle='collapse' aria-expanded='false' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'><span>"+item.name+"</span></a></li>");var delta=item.depth-menuItems[index+1].depth;for(var _i31=0;_i31<delta;_i31++){menuItemsTemplateString.push("</ul></li>")}}else{menuItemsTemplateString.push("<li class='side-nav-list-item-child'><a data-toggle='collapse' aria-expanded='false' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'><span>"+item.name+"</span></a></li>");menuItemsTemplateString.push("</ul></li>")}break}});$(".side-nav-menu-container").prepend(menuItemsTemplateString.join(""))}function generateMenuItemsTemplate(menuItems){var menuContainerElement=$(".fk-menu-container");menuContainerElement.append("<nav class='navbar navbar-expand-md navbar-light py-3' style='padding: 0 !important;'><style>.dropdown-item { width: auto;}.dropdown-submenu { position: relative;}.dropdown-submenu>a:after { border-top: 0.3em solid transparent; border-right: 0; border-bottom: 0.3em solid transparent; border-left: 0.3em solid; float: right; margin-top: 0.4em;}.dropdown-submenu>.dropdown-menu { top: 0; left: 100%; margin-top: 0px; margin-left: 0px;}@media (min-width: 991px) { .dropdown-menu { box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }}</style><div class='container'> <div id='navbarContent' class='collapse navbar-collapse'> <ul class='navbar-nav mr-auto fk-menu-list-parent'></ul> </div> </div></nav>");var menuElement=menuContainerElement.find(".fk-menu").first();var listElementId=menuElement.attr("id")||"";var listElementClasses="";if(menuElement.attr("data-selector")==="true"){listElementClasses=menuElement.attr("class");listElementClasses=listElementClasses?listElementClasses.replaceAll(/\sfk-hide-on-load/ig,""):""}var menuItemsTemplateString=[];var nestedNavItemsStyle="style='border: none !important; color: black !important; box-shadow: none !important; background-color: transparent !important; padding: 0.25rem 1.5rem !important'";menuItems&&menuItems.length>0&&menuItems.map(function(item,index){var menuAttrs="link='"+item.link+"' linktype='"+item.linkType+"' menuname='"+item.name+"' pagelink='"+item.pageLink+"' urlslug='"+(item.urlSlug?item.urlSlug:"")+"' collectionname='"+item.name+"'";switch(item.depth){case 0:if(menuItems[index+1]&&menuItems[index+1].depth>item.depth){menuItemsTemplateString.push("<li id='dropdownMenu"+index+"' class='nav-item dropdown'><a data-toggle='dropdown' aria-haspopup='true' aria-expanded='false' id='"+listElementId+"' class='nav-link dropdown-toggle "+listElementClasses+"'>"+item.name+"</a><ul aria-labelledby='dropdownMenu"+index+"' class='dropdown-menu border-0 shadow' data-toggle='dropdown'>")}else if(menuItems[index+1]&&menuItems[index+1].depth===item.depth){menuItemsTemplateString.push("<li class='nav-item'><a id='"+listElementId+"' class='nav-link "+listElementClasses+"' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'>"+item.name+"</a></li>")}else{menuItemsTemplateString.push("<li class='nav-item'><a id='"+listElementId+"' class='nav-link "+listElementClasses+"' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'>"+item.name+"</a></li>");menuItemsTemplateString.push("</ul></li>")}break;default:if(menuItems[index+1]&&menuItems[index+1].depth>item.depth){menuItemsTemplateString.push("<li id='dropdownMenu"+index+"' class='dropdown-submenu'><a data-toggle='dropdown' aria-haspopup='true' aria-expanded='false' id='"+listElementId+"' role='button' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false' class='dropdown-item dropdown-toggle "+listElementClasses+"' "+nestedNavItemsStyle+">"+item.name+"</a><ul aria-labelledby='dropdownMenu"+index+"' class='dropdown-menu border-0 shadow'>")}else if(menuItems[index+1]&&menuItems[index+1].depth===item.depth){menuItemsTemplateString.push("<li><a id='"+listElementId+"' class='dropdown-item "+listElementClasses+"' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'"+nestedNavItemsStyle+">"+item.name+"</a></li>")}else if(menuItems[index+1]&&menuItems[index+1].depth<item.depth){menuItemsTemplateString.push("<li><a id='"+listElementId+"' class='dropdown-item "+listElementClasses+"' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'"+nestedNavItemsStyle+">"+item.name+"</a></li>");var delta=item.depth-menuItems[index+1].depth;for(var _i32=0;_i32<delta;_i32++){menuItemsTemplateString.push("</ul></li>")}}else{menuItemsTemplateString.push("<li><a id='"+listElementId+"' class='dropdown-item "+listElementClasses+"' "+menuAttrs+" onclick='routeMenuItem(event, attributes)'"+nestedNavItemsStyle+">"+item.name+"</a></li>");menuItemsTemplateString.push("</ul></li>")}break}});$(".fk-menu-list-parent").append(menuItemsTemplateString.join(""));menuElement.remove()}function getMenuList(){$.ajax({async:false,type:"GET",beforeSend:function beforeSend(xhr){xhr.setRequestHeader("Cache-Control","no-cache");xhr.setRequestHeader("X-Source",pageData.funnelReferenceId)},url:checkDomainForRoute()?window.location.origin+"/"+pageData.funnelReferenceId+"/menuJson.json":window.location.origin+"/menuJson.json",success:function success(result){var response="";if(isJSON(result)){response=JSON.parse(result)}else{response=result}if(response){var menuItems=response.MenuData&&JSON.parse(response.MenuData);menuItems=menuItems&&menuItems.length>0&&menuItems.filter(function(items){return items.menuType==="main_menu"})||[];generateMenuItemsTemplate(menuItems);generateSideNavMenuItems(menuItems);fkMenuList=_toConsumableArray(menuItems)}},error:function error(xhr){return xhr.status}})}function sortByFeatured(productCollection){fkProductCollection=_toConsumableArray(productCollection)}function sortByPrice(productCollection,highToLow){fkProductCollection=productCollection.sort(function(productA,productB){var productAPrice=productA&&(Number(ccGetProductCurrencyPrice(productA.campaignProductId,1))||(productA.cycle1_price?parseFloat(productA.cycle1_price):0));var productBPrice=productB&&(Number(ccGetProductCurrencyPrice(productB.campaignProductId,1))||(productB.cycle1_price?parseFloat(productB.cycle1_price):0));return highToLow?productBPrice-productAPrice:productAPrice-productBPrice})}function sortByName(productCollection,aToZ){fkProductCollection=productCollection.sort(function(productA,productB){var _productA$productName,_productA$productName2,_productB$productName,_productB$productName2;var nameA=(_productA$productName=productA===null||productA===void 0||(_productA$productName2=productA.productName)===null||_productA$productName2===void 0?void 0:_productA$productName2.toLowerCase())!==null&&_productA$productName!==void 0?_productA$productName:"zzz";var nameB=(_productB$productName=productB===null||productB===void 0||(_productB$productName2=productB.productName)===null||_productB$productName2===void 0?void 0:_productB$productName2.toLowerCase())!==null&&_productB$productName!==void 0?_productB$productName:"zzz";if(aToZ){return nameA.localeCompare(nameB,undefined,{numeric:true,sensitivity:"base"})}else{return nameB.localeCompare(nameA,undefined,{numeric:true,sensitivity:"base"})}})}function sortCollectionOrder(sortValue){var productCollection=fkProductCollection&&fkProductCollection.length?_toConsumableArray(fkProductCollection):[];if(!productCollection||!productCollection.length){return}switch(sortValue){case"featured":sortByFeatured(productCollection);break;case"priceHighToLow":sortByPrice(productCollection,true);break;case"priceLowToHigh":sortByPrice(productCollection);break;case"nameAToZ":sortByName(productCollection,true);break;case"nameZToA":sortByName(productCollection)}}function searchCollections(sortValue){var searchValue=$("[name=\"searchInput\"]")[0]&&$("[name=\"searchInput\"]")[0].value.toLowerCase();fkProductCollection=fkCollectionData.length&&searchValue?fkCollectionData.filter(function(product){return product.productName.toLowerCase().includes(searchValue)}):_toConsumableArray(fkCollectionData);sortValue&&sortCollectionOrder(sortValue);if(!fkProductCollection.length&&searchValue){initializeProductRow(fkProductCollection);var productRow=multiCollectionMenu?$(".fk-product-row[link='".concat(ccCurrentCollectonId,"']")):$(".fk-product-row");productRow.append(showCenteredMessageInsideContainer("No products found in this collection","fkEmptyCollection"))}}function loadSortOptions(){var selectOptionString="";var selectOption={"featured":"Featured","priceHighToLow":"Price: High to Low","priceLowToHigh":"Price: Low to High","nameAToZ":"Name: A to Z","nameZToA":"Name: Z to A"};for(var key in selectOption){selectOptionString+="<option value='"+key+"'>"+selectOption[key]+"</option>"}$("select[name=\"sortOrder\"]").each(function(){$(this).empty();$(this).append(selectOptionString);$(this).val("featured");$(this).change(function(){var selectedValue=$(this).val();sessionStorage.setItem("productSortOrder",selectedValue);if(ccPaginationElementExists){invokeCollectionApi(ccCurrentCollectonId,true,false,ccMaxCollectionProductsOnPage,ccCurrentPagePosition)}else{selectedValue&&searchCollections(selectedValue);fkProductCollection.length&&initializeProductRow(fkProductCollection)}})});$("[name=\"searchInput\"]")[0]&&$("[name=\"searchInput\"]")[0].addEventListener("input",function(){searchCollections(sessionStorage.getItem("productSortOrder"));fkProductCollection.length&&initializeProductRow(fkProductCollection)})}function showCenteredMessageInsideContainer(message,id){$("#fkEmptyCollection").remove();return"<div id='"+id+"' style='position: absolute;top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 18px; font-weight: 500;'>"+message+"</div>"}function mergeProducts(existingProducts,newProducts){var merged=new Map([].concat(_toConsumableArray(existingProducts.map(function(p){return[p.campaignProductId,p]})),_toConsumableArray(newProducts.map(function(p){return[p.campaignProductId,p]}))));return Array.from(merged.values())}function invokeCollectionApi(_x9,_x10,_x11,_x12,_x13){return _invokeCollectionApi.apply(this,arguments)}function _invokeCollectionApi(){_invokeCollectionApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee20(id,menuClicked,onPageLoad,pageSize,pageNumber){var productRow,productColNode,campaignId,_response5,allProducts,productListWithStoreFront,productList,productOrder,productsLength,_loop42,product,_i138,sortOrder;return _regeneratorRuntime().wrap(function _callee20$(_context22){while(1)switch(_context22.prev=_context22.next){case 0:_context22.prev=0;productRow=multiCollectionMenu?$(".fk-product-row[link='".concat(id,"']")):$(".fk-product-row");if(id){_context22.next=5;break}console.error("Invalid collection id");return _context22.abrupt("return");case 5:if($(".cc-pagination-bar-loader")[0]){$(".cc-pagination-bar-loader").show()}else{fkCollectionLoader=true;$(productCardLoaderHTML).insertBefore(productRow)}$(".cc-pagination-bar").css({"pointer-events":"none"});if(onPageLoad&&!fkConfiguredProductCol){if(Object.keys(multiProdColMap).length&&multiProdColMap[id]){fkConfiguredProductCol=multiProdColMap[id]}else{productColNode=$(".fk-product-col").first();fkConfiguredProductCol=productColNode.length?productColNode.clone(true):fkConfiguredProductCol}}campaignId=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.campaignId;setSortOrderQuery();_response5=null;if(!(multiCollectionMenu&&ccCollectionsResponse[id]&&ccCollectionsResponse[id][pageNumber])){_context22.next=15;break}_response5=ccCollectionsResponse[id][pageNumber];_context22.next=18;break;case 15:_context22.next=17;return httpMethod("".concat(providerUrl,"/Collection/live/")+id+(pageSize&&pageNumber?"?resultsPerPage="+pageSize+"&page="+pageNumber+"&collections=1"+sortOrderQuery:""),JSON.stringify({skipRecommendations:1}));case 17:_response5=_context22.sent;case 18:if(!(_response5&&_response5.result==="SUCCESS")){_context22.next=46;break}allProducts=null;if(multiCollectionMenu&&ccPaginatedProducts[id]&&ccPaginatedProducts[id][pageNumber]){allProducts=ccPaginatedProducts[id][pageNumber]}else{allProducts=_response5.message&&_response5.message.data&&_response5.message.data[campaignId]&&_response5.message.data[campaignId].products}// Merge products to pageData, with allProducts taking priority
if(allProducts.length){pageData.selectedCampaign.products=mergeProducts(pageData.selectedCampaign.products,allProducts)}// Merge products end
productListWithStoreFront=allProducts&&allProducts.length&&allProducts.filter(function(product){return product.storefront===1});ccMaxCollectionProducts=Number(_response5.message&&_response5.message.queryArgs.totalProducts)||1;ccPaginationElementExists&&ccLoadPaginationTabs();productList=[];if(!(_response5.message.queryArgs&&_response5.message.queryArgs.campaignProductId&&productListWithStoreFront&&productListWithStoreFront.length)){_context22.next=38;break}productOrder=_response5.message.queryArgs.campaignProductId.split(",").map(function(x){return parseInt(x)});productsLength=productOrder.length;_loop42=/*#__PURE__*/_regeneratorRuntime().mark(function _loop42(_i138){return _regeneratorRuntime().wrap(function _loop42$(_context21){while(1)switch(_context21.prev=_context21.next){case 0:product=productListWithStoreFront.find(function(x){return x.campaignProductId===productOrder[_i138]});if(product){productList.push(product)}case 2:case"end":return _context21.stop()}},_loop42)});_i138=0;case 31:if(!(_i138<productsLength)){_context22.next=36;break}return _context22.delegateYield(_loop42(_i138),"t0",33);case 33:_i138++;_context22.next=31;break;case 36:_context22.next=39;break;case 38:productList=productListWithStoreFront;case 39:if(productList&&productList.length){fkCollectionData=_toConsumableArray(productList);fkProductCollection=_toConsumableArray(productList);sortOrder=sessionStorage.getItem("productSortOrder");if(sortOrder&&sortOrder!=="featured"){(!ccPaginationElementExists||multiCollectionMenu)&&sortCollectionOrder(sortOrder);$("select[name=\"sortOrder\"]").val(sortOrder)}if($("[name=\"searchInput\"]")[0])$("[name=\"searchInput\"]")[0].value="";initializeProductRow(fkProductCollection,menuClicked,onPageLoad,id)}else{fkCollectionData=_toConsumableArray(productList);fkProductCollection=_toConsumableArray(productList);initializeProductRow(fkProductCollection);productRow.append(showCenteredMessageInsideContainer("No products on this page","fkEmptyCollection"))}$(".cc-pagination-bar").css({"pointer-events":"auto"});!onPageLoad&&ccPaginationElementExists&&!multiCollectionMenu&&$("html, body").animate({scrollTop:0},1000);$(".cc-pagination-bar-loader").hide();$("#infiniteCardLoader").remove();fkCollectionLoader=false;return _context22.abrupt("return");case 46:fkCollectionData=[];fkProductCollection=[];initializeProductRow([{}],menuClicked,onPageLoad);productRow.append(showCenteredMessageInsideContainer("No products on this page","fkEmptyCollection"));$(".cc-pagination-bar").css({"pointer-events":"auto"});!onPageLoad&&ccPaginationElementExists&&!multiCollectionMenu&&$("html, body").animate({scrollTop:0},1000);$(".cc-pagination-bar-loader").hide();$("#infiniteCardLoader").remove();fkCollectionLoader=false;console.error(_response5.message);_context22.next=64;break;case 58:_context22.prev=58;_context22.t1=_context22["catch"](0);$(".cc-pagination-bar-loader").hide();$(".cc-pagination-bar").css({"pointer-events":"auto"});$(".fk-hide-on-load").css("visibility","visible");console.log(_context22.t1);case 64:case"end":return _context22.stop()}},_callee20,null,[[0,58]])}));return _invokeCollectionApi.apply(this,arguments)}function getTextNodes(element){var n,a=[],walk=document.createTreeWalker(element[0],NodeFilter.SHOW_TEXT,null,false);while(n=walk.nextNode())a.push(n);return a}function updateProductTileToken(tokenItem,productCol){var textNodeCollection=getTextNodes(productCol);textNodeCollection.forEach(function(textNode){var content=textNode.textContent;var remSubstring=content&&content.match(/{{(.*?)}}/g);if(remSubstring&&remSubstring.length>0){var _loop6=function _loop6(){var trimmedString=remSubstring[_i33].trim().replace(/(?:^(?:&nbsp;)+)|(?:(?:&nbsp;)+$)/g,"");token=trimmedString;trimmedString=trimmedString.split("{{")[1].split("}}")[0];var formattedValue="";if(tokenItem&&(tokenItem[trimmedString]||trimmedString==="stockQuantity")){formattedValue=tokenItem[trimmedString];if(trimmedString==="stockQuantity"&&!formattedValue){formattedValue="0"}if(formattedValue){if(trimmedString==="cycle1_price"){var currencyPrice=ccGetProductCurrencyPrice(tokenItem.campaignProductId,1);if(currencyPrice)formattedValue=currencyPrice;if(parseFloat(formattedValue).toFixed(2)==="0.00"){var variants=tokenItem.variants;if(variants&&variants.length>0&&!tokenItem.isVariantBundle&&!tokenItem.isEditable){var lowVarPrice=parseFloat(ccGetProductCurrencyPrice(tokenItem.campaignProductId+"."+variants[0].variantDetailId)||variants[0].price);var mulVariantPrices=false;variants.forEach(function(variant){var variantMemberObj=getMemberPrice(variant,tokenItem.campaignProductId);var currentVarPrice=variantMemberObj!==null&&variantMemberObj!==void 0&&variantMemberObj.memberPriceApplied?parseFloat(variantMemberObj.price):parseFloat(ccGetProductCurrencyPrice(tokenItem.campaignProductId+"."+variant.variantDetailId)||variant.price);if(lowVarPrice&&lowVarPrice!==currentVarPrice){mulVariantPrices=true;lowVarPrice=lowVarPrice>currentVarPrice?currentVarPrice:lowVarPrice}});formattedValue=mulVariantPrices===true?lowVarPrice.toFixed(2)+"+":lowVarPrice.toFixed(2)}}else{var _tokenItem;var memberPriceItem=getMemberPrice(tokenItem);tokenItem=memberPriceItem?memberPriceItem:tokenItem;formattedValue=(_tokenItem=tokenItem)!==null&&_tokenItem!==void 0&&_tokenItem.memberPriceApplied?tokenItem[trimmedString]:formattedValue;formattedValue=typeof formattedValue==="number"?formattedValue.toFixed(2):formattedValue}formattedValue=(parseFloat(formattedValue)*vatTaxRate).toFixed(2)}formattedValue=typeof formattedValue==="string"?formattedValue.replaceAll("\n","<br>"):formattedValue;if(trimmedString.match(/price/gi)){if(Number(formattedValue)===0&&trimmedString==="compareAtPrice"){formattedValue=""}else{formattedValue=pageData.selectedCampaign.currencySymbol+formattedValue}}textNode.textContent=content.replace(token,formattedValue);content=textNode.textContent}}else{textNode.textContent=content.replace(token,"");content=textNode.textContent}};for(var _i33=0;_i33<remSubstring.length;_i33++){_loop6()}}})}function initializeProductRow(collection,newMenuClicked,onPageLoad){fkCollectionSize=collection.length;var productRowCardsCount=sessionStorage.getItem("productRowCardsCount");if(productRowCardsCount&&productRowCardsCount!=="0"){scrolledCardsCount=parseInt(productRowCardsCount)}if(newMenuClicked){scrolledCardsCount=scrollCardsSlotSize;sessionStorage.setItem("productRowCardsCount",scrollCardsSlotSize)}var productRowNode=multiCollectionMenu?$(".fk-product-row[link='".concat(ccCurrentCollectonId,"']")).first():$(".fk-product-row").first();var sectionHasVariants=productRowNode&&$(productRowNode[0]).find(".fk-product-section")[0];fkConfiguredProductCol=multiProdColMap[ccCurrentCollectonId]||fkConfiguredProductCol;if(multiCollectionMenu){$(".fk-product-row").hide();productRowNode.show()}if(fkCollectionSize&&productRowNode.find(".fk-product-col").length){productRowNode.empty();if(productRowNode.attr("lazyload")==="1"){populateProductRow(collection.slice(0,scrolledCardsCount),fkConfiguredProductCol,productRowNode,sectionHasVariants)}else{populateProductRow(collection,fkConfiguredProductCol,productRowNode,sectionHasVariants)}$(".fk-product-col").css("visibility","visible")}else if(productRowNode.find(".fk-product-col").length){$(".fk-product-col").css("visibility","hidden")}loadVariants();setRadioTilesOnLoad()}function populateProductRow(collection,productTile,productRow,variantsExist){var tile=productTile||$(".fk-product-col").first();tile.find("button").attr("disabled",false);tile.find("a").css("pointer-events","auto");if(productRow.length){collection.forEach(function(itemColl,index){var item=itemColl;var productCol=tile.clone(true);var addToCartBtn=productCol.find("[action=addToCart],[action=addAndOpenCart]")[0];if(addToCartBtn){addToCartBtn.dataset.id=addToCartBtn.dataset.id+"_prodCol"+index}var routeActionBtn=productCol.find("[action=route][onclick='route(event)']")[0];if(routeActionBtn){routeActionBtn.dataset.id=routeActionBtn.dataset.id+"_prodCol"+index;routeActionBtn.setAttribute("offer",item.campaignProductId)}var section=productCol.find(".fk-product-section");section.attr("value",item.campaignProductId);if(variantsExist){var sectionId=item.campaignProductId+"-"+section.attr("id");section.attr("id",sectionId)}var productColImg=productCol.find(".fk-product-card-image-container").find("img");productColImg.length?productColImg.attr("src",item.imageUrl):productCol.find("img").attr("src",item.imageUrl);productCol.find("a").attr("offer",item.campaignProductId);updateProductTileToken(item,productCol);productRow.append(productCol)})}}function initInputAutoLoad(){var is_customer_known=cookieData["access_token"];var customerOrders=JSON.parse(sessionStorage.getItem("customerOrders"));if(customerOrders){autoLoadInputs(customerOrders[0])}else if(is_customer_known){window.autoLoadInputFromCustomerOrder&&autoLoadInputFromCustomerOrder()}}function stopEventPropogationForInputs(inputsList,inputType){if(inputsList){var inputsListLength=inputsList.length;for(var _i34=0;_i34<inputsListLength;_i34++){var input=inputsList[_i34];if(input.type==="checkbox"||input.type==="radio")if(inputType==="surveyInputs")input.addEventListener("click",function(e){e.stopPropagation()});else{input.addEventListener("click",function(e){e.stopPropagation();window.ccHandleInsureShipEvent&&ccHandleInsureShipEvent(e.currentTarget,e.currentTarget.checked);var coupon=e.currentTarget.getAttribute("coupon");coupon=coupon&&coupon.trim().toUpperCase();if(coupon){if(e.currentTarget.checked){!appliedCouponCode.includes(coupon)&&appliedCouponCode.splice(0,0,coupon)}else{var index=appliedCouponCode.findIndex(function(item){return item===coupon});index!==-1&&appliedCouponCode.splice(index,1)}}var productSection=e.currentTarget.closest(".fk-product-section");var productVariantElement=e.currentTarget.closest(".fk-product-variant-select");var variantSelectClass=productSection&&["fk-product-variant1","fk-product-variant2"].some(function(cls){return productSection.classList.contains(cls)});!productVariantElement&&variantSelectClass&&getVariants(productSection.id);displayPrices()})}}}}function ccRoundingPrice(value){if(![2,3,4,5].includes(pageData.pageTypeId)){return value}var itemTotalPrice=value;var currencyFee=Number(pageData.selectedCampaign.ccCurrencyFee);if(currencyFee){itemTotalPrice=itemTotalPrice*(1+currencyFee/100)}var ccCurrencyDecimals=pageData.selectedCampaign.ccCurrencyDecimals;var currencyRounding=pageData.selectedCampaign.ccCurrencyRounding||null;if((ccCurrencyDecimals===0||ccCurrencyDecimals)&&currencyRounding&&itemTotalPrice){var _price=itemTotalPrice.toString().split(".");if(currencyRounding===1){itemTotalPrice=_price[1]&&Number(_price[1])?(Number(_price[0])+1).toString():itemTotalPrice}else if(_price[1]&&Number(_price[1])>Number(currencyRounding)){itemTotalPrice=(Number(_price[0])+1).toString()+"."+currencyRounding}else{itemTotalPrice=_price[0]+"."+currencyRounding}}return parseFloat(itemTotalPrice)}function ccFormatCurrency(value,symbol,useValueDecimalCount){if(![2,3,4,5].includes(pageData.pageTypeId)){return(symbol||pageData.selectedCampaign.currencySymbol||"$")+value}var rValue=value&&value.toString()||"0";if(rValue){var splitValues=rValue.split(".");var ccCurrencyDecimals=pageData.selectedCampaign.ccCurrencyDecimals;var decimals=useValueDecimalCount?splitValues[1]?splitValues[1].length:0:ccCurrencyDecimals===0||ccCurrencyDecimals?ccCurrencyDecimals:2;if(decimals==0||decimals){rValue=decimals===0?splitValues[0]:splitValues[0]+"."+((splitValues[1]||"00")+"0000000000").substring(0,decimals)}if(pageData.selectedCampaign.ccCurrencyComma){rValue=rValue.replace(".",",")}var symbolAlign=pageData.selectedCampaign.ccCurrencySymbolAlign||"";var currencySymbol=pageData.selectedCampaign.currencySymbol||"$";switch(symbolAlign.toUpperCase()){case"RIGHT":rValue=rValue+currencySymbol;break;case"RIGHT_SPACE":rValue=rValue+"&nbsp;"+currencySymbol;break;case"LEFT_SPACE":rValue=currencySymbol+"&nbsp;"+rValue;break;default:rValue=currencySymbol+rValue}}return rValue}function ccSetCurrencyRules(currency){var currencyObj=fetchCurrentCurrencyObj(currency)||{};pageData.selectedCampaign.ccCurrencyDecimals=currencyObj.decimals;pageData.selectedCampaign.ccCurrencyFee=currencyObj.currencyFee;pageData.selectedCampaign.ccCurrencyComma=currencyObj.isComma;pageData.selectedCampaign.ccCurrencyRounding=currencyObj.rounding;pageData.selectedCampaign.ccCurrencySymbolAlign=currencyObj.symbolAlign;pageData.selectedCampaign.ccCurrencySendToGateway=currencyObj.sendToGateway;var currentCurrencySymbol=currency===pageData.selectedCampaign.currency?campaignBaseCurrencySymbol||"$":currencyObj["currencySymbol"];pageData.selectedCampaign.currencySymbol=currentCurrencySymbol}function ccUpdateTokenSpanValues(){var additionalSelector=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1;var currencyCode=returnCurrencyCode(),pageTypeId=pageData.pageTypeId;var baseCurrency=!currencyCode||currencyCode===pageData.selectedCampaign.currency;var percProductTotal=Number(sessionStorage.getItem("ccCartProductsPercentageTotal"))||0;$("[data-cc-price]"+additionalSelector).each(function(){var ccPrice=$(this).attr("data-cc-price");var price=ccPrice&&parseFloat(ccPrice.includes(",")?ccPrice.replaceAll(",",""):ccPrice);if($(this).children().length===0&&(price||price==0)){var priceType=$(this).attr("data-cc-price-type")||"";var _productId=(pageData.cartData||$(this).attr("data-cc-currency-prod")==="true")&&$(this).attr("data-cc-prod-id");var useTax=[2,3,4].includes(pageTypeId);var cycle1PriceType=priceType.includes("cycle1_price");var compareAtPrice=priceType.includes("compareAtPrice");if(cycle1PriceType||compareAtPrice||priceType==="true"){if(cycle1PriceType&&$(this).attr("data-cc-perc-prod")==="true"){$(this).html(ccFormatCurrency((percProductTotal*Number(price)*0.01).toFixed(2)))}else{$(this).html(ccFormatCurrency(getItemPrice(_productId,price,1,!useTax,false,compareAtPrice).toFixed(2)))}}else{if(baseCurrency&&$(this).attr("data-cc-check-decimal")==="true"){$(this).html(ccFormatCurrency(ccPrice,null,true))}else{$(this).html(ccFormatCurrency((exchangeRate*price).toFixed(2)))}}}})}//set the prices and symbols as per the updated currency
function setPriceAndCurrency(selectedCurrencyCode){var campaignCurrencyCode=pageData.selectedCampaign.currency,campaignCurrencySelected=selectedCurrencyCode===campaignCurrencyCode;var newSymbol=campaignCurrencySelected?campaignBaseCurrencySymbol:sessionStorage.getItem("currencyCodeSymbol");var currencyCodeValue=returnCurrencyCode(),selectedCurrencyIsSessionCurrency=currencyCodeValue===selectedCurrencyCode;var ccExchangeRateList=JSON.parse(sessionStorage.getItem("ccExchangeRateList"))||{};sessionStorage.setItem("currencyCode",selectedCurrencyCode);var paypalSrc=pageData.pageTypeId===4&&$("[data-partner-attribution-id=CheckoutChampLLC_PPFM_PPCP]").attr("src");if(paypalSrc){$(".btnPayPal, .btnPayPal2").css("pointer-events","auto");$(".paypalSdkLoadFailureError, #paypal-notify").remove();!paypalSrc.includes(selectedCurrencyCode)&&window.configurePayPalSmartButtons&&configurePayPalSmartButtons()}window.ccConfigureAmazonPayV2&&ccConfigureAmazonPayV2();function ccUpdateCurrencyValues(currencyChanged,exchangeRateValue,currencySymbol){var _fkProductCollection;currencyChanged&&sessionStorage.setItem("exchangeRate",exchangeRateValue);ccSetCurrencyRules(selectedCurrencyCode);sessionStorage.setItem("currencyCodeSymbol",currencySymbol);if(currencyChanged&&!appliedCouponCode.length){var discountsObj=sessionStorage.getItem("discountsObj");discountsObj?appliedCouponCode=JSON.parse(discountsObj)["coupons"]:null}if([17,18].includes(pageData.pageTypeId)&&(_fkProductCollection=fkProductCollection)!==null&&_fkProductCollection!==void 0&&_fkProductCollection.length){initializeProductRow(fkProductCollection)}displayPrices()}if(newSymbol&&(selectedCurrencyIsSessionCurrency||campaignCurrencySelected)){ccUpdateCurrencyValues(campaignCurrencySelected,1,newSymbol)}else{var currencyObj=fetchCurrentCurrencyObj(selectedCurrencyCode)||{};var currentCurrencySymbol=currencyObj["currencySymbol"]||selectedCurrencyCode;var checkoutAndCampaignCurrency=campaignCurrencyCode+"|"+selectedCurrencyCode;if(!ccExchangeRateList[checkoutAndCampaignCurrency]){return httpMethod("".concat(providerUrl,"/Currency/exchangerate"),JSON.stringify({"currencyCode":selectedCurrencyCode,"baseCurrencyCode":campaignCurrencyCode})).then(function(data){if(data.result==="SUCCESS"){ccUpdateCurrencyValues(true,data.message,currentCurrencySymbol);ccExchangeRateList[checkoutAndCampaignCurrency]=data.message;sessionStorage.setItem("ccExchangeRateList",JSON.stringify(ccExchangeRateList))}})}else{ccUpdateCurrencyValues(true,ccExchangeRateList[checkoutAndCampaignCurrency],currentCurrencySymbol)}}return new Promise(function(resolve){resolve(undefined)})}function paymentOptionElementDisplayHandler(){var fkPaymentOptionTogglerField=document.querySelectorAll(".fk-payment-option-toggler-field");if(fkPaymentOptionTogglerField&&fkPaymentOptionTogglerField.length>0){fkPaymentOptionTogglerField.forEach(function(element){var openId=element.getAttribute("opencheckboxsection");if(openId){var obj=document.getElementById(openId);if(!obj)return;if(element.checked){obj.style.display="flex";return}obj.style.display="none"}})}}function hideCollapsibleListBodyOnLoad(){try{var collapsibleList=document.querySelectorAll(".fk-collapsible-list-wrapper");collapsibleList.forEach(function(list){var item=list.querySelectorAll(".fk-collapsible-list-details");if(item.length){var collapsibleDetailElement=item[0];var openIcon=$(collapsibleDetailElement).find(".open-icon");var closeIcon=$(collapsibleDetailElement).find(".close-icon");if(list.dataset.open==="true"){collapsibleDetailElement.open=true;openIcon.hide()}else{collapsibleDetailElement.open=false;closeIcon.hide()}var iconContainer=collapsibleDetailElement.querySelectorAll(".fk-collapsible-list-icon-rotate");iconContainer.length===1?iconContainer[0].classList.add("fk-icon-rotate"):null;collapsibleDetailElement.onclick=function(e){if(!$(e.target).closest("summary").length)return;var scrollInView=$(e.currentTarget).closest("[data-scroll-in-view=true]");var container=$(e.currentTarget).closest("[data-toggle-collapsible=true]");var openValue=e.currentTarget.open;if(container.length){var details=container.find("details");details.attr("open",false);details.find(".open-icon").show();details.find(".close-icon").hide();$(e.currentTarget).attr("open",openValue)}if(!openValue){openIcon.hide();closeIcon.show()}else{openIcon.show();closeIcon.hide()}if(scrollInView.length&&!openValue){var summaryElement=$(e.currentTarget).find("summary").first();summaryElement.length&&summaryElement[0].scrollIntoView({behavior:"smooth",block:"center"})}return true}}})}catch(error){console.log(error)}}//fetch the current currency symbol
function fetchCurrentCurrencyObj(currencyCode){return pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencies&&pageData.selectedCampaign.currencies.find(function(obj){return obj.currencyCode===currencyCode})}function changeFaviconLink(url){if(url&&url.length>0){var link=$("head link[rel=\"shortcut icon\"]")||$("head link[rel=\"icon\"]");if(link&&link.length>0){$(link).attr("href",url)}else{var newLink=$("<link>");newLink.attr("href",url);newLink.attr("rel","shortcut icon");$("head").append(newLink)}}}function ccSetAttributesForYTAPI(targetElement,id,logs,type){try{if(YT&&YT.Player){$(targetElement).attr("id",id);$(targetElement).attr("data-video-logs",logs);$(targetElement).attr("data-video-type",type);ccYTAPIObjs[id]=new YT.Player(id,{events:{"onReady":ccOnYTPlayerReady,"onStateChange":ccOnYTPlayerStateChange}})}}catch(error){}}function loadYoutubeThumbnails(){var element=document.querySelectorAll(".fk-youtube");var _loop7=function _loop7(){var isEmbedClassExists=element[i].classList.value.match(/embed-responsive\S{0,}/g);source="https://img.youtube.com/vi/"+element[i].getAttribute("fk-video-id")+"/sddefault.jpg";div=document.createElement("DIV");div.style.backgroundImage="url('"+source+"')";if(isEmbedClassExists){div.style.top="0"}div.className="fk-rm image";div.addEventListener("load",function(){element[i].appendChild(div)}(i));var ytSrcIframe=$(element[i]).find("iframe");var iframeVideoType=ytSrcIframe.attr("data-video-type");var iframeVideoLogs=ytSrcIframe.attr("data-video-logs");var supportVSL=["yt","ytnc"].includes(iframeVideoType)&&iframeVideoLogs;var fkVideoSrc=element[i].getAttribute("fk-video-src");if(fkVideoSrc.includes("autoplay=1")||element[i].classList.contains("fk-disable-lazy")){iframe=getYoutubeIframe();isEmbedClassExists&&iframe.classList.add("embed-responsive-item");if(fkVideoSrc.includes("autoplay=1")){iframe.setAttribute("src",fkVideoSrc+"&mute=1")}else{iframe.setAttribute("src",fkVideoSrc)}element[i].innerHTML="";element[i].appendChild(iframe);supportVSL&&ccSetAttributesForYTAPI(iframe,"ccytvsl"+getUniqueId(),iframeVideoLogs,iframeVideoType)}else{element[i].addEventListener("click",function(){var iframe=getYoutubeIframe();isEmbedClassExists&&iframe.classList.add("embed-responsive-item");iframe.setAttribute("src","https://www.youtube.com/embed/"+this.getAttribute("fk-video-id")+"?rel=0&showinfo=0&autoplay=1"+(supportVSL?"&enablejsapi=1":""));this.innerHTML="";this.appendChild(iframe);supportVSL&&ccSetAttributesForYTAPI(iframe,"ccytvsl"+getUniqueId(),iframeVideoLogs,iframeVideoType)})}},source,div,iframe;for(var i=0;i<element.length;i++){_loop7()};}function getYoutubeIframe(){var iframe=document.createElement("iframe");iframe.setAttribute("frameborder","0");iframe.setAttribute("allowfullscreen","");iframe.setAttribute("allow","autoplay");return iframe}function updateReplacementProducts(orderItems,obj){// Converting Nodelists to normal arrays to avoid forEach errors in Microsoft Edge - FUN2-1637
var productInputs=_toConsumableArray(document.getElementsByName("product"));var fromUpsell=pageData&&pageData.pageTypeId===3;for(var _i35=1;_i35<=2;_i35++){var inputSelector="product"+_i35;productInputs=[].concat(_toConsumableArray(productInputs),_toConsumableArray(document.getElementsByName(inputSelector)))}if(productInputs){productInputs.forEach(function(product){if(!product.offsetParent){return}var replacementProductValue=product.getAttribute("replaceproductid");if(Number(replacementProductValue)&&product.tagName.toLowerCase()==="input"){if(product.checked){if(fromUpsell){if(obj){obj.replaceProductId=replacementProductValue}}else if(orderItems[replacementProductValue]){delete orderItems[replacementProductValue]}}else if(!fromUpsell){if(!orderItems[replacementProductValue]){orderItems[replacementProductValue]=1}var productValue=product.getAttribute("value");delete orderItems[productValue]}}})}}function updateCheckboxAndRadioProductIdHashMap(){var shoppingCart=document.querySelectorAll(".fk-shopping-cart");if(shoppingCart&&shoppingCart.length||$(".cc-cart-container").length){var productInputs=document.querySelectorAll(".fk-product-checkbox, .fk-product-radio");var productInputsCount=productInputs.length;for(var _i36=0;_i36<productInputsCount;_i36++){var _item3=productInputs[_i36];var type=_item3.getAttribute("type");var value=_item3.getAttribute("value");if((type==="checkbox"||type==="radio")&&value){fkCheckboxAndRadioProductIdHashMap[value]=true}}}}function ccCaptchaAssessmentCallback(_x14,_x15,_x16,_x17,_x18){return _ccCaptchaAssessmentCallback.apply(this,arguments)}function _ccCaptchaAssessmentCallback(){_ccCaptchaAssessmentCallback=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee21(token,uniqueId,action,successCallbackFn,failureCallbackFn){var params,options,res,resJson;return _regeneratorRuntime().wrap(function _callee21$(_context23){while(1)switch(_context23.prev=_context23.next){case 0:_context23.prev=0;if(token){_context23.next=3;break}return _context23.abrupt("return");case 3:params={"event":{"token":token,"expectedAction":action,"siteKey":captchaSiteKey}};options={"method":"POST","headers":{"Content-Type":"application/json"},"body":JSON.stringify(params)};_context23.next=7;return fetch("https://recaptchaenterprise.googleapis.com/v1/projects/"+captchaProjectId+"/assessments?key="+captchaAssessmentKey,options);case 7:res=_context23.sent;_context23.next=10;return res.json();case 10:resJson=_context23.sent;if(!(resJson&&resJson.tokenProperties.valid&&resJson.riskAnalysis.score>=Number(captchaThresholdScore)&&resJson.tokenProperties.action===resJson.event.expectedAction)){_context23.next=18;break}uniqueId&&$("#"+uniqueId).hide();if(!successCallbackFn){_context23.next=16;break}_context23.next=16;return successCallbackFn();case 16:_context23.next=22;break;case 18:if(!failureCallbackFn){_context23.next=21;break}_context23.next=21;return failureCallbackFn();case 21:if(captchaFailRedirect)window.location.href=captchaFailRedirect;case 22:_context23.next=31;break;case 24:_context23.prev=24;_context23.t0=_context23["catch"](0);uniqueId&&$("#"+uniqueId).hide();if(!failureCallbackFn){_context23.next=30;break}_context23.next=30;return failureCallbackFn();case 30:console.log(_context23.t0);case 31:case"end":return _context23.stop()}},_callee21,null,[[0,24]])}));return _ccCaptchaAssessmentCallback.apply(this,arguments)}function ccGenerateCaptchaToken(uniqueId,skipUniqueIdPassing,successCallback,failCallback){if(window.grecaptcha&&window.grecaptcha.enterprise){var action="VERIFY",sectionId=skipUniqueIdPassing?null:uniqueId;if(captchaType==="2"){grecaptcha.enterprise.ready(function(){grecaptcha.enterprise.render(uniqueId,{"sitekey":captchaSiteKey,"action":action,"callback":function callback(token){ccCaptchaAssessmentCallback(token,sectionId,action,successCallback,failCallback)}})})}else{grecaptcha.enterprise.ready(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var token;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return grecaptcha.enterprise.execute(captchaSiteKey,{action:action});case 2:token=_context3.sent;ccCaptchaAssessmentCallback(token,sectionId,action,successCallback,failCallback);case 4:case"end":return _context3.stop()}},_callee3)})))}}}function ccAddReCaptchaScripts(){try{var pageId=pageData&&pageData.pageTypeId,checkoutPage=pageId===4,loginPage=pageId===7,leadPage=pageId===2;if((leadPage||loginPage||checkoutPage&&$("[name='cardNumber']").length)&&captchaSiteKey&&captchaAssessmentKey&&captchaProjectId){var alphabets="abcdefghijklmnopqrstuvwxyz";var randomLetter=alphabets[Math.floor(Math.random()*alphabets.length)];var uniqueId=randomLetter+Math.random().toString(36).substring(7);var key="cc"+(checkoutPage?"Checkout":loginPage?"Login":"Lead")+"PageLoad";var checkboxCaptcha=captchaType==="2";$.getScript("https://www.google.com/recaptcha/enterprise.js?render="+(checkboxCaptcha?"explicit":captchaSiteKey),function(){if(!ccGetCookie(key)&&captchaTrigger==="1"){if(checkboxCaptcha){$("head").append("<style>#"+uniqueId+"{position: fixed;top: 0;left: 0;height: 100vh;width: 100vw;background-color: white;display: flex;z-index:2000000000;} #"+uniqueId+" div{margin: 10px auto;}</style>");$("body").append("<div id=\""+uniqueId+"\"></div>")}ccGenerateCaptchaToken(uniqueId,!checkboxCaptcha,function(){ccSetCookie(key,"true",false,5*60*1000)})}})}}catch(err){console.log(err)}}function ccUpdateCampaignId(){var pageTypeId=pageData&&pageData.pageTypeId;if(pageTypeId===7)return;var campaignId=pageTypeId===13?Number(sessionStorage.getItem("ccChangeProductCampaignId")):Number(sessionStorage.getItem("ccCampaignId"));if(campaignId){pageData.selectedCampaign.campaignId=campaignId;pageData.funnelData.campaign=campaignId}}function fetchPageData(){var isBuildOrTemplate=checkBuildOrTemplate();var funnelJsonResult=funnelJson;var campaignJsonResult=campaignJson;var funnelData=funnelJsonResult&&!funnelJsonResult.isFunnel?funnelJsonResult.funnelTemplateData:funnelJsonResult.funnelData;var faviconUrl=funnelJsonResult&&funnelJsonResult.faviconUrl;changeFaviconLink(faviconUrl);pageData.funnelData=funnelData;window.ccFacebookPixelID=getProvidersData(2);var currentFunnelData=sessionStorage.getItem("funnelData")!="undefined"?JSON.parse(sessionStorage.getItem("funnelData")):null;if(document.getElementById("fk-dynamic-orders-table")){sessionStorage.removeItem("orderStatusInfo")}pageData.currentPage=getCurrentPage(funnelData);pageData.pageTypeId=pageData.currentPage&&pageData.currentPage.pageView[0].pageType;var externalSessionId=sessionStorage.getItem("ccExternalSessionId"),funnelRefId=pageData.funnelReferenceId,funnelRefIdPrefix=funnelRefId&&funnelRefId.slice(0,4);if(currentFunnelData&&currentFunnelData.referenceId!=funnelRefId||![3,5].includes(pageData.pageTypeId)&&externalSessionId&&funnelRefIdPrefix&&!externalSessionId.startsWith(funnelRefIdPrefix)){sessionStorage.removeItem("sessionId");sessionStorage.removeItem("ccExternalSessionId");sessionStorage.removeItem("requestUri");sessionStorage.removeItem("orderId");sessionStorage.removeItem("orderData");sessionStorage.removeItem("userDetails");sessionStorage.removeItem("products");sessionStorage.removeItem("bundleItems");sessionStorage.removeItem("bundleStringArray");sessionStorage.removeItem("bundleProductsPageRef");sessionStorage.removeItem("dynamicUpsellsByPageRef");sessionStorage.removeItem("importOrderSuccess");sessionStorage.removeItem("importOrderSuccessGA");sessionStorage.removeItem("importOrderSuccessSC");sessionStorage.removeItem("importUpsellSuccessSC");sessionStorage.removeItem("importUpsellSuccess");sessionStorage.removeItem("importUpsellSuccessGA");sessionStorage.removeItem("importOrderSuccessSygnal");sessionStorage.removeItem("importUpsellSuccessSygnal");sessionStorage.removeItem("importOrderSuccessTTK");sessionStorage.removeItem("importUpsellSuccessTTK")}if(!sessionStorage.getItem("requestUri")){sessionStorage.setItem("requestUri",getCurrentWindowLocation().href);sessionStorage.setItem("httpReferer",document.referrer)}sessionStorage.setItem("funnelData",JSON.stringify(funnelData));setSplitSelected(pageData.currentPage);var currentSlug=window.location.pathname.substring(1).split(".")[0];try{if(currentSlug!==""&&currentSlug!==pageData.pageViewReferenceId&&currentSlug!==pageData.currentPage.urlSlug&&checkDomainForRoute()===false){window.history.replaceState({},"","/"+(pageData.currentPage.urlSlug||pageData.pageViewReferenceId+".html")+window.location.search)}}catch(ex){console.log(ex)}var funnelTitle=pageData.currentPage.isPageTitle?pageData.currentPage.title:funnelData.title;funnelTitle?$("title").text(funnelTitle):$("title").text("Checkout Champ");![13,18,34].includes(pageData.pageTypeId)&&(ccDynamicProductSection||dynamicOrderBump)&&sessionStorage.removeItem("currentItem");if(pageData.pageTypeId===5){sessionStorage.removeItem("currentItem");sessionStorage.removeItem("isSubscribeOn")}if(pageData.pageTypeId===7){sessionStorage.setItem("loginPageUrl",window.location.href)}pageData.pageTypeId===4&&ccLoadOpenPathScript();ccInitializeStamped();globalOrderData=pageData.pageTypeId===9?JSON.parse(sessionStorage.getItem("orderStatusInfo")):JSON.parse(sessionStorage.getItem("orderData"));isVatOnOrder=globalOrderData&&globalOrderData.items&&Object.values(globalOrderData.items)[0].vatPrice;pageData.salt=funnelData.salt;sessionStorage.setItem("fk_salt",pageData.salt);pageData.navigationItems=funnelJsonResult.elements.filter(function(element){return element.pageViewReferenceId===pageData.currentPage.pageView[0].referenceId});pageData.selectedCampaign=campaignJsonResult.selectedCampaign;ccUpdateCampaignId();(pageData.pageTypeId===4||pageData.pageTypeId===9)&&checkForMembershipLogin();if((pageData.pageTypeId===4||pageData.pageTypeId===34)&&ccUrlParams.has("checkoutId")){sessionStorage.setItem("isUniqueCheckoutId",true)}!isBuildOrTemplate&&pageData.pageTypeId===3&&updatePaymentButtons(globalOrderData);updateCheckboxAndRadioProductIdHashMap();campaignBaseCurrencySymbol=pageData.selectedCampaign.currencySymbol;ccAddReCaptchaScripts();window.ccRenderInsureShipWidget&&ccRenderInsureShipWidget(true);swapCartProducts().then(function(){var variationIds=setOrderItemDetails();if(variationIds.length>0){populateVariantAsync(variationIds.join(",")).then(function(data){if(data.result==="SUCCESS"){populateProductVariants(data.message)}HeadAndInitializePage()})}else{HeadAndInitializePage()}var campaignRecommendations=pageData.selectedCampaign.recommendedProducts&&pageData.selectedCampaign.recommendedProducts.length;refreshOrderBumps.length&&(!campaignCalled&&ccResetRefreshOrderBumps(true)||!campaignRecommendations&&ccResetRefreshOrderBumps("",true))})}function HeadAndInitializePage(){return _HeadAndInitializePage.apply(this,arguments)}function _HeadAndInitializePage(){_HeadAndInitializePage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee22(){var currencyCode,captureLeadArray,rightPanelEnabledPages,purchaseActionPageTypes;return _regeneratorRuntime().wrap(function _callee22$(_context24){while(1)switch(_context24.prev=_context24.next){case 0:if(!document.URL.includes("funnels-build"))getHeadCode();campaignBaseCurrencySymbol=pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol;currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;ccSetCurrencyRules(currencyCode);initializePage();captureLeadArray=[2,4,15];rightPanelEnabledPages=[2,17,18,34];if(captureLeadArray.includes(pageData.pageTypeId)&&!finishProcessing){captureLeadInterval=window.setInterval(function(){captureLead()},10000)}if(rightPanelEnabledPages.includes(pageData.pageTypeId)){showRightPanel()}$("img").each(function(){var hrefAttr=$(this).attr("href");if(hrefAttr!==""&&hrefAttr!==undefined&&hrefAttr!==false&&hrefAttr!==null){$(this).css("cursor","pointer");$(this).hover(function(){$(this).css("opacity","0.5")},function(){$(this).css("opacity","1")})}});if(pageData.pageTypeId!==13)sessionStorage.removeItem("ccActionPurchaseItem");if(!isMembershipPage(pageData.pageTypeId)){_context24.next=18;break}purchaseActionPageTypes=[10,11,13,31];if(!purchaseActionPageTypes.includes(pageData.pageTypeId)){sessionStorage.removeItem("actionPurchaseId");sessionStorage.removeItem("actionProductId");sessionStorage.removeItem("actionCurrentItem");sessionStorage.removeItem("actionNextBillDate");sessionStorage.removeItem("actionCurrentProductQty")}_context24.t0=window.validateToken;if(!_context24.t0){_context24.next=18;break}_context24.next=18;return validateToken();case 18:callWindowLoad();fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):{};case 20:case"end":return _context24.stop()}},_callee22)}));return _HeadAndInitializePage.apply(this,arguments)}function ccShowBSAlert(content,alertClass,removeAlert){var alertColorClass=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"alert-danger";var boldText=arguments.length>4&&arguments[4]!==undefined?arguments[4]:"Alert :";try{removeAlert&&alertClass&&$("."+alertClass).remove();$("body").append("<div style='padding-top: 15px; padding-bottom: 15px; position: fixed; top: 0; width: 100%; z-index: 99999999;' class='alert "+alertClass+" "+alertColorClass+" alert-dismissible fade show' role='alert'><strong>"+boldText+"</strong> "+content+"<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>")}catch(err){}}function ccShowAVStatus(status){var messageWithId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";switch(status||sessionStorage.getItem("ccAgeVerificationStatus")){case"SUCCESS":ccShowBSAlert("Age verification succeeded"+messageWithId+".","cc-av-popup-alert",true,"alert-success");break;case"FAIL":ccShowBSAlert("Age verification failed"+messageWithId+". Please contact customer support for inquiries related to order status.","cc-av-popup-alert",true);break;case"CLOSED":ccShowBSAlert("Age verification is required"+messageWithId+". Please reload the page and complete age verification to prevent order cancellation.","cc-av-popup-alert",true)}}function ccConfigureAndInitializeAgeVerificationScript(){try{var avPluginId=getAddOnKeyValue(findAddOn("AV_PLUGIN_ID"));if(!avPluginId)return;$(".cc-av-popup-alert").remove();var avSection=$(".cc-show-av-popup"),avSectionBtn=avSection.find("button");var _orderData2=pageData&&pageData.pageTypeId===5&&sessionStorage.getItem("orderData");_orderData2=_orderData2?JSON.parse(_orderData2):null;var _orderId2=_orderData2&&_orderData2.orderId,messageWithId=_orderId2?" for order with ID "+_orderId2:"";var avStatus=sessionStorage.getItem("ccAgeVerificationStatus");if(_orderData2&&_orderData2.reviewStatus==="AGE"&&(!avStatus||avStatus==="CLOSED")){sessionStorage.removeItem("ccAgeVerificationStatus");var avClientId=getAddOnKeyValue(findAddOn("AV_ClientId")),avLevel=getAddOnKeyValue(findAddOn("AV_Level"));if(avClientId&&avLevel){var oneAccountLoadSuccessCallback=function oneAccountLoadSuccessCallback(){try{ccShowBSAlert("Please wait. Validating order details for age verification.","cc-av-popup-alert",true);avSection.find("button").attr("disabled",true);if(window.PUSH_API){PUSH_API.init({authCode:_orderData2.orderId,avLevel:avLevel,clientId:avClientId,onClose:function onClose(){$(".cc-show-av-popup").find("button").attr("disabled",false);sessionStorage.setItem("ccAgeVerificationStatus","CLOSED");ccShowAVStatus("CLOSED",messageWithId)},onComplete:function onComplete(response){$(".cc-show-av-popup").find("button").attr("disabled",false);if(response.status==="AV_SUCCESS"){sessionStorage.setItem("ccAgeVerificationStatus","SUCCESS")}else if(response.status==="AV_FAIL"){sessionStorage.setItem("ccAgeVerificationStatus","FAIL");ccShowAVStatus("FAIL",messageWithId)}}});var iframe=document.querySelector("iframe#one-account-push-api");iframe&&iframe.addEventListener("load",function(){$(".cc-av-popup-alert").remove();avSection.length&&avSection.show();if(avSectionBtn.length){avSectionBtn.attr({"disabled":false,"onclick":""});avSectionBtn.on("click",function(event){event.preventDefault();var avPopupBtn=$(".cc-show-av-popup").find("button");avPopupBtn.attr("disabled",true);$(".cc-av-popup-alert").remove();var avSessionStatus=sessionStorage.getItem("ccAgeVerificationStatus");if(!avSessionStatus){PUSH_API.validate(userData)}else{ccShowAVStatus(avSessionStatus,messageWithId);avPopupBtn.attr("disabled",false)}})}else{PUSH_API.validate(userData)}})}}catch(err){console.log(err)}};var oneAccountLoadFailureCallback=function oneAccountLoadFailureCallback(){ccShowBSAlert("Age verification script load failed. Please reload the page and complete verification or contact support.","cc-av-popup-alert",true)};var userData={"msisdn":_orderData2.phoneNumber||"","email":_orderData2.emailAddress||"","forename":_orderData2.firstName||"","surname":_orderData2.lastName||"","city":_orderData2.city||"","street":_orderData2.address1||"","building":_orderData2.address2||"","postCode":_orderData2.postalCode||"","country":_orderData2.country||""};if(Number(avLevel)>2)userData["dobDay"]="";loadScript("https://www.1account.net/pushApi/index.js",oneAccountLoadSuccessCallback,null,"one-account-push-api",null,null,null,oneAccountLoadFailureCallback)}}else{ccShowAVStatus(avStatus,messageWithId)}}catch(err){console.log(err)}}function showRightPanel(){// To load the required styles and html content for right panel
if($("body").find(".rightPanelHTML").length!==0){$("head").append("<style>".concat(rightPanelStyles,"</style>"));$(".rightPanelHTML").css("display","block")}}function removeCartIcon(){// To remove the cart icon and quantity circle for Upsell and Thank you pages
$(".fk-parent-cart-element, .rightPanelHTML").remove()}function removeMenuElement(){// To remove menu elements and hamburger icon from upsell and thank you pages
$(".fk-menu-btn-container, .fk-menu-container").remove()}function getCurrentPage(funnelData){var funnelPages=funnelData.pages;if(funnelPages&&funnelPages.length){var matchedPage=$.grep(funnelPages,function(page){var currentPageView=page&&page.pageView&&page.pageView[0];if(currentPageView){return currentPageView.referenceId===pageData.pageViewReferenceId}});return matchedPage&&matchedPage[0]}return null}var importClickcounter=0;function triggerImportClick(pageType,firstTimeLoad,externalSessionId){if(sessionStorage.getItem("sessionId")){return}importClick(pageType,externalSessionId).then(function(data){if(sessionStorage.getItem("sessionId")){return}if(data.result==="SUCCESS"){window.ccInitializeIdMe&&ccInitializeIdMe(providerUrl,externalSessionId,pageData);pageType===4&&window.ccIsPayPalFastlaneEnabled&&ccIsPayPalFastlaneEnabled()&&window.configurePayPalSmartButtons&&configurePayPalSmartButtons(data);var jsonStr=JSON.stringify(data);sessionStorage.setItem("sessionId",jsonStr);if(data.message){var _data$message;((_data$message=data.message)===null||_data$message===void 0||(_data$message=_data$message.amazonPay)===null||_data$message===void 0?void 0:_data$message.gatewaySdkParams)&&window.ccConfigureAmazonPayV2&&ccConfigureAmazonPayV2(data.message.amazonPay.gatewaySdkParams);if(getAddOnKeyValue(findAddOn("GEOLOCATION_ADDRESS"))==="3"&&data.message.geoInfo&&!sessionStorage.getItem("ccGeoLocationInfo")){var _data$message$geoInfo=data.message.geoInfo,geoCountry=_data$message$geoInfo.geoCountry,geoState=_data$message$geoInfo.geoState,geoCity=_data$message$geoInfo.geoCity,geoPostal=_data$message$geoInfo.geoPostal;geoCountry&&sessionStorage.setItem("ccGeoLocationInfo",JSON.stringify({city:geoCity,region_code:geoState,country_code:geoCountry,zip_code:geoPostal,source:"server"}))}if(data.message.pixel)firePixel(data.message.pixel);if(data.message.siftBeaconKey)fireSiftPixel(data.message.siftBeaconKey)}firstTimeLoad&&registerClick(0);window.loadCCPayPalFraudNetScripts&&loadCCPayPalFraudNetScripts()}else if(data.message==="duplicate"){window.ccInitializeIdMe&&ccInitializeIdMe(providerUrl,externalSessionId,pageData);var sessionValue={"result":"SUCCESS","message":{"sessionId":externalSessionId}};sessionStorage.setItem("sessionId",JSON.stringify(sessionValue));firstTimeLoad&&registerClick(0);window.loadCCPayPalFraudNetScripts&&loadCCPayPalFraudNetScripts()}else if(data.message==="session failed"){sessionStorage.setItem("ccSessionCallFailed","1");if(pageType!==3&&pageType!==5){if(importClickcounter<1){setTimeout(function(){triggerImportClick(pageType,firstTimeLoad,externalSessionId)},3000)}importClickcounter++}else{$("body").append(data.message)}}else{$("body").append(data.message)}response=data})}function checkForMembershipLogin(){if(pageData&&pageData.currentPage&&pageData.currentPage.isMembershipRequired&&!(cookieData["access_token"]&&cookieData["memberId"]&&cookieData["status"]===active)){redirectToLoginPage()}}function generateCustomerDetails(){return _generateCustomerDetails.apply(this,arguments)}function _generateCustomerDetails(){_generateCustomerDetails=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee23(){var isProductDetailPage,isUniqueCheckoutId,_response6,orders,_productId17,_urlProduct,isUniqueCheckout,_fkCart4,_args23=arguments;return _regeneratorRuntime().wrap(function _callee23$(_context25){while(1)switch(_context25.prev=_context25.next){case 0:isProductDetailPage=_args23.length>0&&_args23[0]!==undefined?_args23[0]:false;isUniqueCheckoutId=sessionStorage.getItem("isUniqueCheckoutId");if(!isUniqueCheckoutId){_context25.next=30;break}_context25.prev=3;_context25.next=6;return httpMethod("".concat(providerUrl,"/Customer/checkout"),JSON.stringify({checkoutId:ccUrlParams.get("checkoutId")}));case 6:_response6=_context25.sent;if(!(_response6.result==="SUCCESS")){_context25.next=25;break}orders=_response6.message.data;if(!(orders.length>0)){_context25.next=25;break}_productId17=orders[0].campaignProductId;_urlProduct=_productId17+(orders[0].variantDetailId?"."+orders[0].variantDetailId:"");isUniqueCheckout=pageData.selectedCampaign.products.find(function(product){return product.campaignProductId==_productId17});// For product detail page - only store currentItem if unique
if(!(isUniqueCheckout&&isProductDetailPage)){_context25.next=17;break}sessionStorage.setItem("currentItem",_urlProduct);replaceTokens();return _context25.abrupt("return");case 17:sessionStorage.setItem("customerOrders",JSON.stringify(orders));// Prepare cart info
_fkCart4=sessionStorage.getItem("fkCart");_fkCart4=_fkCart4?JSON.parse(_fkCart4):{};if(!_fkCart4[_urlProduct]){_fkCart4[_urlProduct]=ccUrlParams.has("qty")?ccUrlParams.get("qty"):1;sessionStorage.setItem("fkCart",JSON.stringify(_fkCart4))}autoLoadInputs(orders[0]);// Check for unique checkout
if(!isUniqueCheckout){_context25.next=25;break}addAcctOnFile(true);return _context25.abrupt("return");case 25:_context25.next=30;break;case 27:_context25.prev=27;_context25.t0=_context25["catch"](3);sessionStorage.removeItem("isUniqueCheckoutId");case 30:if(!isProductDetailPage&&cookieData["access_token"]){addAcctOnFile()}case 31:case"end":return _context25.stop()}},_callee23,null,[[3,27]])}));return _generateCustomerDetails.apply(this,arguments)}function addAcctOnFile(){return _addAcctOnFile.apply(this,arguments)}function _addAcctOnFile(){_addAcctOnFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee24(){var isUniqueCheckoutId,customerOrderData,securedFrame,inputFieldObj,accOnFileTemplateStrContainer,computed,paddingLeft,marginLeft,cssText,inputFieldContainer,inputFieldParentContainer,lockIcon,_args24=arguments;return _regeneratorRuntime().wrap(function _callee24$(_context26){while(1)switch(_context26.prev=_context26.next){case 0:isUniqueCheckoutId=_args24.length>0&&_args24[0]!==undefined?_args24[0]:false;_context26.prev=1;_context26.t0=!isUniqueCheckoutId&&window.orderQuery;if(!_context26.t0){_context26.next=6;break}_context26.next=6;return orderQuery();case 6:customerOrderData=sessionStorage.getItem("customerOrders");customerOrderData=customerOrderData?JSON.parse(customerOrderData):null;customerOrderData=customerOrderData&&customerOrderData[customerOrderData.length-1];if(customerOrderData&&customerOrderData.cardLast4){_context26.next=11;break}return _context26.abrupt("return");case 11:sessionStorage.setItem("customerCardLastDigits",customerOrderData.cardLast4);sessionStorage.setItem("customerCardExpiry",customerOrderData.cardExpiryDate);securedFrame=Array.from(document.getElementsByName("cc-secured-form")).find(function(el){return el.tagName==="IFRAME"});inputFieldObj=securedFrame?securedFrame:document.getElementsByName("cardNumber")[0];if(inputFieldObj){accOnFileTemplateStrContainer=document.createElement("div");accOnFileTemplateStrContainer.id="acctOnFileContainer";computed=window.getComputedStyle(inputFieldObj);paddingLeft=computed.paddingLeft;marginLeft=computed.marginLeft;cssText="display:flex;flex-direction: row;";if(paddingLeft&&paddingLeft!=="0px"){cssText+="padding-left:".concat(paddingLeft,";")}if(marginLeft&&marginLeft!=="0px"){cssText+="margin-left:".concat(marginLeft,";")}accOnFileTemplateStrContainer.style.cssText=cssText;accOnFileTemplateStrContainer.innerHTML="<div id='' class=''><input id='acctOnFile' class='' type='checkbox' name='acctOnFile' checked='true' onclick='populateAcctOnFile()' style='cursor: pointer; height: auto; width: auto;'></div><div id='' class=''><label id='' class='' style='text-align: left; padding-left: 5px;'>Use card ending in "+customerOrderData.cardLast4+"</label></div>";inputFieldContainer=inputFieldObj.parentNode;inputFieldContainer.append(accOnFileTemplateStrContainer);inputFieldContainer.style.position="relative";inputFieldParentContainer=inputFieldContainer.parentNode;lockIcon=inputFieldParentContainer.getElementsByClassName("fa-lock")[0];if(lockIcon){lockIcon.remove();lockIcon=null;lockIcon=document.createElement("i");lockIcon.style.cssText="position: absolute; right: 3%; top: 60%;";lockIcon.id="cardLockIcon";lockIcon.classList="fa fa-lock";inputFieldContainer.append(lockIcon)}inputFieldContainer.insertBefore(accOnFileTemplateStrContainer,inputFieldObj);populateAcctOnFile()}_context26.next=21;break;case 18:_context26.prev=18;_context26.t1=_context26["catch"](1);window.consumerLogout&&consumerLogout(false);case 21:case"end":return _context26.stop()}},_callee24,null,[[1,18]])}));return _addAcctOnFile.apply(this,arguments)}function populateAcctOnFile(){try{var cardExpiry=sessionStorage.getItem("customerCardExpiry");var cardNumber=sessionStorage.getItem("customerCardLastDigits");var cardExpiryDateArray=cardExpiry&&cardExpiry.split(" ")[0].split("-");cardExpiry=cardExpiryDateArray&&cardExpiryDateArray.length===3&&cardExpiryDateArray[1]+cardExpiryDateArray[0].substr(2);var isChecked=document.getElementById("acctOnFile");var cardDateElement=$("[name=cardDate]");var cardNumberElement=$("[name=cardNumber]");var cardMonth=$("[name=cardMonth]");var cardYear=$("[name=cardYear]");if(isChecked.checked===true){cardNumberElement.val(cardNumber?"XXXXXXXXXXXX"+cardNumber:"").prop("disabled",true);cardDateElement.val(cardExpiry?cardExpiry:"").prop("disabled",true);cardMonth.val(cardExpiryDateArray[1]).prop("disabled",true);cardYear.val(cardExpiryDateArray[0]).prop("disabled",true);ToggleSecuredCardElement({"cardNumber":"XXXXXXXXXXXX"+cardNumber,"cardDate":cardExpiry,"cardMonth":cardExpiryDateArray[1],"cardYear":cardExpiryDateArray[0],"cardSecurityCode":""});sessionStorage.setItem("paySource","ACCTONFILE")}else{cardNumberElement.val("").prop("disabled",false);cardDateElement.val("").prop("disabled",false);cardMonth.val("0").prop("disabled",false);cardYear.val("").prop("disabled",false);ToggleSecuredCardElement({"cardNumber":"","cardDate":"","cardMonth":"","cardYear":"","cardSecurityCode":""});sessionStorage.removeItem("paySource")}}catch(error){console.log(error)}}function ToggleSecuredCardElement(param){var securedFrame=Array.from(document.getElementsByName("cc-secured-form")).find(function(el){return el.tagName==="IFRAME"});sendMessageToFrame(securedFrame,param)}function sendMessageToFrame(iframe,data){if(elementSecured){data.ccSecureAppChild=true;iframe.contentWindow.postMessage(data,"*")}else{setTimeout(function(){return sendMessageToFrame(iframe,data)},200)}}function updatePaymentButtons(orderData){var pageNavigationItems=pageData&&pageData.navigationItems;var isGooglePayCheckout=orderData&&orderData.prepaidType==="GOOGLEPAY";var isApplePayCheckout=orderData&&orderData.prepaidType==="APPLEPAY";var isGooglePay=isGooglePayCheckout&&($(".btnGoogle1").length||$(".btnGoogle2").length);var isApplePay=isApplePayCheckout&&$(".btnApplePay").length;for(var _i37=0;_i37<pageNavigationItems.length;_i37++){var btnLinkEle=$("[data-id="+pageNavigationItems[_i37].elementId+"]")[0];var btnLinkAction=btnLinkEle&&btnLinkEle.getAttribute("action");var btnLinkClassList=btnLinkEle&&btnLinkEle.classList;if(btnLinkAction==="submit"){if(isGooglePay){if(!(btnLinkClassList.contains("btnGoogle1")||btnLinkClassList.contains("btnGoogle2")))btnLinkEle.remove()}else if(isGooglePayCheckout&&!btnLinkClassList.contains("cc-one-click-btn")){btnLinkClassList.add("cc-global-payment-btn");btnLinkClassList.contains("btnApplePay")&&btnLinkEle.remove()}else if(isApplePay){if(!btnLinkClassList.contains("btnApplePay"))btnLinkEle.remove()}else if(isApplePayCheckout&&!btnLinkClassList.contains("cc-one-click-btn")){btnLinkClassList.add("cc-global-payment-btn");(btnLinkClassList.contains("btnGoogle1")||btnLinkClassList.contains("btnGoogle2"))&&btnLinkEle.remove()}else if(btnLinkClassList.contains("btnGoogle1")||btnLinkClassList.contains("btnGoogle2")||btnLinkClassList.contains("btnApplePay")){btnLinkEle.remove()}}}}function addTripleWhaleDefaultScript(shopPayUrl){try{$("head").append("<link rel='preconnect dns-prefetch' href='https://api.config-security.com/' crossorigin /><link rel='preconnect dns-prefetch' href='https://conf.config-security.com/' crossorigin /><link rel='preconnect dns-prefetch' href='https://whale.camera/' crossorigin />");var tripleWhaleGlobalScript=document.createElement("script");var url=shopPayUrl&&shopPayUrl.replace("https://","");tripleWhaleGlobalScript.innerHTML="window.TriplePixelData={TripleName:'"+url+"',ver:'2.11',plat:'SHOPIFY',isHeadless:true},function(W,H,A,L,E,_,B,N){function O(U,T,P,H,R){void 0===R&&(R=!1),H=new XMLHttpRequest,P?(H.open('POST',U,!0),H.setRequestHeader('Content-Type','application/json')):H.open('GET',U,!0),H.send(JSON.stringify(P||{})),H.onreadystatechange=function(){4===H.readyState&&200===H.status?(R=H.responseText,U.includes('.txt')?eval(R):P||(N[B]=R)):(299<H.status||H.status<200)&&T&&!R&&(R=!0,O(U,T-1,P))}}if(N=window,!N[H+'sn']){N[H+'sn']=1,L=function(){return Date.now().toString(36)+'_'+Math.random().toString(36)};try{A.setItem(H,1+(0|A.getItem(H)||0)),(E=JSON.parse(A.getItem(H+'U')||'[]')).push({u:location.href,r:document.referrer,t:Date.now(),id:L()}),A.setItem(H+'U',JSON.stringify(E))}catch(e){}var i,m,p;A.getItem('\"!nC`')||(_=A,A=N,A[H]||(E=A[H]=function(t,e,a){return void 0===a&&(a=[]),'State'==t?E.s:(W=L(),(E._q=E._q||[]).push([W,t,e].concat(a)),W)},E.s='Installed',E._q=[],E.ch=W,B='configSecurityConfModel',N[B]=1,O('https://conf.config-security.com/model',5),i=L(),m=A[atob('c2NyZWVu')],_.setItem('di_pmt_wt',i),p={id:i,action:'profile',avatar:_.getItem('auth-security_rand_salt_'),time:m[atob('d2lkdGg=')]+':'+m[atob('aGVpZ2h0')],host:A.TriplePixelData.TripleName,plat:A.TriplePixelData.plat,url:window.location.href,ref:document.referrer,ver:A.TriplePixelData.ver},O('https://api.config-security.com/event',5,p),O('https://whale.camera/live/dot.txt',5)))}}('','TriplePixel',localStorage);";$("head").append(tripleWhaleGlobalScript)}catch(err){err}}function addTripleWhaleFollowUpScript(buyerEmail){try{if(buyerEmail){var tripleWhaleFollowUpScript=document.createElement("script");var tripleWhaleFollowUpScriptText="~function TP(){const email = '"+buyerEmail+"';if(!email||!window.TriplePixel){setTimeout(TP, 400); return;}TriplePixel('Contact', {email:email})}();";tripleWhaleFollowUpScript.append(tripleWhaleFollowUpScriptText);$("head").append(tripleWhaleFollowUpScript);sessionStorage.setItem("tripleWhaleFollowUpScriptAdded",true)}}catch(err){err}}function ccCreateSession(pageType,firstTimeLoad){try{if(!sessionStorage.getItem("requestUri")){sessionStorage.setItem("requestUri",getCurrentWindowLocation().href);sessionStorage.setItem("httpReferer",document.referrer)}var ccExternalSessionId=sessionStorage.getItem("ccExternalSessionId")||ccGenerateRandomUUID();var headCode=document.head.innerHTML;var _ccUrlParams=new URLSearchParams(getCurrentWindowLocation().search);if(headCode&&headCode.includes("EF.urlParameter('_ef_transaction_id')")&&_ccUrlParams.has("oid")&&!checkBuildOrTemplate()){var clickEventCalled=true;var cValueRegEx=/\s*updateURLParameter+\s*[(]+\s*window.location.href+\s*,+\s*"+(c+[1-3])+"\s*,+\s*\S+[)]+\s*/;var cValue=headCode.match(cValueRegEx);cValue=cValue&&cValue[1]||"c1";var EFInterval=setInterval(function(){_ccUrlParams=new URLSearchParams(getCurrentWindowLocation().search);var cValueCheck=_ccUrlParams.has(cValue)&&_ccUrlParams.get(cValue);if(cValueCheck&&cValueCheck.length===32){clearInterval(EFInterval);sessionStorage.setItem("requestUri",getCurrentWindowLocation().href);clickEventCalled&&triggerImportClick(pageType,firstTimeLoad,ccExternalSessionId);clickEventCalled=false}},300);setTimeout(function(){if(clickEventCalled){clearInterval(EFInterval);sessionStorage.setItem("requestUri",getCurrentWindowLocation().href);triggerImportClick(pageType,firstTimeLoad,ccExternalSessionId);clickEventCalled=false}},5000)}else{triggerImportClick(pageType,firstTimeLoad,ccExternalSessionId)}}catch(err){err}}var PAAYinitialized=false;function initializePage(){var queryString=getCurrentWindowLocation().search;var ccUrlParams=new URLSearchParams(queryString);var firstTimeLoad=isFirstTime();var isBuildOrTemplate=checkBuildOrTemplate();var externalSessionId=sessionStorage.getItem("ccExternalSessionId");if(pageData){var triggerUseSession=function triggerUseSession(sessionId,ccSessionCreated){useSession(sessionId,pageType,pageData.currentPage.referenceId).then(function(data){if(data.message==="session failed"){if(pageType!=="upsellPage"&&pageType!=="thankyouPage"){if(useSessionCounter<10){setTimeout(function(){ccSessionCreated&&triggerUseSession(sessionId,ccSessionCreated)},3000)}useSessionCounter++}else{$("body").append(data.message)}}if(data.result==="ERROR"){$("body").append(data.message)}if(data.message){var _data$message2;pageTypeId===4&&window.ccIsPayPalFastlaneEnabled&&ccIsPayPalFastlaneEnabled()&&window.configurePayPalSmartButtons&&configurePayPalSmartButtons(data);((_data$message2=data.message)===null||_data$message2===void 0||(_data$message2=_data$message2.amazonPay)===null||_data$message2===void 0?void 0:_data$message2.gatewaySdkParams)&&window.ccConfigureAmazonPayV2&&ccConfigureAmazonPayV2(data.message.amazonPay.gatewaySdkParams);if(data.message.pixel)firePixel(data.message.pixel);if(data.message.siftBeaconKey)fireSiftPixel(data.message.siftBeaconKey)}})};//import click need to be called on the load of every page, so I added this function to the template
var pageType=pageData.pageTypeId;var pageTypeId=pageType;var shopPayUrl=pageData.selectedCampaign&&pageData.selectedCampaign.shopPayUrl,orderEmail=globalOrderData&&globalOrderData.emailAddress;var tripleWhaleTracking=shopPayUrl&&getAddOnKeyValue(findAddOn("TRIPLE_WHALE_REQ"))==="true";tripleWhaleTracking&&addTripleWhaleDefaultScript(shopPayUrl);var appLovinTracking=getAddOnKeyValue(findAddOn("APPLOVIN_REQ"))==="true";var appLovinProductCategoryId=getAddOnKeyValue(findAddOn("APPLOVIN_CATEGORY_ID"));var fflApplied=pageTypeId===3&&globalOrderData&&globalOrderData.customFields&&globalOrderData.customFields.fflNumber;if(!fflApplied&&[3,4].includes(pageTypeId)){pageData.selectedCampaign&&pageData.selectedCampaign.ffl&&pageData.selectedCampaign.ffl.length?window.addFFLPopUp&&addFFLPopUp():null;window.addFFLInfoOnPage&&addFFLInfoOnPage()}window.ccInitializeSocialProof&&ccInitializeSocialProof();switch(pageType){// Lead page
case 2:case"Lead":case 15:case"Opt-in":pageType="leadPage";initAddressFields();removeNavigationOffersFromCart();break;// Checkout Page
case 4:case"Checkout":pageType="checkoutPage";window.ccInitializeIdMe&&window.ccInitializeIdMe(providerUrl,null,pageData);initSocialProof();initAddressFields();assignProdQtyEventListeners();assignCardDetailsEventListeners();removeNavigationOffersFromCart();sessionStorage.removeItem("upsalefkCart");window.configurePayPalSmartButtons&&configurePayPalSmartButtons();window.configureGooglePay&&configureGooglePay();window.ccAmazonPayV2Enabled&&ccAmazonPayV2Enabled()?window.ccConfigureAmazonPayV2&&ccConfigureAmazonPayV2():configureAmazonPay();configureSquare();window.configureRoutePlugin&&configureRoutePlugin();window.configureApplePay&&configureApplePay();facebookCustomerChat();configureFBMessengerCheckboxPlugin();configureLoyaltyLion();configureReachBadge();window.ccConfigureStripeLink?ccConfigureStripeLink():$(".cc-stripe-link-payment, .cc-stripe-link-shipping, .cc-stripe-link-billing, .cc-stripe-link-email, .cc-stripe-link-cancel, .cc-stripe-link-submit, .ccBtnStripeLink").hide();if(appLovinTracking&&appLovinProductCategoryId){window.ccAppLovinBeginCheckoutEvent&&window.ccAppLovinBeginCheckoutEvent()}break;// Upsell Page
case 3:case"Upsell":pageType="upsellPage";assignProdQtyEventListeners();window.ccAmazonPayV2Enabled&&ccAmazonPayV2Enabled()?window.ccCheckAmazonV2ButtonEligibility&&ccCheckAmazonV2ButtonEligibility()&&window.ccConfigureAmazonPayV2&&ccConfigureAmazonPayV2():configureAmazonPay();isBuildOrTemplate&&window.configureGooglePay&&configureGooglePay();globalOrderData&&globalOrderData.prepaidType==="GOOGLEPAY"&&window.configureGooglePay&&configureGooglePay();globalOrderData&&globalOrderData.prepaidType==="APPLEPAY"&&window.configureApplePay&&configureApplePay();window.configurePayPalSmartButtons&&configurePayPalSmartButtons();confirmation();removeCartIcon();removeMenuElement();updateMap();break;// Thank You Page
case 5:case"Thank You":pageType="thankyouPage";updateMap();removeCartIcon();removeMenuElement();window.initializeRokt&&initializeRokt();window.ccInitOrderPerks&&ccInitOrderPerks();break;case 8:case"Profile":initAddressFields();break;case 17:case 18:loadSortOptions();case 34:initSocialProof();displayPrices();if(appLovinTracking&&appLovinProductCategoryId){window.ccAppLovinViewItemEvent&&window.ccAppLovinViewItemEvent()}break;case 1:case 21:// Clear shopping cart while loading Presell Page
sessionStorage.removeItem("fkCart");sessionStorage.removeItem("fkCartSent");initAddressFields();break;case 31:document.getElementsByName("custom_restartDate")[0]&&affixImports("js","https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js");break;case 7:case"login":if(ccUrlParams.get("emailAddress")&&ccUrlParams.get("orderId")){window.autoLogin&&autoLogin(ccUrlParams.get("emailAddress"),ccUrlParams.get("orderId"));return}if(ccUrlParams.has("userName")&&ccUrlParams.has("password")){window.autoLoginClub&&autoLoginClub(ccUrlParams.get("userName"),ccUrlParams.get("password"));return}if(cookieData["access_token"]){window.autoLoginCookie&&autoLoginCookie()}break;case 13:sessionStorage.removeItem("newProductItem");sessionStorage.removeItem("currentItem");sessionStorage.removeItem("newProductQty");sessionStorage.removeItem("currentProductQty");sessionStorage.removeItem("currentNextBillDate");sessionStorage.removeItem("billingIntervalDays");sessionStorage.removeItem("currentPrice");var membership=getMembershipDetails();var currentProductItem=sessionStorage.getItem("actionCurrentItem");var currentProductQty=sessionStorage.getItem("actionCurrentProductQty");var currentNextBillDate=sessionStorage.getItem("actionNextBillDate");var currentBillingIntervalDays=sessionStorage.getItem("actionBillingIntervalDays");var currentPrice=sessionStorage.getItem("actionPrice");if(currentProductItem){sessionStorage.setItem("currentItem",currentProductItem);sessionStorage.setItem("currentProductQty",currentProductQty);sessionStorage.setItem("currentNextBillDate",currentNextBillDate);sessionStorage.setItem("billingIntervalDays",currentBillingIntervalDays);sessionStorage.setItem("currentPrice",currentPrice)}else if(membership){sessionStorage.setItem("currentItem",membership.productId);sessionStorage.setItem("currentProductQty",1);sessionStorage.setItem("currentNextBillDate",membership.nextBillDate);sessionStorage.setItem("billingIntervalDays",membership.frequency);sessionStorage.setItem("currentPrice",membership.price)}break;case 9:configureLoyaltyLion();break;default:pageType="presellPage"}pageTypeId!==2&&sessionStorage.removeItem("ccCartItem");var upsellOrThankyouPage=[3,5].includes(pageTypeId);!upsellOrThankyouPage&&ccLoadDataDojoScript();if(pageTypeId===2){var cartPanelButtons=$("#mySidepanel").find("button[onclick='callMethod(event)']");var cartPanelButtonsLength=cartPanelButtons.length;if(cartPanelButtonsLength){for(var _i38=0;_i38<cartPanelButtonsLength;_i38++){var btn=cartPanelButtons[_i38];if(btn.innerText==="VIEW CART"){btn.setAttribute("onclick","route(event)");btn.setAttribute("action","route");break}}}}var fflNumberSection=$(".ffl-number");if(!fflApplied&&fflNumberSection&&fflNumberSection.length){var fflNumberSectionBtns=fflNumberSection.find("button, a");fflNumberSectionBtns&&fflNumberSectionBtns.length&&fflNumberSectionBtns.attr("onclick","callFFLPopUp(event)");[4,3].includes(pageTypeId)&&window.checkFFLProductsInCart&&checkFFLProductsInCart(pageTypeId===3?ccUpsellPageFFLProducts:null)?$(".ffl-number").show():$(".ffl-number").hide()}else fflNumberSection.hide();updateLoginLinks();var useSessionCounter=0;var ccSessionCreated=sessionStorage.getItem("sessionId");var ccCallUseSession=upsellOrThankyouPage?true:ccSessionCreated;if(externalSessionId&&ccCallUseSession){triggerUseSession(externalSessionId,ccSessionCreated);window.ccInitializeIdMe&&ccInitializeIdMe(providerUrl,externalSessionId,pageData);window.loadCCPayPalFraudNetScripts&&loadCCPayPalFraudNetScripts()}else{!upsellOrThankyouPage&&ccCreateSession(pageTypeId,firstTimeLoad)}tripleWhaleTracking&&sessionStorage.getItem("tripleWhaleFollowUpScriptAdded")!=="true"&&upsellOrThankyouPage&&orderEmail&&addTripleWhaleFollowUpScript(orderEmail)}if(ccUrlParams.has("alertMessage")){var _message=ccUrlParams.get("alertMessage");var decodedMessage=decodeURI(_message);$("body").append("<div class='alert alert-danger alert-dismissible fade show' role='alert' ><strong>"+decodedMessage+" </strong><button type='button' class='close' data-dismiss='alert' aria-label='Close'> <span aria-hidden='true'>&times;</span></button></div>")}externalSessionId&&firstTimeLoad&&registerClick(0);initializeCountryStates(pageData.pageTypeId===8||pageData.pageTypeId==="Profile"?loadProfilePage:pageType==="checkoutPage"?displayPrices:undefined);loadMonth();loadYear();if(pageType===4||pageType==="checkoutPage"){generateCustomerDetails()}if(pageType===34){generateCustomerDetails(true)}loadShipProfiles();if(pageData.funnelData&&pageData.funnelData.addOns&&(pageData.pageTypeId===4||pageData.pageTypeId===3)){var paayKey=pageData.funnelData.addOns.filter(function(addOns){return addOns.keyName==="PAAY_API_key"});if(paayKey.length!==0&&paayKey[0].keyValue){window.initializePAAY&&initializePAAY(paayKey[0].keyValue);PAAYinitialized=true}}if(window.location===window.parent.location&&window.configurePopup){affixImports("css","https://code.jquery.com/ui/1.12.0-rc.2/themes/smoothness/jquery-ui.css");affixImports("js","https://code.jquery.com/ui/1.12.0-rc.2/jquery-ui.min.js",configurePopup)}loadVariants();loadAltValues();if(pageData.pageTypeId===4){var _ref16,_ccUrlParams$get;var _urlProducts=(_ref16=ccUrlParams.get("products")||ccUrlParams.get("product"))===null||_ref16===void 0?void 0:_ref16.trim();var urlCoupons=(_ccUrlParams$get=ccUrlParams.get("couponCode"))===null||_ccUrlParams$get===void 0?void 0:_ccUrlParams$get.trim();if(_urlProducts&&sessionStorage.getItem("couponCode")&&!urlCoupons){sessionStorage.removeItem("couponCode")}if(sessionStorage.getItem("couponCode")!==null){appliedCouponCode=handleCouponSplit(sessionStorage.getItem("couponCode"))}else{var defaultCoupon=pageData.selectedCampaign.defaultCouponCode;appliedCouponCode=defaultCoupon?handleCouponSplit(defaultCoupon):[]}if(sessionStorage.getItem("leadCouponCode")!==null){appliedCouponCode=handleCouponSplit(sessionStorage.getItem("leadCouponCode"))}var sessionUrlCouponCode=sessionStorage.getItem("ccUrlCouponCode");urlCoupons&&sessionStorage.setItem("ccUrlCouponCode",urlCoupons);var urlCouponsToRemove=[];if(sessionUrlCouponCode&&urlCoupons&&sessionUrlCouponCode!==urlCoupons){var a=handleCouponSplit(sessionUrlCouponCode),b=handleCouponSplit(urlCoupons);urlCouponsToRemove=a.filter(function(n){return!b.includes(n)})}if(_urlProducts&&sessionStorage.getItem("ccUrlCouponCode")){var sessionDiscountCodes=sessionStorage.getItem("discountsObj");sessionDiscountCodes=sessionDiscountCodes?JSON.parse(sessionDiscountCodes):{};sessionDiscountCodes=sessionDiscountCodes.coupons||[];sessionDiscountCodes.forEach(function(code){!appliedCouponCode.includes(code)&&appliedCouponCode.push(code)});var discounts=urlCoupons?urlCouponsToRemove:handleCouponSplit(sessionUrlCouponCode);appliedCouponCode=appliedCouponCode.filter(function(code){return!discounts.includes(code)});sessionStorage.removeItem("discountsObj");sessionStorage.removeItem("couponParams")}window.ccPushIdMeCouponToAppliedCoupons&&ccPushIdMeCouponToAppliedCoupons(appliedCouponCode);if(document.getElementsByName("cardNumber").length){getVariants()}displayPrices()}if(pageData.pageTypeId===3){displayPrices()}if($(".fk-product-row[lazyload='1']").length){$("head").append("`"+productCardLoaderStyles+"`")}if($(".fk-shopping-cart").length){$("head").append("`"+accordionStyles+"`")}}$(document).on("change","select[name='variant1'], select[name='variant2'], select[name='variant3'], select[name='productVariant'],input[type='radio'][class='variant-radio']",function(e){if(window.ccFacebookPixelID){window.triggerfacebookpixelEvent&&triggerfacebookpixelEvent("CustomizeProduct")}var ccSubscribeAndSave=document.getElementsByClassName("cc-subscribe-and-save")[0];ccTrackSygnalEvents&&window.rrq&&window.rrq("track","CustomizeProduct",{});window.ccTikTokConversion&&ccTikTokConversion("CustomizeProduct",{});this.getAttribute("type")==="radio"&&this.classList.contains("variant-radio")&&productVariantTileClick(this);var element=$(this);var prodSection=element.closest("section.fk-product-section");var prodValue=prodSection&&prodSection[0]&&prodSection[0].getAttribute("value");prodValue=isSubscribeOn?swapSubscriptions("","",prodValue).sectionValue:prodValue;if(prodSection&&prodSection[0]){var prodImg=$(prodSection).find("img");var prodPrice=$(prodSection).find(".fk-price");var prodShipPrice=$(prodSection).find(".fk-ship-price");var variantValue=$(this).attr("data-value");showVariantImage(prodSection[0],prodImg&&prodImg[0],prodValue,prodPrice&&prodPrice[0],prodShipPrice&&prodShipPrice[0],variantValue);if(pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length){//remove existing variant from cart
var _orderItems2=getOrderItems();for(var sessionItemCpId in _orderItems2){if(sessionItemCpId.indexOf(".")>0){var _productData4=sessionItemCpId.split(".");if(_productData4[0]==prodValue){delete _orderItems2[sessionItemCpId];_orderItems2=removeSubscriptionProduct(_orderItems2,sessionItemCpId);sessionStorage.setItem("fkCart",JSON.stringify(_orderItems2))}}}getVariants(prodSection[0].id);displayPrices()}else if(pageData.pageTypeId==34&&ccSubscribeAndSave&&pageData.selectedCampaign){var exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1;var variantId=getVariants(prodSection[0].id,"",true);var _productData5=prodValue?prodValue.split("."):[];var _product3=_productData5[0]&&pageData.selectedCampaign.products.find(function(data){return data.campaignProductId==_productData5[0]});var otherProduct=_product3&&pageData.selectedCampaign.products.find(function(data){return data.productId==_product3.productId&&data.campaignProductId!=_productData5[0]});var onetimePrice=0,subscribePrice=0;if(_product3&&_product3.billingCycleType==="ONE_TIME"){onetimePrice=variantId?ccGetProductCurrencyPrice(_product3.campaignProductId+"."+variantId)||_product3.variants.find(function(variant){return variant.variantDetailId==variantId}).price:Number(ccGetProductCurrencyPrice(_product3.campaignProductId,1))||_product3.cycle1_price;if(otherProduct){subscribePrice=variantId?ccGetProductCurrencyPrice(otherProduct.campaignProductId+"."+variantId)||otherProduct.variants.find(function(variant){return variant.variantDetailId==variantId}).price:Number(ccGetProductCurrencyPrice(otherProduct.campaignProductId,1))||otherProduct.cycle1_price}}else if(_product3&&_product3.billingCycleType==="RECURRING"){subscribePrice=variantId?ccGetProductCurrencyPrice(_product3.campaignProductId+"."+variantId)||_product3.variants.find(function(variant){return variant.variantDetailId==variantId}).price:Number(ccGetProductCurrencyPrice(_product3.campaignProductId,1))||_product3.cycle1_price;if(otherProduct){onetimePrice=variantId?ccGetProductCurrencyPrice(otherProduct.campaignProductId+"."+variantId)||otherProduct.variants.find(function(variant){return variant.variantDetailId==variantId}).price:Number(ccGetProductCurrencyPrice(otherProduct.campaignProductId,1))||otherProduct.cycle1_price}}var savingsPercentValue=parseFloat((onetimePrice-subscribePrice)/onetimePrice*100).toFixed(0)+"%";$(".one-time-price").first().text(pageData.selectedCampaign.currencySymbol+(onetimePrice*exchangeRate).toFixed(2));$(".recurring-price").first().text(pageData.selectedCampaign.currencySymbol+(subscribePrice*exchangeRate).toFixed(2));$(".subscription-savings-percent").first().text(savingsPercentValue)}var productVariantElement=this.closest(".fk-product-variant-select");if(productVariantElement&&this.classList.contains("variant-radio")){var _product4=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==prodValue});filterTiles(productVariantElement,_product4)}}});$(document).on("change","select[name='state'], select[name='shipState']",function(){var shipStateChange=false;if(this.getAttribute("name")==="shipState"){window.evaluateFFLSectionDisplay&&evaluateFFLSectionDisplay();shipStateChange=true}pageData.pageTypeId==4&&displayPrices(shipStateChange)});isSubscribeOn=isSubscribeOn&&!subscribeAndSave?false:isSubscribeOn;function removeSubscriptionProduct(orderItems,productId){twoWayProductList=twoWayProductList.filter(function(id){return id!=productId});orderItems=isSubscribeOn||twoWaySubscription?swapSubscriptions(orderItems,productId):orderItems;return orderItems}function subscribeOrRevertProduct(e,id,subscribe){e.stopPropagation();var orderItems=getOrderItems();var params=subscribe?swapSubscriptions("","",id,true):swapSubscriptions("","",id);var idToReplace=params?subscribe?params.oneTimeId:params.sectionValue:"";var removeOneTimeId=subscribe?params?params.oneTimeId:"":id;if(idToReplace){orderItems[id]=orderItems[idToReplace];delete orderItems[idToReplace];if(subscribe){!twoWayProductList.some(function(id){return id==idToReplace})&&twoWayProductList.push(idToReplace.toString());setRebillCart(id,true,true)}else if(removeOneTimeId){twoWayProductList=twoWayProductList.filter(function(prodId){return prodId!=removeOneTimeId});setRebillCart(idToReplace,true,"",true)}}sessionStorage.setItem("fkCart",JSON.stringify(orderItems));displayPrices()}if(subscribeAndSave){var isButton=subscribeAndSave.type.toLowerCase()==="button";if(!isButton){subscribeAndSave.checked=!isSubscribeOn||isSubscribeOn===false?false:true}subscribeAndSave.onclick=function(e){e.stopPropagation();if(isButton){twoWayProductList=[];var _orderItems3=getOrderItems();twoWayProductList=Object.keys(_orderItems3);_orderItems3=swapSubscriptions(_orderItems3,"","","");sessionStorage.setItem("fkCart",JSON.stringify(_orderItems3))}else{isSubscribeOn=e.target.checked;sessionStorage.setItem("isSubscribeOn",isSubscribeOn)}displayPrices()}}function ccLoadDataDojoScript(){var dataDojoPixelId=getAddOnKeyValue(findAddOn("DATA_DOJO_PIXEL_ID"));if(dataDojoPixelId){(function(p,i,x,e,l){if((typeof window==="undefined"?"undefined":_typeof(window))!==undefined){window._dojoPixel={};window._dojoPixel.events_queue=window._dojoPixel.events_queue||[];window._ddq=function(){window._dojoPixel.events_queue.push(arguments)};var f=p.getElementsByTagName(i)[0],k=p.createElement(i);k.async=1;k.src="https://pixel.clickslogistics.com/load.js?id="+dataDojoPixelId;f.parentNode.insertBefore(k,f)}})(document,"script");_ddq("PIXEL_INIT",{});_ddq("PAGE_VIEW")}}function swapSubscriptions(orderItems,removeProductId,sectionValue,getOneTime){orderItems=orderItems?orderItems:getOrderItems();var orderItemDetails={};var offers=[],recurringProducts=[],oneTimeProducts=[],recurringProductIds=[],oneTimeProductIds=[];var products=pageData.selectedCampaign.products;products.forEach(function(prod,index){prod.productType==="OFFER"&&offers.push(prod);if(prod.billingCycleType==="RECURRING"){recurringProducts.push(prod);recurringProductIds.push(prod.productId)}else if(prod.billingCycleType==="ONE_TIME"){oneTimeProducts.push(prod);oneTimeProductIds.push(prod.productId)}});for(var _i39 in orderItems){for(var index in products){var prodId=_i39.split(".")[0];if(products[index].campaignProductId==prodId){orderItemDetails[_i39]=products[index];break}}}if(sectionValue){sectionValue=sectionValue.toString();var _prodId=sectionValue.split(".")[0];var variantId=sectionValue.split(".")[1];var _product5=_prodId&&products.length&&products.find(function(prod){return prod.campaignProductId==_prodId});var reccurringId,oneTimeId;if(_product5&&_product5.billingCycleType==="ONE_TIME"){var recurringProduct=recurringProducts.length&&recurringProducts.find(function(prod){return prod.productId==_product5.productId});if(recurringProduct){reccurringId=variantId?recurringProduct.campaignProductId+"."+variantId:recurringProduct.campaignProductId}}if(getOneTime&&_product5&&_product5.billingCycleType==="RECURRING"){var oneTimeProduct=oneTimeProducts.length&&oneTimeProducts.find(function(prod){return prod.productId==_product5.productId});if(oneTimeProduct){oneTimeId=variantId?oneTimeProduct.campaignProductId+"."+variantId:oneTimeProduct.campaignProductId}}sectionValue=reccurringId?reccurringId:sectionValue;return{sectionValue:sectionValue,oneTimeId:oneTimeId}}else if(removeProductId&&recurringProductIds.length&&oneTimeProductIds.length){removeProductId=removeProductId.toString();var _prodId2=removeProductId.split(".")[0];var _variantId=removeProductId.split(".")[1];var _product6=_prodId2&&oneTimeProducts.find(function(prod){return prod.campaignProductId==_prodId2});var _recurringProduct=_product6&&recurringProducts.find(function(prod){return prod.productId==_product6.productId});_prodId2=_recurringProduct&&_recurringProduct.campaignProductId;_prodId2=_variantId?_prodId2+"."+_variantId:_prodId2;delete orderItems[_prodId2];twoWaySubscription&&setRebillCart(_prodId2,"","",true)}else if(recurringProductIds.length&&oneTimeProductIds.length){if(isSubscribeOn||twoWaySubscription){orderItemDetails&&manipulateRecurring(orderItemDetails,recurringProductIds,"RECURRING",recurringProducts)}else if(isSubscribeOn===false){orderItemDetails&&manipulateRecurring(orderItemDetails,oneTimeProductIds,"ONE_TIME",oneTimeProducts)}}function manipulateRecurring(orderItemDetails,productIds,billingCycleType,filteredProducts){var _loop8=function _loop8(_i40){var isTwowaySubscribe=twoWayProductList.some(function(id){return id==_i40});var swap=isSubscribeOn!=null||billingCycleType==="RECURRING"&&isTwowaySubscribe;if(swap&&productIds.includes(orderItemDetails[_i40].productId)){var _productId2=orderItemDetails[_i40].billingCycleType!==billingCycleType&&orderItemDetails[_i40].productId;var _product7=_productId2&&filteredProducts.find(function(prod){return prod.productId==_productId2});if(_product7){var _variantId2=_i40.split(".")[1];var prodVariantId=_variantId2?_product7.campaignProductId+"."+_variantId2:_product7.campaignProductId;orderItems[prodVariantId]=orderItems[_i40];billingCycleType==="RECURRING"&&twoWaySubscription&&setRebillCart(prodVariantId,false,true);delete orderItems[_i40]}}};for(var _i40 in orderItemDetails){_loop8(_i40)}}return orderItems}function ccProdSelectSectionLoad(productSection,targetValue,newProductItem,skipRecall){var previousValue=$(productSection).attr("value");$(productSection).attr("value",targetValue);if(newProductItem&&pageData.pageTypeId===13)sessionStorage.setItem("newProductItem",targetValue);loadVariants(true,previousValue,skipRecall);var prodImg=$(productSection).find("img");showVariantImage(productSection,prodImg&&prodImg[0],targetValue)}function ccDeleteBundleFromCart(){var orderItems=getOrderItems();var bundleProductsPageRef=sessionStorage.getItem("bundleProductsPageRef")!==null?JSON.parse(sessionStorage.getItem("bundleProductsPageRef")):{};for(var prodId in removeBundleFromCart){var id=prodId.split("|")[1];delete orderItems[id];orderItems=removeSubscriptionProduct(orderItems,id);delete bundleProductsPageRef[prodId]}sessionStorage.setItem("fkCart",JSON.stringify(orderItems));sessionStorage.setItem("bundleProductsPageRef",JSON.stringify(bundleProductsPageRef))}$(document).on("change","select[name='productSelect']",function(e){var productSection=e.target.closest(".fk-product-section");handleBundleEle=false;if(productSection){var classesToCheck=["fk-variant-bundle1","fk-variant-bundle2","fk-variant-bundle3","fk-variant-bundle4","fk-variant-bundle5","fk-variant-bundle6"];var isBundle=classesToCheck.some(function(cls){return productSection.classList.contains(cls)});isBundle&&ccDeleteBundleFromCart();ccProdSelectSectionLoad(productSection,e.target.value,true);pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length?getBundleVariants({},0):null}displayPrices()});$(document).on("change","input[name='quantity'], select[name='quantity']",function(e){var bundleOnCheckout=pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length&&($(e.currentTarget).closest(".fk-variant-bundle1")[0]||$(e.currentTarget).closest(".fk-variant-bundle3")[0]);if(bundleOnCheckout){getBundleVariants({},0);displayPrices()}pageData.pageTypeId==3&&displayPrices()});function removeNavigationOffersFromCart(){var fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;var offerItems=[];if(fkCart&&Object.keys(fkCart).length>0){for(var offer in fkCart){offerItems.push(String(offer))}}var buttonAndLinkItems=$("button, a");$(buttonAndLinkItems).each(function(){var offer=$(this).attr("offer");var variantValue=$(this).attr("variantvalue");if(variantValue){offer=offer+"."+variantValue}offer=isSubscribeOn?swapSubscriptions(fkCart,"",offer).sectionValue:offer;if(offerItems.includes(offer)){delete fkCart[offer]}});sessionStorage.setItem("fkCart",JSON.stringify(fkCart))}function updateMap(mapData){var orderData=mapData?mapData:JSON.parse(sessionStorage.getItem("orderData"));var requiredFields=["shipAddress1","shipAddress2","shipCity","shipState","shipPostalCode","shipCountry"];var addressDetails="";if(orderData){requiredFields.forEach(function(field,index){if(orderData[field]){addressDetails+=index===requiredFields.length-1?orderData[field]:orderData[field]+", "}});var mapElement=document.getElementsByName("map");if(mapElement&&mapElement.length>0){mapElement.forEach(function(elem){var src=$(elem).attr("src")!==""?$(elem).attr("src"):$(elem).attr("data-src");var pattern=/&q=.*?&/g;var testValue=pattern.test(src);var parseSrc=testValue?src.replace(/&q=.*?&/g,"&q="+addressDetails+"&"):src.replace(/maps\?/g,"maps?&q="+addressDetails);$(elem).attr("src","");$(elem).attr("src",parseSrc);$(elem).attr("data-src",parseSrc)})}}}function getProvidersData(id){if(id&&pageData&&pageData.funnelData&&pageData.funnelData.providers&&pageData.funnelData.providers.length){var providers=pageData.funnelData.providers;var providerObj=providers.filter(function(provider){return provider.id===id});if(providerObj&&providerObj.length){return providerObj[0].keyValue}}return null}function getHeadCode(){var funnelData=pageData.funnelData;if(funnelData.providers&&funnelData.providers.length>0){pageData.funnelData.GA_MEASUREMENT_ID=getProvidersData(1);pageData.funnelData.facebookPixelID=getProvidersData(2);pageData.funnelData.snapchatPixelID=getProvidersData(3);pageData.funnelData.tiktokPixelID=getProvidersData(4);pageData.funnelData.lisTrakMerchantID=getProvidersData(5);pageData.funnelData.lisTrakRedirectUrl=getProvidersData(6);pageData.funnelData.lisTrakMeta1=getProvidersData(7);pageData.funnelData.GTM_SERVER_URL=getProvidersData(8);if(pageData.funnelData.GA_MEASUREMENT_ID!==null)window.getGoogleAnalyticsCode&&getGoogleAnalyticsCode();if(pageData.funnelData.facebookPixelID!==null)window.getFacebookPixelCode&&getFacebookPixelCode();if(pageData.funnelData.snapchatPixelID!==null)window.getSnapchatPixelCode&&getSnapchatPixelCode();if(pageData.funnelData.tiktokPixelID!==null)window.getTikTokPixelCode&&getTikTokPixelCode();if(pageData.funnelData.lisTrakMerchantID!==null)getLisTrakCode()}ccTrackSygnalEvents&&ccGetSygnalPixelCode(ccSygnalPixelId,ccSygnalTrackingGateway);sessionStorage.removeItem("merchantRedirectUpsalefkCart");sessionStorage.removeItem("preUpsalefkCart");sessionStorage.removeItem("importUpsellSuccess");sessionStorage.removeItem("importUpsellSuccessSC");sessionStorage.removeItem("importUpsellSuccessGA");sessionStorage.removeItem("importUpsellSuccessSygnal");sessionStorage.removeItem("importUpsellSuccessTTK");var scriptSplitter=function scriptSplitter(trackingCode){return trackingCode.split("<script").filter(function(script){return script!==""}).map(function(script){return"<script "+script.trim()})};var appendScript=function appendScript(appendTo,scriptArray,count){var headElement=document.createElement("head");// dummy element just to read src. wont be injected into dom.
headElement.innerHTML=scriptArray[count];if(headElement.firstChild.src!==""){loadScript(headElement.firstChild.src,function(){count++;count<scriptArray.length&&appendScript(appendTo,scriptArray,count)},appendTo,headElement.firstChild.id)}else{$(appendTo).append(scriptArray[count]).ready(function(){count++;count<scriptArray.length&&appendScript(appendTo,scriptArray,count)})}};if(funnelData.headTrackingCode){try{if(funnelData.headTrackingCode.includes("<script")){appendScript("head",scriptSplitter(funnelData.headTrackingCode),0)}else{var headTrackingScript=document.createElement("script");headTrackingScript.innerHTML=funnelData.headTrackingCode;document.head.append(headTrackingScript)}}catch(err){console.log(err)}}if(funnelData.bodyTrackingCode){try{if(funnelData.bodyTrackingCode.includes("<script")){appendScript("body",scriptSplitter(funnelData.bodyTrackingCode),0)}else{var bodyTrackingScript=document.createElement("script");bodyTrackingScript.innerHTML=funnelData.bodyTrackingCode;document.body.append(bodyTrackingScript)}}catch(err){console.log(err)}}}function getOrderDataObj(analyticsTool){var isSendExternalProductId=getAddOnKeyValue(findAddOn("EXTERNAL_TRACK_REQ"));var orderData=JSON.parse(sessionStorage.getItem("orderData"));if(!(orderData&&orderData.hasOwnProperty("items"))){return}var orderItems;var upsellOrderDataItems;var requiredProducts=[];var contentsAllProducts=[];var contentsAllUpsellProducts=[];var contentsUpsellProducts=[];if(orderPurchaseEvent){upsellOrderDataItems=sessionStorage.getItem("preUpsellOrderDataItems");upsellOrderDataItems=upsellOrderDataItems?JSON.parse(upsellOrderDataItems):null;var upsalefkCart=sessionStorage.getItem("merchantRedirectUpsalefkCart")||sessionStorage.getItem("preUpsalefkCart");orderItems=upsalefkCart?JSON.parse(upsalefkCart):null;var orderItemsKeys=orderItems&&Object.keys(orderItems);if(orderItemsKeys&&orderItemsKeys.length){orderItemsKeys.forEach(function(productId){var id=productId&&productId.split(".")[0];id&&requiredProducts.push(id)})}}var requiredProductsLength=requiredProducts.length;var checkoutOrderData=JSON.parse(sessionStorage.getItem("checkoutOrderData"));var appLovinProductCategoryId=getAddOnKeyValue(findAddOn("APPLOVIN_REQ"))==="true"?getAddOnKeyValue(findAddOn("APPLOVIN_CATEGORY_ID")):null;orderData.items.forEach(function(item,index){var doNotAddIntoUpsellProducts=requiredProductsLength&&!requiredProducts.includes(item.productId);var isUpsellProduct=false;if(checkoutOrderData){isUpsellProduct=!checkoutOrderData.items.find(function(checkoutProd){return checkoutProd.productId==item.productId})}var details={id:item.externalProductId&&isSendExternalProductId==="true"?item.externalProductId:item.productId.toString(),quantity:parseInt(item.qty)};if(["FB","GA","GTM","SYGNAL","TTK"].includes(analyticsTool)){details["name"]=item.name;details["variant"]=item.title;details["price"]=parseFloat(item.price);details["shipping"]=parseFloat(item.shipping);details["tax"]=parseFloat(item.initialSalesTax);details["item_id"]=details["id"];details["item_name"]=item.name;details["item_variant"]=item.title;details["index"]=index;if(appLovinProductCategoryId){details["item_category_id"]=parseFloat(appLovinProductCategoryId)}contentsAllProducts.push(details);isUpsellProduct&&contentsAllUpsellProducts.push(details);!doNotAddIntoUpsellProducts&&contentsUpsellProducts.push(details)}});if(orderPurchaseEvent&&upsellOrderDataItems&&["FB","GTM","SYGNAL","TTK"].includes(analyticsTool)){var upsell={};var _checkoutOrderData=JSON.parse(sessionStorage.getItem("checkoutOrderData"));upsell.upsellTotalAmount=parseFloat((orderData.totalAmount-(_checkoutOrderData?_checkoutOrderData.totalAmount:0)).toFixed(2));upsell.upsellTaxTotal=parseFloat((orderData.taxTotal-(_checkoutOrderData?_checkoutOrderData.taxTotal:0)).toFixed(2));upsell.upsellShipTotal=parseFloat((orderData.shipTotal-(_checkoutOrderData?_checkoutOrderData.shipTotal:0)).toFixed(2));upsell.upsellItems=contentsAllUpsellProducts;orderData.upsell=upsell}if(orderPurchaseEvent&&["FB","GA","SYGNAL","TTK"].includes(analyticsTool)){var lastPurchasedUpsellItem=orderData.items[orderData.items.length-1];orderData.orderId=lastPurchasedUpsellItem.merchantTxnId||lastPurchasedUpsellItem.transactionItemId;contentsAllProducts=contentsUpsellProducts}return{orderData:orderData,contents:contentsAllProducts,pageProducts:sessionStorage.getItem("importOrderSuccessGA")==="true"?contentsAllProducts:sessionStorage.getItem("importUpsellSuccessGA")==="true"?contentsUpsellProducts:null}}function generateSHA256Hash(_x19){return _generateSHA256Hash.apply(this,arguments)}function _generateSHA256Hash(){_generateSHA256Hash=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee25(message){var encoder,data,hash,hashArray,hashHex;return _regeneratorRuntime().wrap(function _callee25$(_context27){while(1)switch(_context27.prev=_context27.next){case 0:encoder=new TextEncoder;data=encoder.encode(message);_context27.next=4;return crypto.subtle.digest("SHA-256",data);case 4:hash=_context27.sent;hashArray=Array.from(new Uint8Array(hash));hashHex=hashArray.map(function(_byte){return _byte.toString(16).padStart(2,"0")}).join("");return _context27.abrupt("return",hashHex);case 8:case"end":return _context27.stop()}},_callee25)}));return _generateSHA256Hash.apply(this,arguments)}function callPurchaseEventForSygnal(rrq){if(!rrq)return;var orderInfo=getOrderDataObj("SYGNAL");if(orderInfo&&(sessionStorage.getItem("importOrderSuccessSygnal")==="true"||sessionStorage.getItem("importUpsellSuccessSygnal")==="true")){sessionStorage.removeItem("importOrderSuccessSygnal");rrq("track","Purchase",{value:orderInfo.orderData.totalAmount,currency:orderInfo.orderData.currencyCode,num_items:orderInfo.orderData.items.length,contents:orderInfo.contents,order_id:orderInfo.orderData.orderId,upsell:orderInfo.orderData.upsell})}}function ccGetSygnalPixelCode(pixelId,trackingGateway){try{if(!(pixelId&&trackingGateway))return;!function(){"use strict";!function(n,t){var r=[];n.rrq=n.rrq||function(){function n(){r.push(arguments)}return n.q=r,n}();var c=t.createElement("script");c.async=!0,c.src="https://".concat(trackingGateway,"/s/events.js"),c.id="rrq",t.head.appendChild(c)}(window,document)}();if(window.rrq){if(getAddOnKeyValue(findAddOn("SYGNAL_ADV_TRACKING"))==="true"){var advanceTrackingDetails=ccGetAdvanceTrackingDetails();advanceTrackingDetails?window.rrq("init",pixelId,advanceTrackingDetails):window.rrq("init",pixelId)}else{window.rrq("init",pixelId)}window.rrq("track","PageView");var purchaseEventType=getAddOnKeyValue(findAddOn("Purchase_Event_FB"));switch(pageData.pageTypeId){// Presell and VSL page
case 1:case 21:window.rrq("track","ViewContent",{});break;case 2:getAddOnKeyValue(findAddOn("LEAD_VIEW_CONT_TCK"))==="true"&&window.rrq("track","ViewContent",{});break;// Checkout Page
case 4:{if(!ccGetSetTrackingEventFireStatus("sygnalInitiateCheckout")&&document.getElementsByName("cardNumber").length){window.rrq("track","InitiateCheckout",{});ccGetSetTrackingEventFireStatus("sygnalInitiateCheckout",1,true)}}break;// Upsell Page
case 3:["2","3"].includes(purchaseEventType)&&callPurchaseEventForSygnal(window.rrq);break;// Thank You Page
case 5:purchaseEventType&&callPurchaseEventForSygnal(window.rrq);break;default:break}}}catch(err){console.log(err)}}function callAddToCartEvent(product){var obj=getProductDetails(product);window.TriplePixel&&window.TriplePixel("AddToCart",{item:Number(obj.externalProductId||obj.campaignProductId),q:Number(obj.quantity)});if(window.ccFacebookPixelID){window.callAddToCartFBEvent&&callAddToCartFBEvent(obj)}ccTrackSygnalEvents&&window.rrq&&window.rrq("track","AddToCart",{content_name:obj.productName,content_ids:[obj.externalProductId||obj.campaignProductId],content_type:"product",value:obj.productValue,currency:returnCurrencyCode()||pageData.selectedCampaign.currency});window.ccTikTokAddToCartEvent&&window.ccTikTokAddToCartEvent(obj);if(getAddOnKeyValue(findAddOn("APPLOVIN_REQ"))==="true"&&getAddOnKeyValue(findAddOn("APPLOVIN_CATEGORY_ID"))){window.ccAppLovinAddToCartEvent&&window.ccAppLovinAddToCartEvent(product)}}function ccGetAdvanceTrackingDetails(){var email,fName,lName,phone,city,state,zipCode,country,orderData=sessionStorage.getItem("orderData");orderData=orderData?JSON.parse(orderData):{};if([3,5].includes(pageData&&pageData.pageTypeId)||["COMPLETE","PENDING","COD_PENDING"].includes(orderData.orderStatus)){email=orderData.emailAddress||"";fName=orderData.firstName||orderData.shipFirstName||"";lName=orderData.lastName||orderData.shipLastName||"";phone=orderData.phoneNumber||"";city=orderData.city||orderData.shipCity||"";state=orderData.state||orderData.shipState||"";zipCode=orderData.postalCode||orderData.shipPostalCode||"";country=orderData.country||orderData.shipCountry||""}else{email=orderData.emailAddress||ccUrlParams.get("emailAddress")||"";fName=orderData.firstName||ccUrlParams.get("firstName")||orderData.shipFirstName||ccUrlParams.get("shipFirstName")||"";lName=orderData.lastName||ccUrlParams.get("lastName")||orderData.shipLastName||ccUrlParams.get("shipLastName")||"";phone=orderData.phoneNumber||ccUrlParams.get("phoneNumber")||"";city=orderData.city||ccUrlParams.get("city")||orderData.shipCity||ccUrlParams.get("shipCity")||"";state=orderData.state||ccUrlParams.get("state")||orderData.shipState||ccUrlParams.get("shipState")||"";zipCode=orderData.postalCode||ccUrlParams.get("postalCode")||orderData.shipPostalCode||ccUrlParams.get("shipPostalCode")||"";country=orderData.country||ccUrlParams.get("country")||orderData.shipCountry||ccUrlParams.get("shipCountry")||""}email=email.toLowerCase().replace(/\s/g,"");fName=fName.toLowerCase().replace(/\s/g,"");if(!(email&&fName))return null;return{"em":email,"fn":fName,"ln":lName.toLowerCase().replace(/\s/g,""),"ph":phone.replace(/\D/g,""),"external_id":email,"ct":city.toLowerCase().replace(/\s/g,""),"zp":zipCode.trim(),"st":state.toLowerCase().replace(/\W+/g,"").slice(0,2),"country":country.toLowerCase().replace(/\W+/g,"").slice(0,2)}}function getUniqueId(){return Math.random().toString(36).substring(7)}function ccGetCookie(cname){var name=cname+"=";var decodedCookie=decodeURIComponent(document.cookie);var ca=decodedCookie.split(";");for(var _i41=0;_i41<ca.length;_i41++){var c=ca[_i41];while(c.charAt(0)==" "){c=c.substring(1)}if(c.indexOf(name)==0){return c.substring(name.length,c.length)}}return""}function sendListrakCartValue(){var updateCartValue=getAddOnKeyValue(findAddOn("LISTRAK_CART_UPDATE"));if(updateCartValue==="true"){return true}return false}function callLisTrakConversion(listr,eventname){if(eventname=="CaptureEmail"){if(document.getElementsByName("emailAddress")[0]){var emailAddress=document.getElementsByName("emailAddress")[0].value;if(emailAddress!=""&&lisTrakCapturedEmail!=emailAddress){lisTrakCapturedEmail=emailAddress;listr.SCA.Update("email",emailAddress)}}}else if(eventname=="UpdateCart"&&!sendListrakCartValue()){var lisTrakItems=sessionStorage.getItem("fkCart");var existingLisTrakItems=sessionStorage.getItem("lisTrakItems");if(lisTrakItems!==existingLisTrakItems){var cartProducts=getOrderItemDetails();var lisTrakRedirectUrl=pageData&&pageData.funnelData&&pageData.funnelData.lisTrakRedirectUrl;var cartPathname=lisTrakRedirectUrl||getCurrentWindowLocation().protocol+"//"+getCurrentWindowLocation().host+getCurrentWindowLocation().pathname;var meta1=pageData&&pageData.funnelData&&pageData.funnelData.lisTrakMeta1;var cartProductsCount=cartProducts?Object.keys(cartProducts).length:0;if(!lisTrakCartUpdated&&cartProductsCount>0){lisTrakCartUpdated=true;var oneTimeItemsCount=recurringItemsCount=0;var cartProductsEntries=Object.entries(cartProducts);var cartProductsEntriesLength=cartProductsEntries.length;for(var _i42=0;_i42<cartProductsEntriesLength;_i42++){if(cartProductsEntries[_i42][1].billingCycleType==="ONE_TIME"||cartProductsEntries[_i42][1].finalBillingCycle==2)oneTimeItemsCount++;else recurringItemsCount++}var sendAllItems=oneTimeItemsCount==cartProductsCount||recurringItemsCount==cartProductsCount;// FUN2-3578
for(var _i43=0;_i43<cartProductsEntriesLength;_i43++){var _product8=cartProductsEntries[_i43][1];if(_product8.hasVariants&&!_product8.variant){lisTrakCartUpdated=false;listr.SCA.ClearCart();return}var sku=_product8.variant&&_product8.variant.productSku!==""?_product8.variant.productSku:_product8.productSku;if(sku.trim()=="")continue;if(!sendAllItems&&_product8.billingCycleType!=="ONE_TIME"&&_product8.finalBillingCycle!=2)continue;var variantName=_product8.variant?" "+_product8.variant.title:"";var title=_product8.productName+variantName;var imageURL=_product8.variant&&_product8.variant.imageUrl!==""?_product8.variant.imageUrl:_product8.imageUrl;var unitPrice=_product8.variant&&parseFloat(_product8.variant.price)>0&&!_product8.isVariantBundle&&!_product8.isEditable?_product8.variant.price:_product8.cycle1_price;var _price2=getItemPrice(cartProductsEntries[_i43][0],unitPrice,_product8.currentOrderQuantity).toFixed(2);var quantity=_product8.currentOrderQuantity;listr.SCA.AddItemWithLinks(sku,quantity,_price2,title,imageURL,cartPathname)}if(meta1){listr.SCA.Meta1=meta1}listr.SCA.Submit()}else if(lisTrakCartUpdated&&sessionStorage.getItem("lisTrakItems")&&cartProductsCount==0){lisTrakCartUpdated=false;listr.SCA.ClearCart();listr.SCA.Submit()}sessionStorage.setItem("lisTrakItems",lisTrakItems)}}}function callPurchaseEventForLisTrak(listr){var orderData=JSON.parse(sessionStorage.getItem("orderData"));if(orderData&&orderData.emailAddress){listr.Order.SetCustomer(orderData.emailAddress,orderData.firstName,orderData.lastName);listr.Order.OrderNumber=orderData.orderId;listr.Order.customernumber=orderData.customerId;listr.Order.ShippingTotal=orderData.shipTotal;listr.Order.TaxTotal=orderData.taxTotal;listr.Order.OrderTotal=orderData.totalAmount;if(orderData.items&&orderData.items.length>0){var items=orderData.items;for(var index in items){if(!items[index].productSku&&!items[index].variantSku)continue;var sku=items[index].variantSku?items[index].variantSku:items[index].productSku;listr.Order.AddItem(sku,items[index].qty,items[index].price)}}listr.Order.Submit()}}function getLisTrakCode(){(function(d,tid,vid){if(typeof _ltk!="undefined")return;var js=d.createElement("script");js.id="ltkSDK";js.src="https://cdn.listrakbi.com/scripts/script.js?m="+tid+"&v="+vid;var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(js,s)})(document,pageData.funnelData.lisTrakMerchantID,"1");(function(d){if(typeof _ltk=="undefined"){if(document.addEventListener)document.addEventListener("ltkAsyncListener",function(){_ltk_util.ready(d)});else{e=document.documentElement;e.ltkAsyncProperty=0;e.attachEvent("onpropertychange",function(e){if(e.propertyName=="ltkAsyncProperty"){_ltk_util.ready(d)}})}}else{_ltk_util.ready(d)}})(function(){window.ltk=_ltk;callLisTrakConversion(window.ltk,"UpdateCart");var purchaseEventType=pageData.funnelData.addOns.find(function(_ref17){var keyName=_ref17.keyName;return keyName==="Purchase_Event_FB"}).keyValue;switch(pageData.pageTypeId){// Upsell Page
case 3:purchaseEventType==2&&callPurchaseEventForLisTrak(_ltk);break;// Thank You Page
case 5:callPurchaseEventForLisTrak(_ltk);break;default:break}})}function httpMethod(url,data,headerParams){var loading=document.getElementById("loading");loading?loading.style.display="block !important":null;return fetch(url,{method:"POST",mode:"cors",headers:headerParams?headerParams:getDefaultHeaders(),body:data}).then(/*#__PURE__*/function(){var _ref18=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(response){var _data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:if(!(response.url.includes("ImportClick")&&!response.ok)){_context4.next=8;break}if(!response.url.includes("CreateSession")){_context4.next=7;break}_context4.next=4;return response.json();case 4:_data=_context4.sent;if(!(_data&&_data.message&&_data.message.includes&&_data.message.includes("Duplicate"))){_context4.next=7;break}throw new Error("duplicate");case 7:throw new Error("session failed");case 8:return _context4.abrupt("return",response.json());case 9:case"end":return _context4.stop()}},_callee4)}));return function(_x20){return _ref18.apply(this,arguments)}}())["catch"](function(error){return error})}function getDefaultHeaders(){var includeKeepAlive=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var headers={"Content-Type":"application/json; charset=utf-8","Cache-Control":"no-cache","Access-Control-Allow-Origin":"*",companyToken:sessionStorage.getItem("fk_salt")!==null?sessionStorage.getItem("fk_salt"):pageData.salt,funnelReferenceId:pageData.funnelReferenceId};if(includeKeepAlive){headers["keepalive"]="true"}return headers}//TODO write test data function
function getIpAddress(){var response;$.ajax({async:false,type:"GET",// cors: true,
// headers: {
//     "Cache-Control": "no-cache",
//     "Access-Control-Allow-Origin": "*"
// },
url:"https://api.ipify.org",success:function success(result){response=result},error:function error(xhr){return xhr.status}});return response}function getIpPhysicalAddress(){return _getIpPhysicalAddress.apply(this,arguments)}function _getIpPhysicalAddress(){_getIpPhysicalAddress=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee27(){var geoLocationDisabled,geoLocationInfo;return _regeneratorRuntime().wrap(function _callee27$(_context29){while(1)switch(_context29.prev=_context29.next){case 0:_context29.prev=0;geoLocationDisabled=getAddOnKeyValue(findAddOn("GEOLOCATION_ADDRESS"));if(!(["true","1"].includes(geoLocationDisabled)||pageData.pageTypeId==8)){_context29.next=4;break}return _context29.abrupt("return",null);case 4:geoLocationInfo=sessionStorage.getItem("ccGeoLocationInfo");geoLocationInfo=geoLocationInfo?JSON.parse(geoLocationInfo):null;if(!geoLocationInfo){_context29.next=8;break}return _context29.abrupt("return",geoLocationInfo);case 8:return _context29.abrupt("return",new Promise(function(resolve){setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee26(){var _geoLocationInfo,url,apiResponse,data,regionCode,formattedData;return _regeneratorRuntime().wrap(function _callee26$(_context28){while(1)switch(_context28.prev=_context28.next){case 0:_context28.prev=0;_geoLocationInfo=sessionStorage.getItem("ccGeoLocationInfo");_geoLocationInfo=_geoLocationInfo?JSON.parse(_geoLocationInfo):null;if(!_geoLocationInfo){_context28.next=6;break}resolve(_geoLocationInfo);return _context28.abrupt("return");case 6:url="https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=&longitude=&localityLanguage=en";_context28.next=9;return fetch(url);case 9:apiResponse=_context28.sent;_context28.next=12;return apiResponse.json();case 12:data=_context28.sent;regionCode=data.principalSubdivisionCode&&data.principalSubdivisionCode.split("-");regionCode=regionCode&&regionCode[1];formattedData={city:data.city,region_code:regionCode||"",country_code:data.countryCode,zip_code:data.postcode};sessionStorage.setItem("ccGeoLocationInfo",JSON.stringify(formattedData));resolve(formattedData);_context28.next=23;break;case 20:_context28.prev=20;_context28.t0=_context28["catch"](0);resolve(null);case 23:case"end":return _context28.stop()}},_callee26,null,[[0,20]])})),geoLocationDisabled==="3"?2000:10)}));case 11:_context29.prev=11;_context29.t0=_context29["catch"](0);return _context29.abrupt("return",null);case 14:case"end":return _context29.stop()}},_callee27,null,[[0,11]])}));return _getIpPhysicalAddress.apply(this,arguments)}function getPageType(pageTypeId){var pageType="";switch(pageTypeId){// Lead page
case 2:case 15:pageType="leadPage";break;// Checkout Page
case 4:pageType="checkoutPage";break;// Upsell Page
case 3:pageType="upsellPage1";break;// Thank You Page
case 5:pageType="thankyouPage";break;default:pageType="presellPage"}return pageType}function addFunnelPageRefId(obj){var isBuildOrTemplate=checkBuildOrTemplate();if(!isBuildOrTemplate){obj.funnelReferenceId=pageData.funnelReferenceId;obj.pageReferenceId=pageData.currentPage.referenceId;obj.funnelName=pageData.funnelData.name;obj.pageName=pageData.currentPage.title}}function importClick(pageType,externalSessionId){var obj={};obj.pageType=typeof pageType!=="string"?getPageType(pageType):pageType;if(obj.pageType==="upsellPage")obj.pageType="upsellPage1";//obj.ipAddress = getIpAddress();
obj.userAgent=navigator.userAgent;obj.campaignId=parseInt(pageData.funnelData.campaign);obj.requestUri=sessionStorage.getItem("requestUri");obj.httpReferer=sessionStorage.getItem("httpReferer");var pageTypeId=pageData&&pageData.pageTypeId,createSession=![3,5].includes(pageTypeId);createSession?obj.externalSessionId=externalSessionId:null;if(allowedFraudPixelPages.includes(pageTypeId))obj.fraudPixel=1;if(obj.pageType==="checkoutPage")obj.orderItems=sessionStorage.getItem("fkCart");addFunnelPageRefId(obj);window.ccSetParamsForFastlaneToken&&ccSetParamsForFastlaneToken(obj);window.ccSetAmazonPayV2Payload&&ccSetAmazonPayV2Payload(obj);var data=JSON.stringify(obj);if(createSession){sessionStorage.setItem("sessionStartDateTime",new Date().toJSON());sessionStorage.setItem("ccExternalSessionId",externalSessionId)}var response=httpMethod("".concat(providerUrl,"/ImportClick/CreateSession"),data);if(obj.pageType===5||obj.pageType==="thankyouPage"){if(isFirstTime()){registerClick(1,function(regClickData){confirmation()})}else{confirmation()}}return response}function useSession(session,pageType,refId){var obj={};obj.pageType=typeof pageType!=="string"?getPageType(pageType):pageType;if(obj.pageType==="upsellPage"){var visitedUpsellPages=sessionStorage.getItem("visitedUpsellPages")?JSON.parse(sessionStorage.getItem("visitedUpsellPages")):{};if(visitedUpsellPages[refId]){upsellCount=visitedUpsellPages[refId]}else{var pageCount=Object.keys(visitedUpsellPages).length;if(pageCount<4){visitedUpsellPages[refId]=pageCount+1}else{visitedUpsellPages[refId]=4}upsellCount=visitedUpsellPages[refId]}obj.pageType="upsellPage"+upsellCount;sessionStorage.setItem("visitedUpsellPages",JSON.stringify(visitedUpsellPages))}window.ccSetAmazonPayV2Payload&&ccSetAmazonPayV2Payload(obj);obj.sessionId=session;obj.userAgent=navigator.userAgent;if(pageData&&pageData.pageTypeId&&allowedFraudPixelPages.includes(pageData.pageTypeId))obj.fraudPixel=1;if(obj.pageType==="checkoutPage")obj.orderItems=sessionStorage.getItem("fkCart");addFunnelPageRefId(obj);window.ccSetParamsForFastlaneToken&&ccSetParamsForFastlaneToken(obj);var data=JSON.stringify(obj);var response=httpMethod("".concat(providerUrl,"/ImportClick/UseSession"),data);if(obj.pageType===5||obj.pageType==="thankyouPage"){if(isFirstTime()){registerClick(0);registerClick(1,function(regClickData){confirmation()})}else{confirmation()}}return response}function isMembershipPage(pageType){var membershipPageTypes=[7,8,9,10,11,12,13,31];return membershipPageTypes.includes(pageType)}//memberships
function orderQueryWithOrderId(){return _orderQueryWithOrderId.apply(this,arguments)}function _orderQueryWithOrderId(){_orderQueryWithOrderId=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee28(){var obj,data,res,_orderData10;return _regeneratorRuntime().wrap(function _callee28$(_context30){while(1)switch(_context30.prev=_context30.next){case 0:_context30.prev=0;obj={orderId:ccUrlParams.get("orderId")};data=JSON.stringify(obj);_context30.next=5;return httpMethod("".concat(providerUrl,"/ClubMembership/OrderQueryByOrderId"),data);case 5:res=_context30.sent;_orderData10=res&&res.message&&res.message.data&&res.message.data[0];return _context30.abrupt("return",_orderData10);case 10:_context30.prev=10;_context30.t0=_context30["catch"](0);case 12:case"end":return _context30.stop()}},_callee28,null,[[0,10]])}));return _orderQueryWithOrderId.apply(this,arguments)}function getMembershipHeaders(){var accessToken=cookieData["access_token"];var headers={"Content-Type":"application/json; charset=utf-8","Cache-Control":"no-cache","Access-Control-Allow-Origin":"*","CompanyToken":pageData.salt,"Authorization":tokenType+" "+accessToken};return headers}function showDynamicPopup(message){// Remove existing popup if any
var existingBackdrop=document.getElementById("dynamic-popup-backdrop");if(existingBackdrop)existingBackdrop.remove();// Create backdrop
var backdrop=document.createElement("div");backdrop.id="dynamic-popup-backdrop";backdrop.style.position="fixed";backdrop.style.top="0";backdrop.style.left="0";backdrop.style.width="100%";backdrop.style.height="100%";backdrop.style.backgroundColor="rgba(0,0,0,0.5)";backdrop.style.zIndex="2147483646";// Max safe value - 1
backdrop.style.display="flex";backdrop.style.justifyContent="center";backdrop.style.alignItems="flex-start";backdrop.style.paddingTop="5px";backdrop.addEventListener("click",function(){backdrop.remove()});// Create modal
var modal=document.createElement("div");modal.style.backgroundColor="white";modal.style.padding="20px";modal.style.borderRadius="15px";modal.style.boxShadow="0 2px 10px rgba(0,0,0,0.3)";modal.style.zIndex="2147483647";// Max safe z-index
modal.style.position="relative";modal.innerHTML="\n        <p style=\"margin-bottom: 20px;\">".concat(message,"</p>\n        <button style=\"padding: 6px 12px; cursor: pointer; border: 1px solid grey; border-radius: 5px; background: #4188d3; color: white\">OK</button>\n    ");modal.querySelector("button").addEventListener("click",function(e){e.stopPropagation();backdrop.remove()});backdrop.appendChild(modal);document.body.appendChild(backdrop)}function routingNotFound(){enableInteractions();showDynamicPopup("No page routing found. <br>Please verify this button or link is set properly on an arrow.");sessionStorage.removeItem("upsalefkCart")}function redirectPath(navigationItem){var shouldAppendDate=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(navigationItem.externalURL){var _orderId3=sessionStorage.getItem("orderId");return addOrderIdInExternalURL(addValuesInExternalURL(navigationItem.externalURL),_orderId3)}var appendHtml=shouldAppendDate?".html?"+Date.now():".html";var targetPageViewReferenceId;var targetPageUrlSlug=navigationItem.urlSlug;try{if(pageData.pageTypeId!==3){targetPageViewReferenceId=navigationItem.targetPageViewReferenceId?navigationItem.targetPageViewReferenceId:navigationItem.pageView[0].referenceId}else{targetPageViewReferenceId=Object.keys(navigationItem).length&&(navigationItem.targetPageViewReferenceId?navigationItem.targetPageViewReferenceId:navigationItem.pageView[0].referenceId);if(!targetPageViewReferenceId){targetPageUrlSlug=pageData.currentPage.urlSlug;targetPageViewReferenceId=pageData.pageViewReferenceId}}}catch(err){routingNotFound();throw err}return targetPageUrlSlug?targetPageUrlSlug:targetPageViewReferenceId+appendHtml}function checkBuildOrTemplate(){var buildOrTemplateUrls=["funnels-build","funneltemplates"];return buildOrTemplateUrls.some(function(url){return getCurrentWindowLocation().href.includes(url)})}function getEnvironment(){if(checkBuildOrTemplate()){return"Build"}return"Public"}function redirectToLoginPage(){clearCookies();var loginUrl=sessionStorage.getItem("loginPageUrl");var loginPageDetail=loginUrl!==null&&loginUrl!==void 0?loginUrl:pageData.funnelData.pages.find(function(page){return page.pageView[0].pageType===7});var redirectUrl=redirectPath(loginPageDetail)+"?alertMessage=Access Denied";var encodedUrl=encodeURI(redirectUrl);setCurrentWindowLocation(encodedUrl)}function clearCookies(){var cookies=document.cookie.split("; ");cookies.forEach(function(cookie){var name=cookie.split("=")[0];if(name&&name!=="X-Source"){ccSetCookie(name,"",false)}});document.cookie=""}function clearBrowserStorageData(storageType,keyList){var storage=storageType==="sessionStorage"?window.sessionStorage:window.localStorage;keyList.forEach(function(keyName){storage.removeItem(keyName)})}function ccSetCookie(name,value,allowCrossOrigin,cookieSpan){var sameSite=allowCrossOrigin?"; SameSite=None; Secure":";";var date=new Date;var cookieLife=getAddOnKeyValue(findAddOn("Cookie_Life"));var loginRememberMe=$("[name=rememberMe]").prop("checked");if(cookieLife){if(loginRememberMe===undefined||loginRememberMe===false){var cookieLifeVal=parseInt(cookieLife);if(cookieLifeVal>0){var dateVal=cookieLifeVal*60*60*1000;date.setTime(date.getTime()+dateVal)}else{date.setTime(date.getTime()+1*24*60*60*1000)}}else{var _dateVal=365*24*60*60*1000;date.setTime(date.getTime()+_dateVal)}}else{date.setTime(date.getTime()+1*24*60*60*1000)}if(cookieSpan&&Number(cookieSpan)){date=new Date;date.setTime(date.getTime()+cookieSpan)}var expires="; expires="+date.toGMTString();document.cookie=name+"="+value+expires+"; domain="+document.domain.split(".").reverse().splice(0,2).reverse().join(".")+sameSite+"; path=/";cookieData[name]=value}function isCustomerOrderDataExists(){var serializedOrderData=sessionStorage.getItem("orderData");serializedOrderData=serializedOrderData?JSON.parse(serializedOrderData):null;return serializedOrderData&&serializedOrderData.customerId}function updateLoginLinks(isLogoutAction){var linkCollection=$("a[action=login], a[action=consumerLogout]");var serializedTemplateLinkData=localStorage.getItem("templateLinkData");var isCustomerKnown=isCustomerOrderDataExists();var templateLinkData=serializedTemplateLinkData?JSON.parse(serializedTemplateLinkData):{};linkCollection.each(function(){var linkElement=this;var action=linkElement.getAttribute("action");var linkId=linkElement.getAttribute("id");var linkDataId=linkElement.dataset.id;var linkLabel=linkElement.innerHTML;var templateLinkHashMapId=linkId+linkDataId;var href=linkElement.getAttribute("href");if(!templateLinkData[templateLinkHashMapId]||action==="login"&&templateLinkData[templateLinkHashMapId]&&(templateLinkData[templateLinkHashMapId].label!==linkLabel||templateLinkData[templateLinkHashMapId].href!==href)){templateLinkData[templateLinkHashMapId]={action:action,href:href,label:linkLabel}}if(cookieData&&cookieData["access_token"]){linkElement.innerHTML="Logout";linkElement.setAttribute("action","consumerLogout");linkElement.setAttribute("onclick","consumerLogout(event)");linkElement.setAttribute("href","")}else{linkElement.innerHTML=templateLinkData[templateLinkHashMapId].label;linkElement.setAttribute("action","login");linkElement.setAttribute("onclick","linkMethod(event, false, true);");linkElement.setAttribute("href",templateLinkData[templateLinkHashMapId].href)}});localStorage.setItem("templateLinkData",JSON.stringify(templateLinkData))}function isJSON(text){if(typeof text!=="string"){return false}try{var json=JSON.parse(text);return _typeof(json)==="object"}catch(error){return false}}function ccMergeUrlParams(url1,url2){try{if(!url1||!url2)return url1;var urlObj1=new URL(url1),urlObj2=new URL(url2);var _iterator5=_createForOfIteratorHelper(urlObj2.searchParams.entries()),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var _step5$value=_slicedToArray(_step5.value,2),key=_step5$value[0],value=_step5$value[1];if(!urlObj1.searchParams.has(key)){urlObj1.searchParams.append(key,value)}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return decodeURIComponent(urlObj1.toString())}catch(_unused2){return url1}}function ccUpdateSalesUrlParamsForFailedSession(obj){if(sessionStorage.getItem("ccSessionCallFailed")==="1"&&!sessionStorage.getItem("sessionId")){var updatedSalesUrl=ccMergeUrlParams(obj.salesUrl,sessionStorage.getItem("requestUri"));if(updatedSalesUrl)obj.salesUrl=updatedSalesUrl}}function setLeadCountryAndStateInputs(orderData,params){var majorAddressInputs=["state","country","shipState","shipCountry"];majorAddressInputs.forEach(function(inputName){var input=$("[name='"+inputName+"']");if(input.length&&!params[inputName]){params[inputName]=input.val()||orderData[inputName]}})}function captureLead(_x21,_x22,_x23,_x24){return _captureLead.apply(this,arguments)}function _captureLead(){_captureLead=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee29(callSync,containerId,skipCreateSession,restrictiveCall){var params,orderData,setLeadParams,pageTypeId,currentOrderItems,billShipSameElement,nameOnCardValue,shipCountry,country,shippingProfileId,shipData,_orderItems26,index,sessionItemCpId,_productData17,emailRegex,session,leadParams,existingParams,setOrderDetails,_response7;return _regeneratorRuntime().wrap(function _callee29$(_context31){while(1)switch(_context31.prev=_context31.next){case 0:setLeadParams=function _setLeadParams(inputs){var inputsLength=inputs.length;for(var _i139=0;_i139<inputsLength;_i139++){var input=inputs[_i139];if(input.name==="fullName"){var fullName=input.value.trim();var pos=fullName.indexOf(" ");params.firstName=pos>-1?fullName.substring(0,pos):fullName;params.lastName=pos>-1?fullName.substring(pos+1):null}else if(input.name==="shipFullName"){var _fullName3=input.value.trim();var _pos2=_fullName3.indexOf(" ");params.shipFirstName=_pos2>-1?_fullName3.substring(0,_pos2):_fullName3;params.shipLastName=_pos2>-1?_fullName3.substring(_pos2+1):null}else if(input.type==="checkbox"){if(input.name!=="product"){if(input.name==="doNotSellName"){params[input.name]=input.checked?0:1}else{params[input.name]=input.checked?1:0}}}else if(input.type==="radio"){if(input.checked&&input.name!=="product"){params[input.name]=input.value}}else if(input.name==="phoneNumber"&&phFormatByCountry==="true"){params.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+document.getElementsByName("phoneNumber")[0].value:"";params.phoneNumber=params.phoneNumber?params.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else if(!input.name.startsWith("custom_item_")){params[input.name]=input.value}}};ccSetPhoneDialCode();params={};orderData=sessionStorage.getItem("orderData");orderData=orderData?JSON.parse(orderData):{};pageTypeId=pageData&&pageData.pageTypeId;if(!containerId){_context31.next=12;break}window.clearInterval(captureLeadInterval);setLeadParams($("#"+containerId).find("input, select"));setLeadCountryAndStateInputs(orderData,params);_context31.next=40;break;case 12:getExternalShipping();loadShipProfiles();if(pageData.selectedCampaign&&pageData.selectedCampaign.taxServiceId&&pageData.selectedCampaign.autoTax){currentOrderItems=getOrderItemDetails();calculateTax(currentOrderItems)}setLeadParams($("input, select"));if(pageTypeId===4&&$("[name=cardNumber]").length){billShipSameElement=$("[type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").first();params.billShipSame=billShipSameElement.length?billShipSameElement.prop("checked")?1:0:document.getElementsByName("address1")[0]&&!document.getElementsByName("shipAddress1")[0]?1:0;nameOnCardValue=getInputValue("nameOnCard");if(nameOnCardValue)params.nameOnCard=nameOnCardValue}fetchLeadDetails(params);setLeadCountryAndStateInputs(orderData,params);if(params.billShipSame===1&&!params.address1){params.country=null}if(params.billShipSame===1&&!params.shipAddress1){params.shipCountry=null}shipCountry=$("[name=shipCountry]").first(),country=$("[name=country]").first();if(shipCountry.length&&!shipCountry.val()&&!orderData.shipCountry&&ccUrlParams.get("shipCountry")){params.shipCountry=ccUrlParams.get("shipCountry")}if(country.length&&!country.val()&&!orderData.country&&ccUrlParams.get("country")){params.country=ccUrlParams.get("country")}shippingProfileId=getCurrentShipProfile();params.shipProfileId=shippingProfileId&&shippingProfileId.includes("pickup-")?null:shippingProfileId;if(params.shipProfileId&&params.shipProfileId.indexOf(":")>0){shipData=params.shipProfileId.split(":");params.shipProfileId=null;params.shipCarrier=shipData[3]=="OpenBorder"?"ob:"+shipData[0]:shipData[1];params.shipMethod=shipData[3]=="OpenBorder"?shipData[1]:shipData[3]}_orderItems26=getOrderItems();index=0;_context31.t0=_regeneratorRuntime().keys(_orderItems26);case 30:if((_context31.t1=_context31.t0()).done){_context31.next=39;break}sessionItemCpId=_context31.t1.value;if(Number(sessionItemCpId)){_context31.next=34;break}return _context31.abrupt("continue",30);case 34:index++;if(sessionItemCpId.indexOf(".")>0){_productData17=sessionItemCpId.split(".");params["product"+index+"_id"]=_productData17[0];params["variant"+index+"_id"]=_productData17[1]}else{params["product"+index+"_id"]=sessionItemCpId}params["product"+index+"_qty"]=_orderItems26[sessionItemCpId];_context31.next=30;break;case 39:if(orderData&&orderData.orderId)params.orderId=orderData.orderId;case 40:if(!skipCreateSession&&![3,5].includes(pageTypeId)&&!(sessionStorage.getItem("sessionId")&&sessionStorage.getItem("ccExternalSessionId"))){ccCreateSession(pageTypeId,isFirstTime())}if(!(!restrictiveCall&&window.Stripe&&sessionStorage.getItem("ccEnabledStripeLinkPayment")==="true")){_context31.next=43;break}return _context31.abrupt("return");case 43:params=window.ccGetSetStripeLinkUserDetails?ccGetSetStripeLinkUserDetails(params):params;delete params.cardNumber;delete params.cardSecurityCode;delete params.password;if(params.emailAddress){emailRegex=/^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$/i;if(!emailRegex.test(params.emailAddress))params.emailAddress=null}if(params.phoneNumber){params.phoneNumber=phFormatByCountry==="true"?params.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):params.phoneNumber.replace(/[^0-9+]/g,"").replace(/[+]{1,}/g,"+").replace(/[-]{1,}/g,"-")}if(!(!params.emailAddress&&!containerId)){_context31.next=54;break}if(!((!params.firstName||!params.lastName)&&(!params.shipFirstName||!params.shipLastName))){_context31.next=52;break}return _context31.abrupt("return");case 52:if(!(!params.phoneNumber||params.phoneNumber.length<10)){_context31.next=54;break}return _context31.abrupt("return");case 54:params.salesUrl=getCurrentWindowLocation().href;params.campaignId=parseInt(pageData.funnelData.campaign);if(!params.custom1)params.custom1=pageData.funnelData.name;if(!params.custom2)params.custom2=pageData.currentPage.title;session=sessionStorage.getItem("ccExternalSessionId");session?params.sessionId=session:null;ccUpdateSalesUrlParamsForFailedSession(params);leadParams=JSON.stringify(params);existingParams=sessionStorage.getItem("leadParams");if(!(leadParams!==existingParams)){_context31.next=76;break}setOrderDetails=function setOrderDetails(data){if(data&&data.result==="SUCCESS"){sessionStorage.setItem("orderData",JSON.stringify(data.message));var _orderId6=data.message.orderId;sessionStorage.setItem("orderId",JSON.stringify(_orderId6))}};sessionStorage.setItem("leadParams",leadParams);if(!callSync){_context31.next=74;break}_context31.next=69;return httpMethod("".concat(providerUrl,"/Import/Lead"),leadParams);case 69:_response7=_context31.sent;setOrderDetails(_response7);if(_response7.result==="SUCCESS"){if(_response7.message.activeMembership){displayPrices()}}_context31.next=75;break;case 74:httpMethod("".concat(providerUrl,"/Import/Lead"),leadParams).then(function(data){setOrderDetails(data);if(data.result==="SUCCESS"){if(data.message.activeMembership){displayPrices()}}});case 75:if(window.ltk&&params.emailAddress){callLisTrakConversion(window.ltk,"CaptureEmail");callLisTrakConversion(window.ltk,"UpdateCart")}case 76:case"end":return _context31.stop()}},_callee29)}));return _captureLead.apply(this,arguments)}function showExceptionInPopupValue(){return getAddOnKeyValue(findAddOn("ENABLE_POPUP"))==="true"?true:false}function getCartDisplayOrder(){var sortOrder=getAddOnKeyValue(findAddOn("CART_DISPLAY_ORDER"));return sortOrder||"campaignProductIdAsc"}function ccGetProductSortPrice(campaignProductId,product){try{var productPercentagePrice=Number(sessionStorage.getItem("ccCartProductsPercentageTotal"))||0;var itemAltValue=altValues&&altValues[campaignProductId+"|"+product.currentOrderQuantity];var shopifyItems=pageData.cartData&&pageData.cartData.itemsInfo||{},checkoutFlow=[2,3,4].includes(pageData.pageId),ccIsVat=!getTaxRate().isVat;var productPercentageItemPrice;if(ccIsVat&&checkoutFlow&&product.isPricePercent===1&&!shopifyItems[campaignProductId]){var itemAltValuePrice=itemAltValue&&itemAltValue.split("|")[1];productPercentageItemPrice=(productPercentagePrice*(Number(itemAltValuePrice?itemAltValuePrice:product.cycle1_price)||0)*0.01).toFixed(2)}var unitPrice=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var productPrice=productPercentageItemPrice?productPercentageItemPrice:getItemPrice(campaignProductId,unitPrice,1).toFixed(2);return Number(productPrice)}catch(error){console.log(error);return 0}}function sortCartDisplayOrder(entries,order){return entries.sort(function(_ref19,_ref20){var _ref21=_slicedToArray(_ref19,2),keyA=_ref21[0],prodA=_ref21[1];var _ref22=_slicedToArray(_ref20,2),keyB=_ref22[0],prodB=_ref22[1];var nameA=(prodA.productName||prodA.name||"").toLowerCase();var nameB=(prodB.productName||prodB.name||"").toLowerCase();var baseIdA=parseInt(prodA.productId||0);var baseIdB=parseInt(prodB.productId||0);var campaignIdA=parseInt(keyA||prodA.campaignProductId||0);var campaignIdB=parseInt(keyB||prodB.campaignProductId||0);switch(order){case"productNameAsc":return sortNameWithNumeric(nameA,nameB,false);case"productNameDesc":return sortNameWithNumeric(nameA,nameB,true);case"baseProductIdAsc":return baseIdA-baseIdB;case"baseProductIdDesc":return baseIdB-baseIdA;case"campaignProductIdAsc":return campaignIdA-campaignIdB;case"campaignProductIdDesc":return campaignIdB-campaignIdA;case"productPriceAsc":console.log("@AJ",ccGetProductSortPrice(keyA,prodA),ccGetProductSortPrice(keyB,prodB));return ccGetProductSortPrice(keyA,prodA)-ccGetProductSortPrice(keyB,prodB);case"productPriceDesc":return ccGetProductSortPrice(keyB,prodB)-ccGetProductSortPrice(keyA,prodA);default:return 0}})}function sortNameWithNumeric(nameA,nameB){var descending=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var extractLeadingNumber=function extractLeadingNumber(str){var match=str.trim().match(/^([(\[#-]*)?(\d+)/);return match?parseInt(match[2],10):null};var numA=extractLeadingNumber(nameA);var numB=extractLeadingNumber(nameB);var aIsNum=numA!==null;var bIsNum=numB!==null;if(aIsNum&&bIsNum){return descending?numB-numA:numA-numB}if(aIsNum&&!bIsNum){return descending?1:-1}if(!aIsNum&&bIsNum){return descending?-1:1}return descending?nameB.localeCompare(nameA):nameA.localeCompare(nameB)}function importLead(buttonId,route){ccSetPhoneDialCode();var obj={};if(document.getElementsByName("fullName")[0]){var fullName=document.getElementsByName("fullName")[0].value.trim();var pos=fullName.indexOf(" ");obj.firstName=pos>-1?fullName.substring(0,pos):fullName;obj.lastName=pos>-1?fullName.substring(pos+1):null}else{obj.firstName=document.getElementsByName("firstName")[0]?document.getElementsByName("firstName")[0].value:null;obj.lastName=document.getElementsByName("lastName")[0]?document.getElementsByName("lastName")[0].value:null}obj.companyName=document.getElementsByName("companyName")[0]?document.getElementsByName("companyName")[0].value:null;obj.address1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;obj.address2=document.getElementsByName("address2")[0]?document.getElementsByName("address2")[0].value:null;obj.postalCode=document.getElementsByName("postalCode")[0]?document.getElementsByName("postalCode")[0].value:null;obj.city=document.getElementsByName("city")[0]?document.getElementsByName("city")[0].value:null;obj.state=document.getElementsByName("state")[0]?document.getElementsByName("state")[0].value:null;obj.country=document.getElementsByName("country")[0]?document.getElementsByName("country")[0].value:defaultCountryCode;obj.emailAddress=document.getElementsByName("emailAddress")[0]?document.getElementsByName("emailAddress")[0].value:null;if(document.getElementsByName("phoneNumber")[0]){if(phFormatByCountry==="true"){obj.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+document.getElementsByName("phoneNumber")[0].value:"";obj.phoneNumber=obj.phoneNumber?obj.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else{obj.phoneNumber=document.getElementsByName("phoneNumber")[0].value.replace(/[^0-9+]/g,"").replace(/[+]{1,}/g,"+").replace(/[-]{1,}/g,"-")}}obj.gender=document.getElementsByName("gender")[0]?document.getElementsByName("gender")[0].value:null;obj.dob=document.getElementsByName("dob")[0]?document.getElementsByName("dob")[0].value:null;var shippingProfileId=getCurrentShipProfile();obj.shipProfileId=shippingProfileId&&shippingProfileId.includes("pickup-")?null:shippingProfileId;if(obj.shipProfileId&&obj.shipProfileId.indexOf(":")>0){var shipData=obj.shipProfileId.split(":");obj.shipProfileId=null;obj.shipCarrier=shipData[1];obj.shipMethod=shipData[3]}obj.custom1=document.getElementsByName("custom1")[0]?document.getElementsByName("custom1")[0].value:null;obj.custom2=document.getElementsByName("custom2")[0]?document.getElementsByName("custom2")[0].value:null;obj.custom3=document.getElementsByName("custom3")[0]?document.getElementsByName("custom3")[0].value:null;obj.custom4=document.getElementsByName("custom4")[0]?document.getElementsByName("custom4")[0].value:null;obj.custom5=document.getElementsByName("custom5")[0]?document.getElementsByName("custom5")[0].value:null;if(!obj.custom1)obj.custom1=pageData.funnelData.name;if(!obj.custom2)obj.custom2=pageData.currentPage.title;if(document.getElementsByName("newPassword")[0]){if(document.getElementsByName("newPassword")[0].value!==document.getElementsByName("confirmPassword")[0].value){enableInteractions();$("#validationMessage").length?$("#validationMessage").show():alert("Passwords do not match");return}$("#validationMessage").hide();obj.eCommercePassword=document.getElementsByName("newPassword")[0].value;obj.eCommerceLogin=obj.emailAddress}var inputs=$("input, select");inputs.each(function(index,input){if(input.name.indexOf("custom_")>=0){if(input.type==="checkbox")obj[input.name]=input.checked?1:0;else if(input.type==="radio"){if(input.checked)obj[input.name]=input.value}else obj[input.name]=input.value}else if(input.type==="checkbox"&&!excludeInputs[input.name]){if(input.name==="doNotSellName"){obj[input.name]=input.checked?0:1}else{obj[input.name]=input.checked?1:0}}else if(input.type==="radio"&&!excludeInputs[input.name]&&!excludeClassName.hasOwnProperty(function(value){return input.classList.contains(value)})){if(input.checked)obj[input.name]=input.value}});var sessionKeys=Object.keys(sessionStorage);sessionKeys.forEach(function(key){if(key.indexOf("custom_")===0)obj[key]=sessionStorage.getItem(key)});obj.billShipSame=$("[name='checkbox'][name=billShipSame], [name='radio'][name=billShipSame].cc-same-as-shipping").first().prop("checked")?1:0;obj.salesUrl=getCurrentWindowLocation().href;obj.campaignId=parseInt(pageData.funnelData.campaign);fetchLeadDetails(obj);//getting variant products
getVariants();var orderItems=getOrderItems();var offer=getOfferFromNavigationItem(buttonId);if(offer){orderItems[offer]=getQuantity();orderItems=isSubscribeOn?swapSubscriptions(orderItems):orderItems;sessionStorage.setItem("fkCart",JSON.stringify(orderItems))}var index=0;for(var sessionItemCpId in orderItems){if(!Number(sessionItemCpId))continue;index++;if(sessionItemCpId.indexOf(".")>0){var _productData6=sessionItemCpId.split(".");obj["product"+index+"_id"]=_productData6[0];obj["variant"+index+"_id"]=_productData6[1]}else{obj["product"+index+"_id"]=sessionItemCpId}obj["product"+index+"_qty"]=orderItems[sessionItemCpId]}var bundleStockParams=getBundleVariants(obj,index);obj=bundleStockParams.params;obj.isLeadSubmit=1;var session=sessionStorage.getItem("ccExternalSessionId");session?obj.sessionId=session:null;ccUpdateSalesUrlParamsForFailedSession(obj);obj=ccHandleMissingAddress1(obj);var data=JSON.stringify(obj);sessionStorage.setItem("userDetails",data);if(window.ccFacebookPixelID){window.triggerfacebookpixelEvent&&triggerfacebookpixelEvent("Lead")}ccTrackSygnalEvents&&window.rrq&&window.rrq("track","Lead",{});if(window.ltk&&obj.emailAddress)callLisTrakConversion(window.ltk,"CaptureEmail");var response=httpMethod("".concat(providerUrl,"/Import/Lead"),data).then(/*#__PURE__*/function(){var _ref23=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(data){var tag,color,pageForm;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:if(!(data.result==="SUCCESS")){_context6.next=4;break}registerClick(1,/*#__PURE__*/function(){var _ref24=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(regClickData){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:sessionStorage.setItem("orderData",JSON.stringify(data.message));//setting orderId to be used globally
orderId=data.message.orderId;sessionStorage.setItem("orderId",JSON.stringify(orderId));sessionKeys.forEach(function(key){if(key.indexOf("custom_")===0)sessionStorage.removeItem(key)});if(route&&route.includes("__ORDERID__")){route=route.replace("__ORDERID__",orderId)}_context5.t0=ccEnableLeadEvents&&window.ccCallPageLeadEvents;if(!_context5.t0){_context5.next=9;break}_context5.next=9;return ccCallPageLeadEvents("lead-success");case 9:setCurrentWindowLocation(route);case 10:case"end":return _context5.stop()}},_callee5)}));return function(_x26){return _ref24.apply(this,arguments)}}());_context6.next=16;break;case 4:tag=document.getElementById("error-"+buttonId);if(tag===null){tag=document.createElement("p");tag.setAttribute("id","error-"+buttonId);tag.classList.add(commonErrorClass)}else{tag.innerHTML=""}tag.innerHTML=data.message;color=tag.style.color="red";pageForm=$("button[data-id='"+buttonId+"']").length?$("button[data-id='"+buttonId+"']"):$("a[data-id='"+buttonId+"']");showExceptionInPopupValue()?alert(data.message.replaceAll(breakTagRegex,"\n")):$(tag).insertAfter(pageForm);enableInteractions();_context6.t0=ccEnableLeadEvents&&window.ccCallPageLeadEvents;if(!_context6.t0){_context6.next=15;break}_context6.next=15;return ccCallPageLeadEvents("lead-decline");case 15:return _context6.abrupt("return",result=false);case 16:case"end":return _context6.stop()}},_callee6)}));return function(_x25){return _ref23.apply(this,arguments)}}())}var ProductType={"offer":0,"upsell":1};var getCommonReferenceId=function getCommonReferenceId(){try{var _funnelJson;return(_funnelJson=funnelJson)===null||_funnelJson===void 0||(_funnelJson=_funnelJson.funnelData.pages.find(function(page){return page.pageView.find(function(pv){return pv.pageType==36})!=null}))===null||_funnelJson===void 0?void 0:_funnelJson.pageView[0].referenceId}catch(er){return null}};var getCommonElements=function getCommonElements(id){var commonReferenceId=getCommonReferenceId();if(commonReferenceId){return funnelJson.elements.find(function(element){return element.pageViewReferenceId===commonReferenceId&&element.elementId===id})}return null};function getNavigationItemFromPageData(buttonId){var _paySourceNavItem$lin,_navigation$linkDetai;// {
//     "elementId": "fkt-button-d312fcad-5eae-45f6-9e8d-4db6cd414ce0",
//     "href": "",
//     "status": null,
//     "pageViewReferenceId": "e4c34dc7-be70-4be4-8db7-6588ce552ec6",
//     "linkDetails": [],
//     "products": []
// },
//Use pageData from session if pageData hasn't loaded from ajax before 2 click Paypal upsale processing
var newButtonId=buttonId&&buttonId.split("_prodCol")[0];var selectedPaysource=sessionStorage.getItem("paySource");var paySourceNavItem=pageData.navigationItems.find(function(navItem){return navItem.elementId===newButtonId+"-"+selectedPaysource});var navigation=paySourceNavItem!==null&&paySourceNavItem!==void 0&&(_paySourceNavItem$lin=paySourceNavItem.linkDetails)!==null&&_paySourceNavItem$lin!==void 0&&_paySourceNavItem$lin.length?paySourceNavItem:pageData.navigationItems.find(function(navItem){return navItem.elementId===newButtonId});if(navigation&&(_navigation$linkDetai=navigation.linkDetails)!==null&&_navigation$linkDetai!==void 0&&_navigation$linkDetai.length){return navigation}return getCommonElements(newButtonId)||navigation}function getProductInfoFromNavigationItem(type,buttonId){var productButton=document.querySelector("[data-id="+buttonId+"]");var productButtonValue=productButton.getAttribute(type);if(productButtonValue&&parseInt(productButtonValue)>0){return productButtonValue}var item=getNavigationItemFromPageData(buttonId);if(item&&item.products&&item.products.length){return item.products[0]}return null}function getOfferFromNavigationItem(buttonId){return getProductInfoFromNavigationItem("offer",buttonId)}function getUpsellFromNavigationItem(buttonId){return getProductInfoFromNavigationItem("upsell",buttonId)}function rolebackSessionProducts(offer){var orderItems=getOrderItems();delete orderItems[offer];orderItems=removeSubscriptionProduct(orderItems,offer);sessionStorage.setItem("fkCart",JSON.stringify(orderItems))}function addItemToCustomCart(itemKey,input,offer){var customCart=sessionStorage.getItem("customCart")!==null?JSON.parse(sessionStorage.getItem("customCart")):{};try{var customCartLength=Object.keys(customCart).length;var customInputName=input.name.replace("custom_item_","");var _productId3,customValue,qty;var _orderItems4=getOrderItems();if(itemKey){_productId3=itemKey}else{var keys=_orderItems4&&Object.keys(_orderItems4).length&&Object.keys(_orderItems4);_productId3=!keys&&offer?offer:keys&&keys.length?_productId3=keys[0]:""}qty=_productId3&&_orderItems4[_productId3]?_orderItems4[_productId3]:0;var productExistsInCC=false;var noMatchCount=0;if(customCartLength&&_productId3){var _loop9=function _loop9(_i44){var customCartValues=customCart[_i44].split("|");var customCartProductId=customCartValues[0];if(customCartProductId==_productId3){if(!customCart[_i44].includes("|"+customInputName+":")&&input.value){customValue=customInputName+":"+input.value;customCart[_i44]=customCart[_i44].concat("|"+customValue)}else{customCartValues.forEach(function(value,index){var customFieldName=value.split(":")[0];if(customFieldName==customInputName){var _index=customCartValues.indexOf(value);if(!input.value){customCartValues.splice(_index,1)}else{customCartValues[_index]=customInputName+":"+input.value}customCart[_i44]=customCartValues.join("|")}})}}else noMatchCount++};for(var _i44=0;_i44<customCartLength;_i44++){_loop9(_i44)}}else if(_productId3&&qty){noMatchCount=-1}if(noMatchCount===-1||noMatchCount==customCartLength){customValue=customInputName+":"+input.value;customCart[customCartLength]=_productId3+"|"+qty+"|"+customValue}return customCart}catch(err){err}}function importOrder(_x27,_x28,_x29,_x30,_x31,_x32,_x33){return _importOrder.apply(this,arguments)}function _importOrder(){_importOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee32(buttonId,route,paypalSdkPrePaidType,paayDetails,openElementFormDetails,userOrderDetails,amazonV2CheckoutTriggerData){var outOfStockProducts,orderId,obj,orderData,paypalSmartButtonSdk,customCart,fullName,pos,cardName,_pos3,preventDefaultCouponRemoval,defaultCouponCode,externalShipProfileSelected,shipData,achRoutingNumber,transitNumber,institutionNumber,cardNonce,ageVerificationPlugin,ageCheckerPluginId,ageVerificationPluginId,offer,buttonElement,buttonVariantValue,quantity,_orderItems27,orderItemsCopy,_rebillCart2,buttonReplacementValue,itemOfferKey,inputs,billShipSame,sessionKeys,nameOnCardValue,cardDateVal,cardDateValueParsed,month,year,ccFraudSessionElement,ccFraudSessionId,isCardOnFileElementExists,loginCustomer,headers,checkoutResource,customerOrders,squareMerchantAccount,shopPayUrl,baseProductId,multiPayProductId,multiPayRebillsEnabled,multiPayProductMap,_loop43,_ret6,_productId18,shippableOrder,_loop44,sessionItemCpId,index,_sessionItemCpId,_item17,_productData18,customCartLength,_i140,bundleStockParams,isReturned,session,submitImportOrder,amazonName,_pos4,amazonEmail,details,fflNumber,orderItemsForDB,totals,tagElements,tag,pageForm,_message2,alternatePaymentCurrencyCode,alternatePaymentCurrencyObj,shipping,ccExchangeRateList,checkoutAndCampaignCurrency,exchangeRateExists,handleErrorForExchangeRateFailure,_data2,rate,amazonCheckResult,data,_response8;return _regeneratorRuntime().wrap(function _callee32$(_context36){while(1)switch(_context36.prev=_context36.next){case 0:outOfStockProducts=[];orderId=sessionStorage.getItem("orderId");orderId=JSON.parse(orderId);obj={};//If import order is success and customer tries to checkout again just redirect to route
orderData=JSON.parse(sessionStorage.getItem("orderData"));paypalSmartButtonSdk=sessionStorage.getItem("paypalSdk");customCart=sessionStorage.getItem("customCart")!==null?JSON.parse(sessionStorage.getItem("customCart")):null;$("#ccAlternatePaymentExchangeRateError").remove();if(!(!orderData||orderData.orderStatus==="DECLINED"||orderData.orderStatus==="PARTIAL")){_context36.next=430;break}if(document.getElementsByName("fullName")[0]){fullName=document.getElementsByName("fullName")[0].value.trim();pos=fullName.indexOf(" ");obj.firstName=pos>-1?fullName.substring(0,pos):fullName;obj.lastName=pos>-1?fullName.substring(pos+1):null}else if(!document.getElementsByName("firstName")[0]&&document.getElementsByName("nameOnCard")[0]){cardName=document.getElementsByName("nameOnCard")[0].value.trim();_pos3=cardName.indexOf(" ");obj.firstName=_pos3>-1?cardName.substring(0,_pos3):cardName;obj.lastName=_pos3>-1?cardName.substring(_pos3+1):null}else{obj.firstName=document.getElementsByName("firstName")[0]?document.getElementsByName("firstName")[0].value:null;obj.lastName=document.getElementsByName("lastName")[0]?document.getElementsByName("lastName")[0].value:null}obj.companyName=document.getElementsByName("companyName")[0]?document.getElementsByName("companyName")[0].value:null;obj.address1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;obj.address2=document.getElementsByName("address2")[0]?document.getElementsByName("address2")[0].value:null;obj.postalCode=document.getElementsByName("postalCode")[0]?document.getElementsByName("postalCode")[0].value:null;obj.city=document.getElementsByName("city")[0]?document.getElementsByName("city")[0].value:null;obj.state=document.getElementsByName("state")[0]?document.getElementsByName("state")[0].value:null;obj.country=document.getElementsByName("country")[0]?document.getElementsByName("country")[0].value:defaultCountryCode;obj.emailAddress=document.getElementsByName("emailAddress")[0]?document.getElementsByName("emailAddress")[0].value:null;if(document.getElementsByName("phoneNumber")[0]){if(phFormatByCountry==="true"){obj.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+document.getElementsByName("phoneNumber")[0].value:"";obj.phoneNumber=obj.phoneNumber?obj.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else{obj.phoneNumber=document.getElementsByName("phoneNumber")[0].value.replace(/[^0-9+]/g,"").replace(/[+]{1,}/g,"+").replace(/[-]{1,}/g,"-")}}obj.gender=document.getElementsByName("gender")[0]?document.getElementsByName("gender")[0].value:null;obj.dob=document.getElementsByName("dob")[0]?document.getElementsByName("dob")[0].value:null;preventDefaultCouponRemoval=getAddOnKeyValue(findAddOn("PRE_COUPON_REMOVAL"))==="true";defaultCouponCode=pageData.selectedCampaign.defaultCouponCode;if(preventDefaultCouponRemoval&&defaultCouponCode&&!appliedCouponCode.includes(defaultCouponCode)){appliedCouponCode.splice(0,0,defaultCouponCode)}window.ccSendIdmeCouponCodeToImportOrder&&ccSendIdmeCouponCodeToImportOrder(appliedCouponCode,obj);obj.couponCode=appliedCouponCode.length>0?appliedCouponCode.toString():null;if(sessionStorage.getItem("leadCouponCode")!==null){obj.couponCode=sessionStorage.getItem("leadCouponCode")}getShipProfile()&&getShipProfile().storePickupId?obj.storePickupId=getShipProfile().storePickupId:obj.shipProfileId=getCurrentShipProfile();externalShipProfileSelected=obj.shipProfileId&&obj.shipProfileId.indexOf(":")>0;shipData=externalShipProfileSelected&&obj.shipProfileId.split(":");if(shipData){obj.externalShipProfileId=obj.shipProfileId;obj.shipProfileId=null;obj.shipCarrier=shipData[3]=="OpenBorder"?"ob:"+shipData[0]:shipData[1];obj.shipMethod=shipData[3]=="OpenBorder"?shipData[1]:shipData[3];obj.totalShipping=shipData[4]}achRoutingNumber=$("[name=achRoutingNumber]").first().val();if(achRoutingNumber){obj.achRoutingNumber=achRoutingNumber}else{transitNumber=$("[name=transitNumber]").first().val(),institutionNumber=$("[name=institutionNumber]").first().val();obj.achRoutingNumber=transitNumber&&institutionNumber?transitNumber+"-"+institutionNumber:null}obj.achAccountNumber=document.getElementsByName("achAccountNumber")[0]?document.getElementsByName("achAccountNumber")[0].value:null;obj.achAccountType=document.getElementsByName("achAccountType")[0]?document.getElementsByName("achAccountType")[0].value:null;obj.achAccountHolderType=document.getElementsByName("achAccountHolderType")[0]?document.getElementsByName("achAccountHolderType")[0].value:null;obj.iban=document.getElementsByName("iban")[0]?document.getElementsByName("iban")[0].value:null;obj.ddbic=document.getElementsByName("ddbic")[0]?document.getElementsByName("ddbic")[0].value:null;cardNonce=document.getElementById("formCardNonce");if(cardNonce&&cardNonce.value!="")obj.formCardNonce=cardNonce.value;obj.custom1=document.getElementsByName("custom1")[0]?document.getElementsByName("custom1")[0].value:null;obj.custom2=document.getElementsByName("custom2")[0]?document.getElementsByName("custom2")[0].value:null;obj.custom3=document.getElementsByName("custom3")[0]?document.getElementsByName("custom3")[0].value:null;obj.custom4=document.getElementsByName("custom4")[0]?document.getElementsByName("custom4")[0].value:null;obj.custom5=document.getElementsByName("custom5")[0]?document.getElementsByName("custom5")[0].value:null;if(!obj.custom1)obj.custom1=pageData.funnelData.name;if(!obj.custom2)obj.custom2=pageData.currentPage.title;ageVerificationPlugin=getAddOnKeyValue(findAddOn("AV_PLUGIN"));if(ageVerificationPlugin==="AgeChecker"){ageCheckerPluginId=parseInt(getAddOnKeyValue(findAddOn("AGE_CHECKER_ID")));if(ageCheckerPluginId)obj["custom_order_AgeChecker"]=ageCheckerPluginId}else if(ageVerificationPlugin==="1account"){ageVerificationPluginId=parseInt(getAddOnKeyValue(findAddOn("AV_PLUGIN_ID")));if(ageVerificationPluginId)obj["custom_order_1Account"]=ageVerificationPluginId}//Parameters that might be needed for native 3DS
if(route.indexOf("V1/SplitTest/funnel/")>0||route.startsWith("https://"))obj.redirectsTo=route;else if(checkDomainForRoute())obj.redirectsTo="https://"+getCurrentWindowLocation().hostname+"/"+pageData.funnelData.referenceId+"/"+route;else obj.redirectsTo="https://"+getCurrentWindowLocation().hostname+"/"+route;obj.browserData=JSON.stringify(browserData);obj.salesUrl=getCurrentWindowLocation().href;obj.cartId=sessionStorage.getItem("cartId");obj.campaignId=parseInt(pageData.funnelData.campaign);offer=getOfferFromNavigationItem(buttonId);buttonElement=document.querySelector("[data-id="+buttonId+"]");buttonVariantValue=buttonElement.getAttribute("variantvalue");quantity=buttonElement.getAttribute("quantity");//getting variant products
getVariants();_orderItems27=getOrderItems();orderItemsCopy=JSON.parse(JSON.stringify(_orderItems27));_rebillCart2=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):null;if(offer){buttonReplacementValue=buttonElement.getAttribute("replaceproductid");if(Object.keys(_orderItems27).length===0&&document.getElementsByName("price")[0]&&!buttonVariantValue){obj.product1_id=offer;obj.product1_qty=getQuantity();obj.product1_price=document.getElementsByName("price")[0].value}else if(buttonVariantValue){itemOfferKey=offer+"."+buttonVariantValue;_orderItems27[itemOfferKey]=quantity?quantity:getQuantity();sessionStorage.setItem("fkCart",JSON.stringify(_orderItems27))}else if(Number(buttonReplacementValue)&&_orderItems27[buttonReplacementValue]){_orderItems27[offer]=_orderItems27[buttonReplacementValue];delete _orderItems27[buttonReplacementValue];sessionStorage.setItem("fkCart",JSON.stringify(_orderItems27))}else{_orderItems27[offer]=quantity?quantity:getQuantity();updateReplacementProducts(_orderItems27);//remove the button product?
sessionStorage.setItem("fkCart",JSON.stringify(_orderItems27))}_orderItems27=isSubscribeOn?swapSubscriptions(_orderItems27):_orderItems27;sessionStorage.setItem("fkCart",JSON.stringify(_orderItems27))}inputs=$("input, select");inputs.each(function(index,input){if(input.name.startsWith("custom_item_")){var section=$(input).closest("section.fk-product-section");customCart=!section.length&&input.value?addItemToCustomCart(0,input,offer):customCart;customCart&&Object.keys(customCart).length&&sessionStorage.setItem("customCart",JSON.stringify(customCart))}else if(input.name.startsWith("custom_")){if(input.type==="checkbox")obj[input.name]=input.checked?1:0;else if(input.type==="radio"){if(input.checked)obj[input.name]=input.value}else obj[input.name]=input.value}else if(input.type==="checkbox"&&!excludeInputs[input.name]){if(input.name==="doNotSellName"){obj[input.name]=input.checked?0:1}else{obj[input.name]=input.checked?1:0}}else if(input.type==="radio"&&!excludeInputs[input.name]&&!excludeClassName.hasOwnProperty(function(value){return input.classList.contains(value)})){if(input.checked)obj[input.name]=input.value}});billShipSame=$("[type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").first();if(billShipSame.length){obj.billShipSame=billShipSame.prop("checked")?1:0}else if(document.getElementsByName("address1")[0]&&!document.getElementsByName("shipAddress1")[0]){obj.billShipSame=1}sessionKeys=Object.keys(sessionStorage);sessionKeys.forEach(function(key){if(key.indexOf("custom_")===0)obj[key]=sessionStorage.getItem(key)});if(orderId){obj.orderId=orderId}fetchLeadDetails(obj);if(getInputValue("cardNumber")){obj.cardNumber=getInputValue("cardNumber").replace(/-/g,"").replace(/ /g,"")}nameOnCardValue=getInputValue("nameOnCard");if(nameOnCardValue)obj.nameOnCard=nameOnCardValue;cardDateVal=getInputValue("cardDate")?getInputValue("cardDate"):"";cardDateValueParsed=cardDateVal.replace("/","");if(cardDateValueParsed){month=cardDateValueParsed.substring(0,2);year=cardDateValueParsed.substr(cardDateValueParsed.length-2);obj.cardMonth=getInputValue("cardMonth")?parseInt(getInputValue("cardMonth")):parseInt(month)||null;obj.cardYear=getInputValue("cardYear")?parseInt(getInputValue("cardYear")):parseInt(year)||null}else{obj.cardMonth=getInputValue("cardMonth")?parseInt(getInputValue("cardMonth")):null;obj.cardYear=getInputValue("cardYear")?parseInt(getInputValue("cardYear")):null}ccFraudSessionElement=$("[name='fraudSessionId']").first(),ccFraudSessionId=ccFraudSessionElement.length&&ccFraudSessionElement.val();if(ccFraudSessionId){obj.fraudSessionId=ccFraudSessionId;sessionStorage.setItem("ccFraudSessionId",ccFraudSessionId)}obj.cardSecurityCode=getInputValue("cardSecurityCode");isCardOnFileElementExists=document.getElementById("acctOnFile");loginCustomer=null;headers=null;checkoutResource="Order";obj.paySource=sessionStorage.getItem("paySource")!==null?sessionStorage.getItem("paySource"):"CREDITCARD";if(isCardOnFileElementExists&&isCardOnFileElementExists.checked===true&&(obj.paySource==="CREDITCARD"||obj.paySource==="ACCTONFILE")||obj.cardNumber==null&&obj.paySource==="CREDITCARD"){obj.cardMonth="";obj.cardYear="";obj.cardNumber="";// obj.cardSecurityCode = "";
loginCustomer=JSON.parse(sessionStorage.getItem("loginCustomer"));if(cookieData["access_token"]){checkoutResource="MemberOrder";headers=getMembershipHeaders();sessionStorage.setItem("paySource","ACCTONFILE");obj.paySource="ACCTONFILE"}}customerOrders=sessionStorage.getItem("customerOrders");customerOrders=customerOrders?JSON.parse(customerOrders):[];if(sessionStorage.getItem("isUniqueCheckoutId")&&customerOrders[0].customerId){obj.customerId=customerOrders[0].customerId;if(isCardOnFileElementExists&&isCardOnFileElementExists.checked===true){sessionStorage.setItem("paySource","ACCTONFILE");obj.paySource="ACCTONFILE"}}if(prepaidGateways.includes(obj.paySource)){obj.prepaidType=obj.paySource;obj.paySource="PREPAID"}if(obj.prepaidType==="WITHREACH_PAYPAL"){obj.forceMerchantId=parseInt(getAddOnKeyValue(findAddOn("Paypal_billerId")))}if(!(obj.paySource==="CREDITCARD"||obj.paySource==="ACCTONFILE")){_context36.next=95;break}obj.forceMerchantId=document.getElementsByName("forceMerchantId")[0]?getInputValue("forceMerchantId"):null;_context36.next=288;break;case 95:if(!(obj.paySource==="AFFIRM")){_context36.next=101;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref43){var keyName=_ref43.keyName;return keyName==="Affirm_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="AFFIRM";_context36.next=288;break;case 101:if(!(obj.paySource==="KLARNA")){_context36.next=107;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref44){var keyName=_ref44.keyName;return keyName==="Klarna_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="KLARNA";_context36.next=288;break;case 107:if(!(obj.paySource==="SEZZLE")){_context36.next=113;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref45){var keyName=_ref45.keyName;return keyName==="Sezzle_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="SEZZLE";_context36.next=288;break;case 113:if(!(obj.paySource==="AFTERPAY")){_context36.next=119;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref46){var keyName=_ref46.keyName;return keyName==="Afterpay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="AFTERPAY";_context36.next=288;break;case 119:if(!(obj.paySource==="BANCONTACT")){_context36.next=125;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref47){var keyName=_ref47.keyName;return keyName==="Bancontact_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="BANCONTACT";_context36.next=288;break;case 125:if(!(obj.paySource==="IDEAL")){_context36.next=131;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref48){var keyName=_ref48.keyName;return keyName==="iDEAL_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="IDEAL";_context36.next=288;break;case 131:if(!(obj.paySource==="SWISH")){_context36.next=137;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref49){var keyName=_ref49.keyName;return keyName==="Swish_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="SWISH";_context36.next=288;break;case 137:if(!(obj.paySource==="BLIK")){_context36.next=143;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref50){var keyName=_ref50.keyName;return keyName==="Blik_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="BLIK";_context36.next=288;break;case 143:if(!(obj.paySource==="MOBILEPAY")){_context36.next=149;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref51){var keyName=_ref51.keyName;return keyName==="Mobilepay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="MOBILEPAY";_context36.next=288;break;case 149:if(!(obj.paySource==="P24")){_context36.next=155;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref52){var keyName=_ref52.keyName;return keyName==="P24_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="P24";_context36.next=288;break;case 155:if(!(obj.paySource==="EPS")){_context36.next=161;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref53){var keyName=_ref53.keyName;return keyName==="Eps_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="EPS";_context36.next=288;break;case 161:if(!(obj.paySource==="SPLITIT")){_context36.next=167;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref54){var keyName=_ref54.keyName;return keyName==="SplitIt_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="SPLITIT";_context36.next=288;break;case 167:if(!(obj.paySource==="RADOM")){_context36.next=173;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref55){var keyName=_ref55.keyName;return keyName==="Radom_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="RADOM";_context36.next=288;break;case 173:if(!(obj.paySource==="COINSUB")){_context36.next=179;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref56){var keyName=_ref56.keyName;return keyName==="Coinsub_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="COINSUB";_context36.next=288;break;case 179:if(!(obj.paySource==="TRUSTLY")){_context36.next=185;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref57){var keyName=_ref57.keyName;return keyName==="Trustly_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="TRUSTLY";_context36.next=288;break;case 185:if(!(obj.paySource==="TWINT")){_context36.next=191;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref58){var keyName=_ref58.keyName;return keyName==="Twint_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="TWINT";_context36.next=288;break;case 191:if(!(obj.paySource==="MULTIBANCO")){_context36.next=197;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref59){var keyName=_ref59.keyName;return keyName==="Multibanco_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="MULTIBANCO";_context36.next=288;break;case 197:if(!(obj.paySource==="MBWAY")){_context36.next=203;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref60){var keyName=_ref60.keyName;return keyName==="Mbway_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="MBWAY";_context36.next=288;break;case 203:if(!(obj.paySource==="BIZUM")){_context36.next=209;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref61){var keyName=_ref61.keyName;return keyName==="Bizum_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="BIZUM";_context36.next=288;break;case 209:if(!(obj.paySource==="PAYU")){_context36.next=215;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref62){var keyName=_ref62.keyName;return keyName==="Payu_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="PAYU";_context36.next=288;break;case 215:if(!(obj.paySource==="KAKAOPAY")){_context36.next=221;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref63){var keyName=_ref63.keyName;return keyName==="Kakaopay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="KAKAOPAY";_context36.next=288;break;case 221:if(!(obj.paySource==="NAVERPAY")){_context36.next=227;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref64){var keyName=_ref64.keyName;return keyName==="NaverPay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="NAVERPAY";_context36.next=288;break;case 227:if(!(obj.paySource==="PAYCO")){_context36.next=233;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref65){var keyName=_ref65.keyName;return keyName==="Payco_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="PAYCO";_context36.next=288;break;case 233:if(!(obj.paySource==="ALIPAY")){_context36.next=239;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref66){var keyName=_ref66.keyName;return keyName==="Alipay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="ALIPAY";_context36.next=288;break;case 239:if(!(obj.paySource==="WECHATPAY")){_context36.next=245;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref67){var keyName=_ref67.keyName;return keyName==="Wechatpay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="WECHATPAY";_context36.next=288;break;case 245:if(!(obj.paySource==="PAYPAY")){_context36.next=251;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref68){var keyName=_ref68.keyName;return keyName==="PayPay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="PAYPAY";_context36.next=288;break;case 251:if(!(obj.paySource==="BOLETO")){_context36.next=257;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref69){var keyName=_ref69.keyName;return keyName==="Boleto_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="BOLETO";_context36.next=288;break;case 257:if(!(obj.paySource==="PIX")){_context36.next=263;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref70){var keyName=_ref70.keyName;return keyName==="PIX_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="PIX";_context36.next=288;break;case 263:if(!(obj.paySource==="SEPA_DEBIT")){_context36.next=269;break}obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref71){var keyName=_ref71.keyName;return keyName==="SEPA_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="SEPA_DEBIT";_context36.next=288;break;case 269:if(!(obj.paySource==="MOLLIE")){_context36.next=274;break}obj.paySource="PREPAID";obj.prepaidType="MOLLIE";_context36.next=288;break;case 274:if(!(obj.paySource==="SQUAREV2")){_context36.next=281;break}squareMerchantAccount=getAddOnKeyValue(findAddOn("squareBillerId"));if(squareMerchantAccount!==""){obj.forceMerchantId=squareMerchantAccount}obj.paySource="PREPAID";obj.prepaidType="SQUAREV2";_context36.next=288;break;case 281:if(!(obj.paySource==="SHOPPAY")){_context36.next=287;break}shopPayUrl=getShopPayCheckoutUrl(_orderItems27);if(shopPayUrl){setCurrentWindowLocation(shopPayUrl)}else{enableInteractions()}return _context36.abrupt("return");case 287:if(obj.paySource==="BITPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref72){var keyName=_ref72.keyName;return keyName==="BitPay_billerId"}).keyValue);obj.paySource="PREPAID";obj.prepaidType="BITPAY"}else if(obj.paySource==="OPENPATH_IPAY"){obj.paySource="PREPAID";obj.prepaidType="OPENPATH_IPAY";obj.forceMerchantId=ccOpenPathId&&Number(ccOpenPathId)||null;openElementFormDetails?obj.formCardNonce=openElementFormDetails:obj.gatewaySdk=1}else if(obj.paySource==="WELLNESS"){obj.paySource="PREPAID";obj.prepaidType="WELLNESS";obj.forceMerchantId=Number(getAddOnKeyValue(findAddOn("WellnessPay_billerId")))}else if(obj.paySource==="PREPAID-TYPE"){obj.paySource="PREPAID";obj.prepaidType=""}case 288:if(!obj.prepaidType){_context36.next=312;break}if(!(sessionStorage.getItem("multiPayProductId")&&sessionStorage.getItem("multiPayBaseProductId"))){_context36.next=296;break}baseProductId=sessionStorage.getItem("multiPayBaseProductId");multiPayProductId=sessionStorage.getItem("multiPayProductId");if(_orderItems27[baseProductId]){_orderItems27[multiPayProductId]=_orderItems27[baseProductId];delete _orderItems27[baseProductId];sessionStorage.setItem("fkCart",JSON.stringify(_orderItems27));captureLead()}if(sessionStorage.getItem("multiPayRebillProductId"))obj.redirectsTo=obj.salesUrl;_context36.next=312;break;case 296:if(!multiPayRebillGateways.includes(obj.prepaidType)){_context36.next=312;break}multiPayRebillsEnabled=getAddOnKeyValue(findAddOn("multiPayRebills"));if(!multiPayRebillsEnabled){_context36.next=312;break}multiPayProductMap=getAddOnKeyValue(findAddOn("multiPayProducts"));if(!multiPayProductMap){_context36.next=312;break}multiPayProductMap=JSON.parse(multiPayProductMap);_loop43=/*#__PURE__*/_regeneratorRuntime().mark(function _loop43(_productId18){var multiPayRebillMapping;return _regeneratorRuntime().wrap(function _loop43$(_context32){while(1)switch(_context32.prev=_context32.next){case 0:multiPayRebillMapping=multiPayProductMap.find(function(_ref73){var baseProductId=_ref73.baseProductId;return baseProductId===_productId18.toString()});if(!multiPayRebillMapping){_context32.next=5;break}sessionStorage.setItem("multiPayRoute",route);if(checkRequiredInputs(null,buttonId)){sessionStorage.setItem("multiPayButtonId",buttonId);sessionStorage.setItem("multiPayBaseProductId",multiPayRebillMapping.baseProductId);sessionStorage.setItem("multiPayProductId",multiPayRebillMapping.multiPayProductId);sessionStorage.setItem("multiPayRebillProductId",multiPayRebillMapping.rebillProductId);sessionStorage.setItem("multiPayCode",obj.cardSecurityCode);validateCard()}else{sessionStorage.removeItem("paySource");sessionStorage.removeItem("multiPayRoute");enableInteractions()}return _context32.abrupt("return",{v:void 0});case 5:case"end":return _context32.stop()}},_loop43)});_context36.t0=_regeneratorRuntime().keys(_orderItems27);case 304:if((_context36.t1=_context36.t0()).done){_context36.next=312;break}_productId18=_context36.t1.value;return _context36.delegateYield(_loop43(_productId18),"t2",307);case 307:_ret6=_context36.t2;if(!_ret6){_context36.next=310;break}return _context36.abrupt("return",_ret6.v);case 310:_context36.next=304;break;case 312:shippableOrder=false;_loop44=/*#__PURE__*/_regeneratorRuntime().mark(function _loop44(sessionItemCpId){var productDetails;return _regeneratorRuntime().wrap(function _loop44$(_context35){while(1)switch(_context35.prev=_context35.next){case 0:productDetails=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId===parseInt(sessionItemCpId.split(".")[0])});if(Object.keys(productDetails).length>0){shippableOrder=productDetails[0].cycle1_isShippable?true:shippableOrder}case 2:case"end":return _context35.stop()}},_loop44)});_context36.t3=_regeneratorRuntime().keys(_orderItems27);case 315:if((_context36.t4=_context36.t3()).done){_context36.next=320;break}sessionItemCpId=_context36.t4.value;return _context36.delegateYield(_loop44(sessionItemCpId),"t5",318);case 318:_context36.next=315;break;case 320:index=0;_context36.t6=_regeneratorRuntime().keys(_orderItems27);case 322:if((_context36.t7=_context36.t6()).done){_context36.next=336;break}_sessionItemCpId=_context36.t7.value;if(Number(_sessionItemCpId)){_context36.next=326;break}return _context36.abrupt("continue",322);case 326:index++;_item17=void 0;if(_sessionItemCpId.indexOf(".")>0){_productData18=_sessionItemCpId.split(".");_item17=verifyStock&&getOutStockedVariant(_productData18,"","","",_orderItems27[_sessionItemCpId]);obj["product"+index+"_id"]=_productData18[0];obj["variant"+index+"_id"]=_productData18[1]}else{_item17=verifyStock&&getOutStockedProduct(_sessionItemCpId,_orderItems27[_sessionItemCpId]);obj["product"+index+"_id"]=_sessionItemCpId}_item17&&_item17.length>0&&outOfStockProducts.push(_item17);obj["product"+index+"_qty"]=_orderItems27[_sessionItemCpId];if($("input[type=checkbox][freeshipping=true]").is(":checked")||!shippableOrder){obj["product"+index+"_shipPrice"]=0;obj.totalShipping=0}if(_rebillCart2&&_rebillCart2[_sessionItemCpId])obj["product"+index+"_recur"]=_rebillCart2[_sessionItemCpId];if(altValues[_sessionItemCpId+"|"+_orderItems27[_sessionItemCpId]])obj["product"+index+"_alt"]=getItemAlt(_sessionItemCpId,_orderItems27[_sessionItemCpId]);_context36.next=322;break;case 336:if(customCart){customCartLength=Object.keys(customCart).length;for(_i140=0;_i140<customCartLength;_i140++){obj["product_custom"+(_i140+1)]=customCart[_i140]}}bundleStockParams=getBundleVariants(obj,index);obj=bundleStockParams.params||obj;outOfStockProducts=outOfStockProducts.concat(bundleStockParams.outOfStockBundleVariants);_context36.next=342;return calculateTotals();case 342:isReturned=window.importOrderPAAY&&importOrderPAAY(obj,paayDetails,buttonId,route,offer,_orderItems27);if(!isReturned){_context36.next=345;break}return _context36.abrupt("return");case 345:session=sessionStorage.getItem("ccExternalSessionId");session?obj.sessionId=session:null;submitImportOrder=true;if(!(obj.paySource==="PAYPAL")){_context36.next=352;break}window.importOrderPayPal&&importOrderPayPal(obj,externalShipProfileSelected,shipData,route,_orderItems27,buttonId);_context36.next=359;break;case 352:if(!(obj.paySource==="GOOGLEPAY")){_context36.next=358;break}_context36.next=355;return googlePayImportOrder(obj,offer);case 355:submitImportOrder=_context36.sent;_context36.next=359;break;case 358:if(obj.paySource==="AMAZON"){obj.amazonBillerId=parseInt(sessionStorage.getItem("amazonBillerId"));obj.amazonOrderId=sessionStorage.getItem("amazonOrderId");obj.amazonAddressConsent=sessionStorage.getItem("amazonAccessToken");amazonName=sessionStorage.getItem("amazonName");if(amazonName){_pos4=amazonName.indexOf(" ");if(!obj.firstName)obj.firstName=_pos4>-1?amazonName.substring(0,_pos4):amazonName;if(!obj.lastName)obj.lastName=_pos4>-1?amazonName.substring(_pos4+1):null}amazonEmail=sessionStorage.getItem("amazonEmail");if(amazonEmail&&!obj.emailAddress)obj.emailAddress=amazonEmail}else if(obj.paySource==="APPLEPAY"){submitImportOrder=applePayImportOrder(obj)}case 359:obj.insureShipment=document.getElementsByName("insureShipment")[0]?document.getElementsByName("insureShipment")[0].checked:0;obj.insureShipment=obj.insureShipment===true?1:0;obj.shipmentInsurancePrice=document.getElementById("shipmentInsurancePrice")?document.getElementById("shipmentInsurancePrice").value:"";details=JSON.parse(JSON.stringify(obj));delete details.cardNumber;delete details.cardSecurityCode;sessionStorage.setItem("userDetails",JSON.stringify(details));if(paypalSmartButtonSdk&&paypalSmartButtonSdk==="true"){obj.paypalSdk=true;if(paypalSdkPrePaidType){obj.prepaidType=paypalSdkPrePaidType}}obj.currencyCode=returnCurrencyCode();fflNumber=sessionStorage.getItem("fflNumber");if(fflNumber&&pageData.pageTypeId===4&&window.checkFFLProductsInCart&&checkFFLProductsInCart()){obj["custom_order_fflNumber"]=fflNumber;if(document.getElementsByName("fflSplit")[0]&&document.getElementsByName("fflSplit")[0].checked===false)obj["custom_order_fflSplit"]=1}if(obj.cardNumber&&(window.fbq||window.rrq||window.ttq)){orderItemsForDB=[];Object.keys(orderItemsCopy).forEach(function(key){orderItemsForDB.push({id:key.split(".")[0].toString(),quantity:parseInt(orderItemsCopy[key])})});totals=JSON.parse(sessionStorage.getItem("totals"));if(window.ccFacebookPixelID){window.facebookpixelImportOrder&&facebookpixelImportOrder(orderItemsForDB,totals)}ccTrackSygnalEvents&&window.rrq&&window.rrq("track","AddPaymentInfo",{contents:orderItemsForDB,currency:returnCurrencyCode()||pageData.selectedCampaign.currency,value:totals.grandTotal});window.ccTikTokPlaceAnOrderEvent&&window.ccTikTokPlaceAnOrderEvent();window.ccTikTokAddPaymentInfoEvent&&window.ccTikTokAddPaymentInfoEvent()}confirmOptIn();obj=window.ccSetPayPalFastlanePayload?ccSetPayPalFastlanePayload(paypalSdkPrePaidType,userOrderDetails,obj):obj;obj=window.ccSetStripeLinkPayload?ccSetStripeLinkPayload(paypalSdkPrePaidType,userOrderDetails,obj):obj;if(submitImportOrder){window.clearInterval(captureLeadInterval)}if(!(outOfStockProducts.length>0&&verifyStock)){_context36.next=387;break}tagElements=generateErrorTag(buttonId,paypalSmartButtonSdk);tag=tagElements.tag;pageForm=tagElements.pageForm;outOfStockProducts=outOfStockProducts.join("<br>");_message2="Products are out of stock: <br>"+outOfStockProducts;tag.innerHTML=_message2;showExceptionInPopupValue()?alert(_message2.replaceAll(breakTagRegex,"\n")):$(tag).insertAfter(pageForm);obj.paySource==="PAYPAL"&&window.clearCCPayPalSessionData&&clearCCPayPalSessionData();enableInteractions();_context36.next=428;break;case 387:if(obj.paySource!="CREDITCARD"){obj.cardNumber="";obj.cardMonth="";obj.cardYear="";if(obj.paySource!=="ACCTONFILE")obj.cardSecurityCode=""}alternatePaymentCurrencyCode=ccAlternatePaymentGateways.includes(obj.prepaidType)&&(getAddOnKeyValue(findAddOn("ALT_PAY_CUR_CODE"))||"").trim();alternatePaymentCurrencyObj=fetchCurrentCurrencyObj(alternatePaymentCurrencyCode);alternatePaymentCurrencyCode=!alternatePaymentCurrencyObj||(alternatePaymentCurrencyObj===null||alternatePaymentCurrencyObj===void 0?void 0:alternatePaymentCurrencyObj.sendToGateway)!=1?"":alternatePaymentCurrencyCode;if(!alternatePaymentCurrencyCode){_context36.next=419;break}obj.currencyCode=alternatePaymentCurrencyCode;shipping=Number(obj.totalShipping);if(!(shipping&&shipData)){_context36.next=419;break}ccExchangeRateList=JSON.parse(sessionStorage.getItem("ccExchangeRateList"))||{};checkoutAndCampaignCurrency=(returnCurrencyCode()||pageData.selectedCampaign.currency)+"|"+alternatePaymentCurrencyCode;exchangeRateExists=Number(ccExchangeRateList[checkoutAndCampaignCurrency]);if(exchangeRateExists){_context36.next=419;break}handleErrorForExchangeRateFailure=function handleErrorForExchangeRateFailure(){var errorMessage="An error occurred with exchange rate. Please try again.";$("<p id='ccAlternatePaymentExchangeRateError' class='"+window.commonErrorClass+"' style='color: red;'>"+errorMessage+"</p>").insertAfter($("[data-id='"+buttonId+"']"));enableInteractions()};_context36.prev=400;_context36.next=403;return httpMethod("".concat(providerUrl,"/Currency/exchangerate"),JSON.stringify({"currencyCode":selectedCurrencyCode,"baseCurrencyCode":baseCurrencyCode}));case 403:_data2=_context36.sent;if(!(_data2.result==="SUCCESS")){_context36.next=411;break}rate=Number(_data2.message);ccExchangeRateList[checkoutAndCampaignCurrency]=rate;sessionStorage.setItem("ccExchangeRateList",JSON.stringify(ccExchangeRateList));obj.totalShipping=Number((rate*shipping).toFixed());_context36.next=413;break;case 411:handleErrorForExchangeRateFailure();return _context36.abrupt("return");case 413:_context36.next=419;break;case 415:_context36.prev=415;_context36.t8=_context36["catch"](400);handleErrorForExchangeRateFailure();return _context36.abrupt("return");case 419:amazonCheckResult=window.ccAmazonPayV2ImportOrder&&ccAmazonPayV2ImportOrder(obj,amazonV2CheckoutTriggerData,buttonId,route);if(!(amazonCheckResult==="exit")){_context36.next=422;break}return _context36.abrupt("return");case 422:obj=amazonCheckResult?amazonCheckResult:obj;obj=ccHandleMissingAddress1(obj);obj=ccRemoveEmptyKeysForPayload(obj);data=JSON.stringify(obj);_response8=submitImportOrder&&httpMethod("".concat(providerUrl,"/Import/")+checkoutResource,data,headers).then(/*#__PURE__*/function(){var _ref74=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee31(data){var gatewaySdkParams,_route5,update,handleErrors;return _regeneratorRuntime().wrap(function _callee31$(_context34){while(1)switch(_context34.prev=_context34.next){case 0:window.ccClearAmazonPayV2Session&&ccClearAmazonPayV2Session();sessionStorage.removeItem("leadCouponCode");if(!(data.result==="SUCCESS")){_context34.next=22;break}gatewaySdkParams=data.message.gatewaySdkParams;if(!gatewaySdkParams){_context34.next=6;break}return _context34.abrupt("return",data);case 6:if(!(data.message.paypalUrl&&paypalSmartButtonSdk!=="true")){_context34.next=9;break}setCurrentWindowLocation(data.message.paypalUrl);return _context34.abrupt("return");case 9:if(!data.message.paypalSdkParams){_context34.next=12;break}sessionStorage.setItem("paypalSmartButton",true);return _context34.abrupt("return",data);case 12:if(!(orderData&&orderData.newCustomer!=data.message.newCustomer)){_context34.next=17;break}route=routeByCustomer(data.message,route,buttonId);if(route){_context34.next=17;break}routingNotFound();return _context34.abrupt("return");case 17:ccUpdateCartWithOrderData(data.message.items);sessionStorage.setItem("orderData",JSON.stringify(data.message));registerClick(1,/*#__PURE__*/function(){var _ref75=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee30(regClickData){var salesProduct,update;return _regeneratorRuntime().wrap(function _callee30$(_context33){while(1)switch(_context33.prev=_context33.next){case 0:salesProduct=[];sessionStorage.setItem("checkoutOrderData",JSON.stringify({items:data.message.items,totalAmount:data.message.totalAmount,taxTotal:data.message.taxTotal,shipTotal:data.message.shipTotal}));orderId=data.message.orderId;salesProduct.push(data.message.items);sessionStorage.setItem("orderId",JSON.stringify(orderId));sessionStorage.setItem("products",JSON.stringify(salesProduct[0]));sessionStorage.setItem("importOrderSuccess",true);ccTrackSygnalEvents&&sessionStorage.setItem("importOrderSuccessSygnal",true);getProvidersData(4)&&sessionStorage.setItem("importOrderSuccessTTK",true);pageData.funnelData.GA_MEASUREMENT_ID?sessionStorage.setItem("importOrderSuccessGA",true):"";pageData.funnelData.snapchatPixelID?sessionStorage.setItem("importOrderSuccessSC",true):"";sessionKeys.forEach(function(key){if(key.indexOf("custom_")===0)sessionStorage.removeItem(key)});sessionStorage.removeItem("cartId");sessionStorage.removeItem("currentItem");if(sessionStorage.getItem("applePayToken")&&window.session){update={status:ApplePaySession.STATUS_SUCCESS};window.session.completePayment(update);sessionStorage.removeItem("applePayToken")}if(route&&route.includes("__ORDERID__")){route=route.replace("__ORDERID__",orderId)}if(loginCustomer)window.orderQuery&&orderQuery();if(!alternatePaymentCurrencyCode){_context33.next=20;break}try{setPriceAndCurrency(alternatePaymentCurrencyCode).then(function(){setCurrentWindowLocation(route)})}catch(_unused6){setCurrentWindowLocation(route)}return _context33.abrupt("return");case 20:_context33.t0=ccEnableOfferEvents&&window.ccCallPageOfferEvents;if(!_context33.t0){_context33.next=24;break}_context33.next=24;return ccCallPageOfferEvents("offer-success");case 24:setCurrentWindowLocation(route);case 25:case"end":return _context33.stop()}},_callee30)}));return function(_x67){return _ref75.apply(this,arguments)}}());_context34.next=41;break;case 22:sessionStorage.removeItem("paay_pan");//handle merchant redirect for native 3DS
if(!(data.result==="MERC_REDIRECT")){_context34.next=30;break}_route5=data.message&&data.message.url;alternatePaymentCurrencyCode&&sessionStorage.setItem("ccAlternatePaymentCurrencyCode",alternatePaymentCurrencyCode);sessionStorage.setItem("merchantRedirectfkCart",JSON.stringify(orderItemsCopy||{}));sessionStorage.setItem("cc3dsPageSubmitDetails",JSON.stringify({pageTypeId:pageData.pageTypeId,referenceId:pageData.currentPage.referenceId}));if(_route5){setCurrentWindowLocation(_route5)}else if(data.message&&data.message.script){eval(data.message.script)}return _context34.abrupt("return",false);case 30:offer&&rolebackSessionProducts(offer);sessionStorage.removeItem("paySource");if(sessionStorage.getItem("applePayToken")&&window.session){update={status:ApplePaySession.STATUS_FAILURE};window.session.completePayment(update);sessionStorage.removeItem("applePayToken")}handleErrors=function handleErrors(data,buttonId){var showExceptionInPopup=showExceptionInPopupValue();var _data$message4=data.message,message=_data$message4===void 0?"":_data$message4;var messageInLC=message.toLowerCase();var handleErrorMessage=document.getElementById("error-"+buttonId);// Handle handleErrorMessage element
if(!handleErrorMessage){handleErrorMessage=document.createElement("p");handleErrorMessage.setAttribute("id","error-"+buttonId);handleErrorMessage.classList.add(commonErrorClass)}else{handleErrorMessage.innerHTML=""}function handleErrorElement(element){handleErrorMessage.innerHTML=message;var color=handleErrorMessage.style.color="red";var pageForm=document.getElementsByName(element);if(pageForm&&pageForm.length>0){pageForm[0].style.outline="red solid 1px";!showExceptionInPopup&&$(handleErrorMessage).insertAfter(pageForm);$(pageForm[0]).focus();return true}return false}// Show error message next to button AND next to input
var handleButtonMessage=document.getElementById("error-"+buttonId+"x");if(!handleButtonMessage){handleButtonMessage=document.createElement("p");handleButtonMessage.setAttribute("id","error-"+buttonId+"x");handleButtonMessage.classList.add(commonErrorClass)}else{handleButtonMessage.innerHTML=""}handleButtonMessage.innerHTML=message;var color=handleButtonMessage.style.color="red";var actionBtn=$("button[data-id='"+buttonId+"']").length?$("button[data-id='"+buttonId+"']"):$("a[data-id='"+buttonId+"']");if(paypalSmartButtonSdk==="true"&&!actionBtn.length){actionBtn=$("div[data-id='"+buttonId+"']")}if(actionBtn&&actionBtn.length&&$(".fk-popup").find(actionBtn[0]).length){var popup=$(actionBtn[0]).closest(".fk-popup");var id=popup.attr("id");hidePopUpBlock(id);actionBtn=$("[openpopup='"+id+"']");actionBtn=actionBtn.length?actionBtn:$("[action=openPopup]")[0]}showExceptionInPopup?alert(message.replaceAll(breakTagRegex,"\n")):$(handleButtonMessage).insertAfter(actionBtn);if(messageInLC.includes("date")||messageInLC.includes("month")||messageInLC.includes("year")){// Display message inside date
if(handleErrorElement("cardDate")||handleErrorElement("cardMonth")||handleErrorElement("cardYear"))return}// Display a message below the card number
if(messageInLC.includes("card")&&handleErrorElement("cardNumber")){return}//Check for security errors
var hasSecurityError=["cvv","cvc","security"].some(function(input){return messageInLC.includes(input)});// Display error inside cardSecurityCode
if(hasSecurityError&&handleErrorElement("cardSecurityCode")){return}if(messageInLC.includes("emailaddress")&&handleErrorElement("emailAddress")){return}};if(data.result==="ERROR"){handleErrors(data,buttonId)}enableInteractions();_context34.t0=ccEnableOfferEvents&&window.ccCallPageOfferEvents;if(!_context34.t0){_context34.next=40;break}_context34.next=40;return ccCallPageOfferEvents("offer-decline");case 40:return _context34.abrupt("return",result=false);case 41:case"end":return _context34.stop()}},_callee31)}));return function(_x66){return _ref74.apply(this,arguments)}}());return _context36.abrupt("return",_response8);case 428:_context36.next=431;break;case 430:if(paypalSmartButtonSdk!=="true"){setCurrentWindowLocation(route)}case 431:case"end":return _context36.stop()}},_callee32,null,[[400,415]])}));return _importOrder.apply(this,arguments)}var getRecommendationFromCampaign=function getRecommendationFromCampaign(cartProducts){var productType=pageData.pageTypeId===3?"UPSALE":"OFFER";var campaignProducts=pageData.selectedCampaign.products.filter(function(product){var price=getPrice(product);return product.productType==productType&&Number(price)>0&&product.billingCycleType==="ONE_TIME"});campaignProducts=campaignProducts.sort(function(a,b){return a.campaignProductId-b.campaignProductId});ccFilterRecommendations(campaignProducts,pageProductIdsOnly,cartProducts)};function ccResetRefreshOrderBumps(_x34,_x35){return _ccResetRefreshOrderBumps.apply(this,arguments)}function _ccResetRefreshOrderBumps(){_ccResetRefreshOrderBumps=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee33(callCampaign,useCampaignProducts){var campaignId,cartProducts,excludeProducts,_params,_response9,data,recommendations,_i141,refreshBumpParent,quantity,_i142,_refreshBumpParent;return _regeneratorRuntime().wrap(function _callee33$(_context37){while(1)switch(_context37.prev=_context37.next){case 0:campaignId=pageData.selectedCampaign.campaignId;cartProducts=Object.keys(getOrderItemDetails()).map(function(cartKey){return cartKey.split(".")[0]});excludeProducts=cartProducts.concat(pageProductIdsOnly).join(",");if(!callCampaign){_context37.next=22;break}_params={campaignId:campaignId,campaignProductId:excludeProducts};_context37.prev=5;_context37.next=8;return httpMethod("".concat(providerUrl,"/Import/CampaignQuery"),JSON.stringify(_params));case 8:_response9=_context37.sent;if(!(_response9&&_response9.result==="SUCCESS")){_context37.next=15;break}data=_response9.message&&_response9.message.data&&_response9.message.data[campaignId];if(!data){_context37.next=15;break}recommendations=data.recommendedProducts;if(recommendations.length){ccFilterRecommendations(recommendations,pageProductIdsOnly,cartProducts)}else{getRecommendationFromCampaign(cartProducts)}return _context37.abrupt("return");case 15:_context37.next=20;break;case 17:_context37.prev=17;_context37.t0=_context37["catch"](5);console.log(_context37.t0);case 20:_context37.next=23;break;case 22:if(!recommendationsList.length&&useCampaignProducts){getRecommendationFromCampaign(cartProducts)}case 23:if(recommendationsList.length){for(_i141=0;_i141<refreshOrderBumps.length;_i141++){refreshBumpParent=$(refreshOrderBumps[_i141]).closest(".cc-order-bump-variants");if(recommendationsList[_i141]){refreshBumpParent.css("display","block");quantity=refreshBumpParent[0].querySelector("input[name='quantity'], select[name='quantity']");quantity.value=1;refreshOrderBumps[_i141].setAttribute("value",recommendationsList[_i141])}else{refreshBumpParent.css("display","none")}refreshBumpParent?$(refreshBumpParent).find(".order-bump-checkbox")[0].checked=false:null}loadVariants();showVariantImageOnProductSection()}else{for(_i142=0;_i142<refreshOrderBumps.length;_i142++){_refreshBumpParent=$(refreshOrderBumps[_i142]).closest(".cc-order-bump-variants");_refreshBumpParent.css("display","none")}}case 24:case"end":return _context37.stop()}},_callee33,null,[[5,17]])}));return _ccResetRefreshOrderBumps.apply(this,arguments)}function ccFilterRecommendations(products,prodOnPage,orderItemsIds,prevSuggestions){recommendationsList=[];var _loop10=function _loop10(){var product=products[index];var productId=product&&(product.recommendedCampaignProductId||product.campaignProductId).toString();var productsOnPage=pageData.pageTypeId===3||prodOnPage&&(!prodOnPage.length||!prodOnPage.includes(productId));var productsOnOrder=orderItemsIds&&(!orderItemsIds.length||!orderItemsIds.includes(productId));var productsSuggested=!prevSuggestions||!prevSuggestions.length||!prevSuggestions.includes(productId);var productFromCampaign=product.campaignId?pageData.selectedCampaign.campaignId==product.campaignId:true;product=product.recommendedCampaignProductId?pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==product.recommendedCampaignProductId}):product;var price=getPrice(product);var priceNotZero=price>0;if(productsOnPage&&productsOnOrder&&productsSuggested&&productFromCampaign&&priceNotZero){if(refreshOrderBumps.length){recommendationsList.push(product.recommendedCampaignProductId||product.campaignProductId)}else{var confirmOption=product.campaignProductId;return{v:confirmOption}}}},_ret2;for(var index in products){_ret2=_loop10();if(_ret2)return _ret2.v}ccResetRefreshOrderBumps()}function ccHandleConfirmOption(confirmOption,prevSuggestions){confirmOption=ccProductId&&[2,4].includes(pageData.pageTypeId)&&ccDynamicProductSection?ccProductId:confirmOption;if(confirmOption){if(pageData.pageTypeId===3){var dynamicUpsellsByPageRef=sessionStorage.getItem("dynamicUpsellsByPageRef")!==null?JSON.parse(sessionStorage.getItem("dynamicUpsellsByPageRef")):{};confirmOption=dynamicUpsellsByPageRef[pageData.pageViewReferenceId]?dynamicUpsellsByPageRef[pageData.pageViewReferenceId]:confirmOption;dynamicUpsellsByPageRef[pageData.pageViewReferenceId]=confirmOption;sessionStorage.setItem("dynamicUpsellsByPageRef",JSON.stringify(dynamicUpsellsByPageRef))}sessionStorage.setItem("currentItem",confirmOption);recommendationFlag=true;!prevSuggestions.includes(confirmOption.toString())&&prevSuggestions.push(confirmOption.toString());sessionStorage.setItem("prevSuggestions",JSON.stringify(prevSuggestions))}return prevSuggestions}function ccSetRecommendationFromCart(orderItems,recommendationValue,prevSuggestions){var firstProduct;var sortOnPrice=function sortOnPrice(productA,productB){if(productA.productId==productOrderArray[0]){firstProduct=productA}else if(productB.productId==productOrderArray[0]){firstProduct=productB}var priceA=Number(productA.price);var priceB=Number(productB.price);if(priceA<priceB){return 1}if(priceA>priceB){return-1}return 0};var sortedProducts=orderItems.sort(sortOnPrice);sortedProducts=sortedProducts.filter(function(prod){return Number(prod.price)>0&&prod.billingCycleType!=="RECURRING"});var product=Number(recommendationValue)===3?sortedProducts[sortedProducts.length-1]:sortedProducts[0];product=Number(recommendationValue)===4&&firstProduct?firstProduct:product;var confirmOption=product&&product.productId;prevSuggestions=ccHandleConfirmOption(confirmOption,prevSuggestions);return prevSuggestions}function ccSetRecommendation(prodOnPage,prevSuggestions,orderItemsIds,globalRecommendations){try{var _campaignRecommendations=dynamicOrderBump||refreshOrderBumps.length?pageData.selectedCampaign.recommendedProducts:null;_campaignRecommendations=_campaignRecommendations&&_campaignRecommendations.length?_campaignRecommendations:null;var recommendations=globalRecommendations||_campaignRecommendations||null;var productType=pageData.pageTypeId===3?"UPSALE":"OFFER";var campaignProducts=pageData.selectedCampaign.products.filter(function(product){var price=getPrice(product);return product.productType==productType&&Number(price)>0&&product.billingCycleType==="ONE_TIME"});campaignProducts=campaignProducts.sort(function(a,b){return a.campaignProductId-b.campaignProductId});var confirmOption;confirmOption=recommendations?ccFilterRecommendations(recommendations,prodOnPage,orderItemsIds,prevSuggestions):null;confirmOption=!confirmOption&&!refreshOrderBumps.length?ccFilterRecommendations(campaignProducts,prodOnPage,orderItemsIds,prevSuggestions):confirmOption;ccHandleConfirmOption(confirmOption,prevSuggestions)}catch(e){e}}function hidePopUpBlock(popupId){var popupBlock=document.getElementById(popupId||"customizable_popup");if(popupBlock){popupBlock.style.display="none"}}function validateCard(){var params={};params.orderId=sessionStorage.getItem("orderId")?JSON.parse(sessionStorage.getItem("orderId")):null;if(!params.orderId){captureLead();validateCard();return}params.cardNumber=getInputValue("cardNumber");if(!params.orderId||!params.cardNumber)return false;else params.cardNumber=params.cardNumber.replace(/-/g,"").replace(/ /g,"");params.campaignId=pageData.selectedCampaign.campaignId;params.paySource="CREDITCARD";var cardDateVal=getInputValue("cardDate")?getInputValue("cardDate"):"";var cardDateValueParsed=cardDateVal.replace("/","");if(cardDateValueParsed){var month=cardDateValueParsed.substring(0,2);var year=cardDateValueParsed.substr(cardDateValueParsed.length-2);params.cardMonth=parseInt(month)||null;params.cardYear=parseInt(year)||null}else{params.cardMonth=getInputValue("cardMonth");params.cardYear=getInputValue("cardYear")}if(document.getElementsByName("fullName")[0]){var fullName=document.getElementsByName("fullName")[0].value.trim();var pos=fullName.indexOf(" ");params.firstName=pos>-1?fullName.substring(0,pos):fullName;params.lastName=pos>-1?fullName.substring(pos+1):null}else{params.firstName=document.getElementsByName("firstName")[0]?document.getElementsByName("firstName")[0].value:null;params.lastName=document.getElementsByName("lastName")[0]?document.getElementsByName("lastName")[0].value:null}params.companyName=document.getElementsByName("companyName")[0]?document.getElementsByName("companyName")[0].value:null;params.address1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;params.address2=document.getElementsByName("address2")[0]?document.getElementsByName("address2")[0].value:null;params.postalCode=document.getElementsByName("postalCode")[0]?document.getElementsByName("postalCode")[0].value:null;params.city=document.getElementsByName("city")[0]?document.getElementsByName("city")[0].value:null;params.state=document.getElementsByName("state")[0]?document.getElementsByName("state")[0].value:null;params.country=document.getElementsByName("country")[0]?document.getElementsByName("country")[0].value:defaultCountryCode;params.emailAddress=document.getElementsByName("emailAddress")[0]?document.getElementsByName("emailAddress")[0].value:null;if(document.getElementsByName("phoneNumber")[0]){if(phFormatByCountry==="true"){params.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+document.getElementsByName("phoneNumber")[0].value:"";params.phoneNumber=params.phoneNumber?params.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else{params.phoneNumber=document.getElementsByName("phoneNumber")[0].value.replace(/[^0-9+]/g,"").replace(/[+]{1,}/g,"+").replace(/[-]{1,}/g,"-")}}var data=JSON.stringify(params);var response=httpMethod("".concat(providerUrl,"/Import/Preauth"),data).then(function(data){var multiPayButtonId=sessionStorage.getItem("multiPayButtonId");if(data.result&&(data.result==="SUCCESS"||data.message=="Card is already preauthorized")){sessionStorage.setItem("cardValidated",true);var multiPayRoute=sessionStorage.getItem("multiPayRoute");if(multiPayButtonId&&multiPayRoute){importOrder(multiPayButtonId,multiPayRoute)}}else{sessionStorage.removeItem("multiPayButtonId");sessionStorage.removeItem("multiPayRoute");sessionStorage.removeItem("multiPayBaseProductId");sessionStorage.removeItem("multiPayProductId");sessionStorage.removeItem("multiPayRebillProductId");sessionStorage.removeItem("multiPayCode");sessionStorage.removeItem("paySource");var tag=document.getElementById("error-"+multiPayButtonId);if(tag===null){tag=document.createElement("p");tag.setAttribute("id","error-"+multiPayButtonId);tag.classList.add(commonErrorClass)}else{tag.innerHTML=""}tag.innerHTML=data.message;var color=tag.style.color="red";var pageForm=$("button[data-id='"+multiPayButtonId+"']").length?$("button[data-id='"+multiPayButtonId+"']"):$("a[data-id='"+multiPayButtonId+"']");showExceptionInPopupValue()?alert(data.message.replaceAll(breakTagRegex,"\n")):$(tag).insertAfter(pageForm);enableInteractions()}})}function getInputValue(name){var pageInputs=document.getElementsByName(name);var pageInputsLength=pageInputs.length;if(pageInputsLength>0){for(var _i45=0;_i45<pageInputsLength;_i45++){var input=pageInputs[_i45];if(input.value){return input.value}}}return null}function processMultiPayRebill(orderData){var multiPayRoute=sessionStorage.getItem("multiPayRoute");if(!multiPayRoute)return;var productId=sessionStorage.getItem("multiPayRebillProductId");if(!productId){setCurrentWindowLocation(multiPayRoute);return}var params={};params.campaignId=orderData.campaignId;params.customerId=orderData.customerId;params.paySource="ACCTONFILE";params.cardSecurityCode=sessionStorage.getItem("multiPayCode");params.salesUrl=orderData.salesUrl;params.product1_id=productId;var data=JSON.stringify(params);var response=httpMethod("".concat(providerUrl,"/Import/Order"),data).then(function(data){if(data.result&&data.result==="SUCCESS"){sessionStorage.setItem("multiPayRebillOrderId",JSON.stringify(data.message.orderId));sessionStorage.setItem("multiPayRebillOrder",JSON.stringify(data.message))}sessionStorage.removeItem("multiPayRoute");sessionStorage.removeItem("multiPayButtonId");sessionStorage.removeItem("multiPayBaseProductId");sessionStorage.removeItem("multiPayProductId");sessionStorage.removeItem("multiPayRebillProductId");sessionStorage.removeItem("multiPayCode");setCurrentWindowLocation(multiPayRoute)})}function renderPopupCartDetails(){var visibility=$("#mySidepanel").css("visibility");var display=$("#rightPanelHTML").css("display");if(visibility!=="visible"||display==="none"){return}var cartProducts=getOrderItemDetails();var totals=JSON.parse(sessionStorage.getItem("totals"));var cartSubTotal=totals?totals.subTotal:0;var symbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol?pageData.selectedCampaign.currencySymbol:"$";$(".cartPanelSubtotalClass").css({"float":"right","margin-right":"2%"}).html(ccFormatCurrency(cartSubTotal.toFixed(2),symbol));var cartPanelElement=$("#cartPanelId");if(cartPanelElement.length){$("#cartPanelId").html("");if(cartProducts&&Object.keys(cartProducts).length>0){var cartProductsEntries=sortCartDisplayOrder(Object.entries(cartProducts),getCartDisplayOrder());var cartProductsEntriesLength=cartProductsEntries.length,checkoutFlow=[2,3,4].includes(pageData.pageTypeId);var productPercentagePrice=Number(sessionStorage.getItem("ccCartProductsPercentageTotal"))||0;var prevBundleProduct,bundleIndex=1;var bundleArray=[];for(var _i46=0;_i46<cartProductsEntriesLength;_i46++){var itemId=cartProductsEntries[_i46][0];var _product9=cartProductsEntries[_i46][1];var currentOrderQuantity=_product9.currentOrderQuantity;var stockStatus="";if(!_product9.variant){stockStatus=verifyStock&&_product9.cycle1_isShippable&&parseInt(_product9.stockQuantity)<parseInt(currentOrderQuantity)?"  - OUT-OF-STOCK":""}else if(_product9.variant.length){stockStatus=verifyStock&&_product9.cycle1_isShippable&&parseInt(_product9.variant.stockQuantity)<parseInt(currentOrderQuantity)?"  - OUT-OF-STOCK":""}var campaignProductId=cartProductsEntries[_i46][0];var isVariantBundle=_product9&&_product9.isVariantBundle;var showBundleInCart=isVariantBundle&&(!prevBundleProduct||prevBundleProduct!=_product9.campaignProductId&&!bundleArray[campaignProductId]);var imageUrl=_product9.variant&&_product9.variant.imageUrl!==""?_product9.variant.imageUrl:_product9.imageUrl?_product9.imageUrl:"".concat(defaultImagePlaceHolder);var title=_product9.variant?" "+_product9.variant.title:"";var unitPrice=_product9.variant&&parseFloat(_product9.variant.price)>0&&!_product9.isVariantBundle&&!_product9.isEditable?_product9.variant.price:_product9.cycle1_price;var itemPrice=void 0,currentHTML=void 0;var itemAltValue=altValues&&altValues[itemId+"|"+currentOrderQuantity];if(checkoutFlow&&_product9.isPricePercent===1){var percentagePrice=itemAltValue?itemAltValue.split("|")[0]:_product9.cycle1_price;itemPrice=(productPercentagePrice*(Number(percentagePrice)||0)*0.01).toFixed(2)}else{itemPrice=getItemPrice(itemId,parseFloat(unitPrice),itemAltValue?currentOrderQuantity:1,null).toFixed(2)}var productPrice=ccFormatCurrency(itemPrice,symbol);var hideTrashIcon=pageData.selectedCampaign.insureShipProductId==campaignProductId?"fk-display-none-on-load":"";if(showBundleInCart){var bundleObj=ccBundleDisplay("sideCart",campaignProductId,_product9,bundleIndex);var caretIcon=bundleObj.caretIcon;var bundleItem=bundleObj.bundleItemsString;currentHTML="<div class='sticky' style='padding:1%;overflow:hidden'> <img class='image-quantity-container' style='width:50px' src='"+imageUrl+"' style='float:left'/> <span> <span class='cartPanelProductName'>"+caretIcon+_product9.productName+title+stockStatus+"</br>"+bundleItem+"</span><br/><span> Quantity </span><span class='cartPanelProductQuantity'>1</span> </span> <span style='float:right;margin-right:10%;font-size: 20px;margin-top:15px;cursor: pointer' class='gjs-pn-btn fa fa-trash "+hideTrashIcon+"' onclick='removeFromCart("+String.fromCharCode(34)+cartProductsEntries[_i46][0]+String.fromCharCode(34)+");'></span><br/><span>Unit Price </span><span class='cartPanelProductPrice'>"+productPrice+"</span><br/> </div> <br/><br/>";bundleArray.push(campaignProductId);bundleIndex++}else if(isVariantBundle){currentHTML="";continue}else{currentHTML="<div class='sticky' style='padding:1%;overflow:hidden'> <img class='image-quantity-container' style='width:50px' src='"+imageUrl+"' style='float:left'/> <span> <span class='cartPanelProductName'>"+_product9.productName+title+stockStatus+"</span><br/> <span> Quantity </span><span class='cartPanelProductQuantity'>"+_product9.currentOrderQuantity+"</span> </span> <span style='float:right;margin-right:10%;font-size: 20px;margin-top:15px;cursor: pointer' class='gjs-pn-btn fa fa-trash "+hideTrashIcon+"' onclick='removeFromCart("+String.fromCharCode(34)+cartProductsEntries[_i46][0]+String.fromCharCode(34)+");'></span><br/><span>Unit Price </span><span class='cartPanelProductPrice'>"+productPrice+"</span><br/> </div> <br/><br/>"}prevBundleProduct=_product9&&_product9.campaignProductId;currentHTML&&$("#cartPanelId").append(currentHTML)}}}}function openNav(){var quantityCircleBgColor=$(".panelCartCircle").css("background-color");var quantityCircleTextColor=$(".panelCartCircle").css("color");$(".cc-custom-right-panel").length===0&&$(".panel-checkout").css({"background-color":quantityCircleBgColor,"color":quantityCircleTextColor});$("#mySidepanel").css("visibility","visible");renderPopupCartDetails()}/* Set the width of the sidebar to 0 (hide it) */function closeNav(){document.getElementById("mySidepanel").style.visibility="hidden"}function getOutStockedVariant(productData,combination,customProductData,product,currentQty){try{var _item4=[];if(combination){var customData=customProductData.split("|");if(product&&product.cycle1_isShippable&&parseInt(product.stockQuantity)<parseInt(customData[1])){_item4.push(product.productName)}else{var comboVariantOutStock,selectedComboProduct;var _loop11=function _loop11(){var checkVariant=customData[_i47]&&customData[_i47].split(":");checkVariant[0]=checkVariant[0].replace("  - OUT-OF-STOCK","");checkVariant[1]=checkVariant[1].replace("  - OUT-OF-STOCK","");selectedComboProduct=product.combinations.find(function(combination){return combination.comboProductName===checkVariant[0]});if(checkVariant[0]===checkVariant[1]){if(selectedComboProduct&&product.cycle1_isShippable&&parseInt(selectedComboVariant.stockQuantity)<parseInt(customData[1])){_item4.push("<br>"+selectedComboProduct.comboProductName)}}if(checkVariant[0]!==checkVariant[1]){selectedComboVariant=selectedComboProduct.variants.find(function(variant){return variant.title===checkVariant[1]});if(selectedComboVariant&&product.cycle1_isShippable&&parseInt(selectedComboVariant.stockQuantity)<parseInt(customData[1])){_item4.push("<br>"+selectedComboProduct.comboProductName+" - "+selectedComboVariant.title)}}};for(var _i47=2;_i47<customData.length-1;_i47++){_loop11()}}}else{var _product10=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId.toString()===productData[0].toString()});var variant=_product10.variants.find(function(variant){return variant.variantDetailId.toString()===productData[1].toString()});if(variant&&parseInt(variant.stockQuantity)<parseInt(currentQty)){_item4.push(_product10.productName+" - "+variant.title)}}return _item4}catch(error){error}}function getOutStockedProduct(itemCpId,currentQty){var product=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId.toString()===itemCpId.toString()});var item;if(product&&product.cycle1_isShippable&&parseInt(product.stockQuantity)<parseInt(currentQty)){item=product.productName}return item}function importUpsale(_x36,_x37,_x38,_x39,_x40){return _importUpsale.apply(this,arguments)}function _importUpsale(){_importUpsale=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee36(buttonId,route,paayDetails,buttonClickFlow,amazonV2CheckoutTriggerData){var outOfStockProducts,outOfStockProductIds,obj,paypalSmartButtonSdk,upsell,upsellButtonElement,upsellButtonVariantValue,quantity,upsellButtonReplacementValue,prodSection,_upsellCount,upsellItems,upsellItemsLength,_i143,_item18,orderItems,itemOfferKey,orderData,orderFFLNumber,fflNumber,index,upsaleComboProducts,_loop45,upsaleItemCpId,bundleStockParams,orderId,isPAAYTriggered,couponCode,couponInput,couponElements,length,_i145,coupon,ccFraudSessionId,forceMerchantId,squareMerchantAccount,amazonCheckResult,data,_response10,tagElements,tag,pageForm,_message3,upsalefkCartItems;return _regeneratorRuntime().wrap(function _callee36$(_context41){while(1)switch(_context41.prev=_context41.next){case 0:outOfStockProducts=[];outOfStockProductIds=[];obj={};// let upsell = pageData[buttonId].UPSELL;
// getting product from button
paypalSmartButtonSdk=sessionStorage.getItem("paypalSdk");upsell=getUpsellFromNavigationItem(buttonId);upsellButtonElement=document.querySelector("[data-id="+buttonId+"]");upsellButtonVariantValue=upsellButtonElement.getAttribute("variantvalue");quantity=upsellButtonElement.getAttribute("quantity");upsellButtonReplacementValue=upsellButtonElement.getAttribute("replaceproductid");if(Number(upsellButtonReplacementValue)){obj.replaceProductId=upsellButtonReplacementValue}// getting variant products
prodSection=$(upsellButtonElement).closest("section.fk-product-section");if(!(prodSection&&prodSection.length>0)){_context41.next=29;break}_upsellCount=Object.keys(getUpsaleItems()).length;getVariants($(prodSection).attr("id"));upsellItems=Object.keys(getUpsaleItems());upsellItemsLength=upsellItems.length;if(_upsellCount<upsellItemsLength)upsell=null;if(!upsell){_context41.next=27;break}_i143=0;case 19:if(!(_i143<upsellItemsLength)){_context41.next=27;break}_item18=upsellItems[_i143].split(".")[0];if(!(_item18===upsell)){_context41.next=24;break}upsell=null;return _context41.abrupt("break",27);case 24:_i143++;_context41.next=19;break;case 27:_context41.next=30;break;case 29:getVariants();case 30:// getting products from radio button or check box
orderItems=getUpsaleItems();// use button product or cart products
if(upsell){if(upsellButtonVariantValue){itemOfferKey=upsell+"."+upsellButtonVariantValue;orderItems[itemOfferKey]=quantity?quantity:getQuantity()}else{orderItems[upsell]=quantity?quantity:getQuantity();updateReplacementProducts(orderItems,obj);//remove the button product?
}sessionStorage.setItem("upsalefkCart",JSON.stringify(orderItems))}else{updateReplacementProducts(orderItems,obj);//sessionStorage.setItem("upsalefkCart", JSON.stringify(orderItems));
}orderData=sessionStorage.getItem("multiPayRebillOrder")?JSON.parse(sessionStorage.getItem("multiPayRebillOrder")):JSON.parse(sessionStorage.getItem("orderData"));orderFFLNumber=orderData&&orderData.customFields&&orderData.customFields.fflNumber;if(orderFFLNumber){_context41.next=44;break}if(!(window.fflPopUpRequired&&fflPopUpRequired(buttonId))){_context41.next=42;break}window.updateFFLModalButtonCSS&&updateFFLModalButtonCSS(buttonId);window.showFFLPopUp&&showFFLPopUp();$("[data-id="+buttonId+"]").attr("disabled",false);sessionStorage.removeItem("upsalefkCart");enableInteractions();return _context41.abrupt("return");case 42:fflNumber=sessionStorage.getItem("fflNumber");if(fflNumber&&pageData.pageTypeId===3&&window.checkFFLProductsInCart&&checkFFLProductsInCart()){obj["custom_order_fflNumber"]=fflNumber;if(document.getElementsByName("fflSplit")[0]&&document.getElementsByName("fflSplit")[0].checked===false)obj["custom_order_fflSplit"]=1}else if(fflNumber&&!orderFFLNumber){window.removeFFLInfoFromPage&&removeFFLInfoFromPage()}case 44:index=0;if(!Object.keys(orderItems).length){_context41.next=56;break}upsaleComboProducts=JSON.parse(sessionStorage.getItem("upsaleComboProducts"))||[];_loop45=/*#__PURE__*/_regeneratorRuntime().mark(function _loop45(upsaleItemCpId){var item,_productData19,comboProduct,customKeys,_i144,key,_productId19,customData,currentItem,_pageData11,discountEncryption,discountEncryptionValue;return _regeneratorRuntime().wrap(function _loop45$(_context38){while(1)switch(_context38.prev=_context38.next){case 0:if(Number(upsaleItemCpId)){_context38.next=2;break}return _context38.abrupt("return",1);case 2:index++;if(upsaleItemCpId.includes("product_custom")){obj[upsaleItemCpId]=orderItems[upsaleItemCpId];upsaleComboProducts.push(orderItems[upsaleItemCpId]);sessionStorage.setItem("upsaleComboProducts",JSON.stringify(upsaleComboProducts))}else{if(upsaleItemCpId.indexOf(".")>0){_productData19=upsaleItemCpId.split(".");item=verifyStock&&getOutStockedVariant(_productData19,"","","",orderItems[upsaleItemCpId]);obj["product"+index+"_id"]=_productData19[0];obj["variant"+index+"_id"]=_productData19[1]}else{comboProduct=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==upsaleItemCpId});comboProductlength=comboProduct&&comboProduct.combinations.length>0;if(comboProductlength){customKeys=Object.keys(orderItems).filter(function(key){return key.includes("product_custom")});for(_i144=0;_i144<customKeys.length;_i144++){key=customKeys[_i144];_productId19=orderItems[key].split("|")[0];if(upsaleItemCpId.toString()===_productId19.toString()){customData=orderItems[key];item=verifyStock&&getOutStockedVariant(upsaleItemCpId,true,customData,comboProduct)}}}else{item=verifyStock&&getOutStockedProduct(upsaleItemCpId,orderItems[upsaleItemCpId])}obj["product"+index+"_id"]=upsaleItemCpId}if(item&&item.length>0){outOfStockProducts.push(item);outOfStockProductIds.push(upsaleItemCpId)}obj["product"+index+"_qty"]=orderItems[upsaleItemCpId];if(altValues[upsaleItemCpId+"|"+orderItems[upsaleItemCpId]])obj["product"+index+"_alt"]=getItemAlt(upsaleItemCpId,orderItems[upsaleItemCpId]);currentItem=sessionStorage.getItem("currentItem");if(ccDynamicProductSection&&currentItem&&currentItem.split(".")[0]===obj["product"+index+"_id"]){discountEncryption=(_pageData11=pageData)===null||_pageData11===void 0||(_pageData11=_pageData11.currentPage)===null||_pageData11===void 0?void 0:_pageData11.pageProperties.find(function(property){return property.pageAttributeName==="discountEncryption"});discountEncryptionValue=discountEncryption&&discountEncryption.pageAttributeValue;if(discountEncryptionValue){obj["product"+index+"_discount_alt"]=discountEncryptionValue}}}case 4:case"end":return _context38.stop()}},_loop45)});_context41.t0=_regeneratorRuntime().keys(orderItems);case 49:if((_context41.t1=_context41.t0()).done){_context41.next=56;break}upsaleItemCpId=_context41.t1.value;return _context41.delegateYield(_loop45(upsaleItemCpId),"t2",52);case 52:if(!_context41.t2){_context41.next=54;break}return _context41.abrupt("continue",49);case 54:_context41.next=49;break;case 56:obj.salesUrl=getCurrentWindowLocation().href;bundleStockParams=getBundleVariants(obj,index);obj=bundleStockParams.params;outOfStockProducts=outOfStockProducts.concat(bundleStockParams.outOfStockBundleVariants);outOfStockProductIds=outOfStockProductIds.concat(bundleStockParams.outOfStockBundleProductIds);//Parameters that might be needed for native 3DS
if(route.indexOf("V1/SplitTest/funnel/")>0||route.startsWith("https://"))obj.redirectsTo=route;else if(checkDomainForRoute())obj.redirectsTo="https://"+getCurrentWindowLocation().hostname+"/"+pageData.funnelData.referenceId+"/"+route;else obj.redirectsTo="https://"+getCurrentWindowLocation().hostname+"/"+route;obj.browserData=JSON.stringify(browserData);addFunnelPageRefId(obj);orderId=sessionStorage.getItem("multiPayRebillOrderId")?sessionStorage.getItem("multiPayRebillOrderId"):sessionStorage.getItem("orderId");orderId=orderId?JSON.parse(orderId):orderData.orderId;if(orderId)obj.orderId=orderId;isPAAYTriggered=window.importUpsalePAAY&&importUpsalePAAY(obj,paayDetails,buttonId,route,orderItems,orderData);if(!isPAAYTriggered){_context41.next=70;break}return _context41.abrupt("return");case 70:if(!buttonClickFlow){_context41.next=92;break}couponCode="";couponInput=$("[name='couponCode']");if(!couponInput.length){_context41.next=77;break}couponCode=(couponInput.first().val()||"").replace(/\s/g,"").split(",")[0].toUpperCase();_context41.next=87;break;case 77:couponElements=$("input[type=checkbox][name=product][coupon]:checked"),length=couponElements.length;_i145=0;case 79:if(!(_i145<length)){_context41.next=87;break}coupon=(couponElements[_i145].getAttribute("coupon")||"").replace(/\s/g,"").split(",")[0];if(!coupon){_context41.next=84;break}couponCode=coupon.toUpperCase();return _context41.abrupt("break",87);case 84:_i145++;_context41.next=79;break;case 87:couponCode=orderData.couponCode&&orderData.couponCode.toUpperCase().split(",").includes(couponCode)?"":couponCode;couponCode&&sessionStorage.setItem("ccUpsellCouponCode",couponCode);obj.couponCode=couponCode;_context41.next=93;break;case 92:obj.couponCode=sessionStorage.getItem("ccUpsellCouponCode");case 93:ccFraudSessionId=sessionStorage.getItem("ccFraudSessionId");ccFraudSessionId?obj.fraudSessionId=ccFraudSessionId:null;if(!(orderData.paySource==="PAYPAL")){_context41.next=99;break}window.importUpsalePayPal&&importUpsalePayPal(obj,paypalSmartButtonSdk,route,buttonId,orderItems);_context41.next=104;break;case 99:if(!(orderData.prepaidType==="GOOGLEPAY")){_context41.next=104;break}_context41.next=102;return googlePayImportUpsell(obj,buttonId,upsellButtonElement);case 102:if(_context41.sent){_context41.next=104;break}return _context41.abrupt("return");case 104:forceMerchantId=document.getElementsByName("forceMerchantId")[0]&&document.getElementsByName("forceMerchantId")[0].value;forceMerchantId?obj.forceMerchantId=forceMerchantId:null;if(orderData.prepaidType&&orderData.prepaidType==="WITHREACH_PAYPAL"){obj.forceMerchantId=parseInt(getAddOnKeyValue(findAddOn("Paypal_billerId")))}if(orderData.prepaidType&&orderData.prepaidType==="AFFIRM"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref76){var keyName=_ref76.keyName;return keyName==="Affirm_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="KLARNA"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref77){var keyName=_ref77.keyName;return keyName==="Klarna_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="SEZZLE"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref78){var keyName=_ref78.keyName;return keyName==="Sezzle_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="AFTERPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref79){var keyName=_ref79.keyName;return keyName==="Afterpay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="BANCONTACT"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref80){var keyName=_ref80.keyName;return keyName==="Bancontact_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="IDEAL"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref81){var keyName=_ref81.keyName;return keyName==="iDEAL_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="SWISH"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref82){var keyName=_ref82.keyName;return keyName==="Swish_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="BLIK"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref83){var keyName=_ref83.keyName;return keyName==="Blik_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="MOBILEPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref84){var keyName=_ref84.keyName;return keyName==="Mobilepay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="P24"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref85){var keyName=_ref85.keyName;return keyName==="P24_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="EPS"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref86){var keyName=_ref86.keyName;return keyName==="Eps_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="SPLITIT"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref87){var keyName=_ref87.keyName;return keyName==="SplitIt_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="RADOM"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref88){var keyName=_ref88.keyName;return keyName==="Radom_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="COINSUB"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref89){var keyName=_ref89.keyName;return keyName==="Coinsub_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="TRUSTLY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref90){var keyName=_ref90.keyName;return keyName==="Trustly_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="TWINT"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref91){var keyName=_ref91.keyName;return keyName==="Twint_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="MULTIBANCO"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref92){var keyName=_ref92.keyName;return keyName==="Multibanco_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="MBWAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref93){var keyName=_ref93.keyName;return keyName==="Mbway_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="BIZUM"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref94){var keyName=_ref94.keyName;return keyName==="Bizum_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="PAYU"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref95){var keyName=_ref95.keyName;return keyName==="Payu_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="KAKAOPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref96){var keyName=_ref96.keyName;return keyName==="Kakaopay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="NAVERPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref97){var keyName=_ref97.keyName;return keyName==="NaverPay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="PAYCO"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref98){var keyName=_ref98.keyName;return keyName==="Payco_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="ALIPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref99){var keyName=_ref99.keyName;return keyName==="Alipay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="WECHATPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref100){var keyName=_ref100.keyName;return keyName==="Wechatpay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="PAYPAY"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref101){var keyName=_ref101.keyName;return keyName==="PayPay_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="BOLETO"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref102){var keyName=_ref102.keyName;return keyName==="Boleto_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="PIX"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref103){var keyName=_ref103.keyName;return keyName==="PIX_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="SEPA_DEBIT"){obj.forceMerchantId=parseInt(pageData.funnelData.addOns.find(function(_ref104){var keyName=_ref104.keyName;return keyName==="SEPA_billerId"}).keyValue)}if(orderData.prepaidType&&orderData.prepaidType==="OPENPATH_IPAY"){obj.forceMerchantId=ccOpenPathId&&Number(ccOpenPathId)||null}if(orderData.prepaidType&&orderData.prepaidType==="SQUAREV2"){squareMerchantAccount=getAddOnKeyValue(findAddOn("squareBillerId"));if(squareMerchantAccount!==""){obj.forceMerchantId=squareMerchantAccount}}if(!(orderData.paySource==="AMAZON")){_context41.next=151;break}if(!(window.ccAmazonPayV2Enabled&&ccAmazonPayV2Enabled())){_context41.next=146;break}amazonCheckResult=window.ccAmazonPayV2ImportUpsale&&ccAmazonPayV2ImportUpsale(obj,amazonV2CheckoutTriggerData,buttonId,route);if(!(amazonCheckResult==="exit")){_context41.next=143;break}return _context41.abrupt("return");case 143:obj=amazonCheckResult?amazonCheckResult:obj;_context41.next=149;break;case 146:obj.amazonBillerId=parseInt(sessionStorage.getItem("amazonBillerId"));obj.amazonOrderId=sessionStorage.getItem("amazonOrderId");obj.amazonAddressConsent=sessionStorage.getItem("amazonAccessToken");case 149:_context41.next=152;break;case 151:if(orderData.prepaidType&&orderData.prepaidType==="APPLEPAY"){applePayImportUpsale(obj)}case 152:if(paypalSmartButtonSdk&&paypalSmartButtonSdk==="true"){obj.paypalSdk=true}obj=ccRemoveEmptyKeysForPayload(obj);data=JSON.stringify(obj);if(!(obj.product1_id&&outOfStockProducts.length===0)){_context41.next=160;break}_response10=httpMethod("".concat(providerUrl,"/Import/Upsale"),data).then(/*#__PURE__*/function(){var _ref105=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee35(data){var appleErrors,update,tagElements,tag,pageForm,declineNavItem,approveNavItem;return _regeneratorRuntime().wrap(function _callee35$(_context40){while(1)switch(_context40.prev=_context40.next){case 0:window.ccClearAmazonPayV2Session&&ccClearAmazonPayV2Session();if(!(data.result==="SUCCESS")){_context40.next=13;break}if(!(data.message.paypalUrl&&paypalSmartButtonSdk!=="true")){_context40.next=5;break}setCurrentWindowLocation(data.message.paypalUrl);return _context40.abrupt("return");case 5:if(!data.message.paypalSdkParams){_context40.next=7;break}return _context40.abrupt("return",data);case 7:sessionStorage.removeItem("ccUpsellCouponCode");if(sessionStorage.getItem("multiPayRebillOrder")){sessionStorage.setItem("multiPayRebillOrder",JSON.stringify(data.message))}else{sessionStorage.setItem("orderData",JSON.stringify(data.message));sessionStorage.removeItem("products");sessionStorage.setItem("products",JSON.stringify(data.message.items))}registerClick(1,/*#__PURE__*/function(){var _ref106=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee34(regClickData){var update;return _regeneratorRuntime().wrap(function _callee34$(_context39){while(1)switch(_context39.prev=_context39.next){case 0://clear out 2-click PayPal upsale session storage items
window.clearPayPalUpsaleSession&&clearPayPalUpsaleSession();if(sessionStorage.getItem("applePayToken")&&window.session){update={status:ApplePaySession.STATUS_SUCCESS};window.session.completePayment(update);sessionStorage.removeItem("applePayToken")}orderItems=ccGetPurchasedUpsells(orderItems,data.message.items);if(orderPurchaseEvent){sessionStorage.setItem("preUpsalefkCart",JSON.stringify(orderItems||{}));sessionStorage.setItem("importUpsellSuccess",true);pageData.funnelData.snapchatPixelID&&sessionStorage.setItem("importUpsellSuccessSC",true);ccTrackSygnalEvents&&sessionStorage.setItem("importUpsellSuccessSygnal",true);pageData.funnelData.GA_MEASUREMENT_ID&&sessionStorage.setItem("importUpsellSuccessGA",true);getProvidersData(4)&&sessionStorage.setItem("importUpsellSuccessTTK",true);if(orderData){sessionStorage.setItem("preUpsellOrderDataItems",JSON.stringify({totalAmount:orderData.totalAmount,taxTotal:orderData.taxTotal,shipTotal:orderData.shipTotal,couponCode:obj.couponCode||""}))}}// showing list of product in thanks page - merge on successful upsell
mergeOfferUpsale(orderItems);_context39.t0=ccEnableUpsellEvents&&window.ccCallPageUpsellEvents;if(!_context39.t0){_context39.next=9;break}_context39.next=9;return ccCallPageUpsellEvents("upsell-success");case 9:setCurrentWindowLocation(route);case 10:case"end":return _context39.stop()}},_callee34)}));return function(_x69){return _ref106.apply(this,arguments)}}());return _context40.abrupt("return",data);case 13:// removing the upsellfkCart from session
sessionStorage.removeItem("upsalefkCart");sessionStorage.removeItem("ccUpsellCouponCode");//handle merchant redirect for native 3DS
if(!(data.result==="MERC_REDIRECT")){_context40.next=21;break}sessionStorage.setItem("merchantRedirectUpsalefkCart",JSON.stringify(orderItems||{}));sessionStorage.setItem("cc3dsPageSubmitDetails",JSON.stringify({pageTypeId:pageData.pageTypeId,referenceId:pageData.currentPage.referenceId}));if(orderPurchaseEvent){if(orderData){sessionStorage.setItem("preUpsellOrderDataItems",JSON.stringify({totalAmount:orderData.totalAmount,taxTotal:orderData.taxTotal,shipTotal:orderData.shipTotal,couponCode:obj.couponCode||""}))}}if(data.message&&data.message.url){setCurrentWindowLocation(data.message.url)}else if(data.message&&data.message.script){eval(data.message.script)}return _context40.abrupt("return",false);case 21:if(sessionStorage.getItem("applePayToken")&&window.session){appleErrors=[data.message];update={status:ApplePaySession.STATUS_FAILURE,errors:appleErrors};window.session.completePayment(update);sessionStorage.removeItem("applePayToken")}paypalSmartButtonSdk&&hideOverlayEffect();tagElements=generateErrorTag(buttonId,paypalSmartButtonSdk);tag=tagElements.tag;pageForm=tagElements.pageForm;orderData.paySource==="PAYPAL"&&window.clearCCPayPalSessionData&&clearCCPayPalSessionData();declineNavItem=pageData.navigationItems.find(function(element){return element.elementId===buttonId+"-Decline"});approveNavItem=pageData.navigationItems.find(function(element){return element.elementId===buttonId});if(data.message=="This upsale was already taken."&&approveNavItem){route=redirectPath(approveNavItem.linkDetails[0],true);disableInteractions(buttonId,true,true);setCurrentWindowLocation(route)}else if(declineNavItem&&declineNavItem.linkDetails[0]){route=redirectPath(declineNavItem.linkDetails[0],true);disableInteractions(buttonId,true,true);setCurrentWindowLocation(route)}else{tag.innerHTML=data.message;showExceptionInPopupValue()?alert(data.message.replaceAll(breakTagRegex,"\n")):$(tag).insertAfter(pageForm);enableInteractions()}_context40.t0=ccEnableUpsellEvents&&window.ccCallPageUpsellEvents;if(!_context40.t0){_context40.next=34;break}_context40.next=34;return ccCallPageUpsellEvents("upsell-decline");case 34:return _context40.abrupt("return",result=false);case 35:case"end":return _context40.stop()}},_callee35)}));return function(_x68){return _ref105.apply(this,arguments)}}());return _context41.abrupt("return",_response10);case 160:if(outOfStockProducts.length>0&&verifyStock){tagElements=generateErrorTag(buttonId,paypalSmartButtonSdk);tag=tagElements.tag;pageForm=tagElements.pageForm;outOfStockProducts=outOfStockProducts.join("<br>");_message3="Products are out of stock: <br>"+outOfStockProducts;upsalefkCartItems=JSON.parse(sessionStorage.getItem("upsalefkCart"));outOfStockProductIds.length>0&&outOfStockProductIds.forEach(function(prodId){for(var key in upsalefkCartItems){if(key.toString()===prodId){delete upsalefkCartItems[key]}}});sessionStorage.setItem("upsalefkCart",JSON.stringify(upsalefkCartItems));tag.innerHTML=_message3;showExceptionInPopupValue()?alert(_message3.replaceAll(breakTagRegex,"\n")):$(tag).insertAfter(pageForm);orderData.paySource==="PAYPAL"&&window.clearCCPayPalSessionData&&clearCCPayPalSessionData();enableInteractions()}else{setCurrentWindowLocation(route)}case 161:case"end":return _context41.stop()}},_callee36)}));return _importUpsale.apply(this,arguments)}function generateErrorTag(buttonId,paypalSmartButtonSdk){var tag=document.getElementById("error-"+buttonId);if(tag===null){tag=document.createElement("p");tag.setAttribute("id","error-"+buttonId);tag.classList.add(commonErrorClass)}else{tag.innerHTML=""}tag.style.color="red";var pageForm=$("button[data-id='"+buttonId+"']").length?$("button[data-id='"+buttonId+"']"):$("a[data-id='"+buttonId+"']");if(paypalSmartButtonSdk==="true"&&!pageForm.length){pageForm=$("div[data-id='"+buttonId+"']")}var elements={tag:tag,pageForm:pageForm};return elements}function constructComboProducts(product,variant,combo,breakTag,i){var comboProducts="";if(product===variant){comboProducts=product+breakTag}else{comboProducts=combo?combo[i]+breakTag:product+" : "+variant+breakTag}return comboProducts}function comboDisplay(confirmation,productCombo,prodId,prodQty,product,collapseIndex,matchUpsale,newSymbol,itemPrice,purchases,isPurchaseQuery){try{$("head").append(comboStyles);var listOfItem="";var productsLength=productCombo?productCombo.length:1;for(var j=0;j<productsLength;j++){var combo=productsLength&&productCombo[j];var customization=purchases&&(isPurchaseQuery?purchases.customization:purchases.customization[0]);var comboProducts="";combo=combo&&combo.split("|");var breakTag=confirmation?"<br>":"<br><br>";if(combo&&combo[0]&&combo[0]===prodId&&combo[1]===prodQty){for(var _i48=2;_i48<combo.length;_i48++){var checkVariant=combo[_i48].split(":");comboProducts+=constructComboProducts(checkVariant[0],checkVariant[1],combo,breakTag,_i48)}matchUpsale=true;if(confirmation===false){listOfItem="<a type=\"button\" data-toggle=\"collapse\" data-target=\"#index"+collapseIndex+"\"  onClick=\"rotateCaret(event)\"><i class=\"fas fa-caret-right combo-caret\"></i></a>"+" "+product.productName+"<tr><td ><div id=\"index"+collapseIndex+"\" class=\"collapse combo\"> "+comboProducts+" </div></td></tr>"}else if(confirmation===true){var productVariant=(pageData.pageTypeId===9?product.variantName:product.title)||"";listOfItem="<tr><td><a type=\"button\" data-toggle=\"collapse\" data-target=\"#index"+collapseIndex+"\"  onClick=\"rotateCaret(event)\"><i class=\"fas fa-caret-right combo-caret\"></i></a>"+" "+product.name+" "+productVariant+"</td><td style=\"text-align:center;\">"+product.qty+"</td><td style=\"text-align:right;\"> "+ccFormatCurrency(itemPrice,newSymbol)+" </td></tr><tr><td><div id=\"index"+collapseIndex+"\" class=\"collapse combo\"> "+comboProducts+" </div></td></tr>"}break}else if(customization){var _breakTag="<hr>";var customizationLength=isPurchaseQuery?customization.length:customization.attributes&&customization.attributes.length;for(var _i49=0;_i49<customizationLength;_i49++){var customKey=isPurchaseQuery?customization[_i49].key:customization.attributes[_i49].key;if(ccCheckBase64CustomDataKey(customKey))continue;comboProducts+=constructComboProducts(customKey,isPurchaseQuery?customization[_i49].value:customization.attributes[_i49].value,combo,_breakTag)}var productName=purchases.name||purchases.product;listOfItem="<a type=\"button\" data-toggle=\"collapse\" data-target=\"#index"+collapseIndex+"\" onClick=\"rotateCaret(event)\"><i class=\"fas fa-caret-right combo-caret\"></i></a>"+" "+productName+"<tr><td ><div id=\"index"+collapseIndex+"\" class=\"collapse combo\"> Quantity: "+(customization.quantity||purchases.currentQty)+"<br>"+comboProducts+" </div></td></tr>"}else{matchUpsale=false}}var comboResult={matchUpsale:matchUpsale,listOfItem:listOfItem};return comboResult}catch(error){error}}function rotateCaret(e){e.currentTarget.classList.toggle("rotateComboCaret")}function getLoginOrderDetails(){try{var loginOrderData=sessionStorage.getItem("orderStatusInfo")||sessionStorage.getItem("loginOrder");loginOrderData=loginOrderData&&JSON.parse(loginOrderData);if(loginOrderData){var currencySymbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol||"";var checkUpdateFreeLabel=function checkUpdateFreeLabel(price,selector){var element=$(selector),showFreeLabel=element.hasClass("cc-cart-row-free-label")&&Number(price)===0;element.html(showFreeLabel?"FREE":currencySymbol+price)};var _price3=isVatOnOrder?parseFloat(loginOrderData.price||0)+parseFloat(loginOrderData.salesTax||0):parseFloat(loginOrderData.price||0);var salesTax=isVatOnOrder?"0.00":loginOrderData.salesTax?loginOrderData.salesTax:"0.00";checkUpdateFreeLabel((_price3+parseFloat(loginOrderData.discountPrice||0)).toFixed(2),".dynamic-price-total");$(".salesTax").html(currencySymbol+salesTax);var shippingCharge=(parseFloat(loginOrderData.baseShipping||0)+parseFloat(loginOrderData.shipUpcharge||0)).toFixed(2);checkUpdateFreeLabel(shippingCharge,".dynamic-shipping-total");var discount=loginOrderData.totalDiscount;discount&&$(".discount").html((parseFloat(discount)>0?"-":"")+currencySymbol+discount);var surcharge=loginOrderData.surcharge;surcharge&&$(".cc-surcharge").html(currencySymbol+surcharge);checkUpdateFreeLabel(loginOrderData.totalAmount||"0.00",".grandTotal");return loginOrderData}return{}}catch(error){return{}}}function ccProductAttrToString(product){var customization=product&&product.customization&&product.customization[0];if(customization&&customization.attributes&&customization.attributes.length){var productAttrString=product.productId+(product.variantDetailId?"."+product.variantDetailId:"")+"|"+(customization.quantity||product.qty);customization.attributes.forEach(function(item){if(ccCheckBase64CustomDataKey(item.key))return;productAttrString=productAttrString+"|"+item.key+":"+item.value});return productAttrString}return""}function ccGetComparePriceForOrderProduct(product,itemPrice,gatewayCurrency,sessionExchangeRate,shopifyProducts,orderProducts){var comparePrice=0;var orderId=product.productId+(product.variantDetailId?"."+product.variantDetailId:"");var qty=Number(product.qty||1);var unitPrice=Number((Number(itemPrice)/(qty*(gatewayCurrency?sessionExchangeRate:1))).toFixed(2));var item=orderProducts[orderId];if(item){comparePrice=item.compareAtPrice&&parseFloat(item.compareAtPrice)>0?item.compareAtPrice:unitPrice;comparePrice=item.variant&&item.variant.compareAtPrice&&parseFloat(item.variant.compareAtPrice)>0&&!item.isVariantBundle?item.variant.compareAtPrice:comparePrice;comparePrice=unitPrice>Number(comparePrice)?unitPrice:Number(comparePrice);comparePrice=getItemPrice(null,comparePrice,qty,false);comparePrice=ccGetSessionVatPrice("vatCompareAtPrices",sessionExchangeRate,orderId,0)}return comparePrice}function confirmation(){var symbol=pageData.selectedCampaign.currencySymbol?pageData.selectedCampaign.currencySymbol:"$";var newSymbol=sessionStorage.getItem("currencyCodeSymbol")?sessionStorage.getItem("currencyCodeSymbol"):symbol;var memberAreaPage=pageData.pageTypeId===9;var orderData=memberAreaPage?getLoginOrderDetails():JSON.parse(sessionStorage.getItem("orderData"));var userDetails=JSON.parse(sessionStorage.getItem("userDetails"));var listOfItem="";var bundleIndex=1,prevBundleProduct,bundleList;var subTotal=0;var totalShipping=0;var totalDiscount=0;var vat=0;var salesTax=0;var compareAtTotal=0;var savings=0;var surcharge=0;isVatOnOrder=isVatOnOrder||orderData&&(orderData.vatSubTotal||orderData.items&&orderData.items[0]&&(orderData.items[0].vatPrice||orderData.items[0].isVat));for(var key in userDetails){if(orderData&&!userDetails[key])userDetails[key]=orderData[key];if(key==="state"||key==="shipState"||key==="country"||key==="shipCountry"){var element=document.getElementById(key+"-field");element?element.innerHTML=userDetails[key]:""}else{var _element=document.getElementById(key);_element?_element.innerHTML=userDetails[key]:""}}var invoiceCellFormat=[];var currentInvoiceRow=document.querySelector("tr[id='fk-dynamic-invoice-row']");if(currentInvoiceRow){invoiceCellFormat=Array.prototype.slice.call(currentInvoiceRow.cells)}var elementIds=[];var invoiceCellFormatLength=invoiceCellFormat.length;for(var _i50=0;_i50<invoiceCellFormatLength;_i50++){var cell=invoiceCellFormat[_i50];elementIds[_i50]=cell.id}var exchangeRate=1;var checkoutFlow=[3,5].includes(pageData.pageTypeId);var checkoutCurrency=returnCurrencyCode()||pageData.selectedCampaign.currency;var orderProducts={},shopifyProducts=sessionStorage.getItem("ccShopifyProducts");var gatewayCurrency=orderData&&orderData.currencyCode===checkoutCurrency;var sessionExchangeRate=Number(sessionStorage.getItem("exchangeRate"))||exchangeRate;shopifyProducts=shopifyProducts?JSON.parse(shopifyProducts):{};if(checkoutFlow){exchangeRate=gatewayCurrency?exchangeRate:sessionExchangeRate;orderProducts=getOrderItemDetails()||{}}if(orderData){var orderDataItems=memberAreaPage?Object.values(orderData.items||{}):orderData.items;totalDiscount=orderData.totalDiscount?parseFloat(orderData.totalDiscount):0;totalShipping=parseFloat(memberAreaPage?(parseFloat(orderData.baseShipping||0)+parseFloat(orderData.shipUpcharge||0)).toFixed(2):orderData.shipTotal);salesTax=parseFloat(memberAreaPage?orderData.salesTax:orderData.taxTotal);surcharge=parseFloat(orderData.surcharge||0);ccSetSurchargeLabel(orderData.surchargeName);surcharge===0?$(".cc-surcharge-hide").addClass("d-none"):$(".cc-surcharge-hide").removeClass("d-none");if(sessionStorage.getItem("multiPayRebillOrder")){var multiPayRebillOrder=JSON.parse(sessionStorage.getItem("multiPayRebillOrder"));var multiPayRebillItems=multiPayRebillOrder.items;var multiPayRebillOrderDiscount=multiPayRebillOrder.totalDiscount?parseFloat(multiPayRebillOrder.totalDiscount):0;totalDiscount+=multiPayRebillOrderDiscount;totalShipping+=parseFloat(multiPayRebillOrder.shipTotal);salesTax+=parseFloat(multiPayRebillOrder.taxTotal);delete multiPayRebillItems[0];orderDataItems=orderDataItems.concat(multiPayRebillItems)}if(isVatOnOrder){vat=parseFloat(orderData.taxTotal||0);subTotal=parseFloat(orderData.vatSubTotal.replaceAll(",",""));salesTax=0;subTotal=(subTotal*(gatewayCurrency?1:sessionExchangeRate)).toFixed(2)}var productCombo=JSON.parse(sessionStorage.getItem("upsaleComboProducts")||"{}");var isCombo=productCombo&&productCombo.length>0;(isCombo||$("#items-list").length)&&$("head").append(comboStyles);var addedProducts=[];var collapseIndex=1;var matchUpsale,comboResult;if(orderDataItems.length>0){var _loop12=function _loop12(){var order=orderDataItems[_i51];var product=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==order.productId});var itemPrice=order.isPreauthVoid=="1"?"0.00":order.vatPrice||order.price;compareAtTotal+=checkoutFlow?ccGetComparePriceForOrderProduct(order,itemPrice,gatewayCurrency,sessionExchangeRate,shopifyProducts,orderProducts):0;if(itemPrice&&isVatOnOrder){var _productId4=order.variantDetailId?order.productId+"."+order.variantDetailId:order.productId;var vatPrices=sessionStorage.getItem("vatPrices")!==null&&JSON.parse(sessionStorage.getItem("vatPrices"));var productVatPrice=vatPrices&&parseFloat(vatPrices[_productId4]&&vatPrices[_productId4].replaceAll(",",""));itemPrice=order.vatPrice||productVatPrice||itemPrice}itemPrice=(parseFloat(itemPrice)*parseFloat(exchangeRate)).toFixed(2);if(!isVatOnOrder)subTotal+=parseFloat(itemPrice);if(memberAreaPage){var customAttrString=ccProductAttrToString(order);isCombo=false;if(customAttrString){isCombo=true;productCombo=[customAttrString]}}var isVariantBundle=product&&product.isVariantBundle;var showBundleInCart=isVariantBundle&&(!prevBundleProduct||prevBundleProduct!=product.campaignProductId);prevBundleProduct=product&&product.campaignProductId;if(showBundleInCart){listOfItem+=ccBundleDisplay(true,order.productId,product,bundleIndex,newSymbol,itemPrice,order.qty);bundleIndex++}else if(isVariantBundle){return 1;// continue
}else if(isCombo){var _productId5=memberAreaPage?order.productId+(order.variantDetailId?"."+order.variantDetailId:""):order.productId;comboResult=comboDisplay(true,productCombo,_productId5,order.qty,order,collapseIndex,matchUpsale,newSymbol,itemPrice);matchUpsale=comboResult.matchUpsale;listOfItem+=comboResult.listOfItem}else{matchUpsale=false}if(!isVariantBundle){if(matchUpsale===false){var variantTitle=(memberAreaPage?order.variantName:order.title)||"";listOfItem+="<tr><td id=\""+elementIds[0]+"\">"+order.name+" "+variantTitle+"</td><td id=\""+elementIds[1]+"\" style=\"text-align:center;\">"+order.qty+"</td><td id=\""+elementIds[2]+"\" style=\"text-align:right;\"> "+ccFormatCurrency(itemPrice,newSymbol)+"</td></tr>"}else if(matchUpsale===true){collapseIndex++}}};for(var _i51 in orderDataItems){if(_loop12())continue}}}else{var currencyObj=fetchCurrentCurrencyObj(checkoutCurrency);var sendingCurrency=currencyObj?currencyObj.sendToGateway:checkoutCurrency===pageData.selectedCampaign.currency;var _products=JSON.parse(sessionStorage.getItem("products"));_products&&_products.length>0&&_products.forEach(function(product){var itemPrice=product.isPreauthVoid=="1"?"0.00":product.vatPrice||product.price;compareAtTotal+=checkoutFlow?ccGetComparePriceForOrderProduct(product,itemPrice,sendingCurrency,sessionExchangeRate,shopifyProducts,orderProducts):0;subTotal+=parseFloat((parseFloat(itemPrice)*(sendingCurrency?1:sessionExchangeRate)).toFixed(2));totalShipping+=parseFloat(product.shipping);listOfItem+="<tr><td id=\""+elementIds[0]+"\">"+product.name+"</td><td id=\""+elementIds[1]+"\" style=\"text-align:center;\">"+product.qty+"</td><td id=\""+elementIds[2]+"\" style=\"text-align:right;\"> "+ccFormatCurrency(getItemPrice(0,itemPrice,1,1,sendingCurrency).toFixed(2),newSymbol)+"</td></tr>"})}var displaySavings=$("#items-list").find("#savings, .savings").length;var displayNegativeSavings=$("#items-list").find(".cc-negative-savings").length;var displayCompareAtTotal=$("#items-list").find("#compareAtTotal, .compareAtTotal").length;$("#items-list").html("");$("#items-list").prepend(listOfItem);$("#fk-dynamic-invoice-row").remove();var paid=parseFloat(subTotal);compareAtTotal=Number(compareAtTotal.toFixed(2));if(paid>compareAtTotal){ccSavings=savings=0;ccCompareAtTotal=compareAtTotal=paid}else{savings=parseFloat((compareAtTotal-paid).toFixed(2));ccSavings=savings;ccCompareAtTotal=compareAtTotal}var ccCustomInvoiceTable=$(".cc-invoice-details-block");if($("#fk-dynamic-invoice-price-row").length||ccCustomInvoiceTable.length){var totalCalc=paid+Number((Number(salesTax)*exchangeRate).toFixed(2))+Number((Number(totalShipping)*exchangeRate).toFixed(2))-Number((Number(totalDiscount)*exchangeRate).toFixed(2))+Number((Number(surcharge)*exchangeRate).toFixed(2));var priceElementClassMap=[["subTotal",paid,".dynamic-price-total"],["sAndHFee",totalShipping,".dynamic-shipping-total"],["vat",vat,".vat"],["tax",salesTax,".salesTax"],["grandTotal",totalCalc,".grandTotal"],["discount",totalDiscount,".discount"],["savings",savings,".savings"],["compareAtTotal",compareAtTotal,".compareAtTotal"],[".cc-negative-savings",savings,".cc-negative-savings"],[".cc-surcharge",surcharge,".cc-surcharge"]];var priceElementClassMapLength=priceElementClassMap.length;for(var _i52=0;_i52<priceElementClassMapLength;_i52++){var _key2=priceElementClassMap[_i52][0];var value=priceElementClassMap[_i52][1];var className=priceElementClassMap[_i52][2];var displayElements=_key2&&_key2[0]==="."?$("#fk-dynamic-invoice-price-row").find(_key2):$("#fk-dynamic-invoice-price-row").find("#"+_key2);displayElements=[].concat(_toConsumableArray(displayElements),_toConsumableArray(ccCustomInvoiceTable.find(className)));if(displayElements.length){var displayElementsLength=displayElements.length;for(var j=0;j<displayElementsLength;j++){var _element2=displayElements[j];var finalValue=ccFormatCurrency(checkoutFlow&&["subTotal","grandTotal"].includes(_key2)?value:(exchangeRate*parseFloat(value)).toFixed(2),newSymbol);if(["discount",".cc-negative-savings"].includes(_key2)&&parseFloat(value)>0){_element2.innerHTML=" -"+finalValue}else{_element2.innerHTML=" "+finalValue}}}}if(totalDiscount===0){$("#items-list").find("#discount").closest("div").remove()}if(salesTax<=0){$("#items-list").find("#tax").closest("div").remove()}if(vat<=0){$("#items-list").find("#vat",".vat").closest("div").remove()}if(surcharge<=0){$("#items-list").find(".cc-surcharge").closest("div").remove()}}else{var subTotalCal=paid.toFixed(2),totalShippingCal=(totalShipping*exchangeRate).toFixed(2);var vatTaxCal=(vat*exchangeRate).toFixed(2);var salesTaxCal=(salesTax*exchangeRate).toFixed(2),discountCal=(totalDiscount*exchangeRate).toFixed(2);var surchargeCal=(surcharge*exchangeRate).toFixed(2);var totalCal=(parseFloat(subTotalCal)+parseFloat(salesTaxCal)+parseFloat(totalShippingCal)+parseFloat(surchargeCal)).toFixed(2);var totalWithDiscountCal=(totalCal-parseFloat(discountCal)).toFixed(2);var savingsCal=checkoutFlow&&(displaySavings||displayNegativeSavings)?"<div class='each-price'><label>Savings :</label><span id='savings'> "+(displayNegativeSavings?"-":"")+ccFormatCurrency(savings,newSymbol)+"</span></div>":"";var compareAtTotalCal=checkoutFlow&&displayCompareAtTotal?"<div class='each-price'><label>Compare At Total :</label><span id='compareAtTotal'> "+ccFormatCurrency(compareAtTotal,newSymbol)+"</span></div>":"";var surchargeDiv=surcharge>0?"<div class='each-price'><label>"+(orderData.surchargeName||"Surcharge")+" :</label><span> "+ccFormatCurrency(surchargeCal,newSymbol)+"</span></div>":"";var isDiscountInactive="<tr><td colspan=\"3\"><div class=\"total-prices\"><div class=\"each-price\"><label>Sub Total :</label> <span id=\"subTotal\">"+ccFormatCurrency(subTotalCal,newSymbol)+"</span></div><div class=\"each-price\"><label>Shipping :</label> <span id=\"sAndHFee\"> "+ccFormatCurrency(totalShippingCal,newSymbol)+"</span></div>[tax]"+surchargeDiv+compareAtTotalCal+savingsCal+"<div class=\"each-price\"><label>Grand Total: </label><span id=\"grandTotal\"> "+ccFormatCurrency(totalCal,newSymbol)+"</span></div></div></td></tr><style>.total-prices .each-price label { margin: 0;font-weight: 700;font-size: 18px;}.total-prices{margin-top:15px;padding-top:15px;text-align: right;border-top: 1px solid #277098;}</style>";var isDiscountActive="<tr><td colspan=\"4\"><div class=\"total-prices\"><div class=\"each-price\"><label>Sub Total :</label> <span id=\"subTotal\">"+ccFormatCurrency(subTotalCal,newSymbol)+"</span></div><div class=\"each-price\"><label>Shipping :</label> <span id=\"sAndHFee\"> "+ccFormatCurrency(totalShippingCal,newSymbol)+"</span></div>[tax]"+surchargeDiv+compareAtTotalCal+savingsCal+"<div class=\"each-price\"><label>Discount :</label> <span id=\"discount\"> "+"-"+ccFormatCurrency(discountCal,newSymbol)+"</span></div><div class=\"each-price\"><label>Grand Total: </label><span id=\"grandTotal\"> "+ccFormatCurrency(totalWithDiscountCal,newSymbol)+"</span></div></div></td></tr><style>.total-prices .each-price label { margin: 0;font-weight: 700;font-size: 18px;}.total-prices{margin-top:15px;padding-top:15px;text-align: right;border-top: 1px solid #277098;}</style>";var invoiceFinal=totalDiscount===0?isDiscountInactive:isDiscountActive;var taxDiv=salesTax>0?"<div class=\"each-price\"><label>Sales Tax :</label> <span id=\"tax\"> "+ccFormatCurrency(salesTaxCal,newSymbol)+"</span></div>":"";var vatTaxDiv=vat>0?"<div class=\"each-price\"><label>Vat Tax :</label> <span id=\"vat\"> "+ccFormatCurrency(vatTaxCal,newSymbol)+"</span></div>":"";taxDiv=taxDiv||vatTaxDiv;invoiceFinal=invoiceFinal.replace("[tax]",taxDiv);$("#items-list").append(invoiceFinal)}var productsContainer=document.getElementById("productsContainer");var elem=document.getElementById("products");elem&&elem.remove();var productsEL=document.createElement("tbody");productsEL.setAttribute("id","products");productsContainer&&productsContainer.appendChild(productsEL);var total=0;products&&products.length>0&&products.map(function(product,i){var tr=document.createElement("tr");var th=document.createElement("th");var td=document.createElement("td");var td1=document.createElement("td");var productPrice=product.isPreauthVoid=="1"?"0.00":product.vatPrice||product.price;th.innerHTML=i+1;td.innerHTML=product.name;td1.innerHTML=productPrice;total=total+parseInt(productPrice);tr.appendChild(th);tr.appendChild(td);tr.appendChild(td1);productsEL.appendChild(tr)});var tr=document.createElement("tr");var th=document.createElement("th");var td=document.createElement("td");var td1=document.createElement("td");td.innerHTML="Total";td1.innerHTML=total.toFixed(2);tr.appendChild(th);tr.appendChild(td);tr.appendChild(td1);productsEL.appendChild(tr);enableInteractions();if(pageData.selectedCampaign.currencies&&pageData.selectedCampaign.currencies.length){loadStaticCurrencyValues();convertStaticCurrencyValues()}}function UpdateProduct(id){productId=id}function closePopup(elem,type){if(type==="id"){var popup=document.getElementById(elem);var showOnScroll="true";if(popup){popup.setAttribute("style","display:none;");showOnScroll=popup.dataset.showonscroll}if(!isVisitedOnScroll||!isVisited||!isVisitedOnLoad||showOnScroll!=="true"||!ccIsVisitedOnScrollUp){document.getElementsByTagName("html")[0].style.removeProperty("overflow-y")}}else if(type==="tag"){document.getElementsByTagName(elem)[0].setAttribute("style","display:none;")}}function getMembershipDetails(){return JSON.parse(sessionStorage.getItem("membership"))}function checkCartProductsAndVariants(link,productKeys,isCheckoutPage,shipCountryElement,shipStateElement,customerStatus,filteredPurchaseProducts,productTags){var _link$customLinkViewE;var linkProductsAndVariants=link.pageVariants?JSON.parse(link.pageVariants):"";var offerCart=JSON.parse(sessionStorage.getItem("fkCart"))||{};var upsellCart=JSON.parse(sessionStorage.getItem("upsalefkCart"))||{};if(link.previouslyPurchasedProducts&&filteredPurchaseProducts!==null&&filteredPurchaseProducts!==void 0&&filteredPurchaseProducts.length){productKeys=_toConsumableArray(new Set([].concat(_toConsumableArray(productKeys),_toConsumableArray(filteredPurchaseProducts))))}var cartProductsAndVariants=[].concat(_toConsumableArray(Object.keys(offerCart)),_toConsumableArray(Object.keys(upsellCart)));var variantList={};function checkVariants(elementId){elementId=elementId.toString();if(linkProductsAndVariants&&linkProductsAndVariants[elementId]){if(variantList&&variantList[elementId]){return variantList[elementId].includes(linkProductsAndVariants[elementId])}else{return false}}else{return true}}cartProductsAndVariants&&cartProductsAndVariants.forEach(function(ele){var productKey=ele.split(".")[0];var variantKey=ele.split(".")[1];if(variantList.hasOwnProperty(productKey)){variantList[productKey]=variantList[productKey].toString()+","+variantKey.toString()}else{if(variantKey){variantList[productKey]=variantKey.toString()}}});var linkEntities=link===null||link===void 0||(_link$customLinkViewE=link.customLinkViewEntities[0])===null||_link$customLinkViewE===void 0?void 0:_link$customLinkViewE.Value;var linkProductTagList=linkEntities&&linkEntities.toLowerCase().split(",")||[];var mappedProduct=link.isAllProducts?link.products.every(function(prod){return productKeys.indexOf(prod.toString())>-1})&&linkProductTagList.every(function(prod){return productTags.indexOf(prod.toString().toLowerCase())>-1}):link.products.find(function(product){return productKeys.includes(product.toString())})||linkProductTagList.find(function(product){return productTags===null||productTags===void 0?void 0:productTags.includes(product.toString().toLowerCase())});var result=mappedProduct;if(mappedProduct){if(!link.isAllProducts){var _product11=mappedProduct.toString();if(linkProductsAndVariants&&linkProductsAndVariants[_product11]){var productVariantList=variantList[_product11]&&variantList[_product11].split(",")||[];var variantsOnButton=linkProductsAndVariants[_product11].split(",")||[];var variantCount=0;productVariantList.forEach(function(variant){if(variantsOnButton.indexOf(variant)!==-1){variantCount++}});result=variantCount===productVariantList.length?mappedProduct:null}else{if(customerStatus||customerStatus==0){return checkCountryAndState(link,shipCountryElement,shipStateElement)&&link.customerType==customerStatus&&result}else{return checkCountryAndState(link,shipCountryElement,shipStateElement)&&result}}}else{result=link.products.every(function(elementId){return checkVariants(elementId)})}}if(customerStatus||customerStatus==0){return checkCountryAndState(link,shipCountryElement,shipStateElement)&&link.customerType==customerStatus&&result}else{return checkCountryAndState(link,shipCountryElement,shipStateElement)&&result}}function sortLinkDetailsForDynamicRoutes(){var linkDetails=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var linkData=[].concat(linkDetails);linkData.sort(function(a,b){return b.products.length-a.products.length});linkData.sort(function(a,b){return b.isAllProducts-a.isAllProducts});return linkData}function checkCountryAndState(link,country,state){var parsedLinkCountries=link.countryStates&&link.countryStates!=="{}"?JSON.parse(link.countryStates):"";if(!parsedLinkCountries){return true}if(parsedLinkCountries[country]){var parsedStates=parsedLinkCountries[country];if(parsedStates!=="all"){var statesArray=parsedStates.split(",");if(statesArray.includes(state)){return true}return false}return true}}function getLinkProductTags(link){var _link$customLinkViewE2;var linkEntities=link===null||link===void 0||(_link$customLinkViewE2=link.customLinkViewEntities[0])===null||_link$customLinkViewE2===void 0?void 0:_link$customLinkViewE2.Value;var tagsList=linkEntities&&linkEntities.split(",")||[];var result=tagsList.length>0?true:false;return result}function getProductObj(){var result=ccCampaignProductsData&&Object.fromEntries(ccCampaignProductsData.map(function(prod){return[prod.campaignProductId,prod]}));return result}function countryStateMatch(link,country,state){if(!link.countryStates||link.countryStates==="{}"){// Fallback - no country/state restrictions
return{rank:3,reason:"No countryStates defined"}}var parsedLinkCountries=JSON.parse(link.countryStates);if(parsedLinkCountries[country]){var parsedStates=parsedLinkCountries[country];if(parsedStates==="all"){return{rank:2,reason:"Country ".concat(country," matched with all states")}}var statesArray=parsedStates.split(",").map(function(s){return s.trim()});if(statesArray.includes(state)){return{rank:1,reason:"Exact match: country ".concat(country," and state ").concat(state)}}return false}if(parsedLinkCountries["all"]){return{rank:3,reason:"Fallback: \"all\" countries allowed"}}return false}function findRouteMatch(shipCountryElement,shipStateElement,linkDetails){// Pick best match
var bestMatch=null;var bestRank=Infinity;var matchReason="";var _iterator6=_createForOfIteratorHelper(linkDetails),_step6;try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var link=_step6.value;var _result=countryStateMatch(link,shipCountryElement,shipStateElement);if(_result&&_result.rank<bestRank){bestMatch=link;bestRank=_result.rank;matchReason=_result.reason}}// Attach match reason to the final object (optional)
}catch(err){_iterator6.e(err)}finally{_iterator6.f()}if(bestMatch){bestMatch.matchReason=matchReason}return bestMatch||{}}function getButtonOrLinkData(buttonOrLink,pageType,response,shipCountry,shipState){try{if(!buttonOrLink){throw"Missing routing information. Please check button or link configuration."}var targetElement=$("[data-id="+buttonOrLink.elementId+"]")[0];var buttonOrLinkString=targetElement&&(targetElement.getAttribute("data-text-value")||targetElement.textContent||"");var buttonOrLinkText=buttonOrLinkString&&buttonOrLinkString.trimStart();var buttonOrLinkData,_fkCart,upsalefkCart,cartProductsTagList=[],cartProducts=[],productCheck=false;var checkoutPage=pageType===4,upsellPage=pageType===3,checkoutOrUpsellPage=checkoutPage||upsellPage;var _orderData3=JSON.parse(sessionStorage.getItem("orderData"));var shipCountryElement=shipCountry||(document.getElementsByName("shipCountry")[0]?document.getElementsByName("shipCountry")[0].value:_orderData3&&_orderData3.shipCountry?_orderData3.shipCountry:null);var shipStateElement=shipState||(document.getElementsByName("shipState")[0]?document.getElementsByName("shipState")[0].value:_orderData3&&_orderData3.shipState?_orderData3.shipState:null);var customerType=response?response.newCustomer:_orderData3?_orderData3.newCustomer:null;var purchasedProducts=response?response.productsPurchased:_orderData3?_orderData3.productsPurchased:null;var filteredPurchaseProducts=purchasedProducts?purchasedProducts.split(","):[];var purchasedProductList=getProductObj();var customerStatus=customerType!==null?customerType==0?2:1:null;if(checkoutOrUpsellPage){if(upsellPage){var prodSection=$(targetElement).closest("section.fk-product-section");var id=prodSection&&prodSection.length>0&&prodSection.attr("id");buttonOrLinkText&&!buttonOrLinkText.toLowerCase().startsWith("no")&&getVariants(id);upsalefkCart=sessionStorage.getItem("upsalefkCart")!==null?JSON.parse(sessionStorage.getItem("upsalefkCart")):{};var upsell=getUpsellFromNavigationItem(buttonOrLink.elementId);if(upsell)upsalefkCart[upsell]=1}else{getVariants();upsalefkCart={}}_fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):{};var cart=_objectSpread(_objectSpread({},_fkCart),upsalefkCart);cartProducts=Object.keys(cart).map(function(cartKey){return cartKey.split(".")[0]})}if(purchasedProductList){cartProducts.forEach(function(prod){var _purchasedProductList;var tags=((_purchasedProductList=purchasedProductList[prod])===null||_purchasedProductList===void 0||(_purchasedProductList=_purchasedProductList.productTags)===null||_purchasedProductList===void 0?void 0:_purchasedProductList.toLowerCase().split(","))||[];cartProductsTagList=_toConsumableArray(new Set([].concat(_toConsumableArray(cartProductsTagList),_toConsumableArray(tags))))})}if(getMembershipDetails()){var routingProducts=cartProducts.concat(window.getClubMembershipProducts?getClubMembershipProducts():[]);var linkWithNoProductsAndTags=buttonOrLink.linkDetails.find(function(linkDetail){var _linkDetail$customLin;return(!linkDetail.products||!linkDetail.products.length)&&!((_linkDetail$customLin=linkDetail.customLinkViewEntities[0])!==null&&_linkDetail$customLin!==void 0&&_linkDetail$customLin.Value)});if(checkoutOrUpsellPage){if(buttonOrLink.linkDetails.find(function(link){return link.products&&link.products.length>0||link.previouslyPurchasedProducts&&(filteredPurchaseProducts===null||filteredPurchaseProducts===void 0?void 0:filteredPurchaseProducts.length)||getLinkProductTags(link)})){if(cartProducts.length){productCheck=true;var linkData=sortLinkDetailsForDynamicRoutes(buttonOrLink.linkDetails);buttonOrLinkData=linkData.find(function(link){return checkCartProductsAndVariants(link,routingProducts,checkoutPage,shipCountryElement,shipStateElement,customerStatus,filteredPurchaseProducts,cartProductsTagList)})||linkWithNoProductsAndTags}else if(linkWithNoProductsAndTags){buttonOrLinkData=linkWithNoProductsAndTags}else{buttonOrLinkData=buttonOrLink.linkDetails[0]}}else{buttonOrLinkData=linkWithNoProductsAndTags?linkWithNoProductsAndTags:buttonOrLink.linkDetails[0]}}else{var linkWithProducts=buttonOrLink.linkDetails.find(function(linkDetail){return routingProducts.some(function(productId){return linkDetail.products.includes(productId)})});buttonOrLinkData=linkWithProducts?linkWithProducts:linkWithNoProductsAndTags}if(!buttonOrLinkData){throw membershipNoProductError}}else if(checkoutOrUpsellPage&&buttonOrLink.linkDetails.find(function(link){return link.products&&link.products.length>0||link.previouslyPurchasedProducts&&(filteredPurchaseProducts===null||filteredPurchaseProducts===void 0?void 0:filteredPurchaseProducts.length)||getLinkProductTags(link)})){var _linkWithNoProductsAndTags=buttonOrLink.linkDetails.find(function(link){var _link$customLinkViewE3;return(!link.products||!link.products.length)&&!((_link$customLinkViewE3=link.customLinkViewEntities[0])!==null&&_link$customLinkViewE3!==void 0&&_link$customLinkViewE3.Value)})||{};if(cartProducts.length){productCheck=true;var _linkData=sortLinkDetailsForDynamicRoutes(buttonOrLink.linkDetails);buttonOrLinkData=_linkData.find(function(link){return checkCartProductsAndVariants(link,cartProducts,checkoutPage,shipCountryElement,shipStateElement,customerStatus,filteredPurchaseProducts,cartProductsTagList)})||_linkWithNoProductsAndTags}else if(Object.keys(_linkWithNoProductsAndTags).length){buttonOrLinkData=_linkWithNoProductsAndTags}else{buttonOrLinkData=buttonOrLink.linkDetails[0]}}else{var isMemberPageType=isMembershipPage(pageType);if(buttonOrLink.linkDetails.find(function(link){return link.countryStates})&&!checkoutOrUpsellPage&&!isMemberPageType){var geoLocationInfo=sessionStorage.getItem("ccGeoLocationInfo");geoLocationInfo=geoLocationInfo?JSON.parse(geoLocationInfo):null;if(!shipCountryElement&&geoLocationInfo){shipCountryElement=geoLocationInfo.country_code;shipStateElement=geoLocationInfo.region_code}buttonOrLinkData=findRouteMatch(shipCountryElement,shipStateElement,buttonOrLink.linkDetails)||buttonOrLinkData;buttonOrLinkData=!buttonOrLinkData?buttonOrLink.linkDetails[0]||{}:buttonOrLinkData}else{buttonOrLinkData=buttonOrLink.linkDetails[0]||{}}}if(checkoutOrUpsellPage&&productCheck){var _linkData2=sortLinkDetailsForDynamicRoutes(buttonOrLink.linkDetails);if(buttonOrLinkData.countryStates&&buttonOrLinkData.countryStates!=="{}"){buttonOrLinkData=checkCountryAndState(buttonOrLinkData,shipCountryElement,shipStateElement)?buttonOrLinkData:{}}else{buttonOrLinkData=_linkData2.find(function(link){return link.countryStates&&link.countryStates!=="{}"&&checkCartProductsAndVariants(link,cartProducts,checkoutPage,shipCountryElement,shipStateElement,customerStatus,filteredPurchaseProducts,cartProductsTagList)})||buttonOrLinkData}}if(!productCheck&&checkoutOrUpsellPage&&buttonOrLink.linkDetails.find(function(link){return link.countryStates})){buttonOrLinkData=buttonOrLink.linkDetails.find(function(link){return checkCountryAndState(link,shipCountryElement,shipStateElement)})||{};if(!buttonOrLinkData.countryStates||buttonOrLinkData.countryStates==="{}"){buttonOrLinkData=buttonOrLink.linkDetails.find(function(link){return link.countryStates&&link.countryStates!=="{}"&&checkCountryAndState(link,shipCountryElement,shipStateElement)})||buttonOrLinkData}}if(checkoutOrUpsellPage&&productCheck&&customerStatus){var _linkData3=sortLinkDetailsForDynamicRoutes(buttonOrLink.linkDetails);if(buttonOrLinkData.customerType&&buttonOrLinkData.customerType!=0){buttonOrLinkData=buttonOrLinkData.customerType===customerStatus?buttonOrLinkData:_linkData3.find(function(link){return checkCartProductsAndVariants(link,cartProducts,checkoutPage,shipCountryElement,shipStateElement,0,filteredPurchaseProducts,cartProductsTagList)})||{}}else{buttonOrLinkData=_linkData3.find(function(link){return checkCartProductsAndVariants(link,cartProducts,checkoutPage,shipCountryElement,shipStateElement,0,filteredPurchaseProducts,cartProductsTagList)})||buttonOrLinkData}}if(!productCheck&&customerStatus&&checkoutOrUpsellPage&&!buttonOrLink.linkDetails.find(function(link){return link.countryStates&&link.countryStates!=="{}"})){var _linkData4=sortLinkDetailsForDynamicRoutes(buttonOrLink.linkDetails);buttonOrLinkData=_linkData4.find(function(link){return link.customerType===customerStatus})||{};if(!buttonOrLinkData||Object.keys(buttonOrLinkData).length===0){buttonOrLinkData=_linkData4.find(function(link){return link.customerType===0})||{}}}return buttonOrLinkData}catch(e){pageType===3&&sessionStorage.removeItem("upsalefkCart");throw e}}function ccGetCountryStates(country){var states=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.states||[];return states[country]||[]}function checkRequiredInputs(containerId,buttonId){var paySource=sessionStorage.getItem("paySource");if(paySource==="SHOPPAY"){return true}var cardFields=["cardNumber","cardSecurityCode","cardMonth","cardYear","cardDate","nameOnCard"];/*
    * TBD: "cardMonth", "cardYear" are of type 'select-one' -> Unselected value can include "select", "choose", "pick".  Need to find the proper filter/filter list and do validation.
    */$.fn.isHiddenElementInVisibleContent=function(){var el=this[0];if(!el)return false;if(el.type!=="hidden")return false;return $(el).parents().toArray().every(function(p){var $p=$(p);return $p.css("display")!=="none"&&$p.css("visibility")!=="hidden"})};var required=$("input, select").filter(function(index){return($(this).is(":visible")||$(this).isHiddenElementInVisibleContent())&&($(this).attr("required")||$(this).attr("requiredtype"))});var cardNumberDetails=$("input[name=\"cardNumber\"]");var cardSecurityCodeDetails=$("input[name=\"cardSecurityCode\"]");var ibanElement=document.getElementsByName("iban")[0];var cardNumberValue="";var cvvFlag=false;var paySources=["PAYPAL","GOOGLEPAY","AFFIRM","AMAZON","APPLEPAY","KLARNA","SEZZLE","AFTERPAY","BANCONTACT","IDEAL","SWISH","BLIK","MOBILEPAY","P24","EPS","BOLETO","PIX","SEPA_DEBIT","SQUAREV2","SHOPPAY","BITPAY","COD","WITHREACH_PAYPAL","SPLITIT","RADOM","COINSUB","TRUSTLY","TWINT","MULTIBANCO","MBWAY","BIZUM","PAYU","KAKAOPAY","WELLNESS","NAVERPAY","PAYCO","ALIPAY","WECHATPAY","PAYPAY"];if(paySource&&paySources.includes(paySource.toUpperCase())&&!sessionStorage.getItem("multiPayRoute")){required=required.filter(function(index,field){return!cardFields.includes(field.name)})}if(paySource==="PAYPAL"){required=required.filter(function(index,field){return field.type==="checkbox"||field.type==="radio"});var requireAddress=getAddOnKeyValue(findAddOn("PAYPAL_ADDRESS"));sessionStorage.getItem("ccFastlaneMemberCheckout")!=="true"&&verifyShippingRequiredFields(required,paySource,requireAddress)}if(paySource==="SEPA_DEBIT"&&ibanElement){required.push(ibanElement)}if(paySource==="GOOGLEPAY"){required=IsFieldRequiredForGooglePay(required)}if(paySource==="AMAZON"){var amazonRebill=sessionStorage.getItem("amazonRebillEnabled");if(amazonRebill){var amazonConsent=sessionStorage.getItem("amazonConsentReceived");if(!amazonConsent)return false}}if(paySource==="APPLEPAY"){required=requiredInputofApplePay(required)}if(paySource==="SQUAREV2"){var squareBtn=document.getElementById("square-card-button");var squareNonce=document.getElementById("formCardNonce");if(squareBtn&&squareNonce&&squareNonce.value==""){squareBtn.click();return}}cardNumberDetails.each(function(index){if(this.name=="cardNumber"){cardNumberValue=$(this).val()}});var inputValue=new Array;var inputWithNoVal=new Array;var checkboxValue=new Array;var phValidationFlag=true,externalShipProfileIdCheck=true;if(phFormatByCountry==="true"){var _input2=document.querySelector(".intelPhoneInput");if(_input2){var errorDisplay=function errorDisplay(){_input2.focus();_input2.classList.add("error");errorMsg.classList.remove("hide");validPhoneNumberFlag="false";$(".intelPhoneInput").css("outline","1px solid red");phValidationFlag=false};var errorMsg=document.querySelector("#error-msg");var placeholder=_input2.getAttribute("placeholder").replace(/[\(\)\-\s]/g,"");placeholder=placeholder.replace(integerRegex,"");var phLength=placeholder.length;var valueLength=_input2.value.replace(/[\(\)\-\s]/g,"").length;if(validPhoneNumberFlag==="false"){_input2.focus();phValidationFlag=false}else if(valueLength&&phLength&&phLength>=4&&phInputCode!="49"&&valueLength!==phLength){errorDisplay();errorMsg?errorMsg.innerHTML="Please correct the number":""}}}var shipEngine=getAddOnKeyValue(findAddOn("shipEngineEnabled")),input=document.getElementsByName("shipProfileId")[0];if(shipEngine==="1"&&input&&buttonId){var requireShipping=false;if(!$("input[type=checkbox][freeshipping=true]").is(":checked")){var _orderItems5=getOrderItemDetails()||{};for(var id in _orderItems5){var _product12=_orderItems5[id];requireShipping=_product12&&_product12.cycle1_isShippable?true:requireShipping}}$("#ccShipProfileMissingError").remove();if(requireShipping){if(input.type==="select-one"){var params=getShipProfileAddress();var requiredShipFields={};requiredShipFields.city=params.city;requiredShipFields.state=params.state;requiredShipFields.postalCode=params.postalCode;requiredShipFields.profileId=input.value;var _loop13=function _loop13(){//Modified key for finding shipping inputs
var shippingInput="ship"+field.charAt(0).toUpperCase()+field.slice(1);if(!required.filter(function(index,fieldName){return fieldName.name===shippingInput||fieldName.name!=="profileId"&&fieldName.name===field}).length){var requiredElement=document.getElementsByName(shippingInput)[0]||field!=="profileId"&&document.getElementsByName(field)[0];requiredElement&&required.push(requiredElement)}};for(field in requiredShipFields){_loop13()}}var isShipRadio=input.type==="radio";var value=isShipRadio?$("[name='shipProfileId']:checked").val():input.value;if(!value||value==="0"){var errorMessage="Ship to information is not valid for your address. Please double-check your shipping information.";var target;if(input.offsetHeight>0){target=isShipRadio?input.closest(".fk-form-radio-button-parent"):input}else{target=$("[data-id='"+buttonId+"']")}$("<div class='"+commonErrorClass+"' id='ccShipProfileMissingError' style='color: red;'>"+errorMessage+"</div>").insertAfter(target);externalShipProfileIdCheck=false}}}var shipCountryValue=$("[name='shipCountry']").val(),countryValue=$("[name='country']").val(),acctOnFile=$("#acctOnFile").is(":checked");if(containerId){required=$("#"+containerId).find("input, select").filter(function(index){return($(this).is(":visible")||$(this).isHiddenElementInVisibleContent())&&($(this).attr("required")||$(this).attr("requiredtype"))})}window.ccRequireDOBForAgeChecker&&window.ccRequireDOBForAgeChecker(required);required.each(function(index){var requiredElement=false;var recurring="recurring";var recurringUpperCase="RECURRING";var trial="trial";var elementName=$(this).attr("name");var skipErrorDisplay=!(elementName==="shipProfileId"&&!externalShipProfileIdCheck);if(this.type=="checkbox"||this.type=="radio"){if(this.checked==false){if(this.type==="checkbox"){var requiredType=this.getAttribute("requiredtype");if(requiredType&&(requiredType===recurring||requiredType===trial)){var _fkCart2=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;var _products2=pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products;if(_fkCart2&&Object.keys(_fkCart2).length>0){var _loop14=function _loop14(sessionItemCpId){_products2.forEach(function(product){if(product.campaignProductId==sessionItemCpId.split(".")[0]){if(requiredType===recurring&&product.billingCycleType===recurringUpperCase||requiredType===trial&&product.trialEnabled){requiredElement=true}}})};for(var sessionItemCpId in _fkCart2){_loop14(sessionItemCpId)}}}else{requiredElement=true}}else{requiredElement=true}if(requiredElement&&skipErrorDisplay){$(this).css("outline","1px solid red");inputWithNoVal.push(this);checkboxValue.push(this.checked);var uniqueId="error-"+(this.getAttribute("name")||getUniqueId());var nextElement=$(this).parent().next()[0];if(!nextElement||!nextElement.innerHTML.includes("Checkbox is required")){$("<div class='"+commonErrorClass+"' id='"+uniqueId+"' style='color: red;'>Checkbox is required</div>").insertAfter($(this).parent())}}}else{$(this).css("outline","1px solid green");var _nextElement=$(this).parent().next()[0];if(_nextElement&&_nextElement.innerHTML.includes("Checkbox is required")){_nextElement.remove()}}}else{var requiredField=true;var countryVal=elementName==="state"?countryValue:elementName==="shipState"?shipCountryValue:null;if(countryVal&&ccGetCountryStates(countryVal).length===0||elementName==="cardSecurityCode"&&acctOnFile)requiredField=false;requiredField&&inputValue.push($(this).val()||$(this)[0].value);var fieldName=$(this).attr("placeholder")?$(this).attr("placeholder"):elementName;var _nextElement2=$(this).next()[0];var phonePluginEnabled=elementName==="phoneNumber"&&phFormatByCountry==="true";if(phonePluginEnabled){var parentElement=this.closest(".iti--separate-dial-code");_nextElement2=$(parentElement).next()[0];fieldName="Phone Number"}if(requiredField&&($(this).val()==""||$(this)[0].value=="")){$(this).prop("type")=="hidden"?$(this).prev().css("outline","1px solid red"):$(this).css("outline","1px solid red");inputWithNoVal.push(this);if(skipErrorDisplay&&(!_nextElement2||!_nextElement2.innerHTML.includes(fieldName))){var _uniqueId="error-"+(elementName||getUniqueId());if(phonePluginEnabled){$("<span class='"+commonErrorClass+"' id='"+_uniqueId+"' style='color: red;'>"+fieldName+" is required</span>").insertAfter(this.parentElement)}else{$("<div class='"+commonErrorClass+"' id='"+_uniqueId+"' style='color: red;'>"+fieldName+" is required</div>").insertAfter(this);$(this).attr("fieldValue",fieldName)}}}else{$(this).prop("type")=="hidden"?$(this).prev().css("outline","1px solid green"):$(this).css("outline","1px solid green");if(_nextElement2&&$(this).attr("fieldValue")&&_nextElement2.innerHTML.includes($(this).attr("fieldValue"))){_nextElement2.remove();$(this).removeAttr("fieldValue")}}}});!acctOnFile&&cardSecurityCodeDetails.each(function(index){var _this=this;if(cardNumberValue!==""&&this.name=="cardSecurityCode"&&$(this).val()!=""&&$(this).val().length<3){alert("Card Security Code must be at least 3 characters");cvvFlag=true;setTimeout(function(){$(_this).focus();$(_this).css("outline","1px solid red")},0)}});var firstReqInput=$(inputWithNoVal[0]);if(firstReqInput.val()==""||firstReqInput.is("[type=checkbox], [type=radio]")&&firstReqInput.prop("checked")===false){firstReqInput.focus()}if(!inputValue.includes("")&&!checkboxValue.includes(false)&&cvvFlag===false&&phValidationFlag===true&&externalShipProfileIdCheck){return true}else{return false}}function getLoginPageButtonData(funnelData,pageType,buttonItem){if(funnelData&&pageType===7)return buttonItem&&buttonItem.status==="Active"&&getButtonOrLinkData(buttonItem)}function setPaySourceFromPaymentRadios(buttonTitle,btnDatasetId){var btnTitle=buttonTitle&&buttonTitle.toUpperCase();var paymentButtonTitles=["PAYPAL","GOOGLEPAY","AFFIRM","AMAZON","APPLE PAY","KLARNA","SEZZLE","AFTERPAY","BANCONTACT","IDEAL","SWISH","BLIK","MOBILEPAY","P24","EPS","BOLETO","PIX","SEPA","SQUAREV2","SHOPPAY","BITPAY","COD","SPLITIT","RADOM","COINSUB","TRUSTLY","TWINT","MULTIBANCO","MBWAY","BIZUM","PAYU","KAKAOPAY","WELLNESSPAY","PREPAID","NAVERPAY","PAYCO","ALIPAY","WECHATPAY","PAYPAY"];var paymentButtonClicked=paymentButtonTitles.find(function(item){return btnTitle&&btnTitle.includes(item)});if(paymentButtonClicked){return}var paySourceRadios=[].concat(stripeAlternateGateways,multiPayRebillGateways,pagBrasilGateways,["PAYPAL","TRUSTLY","TWINT","COD","GOOGLEPAY","APPLEPAY","MOLLIE","CHECK","PREPAID-TYPE","COINSUB","MULTIBANCO","MBWAY","BIZUM","PAYU","KAKAOPAY","NAVERPAY","PAYCO","ALIPAY","WECHATPAY","PAYPAY"]);var paymentRadios=$("[name=payment_method], [name=fk-payment-option-toggler]");var paymentRadiosLength=paymentRadios.length;if(paymentRadiosLength){for(var _i53=0;_i53<paymentRadiosLength;_i53++){var radio=$(paymentRadios[_i53]);if(radio.is(":checked")){var paySource=radio.attr("value")||radio.prop("value");paySource=paySource&&paySource.toUpperCase();if(paySource==="CREDITCARD"){sessionStorage.removeItem("paySource")}else if(paySource==="PAYPAL_FASTLANE"){sessionStorage.setItem("paySource",paySource)}else if(paySourceRadios.includes(paySource)){if(paySource==="PAYPAL"&&getAddOnKeyValue(findAddOn("PayPal_WithReach"))==="true"){paySource="WITHREACH_PAYPAL"}if(paySource==="GOOGLEPAY"){window.configureGooglePay&&configureGooglePay()}if(paySource==="APPLEPAY"){window.configureApplePay&&configureApplePay(btnDatasetId)}sessionStorage.setItem("paySource",paySource)}break}}}}function routeByCustomer(response,route,buttonId,shipCountry,shipState){if(response){var targetUrl=route;var buttonOrLinkElement=getNavigationItemFromPageData(buttonId);var pageType=pageData.pageTypeId;var buttonData=getButtonOrLinkData(buttonOrLinkElement,pageType,response,shipCountry,shipState);var targetData=pageData.funnelData.pages.find(function(item){return item.pageView[0].referenceId===buttonData.targetPageViewReferenceId});var targetPageType=targetData&&targetData.pageView[0].pageType;var splitReferenceId=targetData&&targetData.splitReferenceId||"";var funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;targetUrl=targetData&&targetData.splitEnabled?determineSplit(funnelReferenceId,splitReferenceId):redirectPath(buttonData,true);if(targetPageType===32||targetPageType===27){targetUrl=targetData.externalURL;var _orderId4=sessionStorage.getItem("orderId");if(_orderId4){targetUrl=addOrderIdInExternalURL(targetUrl,_orderId4)}else if(pageType==15||pageType==4){targetUrl=addOrderIdInExternalURL(targetUrl,"__ORDERID__")}}if(targetUrl&&targetUrl.includes("__ORDERID__")){targetUrl=targetUrl.replace("__ORDERID__",response.orderId)}return targetUrl}}function callMethod(e){e.preventDefault();if(e.currentTarget.title==="submitOnSubscribe"){isSubscribeOn=true;sessionStorage.setItem("isSubscribeOn",isSubscribeOn);displayPrices()}if(e.detail!==1){return}var buttonCoupon=e.currentTarget.getAttribute("coupon");buttonCoupon&&pageData.pageTypeId===2&&sessionStorage.setItem("leadCouponCode",buttonCoupon);var dataSetId=e.currentTarget.dataset.id;e.currentTarget.disabled=true;var title=e.currentTarget.title;title=title&&title.toUpperCase();if(title&&prepaidGateways.includes(title)){sessionStorage.setItem("paySource",title)}else{title==="AMAZONPAY"&&sessionStorage.setItem("paySource","AMAZON")}var squareBtn=document.getElementById("square-card-button");if(squareBtn){sessionStorage.setItem("paySource","SQUAREV2");localStorage.setItem("squareSubmitBtnId",dataSetId)}callMethodApply(dataSetId)}function ccRequireProductSectionQtyValue(btnDataId){var clickedButton=$("[data-id='"+btnDataId+"']"),productSection=clickedButton.closest(".fk-product-section");if(productSection.length){productSection.find(".cc-qty-error").remove();var showError=false;var bundleVariantDiv=productSection.find(".fk-variant-bundle-parent-div");if(bundleVariantDiv.length){var error=false,qtyChecked=false;bundleVariantDiv.each(function(){var qtyInput=$(this).find("[name=quantity]").first();if(qtyInput.length){qtyChecked=true;error=error||Number(qtyInput.val())>0}});if(qtyChecked)showError=!error}else{var qtyInput=productSection.find("[name=quantity]").first();showError=qtyInput.length?!(Number(qtyInput.val())>0):showError}if(showError){var tag=(clickedButton.prop("tagName")||"").toUpperCase(),uniqueId="error-"+getUniqueId(),appendAfter=$(".cc-qty-error-after");if(tag==="BUTTON"){clickedButton.attr("disabled",false)}else if(tag==="A"){clickedButton[0].style.pointerEvents="auto"}$("<div class='cc-qty-error "+commonErrorClass+"' id='"+uniqueId+"' style='color: red;'>Quantity is required</div>").insertAfter(appendAfter.length?appendAfter:clickedButton);return true}}}function callMethodApply(_x41,_x42,_x43,_x44,_x45,_x46){return _callMethodApply.apply(this,arguments)}function _callMethodApply(){_callMethodApply=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee39(btnId,paypalSdkType,openElementFormDetails,uniqueBtnId,userOrderDetails,amazonV2CheckoutTriggerData){var targetButton,targetBtnTitle,callMethodApplyMain,_callMethodApplyMain,recaptchaPageId,btnPaySource,uniqueId;return _regeneratorRuntime().wrap(function _callee39$(_context44){while(1)switch(_context44.prev=_context44.next){case 0:_callMethodApplyMain=function _callMethodApplyMain3(){_callMethodApplyMain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee38(buttonId,paypalSdkPrePaidType){var clubId,BreakException,route,pageType,buttonItem,buttonData,isBuildOrTemplate,loginButtonData,_response11,pageReferenceId,targetData,targetUrl,isMemberPageType,splitReferenceId,funnelReferenceId,targetPageType,_orderId7,actionBtn,popup,popupRequiredInputs,id;return _regeneratorRuntime().wrap(function _callee38$(_context43){while(1)switch(_context43.prev=_context43.next){case 0:if(!ccRequireProductSectionQtyValue(buttonId)){_context43.next=3;break}sessionStorage.removeItem("paySource");return _context43.abrupt("return");case 3:if(!(pageData.pageTypeId===4&&window.fflPopUpRequired&&fflPopUpRequired(buttonId))){_context43.next=8;break}window.updateFFLModalButtonCSS&&updateFFLModalButtonCSS(buttonId);showFFLPopUp();$("[data-id="+buttonId+"]").attr("disabled",false);return _context43.abrupt("return");case 8:clubId=cookieData["clubId"]?parseInt(cookieData["clubId"]):[];BreakException={};_context43.prev=10;if(_typeof(clubId)=="object"){pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.forEach(function(product){if(product.clubPluginId&&!clubId.includes(product.clubPluginId)){clubId.push(product.clubPluginId)}})}_context43.next=19;break;case 14:_context43.prev=14;_context43.t0=_context43["catch"](10);enableInteractions();if(!(_context43.t0!==BreakException)){_context43.next=19;break}throw _context43.t0;case 19:route=null;pageType=pageData.pageTypeId;buttonItem=getNavigationItemFromPageData(buttonId);_context43.prev=22;buttonData=getButtonOrLinkData(buttonItem,pageType);_context43.next=31;break;case 26:_context43.prev=26;_context43.t1=_context43["catch"](22);if(pageType===8&&buttonData===undefined&&window.updateMember){updateMember(route=null,clubId,function(){alert(_context43.t1)})}else{alert(_context43.t1)}enableInteractions();return _context43.abrupt("return");case 31:isBuildOrTemplate=checkBuildOrTemplate();if(isBuildOrTemplate){loginButtonData=getLoginPageButtonData(pageData.funnelData,pageType,buttonItem);if(loginButtonData)buttonData=loginButtonData}if(!checkRequiredInputs(null,buttonId)){_context43.next=103;break}disableInteractions(buttonId,true,false,uniqueBtnId);if(!isBuildOrTemplate){_context43.next=51;break}route=redirectPath(buttonData,true);_context43.t2=pageType;_context43.next=_context43.t2===2?40:_context43.t2==="leadPage"?40:_context43.t2===15?40:_context43.t2===4?42:_context43.t2==="checkoutPage"?42:_context43.t2===3?44:_context43.t2==="upsellPage"?44:_context43.t2===7?46:_context43.t2==="login"?46:_context43.t2===8?46:_context43.t2==="Profile"?46:_context43.t2===9?46:_context43.t2==="memberAreaPage"?46:_context43.t2===10?46:_context43.t2==="cancelMembership"?46:_context43.t2===11?46:_context43.t2==="restartMembership"?46:_context43.t2===12?46:_context43.t2==="updateCard"?46:_context43.t2===13?46:_context43.t2==="changeProduct"?46:48;break;case 40:importLead(buttonId,route);return _context43.abrupt("break",49);case 42:importOrder(buttonId,route);return _context43.abrupt("break",49);case 44:importUpsale(buttonId,route,null,true);return _context43.abrupt("break",49);case 46:window.membershipRouteForPreview&&membershipRouteForPreview(route);return _context43.abrupt("break",49);case 48:setCurrentWindowLocation(route);case 49:_context43.next=101;break;case 51:pageReferenceId=pageData.currentPage.referenceId;targetData=pageData.funnelData.pages.find(function(item){return item.pageView[0].referenceId===buttonData.targetPageViewReferenceId});//element.targetPageViewReferenceId or targetPage
isMemberPageType=isMembershipPage(pageType);if(isMemberPageType){productData=buttonItem}splitReferenceId=targetData&&targetData.splitReferenceId||"";funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;if(targetData&&targetData.splitEnabled){targetUrl=determineSplit(funnelReferenceId,splitReferenceId)}else{targetUrl=redirectPath(buttonData)}// let route = pageData[buttonId].NEXT_PAGE.value.pageView[0].url;
route=targetUrl;targetPageType=targetData&&targetData.pageView[0].pageType||pageType===3&&pageType;pageType===9&&targetPageType!==13&&sessionStorage.getItem("ccChangeProductCampaignId")&&sessionStorage.removeItem("ccChangeProductCampaignId");if(targetPageType===32||targetPageType===27){route=targetData.externalURL;_orderId7=sessionStorage.getItem("orderId");if(_orderId7){route=addOrderIdInExternalURL(route,_orderId7)}else if(pageType==15||pageType==4){route=addOrderIdInExternalURL(route,"__ORDERID__")}}if(!(targetPageType===23)){_context43.next=67;break}window.openPopupIFrame&&openPopupIFrame(route);enableInteractions();_context43.next=100;break;case 67:_context43.t3=pageType;_context43.next=_context43.t3===1?70:_context43.t3===21?70:_context43.t3===2?72:_context43.t3==="leadPage"?72:_context43.t3===15?72:_context43.t3===4?74:_context43.t3==="checkoutPage"?74:_context43.t3===3?78:_context43.t3==="upsellPage"?78:_context43.t3===7?82:_context43.t3==="login"?82:_context43.t3===8?84:_context43.t3==="Profile"?84:_context43.t3===9?86:_context43.t3==="memberAreaPage"?86:_context43.t3===10?88:_context43.t3==="cancelMembership"?88:_context43.t3===11?90:_context43.t3==="restartMembership"?90:_context43.t3===12?92:_context43.t3==="updateCard"?92:_context43.t3===13?94:_context43.t3==="changeProduct"?94:_context43.t3===31?96:_context43.t3==="pauseMembership"?96:98;break;case 70:navigationFromPresell(targetPageType,route);return _context43.abrupt("break",100);case 72:importLead(buttonId,route);return _context43.abrupt("break",100);case 74:_context43.next=76;return importOrder(buttonId,route,paypalSdkPrePaidType,null,openElementFormDetails,userOrderDetails,amazonV2CheckoutTriggerData);case 76:_response11=_context43.sent;return _context43.abrupt("break",100);case 78:_context43.next=80;return importUpsale(buttonId,route,null,true,amazonV2CheckoutTriggerData);case 80:_response11=_context43.sent;return _context43.abrupt("break",100);case 82:window.clubLogin&&clubLogin(buttonId,clubId,productData);return _context43.abrupt("break",100);case 84:window.updateMember&&updateMember(route,clubId);return _context43.abrupt("break",100);case 86:window.memberRoute&&memberRoute(productData);return _context43.abrupt("break",100);case 88:window.cancelMembership&&cancelMembership(route);return _context43.abrupt("break",100);case 90:window.restartMembership&&restartMembership(route);return _context43.abrupt("break",100);case 92:window.updateCard&&updateCard(productData);return _context43.abrupt("break",100);case 94:window.changeProduct&&changeProduct(route);return _context43.abrupt("break",100);case 96:window.pauseMembership&&pauseMembership(route);return _context43.abrupt("break",100);case 98:logPageAnalyticsOnNavigation(pageType,targetPageType);setCurrentWindowLocation(route);case 100:return _context43.abrupt("return",_response11);case 101:_context43.next=107;break;case 103:sessionStorage.removeItem("paySource");actionBtn=$("button[data-id='"+buttonId+"'], a[data-id='"+buttonId+"'], div[data-id='"+buttonId+"']");if(actionBtn&&actionBtn.length&&$(".fk-popup").find(actionBtn[0]).length){popup=$(actionBtn[0]).closest(".fk-popup");popupRequiredInputs=popup.find("input, select").filter(function(index){return $(this).is(":visible")&&($(this).attr("required")||$(this).attr("requiredtype"))&&$(this).val()===""});if(popupRequiredInputs&&popupRequiredInputs.length===0){id=popup.attr("id");hidePopUpBlock(id)}}enableInteractions();case 107:case"end":return _context43.stop()}},_callee38,null,[[10,14],[22,26]])}));return _callMethodApplyMain.apply(this,arguments)};callMethodApplyMain=function _callMethodApplyMain2(_x70,_x71){return _callMethodApplyMain.apply(this,arguments)};targetButton=$("[data-id="+btnId+"]");targetBtnTitle=targetButton.attr("title")||targetButton.prop("title");setPaySourceFromPaymentRadios(targetBtnTitle,btnId);if(!(window.ccDispatchPayPalFastlaneEvent&&ccDispatchPayPalFastlaneEvent(userOrderDetails,btnId))){_context44.next=7;break}return _context44.abrupt("return");case 7:if(!(window.ccDispatchStripeLinkEventAndSetPaySource&&ccDispatchStripeLinkEventAndSetPaySource(userOrderDetails,btnId))){_context44.next=9;break}return _context44.abrupt("return");case 9:_context44.prev=9;recaptchaPageId=pageData&&pageData.pageTypeId;btnPaySource=sessionStorage.getItem("paySource");if(!(window.grecaptcha&&window.grecaptcha.enterprise&&captchaProjectId&&captchaSiteKey&&captchaAssessmentKey&&captchaTrigger==="2"&&([7,2].includes(recaptchaPageId)||recaptchaPageId===4&&(!btnPaySource||btnPaySource==="CREDITCARD")))){_context44.next=34;break}if(checkRequiredInputs(null,btnId)){_context44.next=16;break}sessionStorage.removeItem("paySource");return _context44.abrupt("return",enableInteractions());case 16:targetButton.attr("disabled",true);if(!(captchaType==="2")){_context44.next=31;break}if(!($("[id^='"+"ccCaptcha"+"']").length&&grecaptcha.enterprise.getResponse())){_context44.next=24;break}_context44.next=21;return callMethodApplyMain(btnId,paypalSdkType);case 21:return _context44.abrupt("return",_context44.sent);case 24:$("[id^='"+"ccCaptcha"+"']").remove();uniqueId="ccCaptcha"+Math.random().toString(36).substring(7);$("<div id='"+uniqueId+"'></div>").insertBefore(targetButton);$("[id='"+uniqueId+"']").css("margin","10px 0");ccGenerateCaptchaToken(uniqueId,false,enableInteractions,function(){window.grecaptcha&&window.grecaptcha.enterprise&&window.grecaptcha.enterprise.reset&&window.grecaptcha.enterprise.reset()});case 29:_context44.next=32;break;case 31:ccGenerateCaptchaToken(null,true,/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee37(){return _regeneratorRuntime().wrap(function _callee37$(_context42){while(1)switch(_context42.prev=_context42.next){case 0:_context42.next=2;return callMethodApplyMain(btnId,paypalSdkType);case 2:case"end":return _context42.stop()}},_callee37)})),enableInteractions);case 32:_context44.next=37;break;case 34:_context44.next=36;return callMethodApplyMain(btnId,paypalSdkType);case 36:return _context44.abrupt("return",_context44.sent);case 37:_context44.next=44;break;case 39:_context44.prev=39;_context44.t0=_context44["catch"](9);sessionStorage.removeItem("paySource");enableInteractions();console.log(_context44.t0);case 44:;case 45:case"end":return _context44.stop()}},_callee39,null,[[9,39]])}));return _callMethodApply.apply(this,arguments)}function navigationFromPresell(targetPageType,route){// If Navigating to Lead page or Checkout page
if(targetPageType===2||targetPageType===4||targetPageType===15||targetPageType===1){registerClick(1,function(regClickData){setCurrentWindowLocation(route)})}else{setCurrentWindowLocation(route)}}function navigationFromLeadOrCheckout(targetPageType,route,pageType){// If Navigating to Lead page or Checkout page
if(targetPageType===2||targetPageType===4||targetPageType===1){registerClick(1,function(){setCurrentWindowLocation(route)})}else{setCurrentWindowLocation(route)}}function customItemCheck(customInputs,productId,section){customInputs.each(function(index,input){if(section&&document.getElementsByName("cardNumber").length){input.removeEventListener("change",getVariantsAndDisplay);input.addEventListener("change",getVariantsAndDisplay)}var checkThisInput=!$(input).closest(".fk-product-section")[0];if(section||input.value&&checkThisInput){var _customCart=addItemToCustomCart(productId,input);_customCart&&Object.keys(_customCart).length&&sessionStorage.setItem("customCart",JSON.stringify(_customCart))}})}function generateCustomItemData(buttonId,customInputs){if([4].includes(pageData.pageTypeId)){var currentItem=sessionStorage.getItem("currentItem");var _orderItems6=getOrderItems();for(var key in _orderItems6){currentItem=currentItem&&currentItem.split(".")[0];if(key.startsWith(currentItem+".")){currentItem=key}}var navProduct=getOfferFromNavigationItem(buttonId);var _productId6=currentItem?currentItem:navProduct?navProduct:"";customItemCheck(customInputs,_productId6)}}function ccSetPhoneDialCode(){if(phFormatByCountry==="true"){var dialCodeValue=$(".iti__selected-dial-code").first().html();if(dialCodeValue&&$("[name='phoneNumber']").first().val()){var _orderData4=sessionStorage.getItem("orderData");_orderData4=_orderData4?JSON.parse(_orderData4):{};if(!["COMPLETE","PENDING","COD_PENDING"].includes(_orderData4.orderStatus)){sessionStorage.setItem("ccPhoneDialCode",(dialCodeValue||"").replace(/\D/ig,""))}}}}function ccClearSessionCartData(){[2,4].includes(pageData.pageTypeId)&&sessionStorage.removeItem("fkCart")}function route(_x47){return _route2.apply(this,arguments)}function _route2(){_route2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee40(e){var elementTagName,pageType,routeAndClearCart,buttonCoupon,buttonDataID,buttonString,buttonText,button,customName,custom,buttonId,containerId,buttonItem,buttonData,targetData,targetPageType,offer,offerButtonElement,offerButtonVariantValue,_orderItems28,itemOfferKey,variantId,_itemOfferKey3,upsell,upsellButtonElement,upsellButtonVariantValue,_orderItems29,_itemOfferKey4,_offerButtonElement,_offerButtonVariantValue2,_orderItems30,_itemOfferKey5,_orderItems31,customInputs,_orderId8,url,isBuildOrTemplate,loginButtonData,_route6,funnelReferenceId,splitReferenceId,splitUrl,isMembershipPageType;return _regeneratorRuntime().wrap(function _callee40$(_context45){while(1)switch(_context45.prev=_context45.next){case 0:e.preventDefault();e.stopPropagation();elementTagName=e.target.tagName.toLowerCase();if(!(elementTagName==="button"&&e.detail!==1)){_context45.next=5;break}return _context45.abrupt("return");case 5:pageType=pageData.pageTypeId,routeAndClearCart=e.currentTarget.getAttribute("action")==="routeAndClearCart";buttonCoupon=e.currentTarget.getAttribute("coupon");buttonCoupon&&pageType===2&&sessionStorage.setItem("leadCouponCode",buttonCoupon);buttonDataID=e.currentTarget.dataset.id;buttonString=e.currentTarget.textContent||"";buttonText=buttonString.trimStart();if(elementTagName==="button"&&buttonDataID&&buttonDataID!==""){button=$("button[data-id='"+buttonDataID+"']")[0];if(button.parentNode.nodeName==="SECTION"){customName=button.parentNode.attributes.customName?button.parentNode.attributes.customName.value:"";if(customName!==""){customName=customName.replace(" ","_");custom="custom_"+customName;sessionStorage.setItem(custom,button.innerHTML)}}}buttonId=e.currentTarget.dataset.id;containerId=ccCheckSubmitLeadOnPopup(buttonId);if(!containerId){_context45.next=19;break}if(!(containerId===true)){_context45.next=17;break}return _context45.abrupt("return");case 17:_context45.next=19;return captureLead(true,containerId);case 19:buttonItem=getNavigationItemFromPageData(buttonId);_context45.prev=20;buttonData=getButtonOrLinkData(buttonItem,pageType);_context45.next=28;break;case 24:_context45.prev=24;_context45.t0=_context45["catch"](20);alert(_context45.t0);return _context45.abrupt("return");case 28:targetData=pageData.funnelData.pages.find(function(item){return item.pageView[0].referenceId===buttonData.targetPageViewReferenceId});if(targetData){_context45.next=32;break}routingNotFound();return _context45.abrupt("return");case 32:targetPageType=targetData.pageView[0].pageType;pageType===9&&targetPageType!==4&&sessionStorage.getItem("ccCampaignId")&&sessionStorage.removeItem("ccCampaignId");if(!(!routeAndClearCart&&targetPageType===4&&!checkRequiredInputs(null,buttonId))){_context45.next=37;break}enableInteractions();return _context45.abrupt("return");case 37:if(pageType===17||pageType===18){sessionStorage.removeItem("currentItem");offer=getOfferFromNavigationItem(buttonId);if(offer){offerButtonElement=document.querySelector("[data-id="+buttonId+"]");offerButtonVariantValue=offerButtonElement.getAttribute("variantvalue");if(targetPageType===33){if(!routeAndClearCart){_orderItems28=getOrderItems();if(offerButtonVariantValue){itemOfferKey=offer+"."+offerButtonVariantValue}else{itemOfferKey=offer}itemOfferKey=isSubscribeOn?swapSubscriptions(_orderItems28,"",itemOfferKey).sectionValue:itemOfferKey;_orderItems28[itemOfferKey]=getQuantity();sessionStorage.setItem("fkCart",JSON.stringify(_orderItems28));callAddToCartEvent(itemOfferKey)}}else{variantId=getVariants("","",true,"","",buttonId);variantId=offerButtonVariantValue||variantId;if(variantId){_itemOfferKey3=offer+"."+variantId;sessionStorage.setItem("currentItem",_itemOfferKey3)}else{sessionStorage.setItem("currentItem",offer)}}}}else if(pageType===3&&!routeAndClearCart){if(!buttonText.toLowerCase().startsWith("no")){getVariants()}}else if(!routeAndClearCart){getBundleVariants({},0);getVariants()}if(!routeAndClearCart&&pageType===3&&targetPageType===3){upsell=getUpsellFromNavigationItem(buttonId);upsellButtonElement=document.querySelector("[data-id="+buttonId+"]");upsellButtonVariantValue=upsellButtonElement.getAttribute("variantvalue");_orderItems29=sessionStorage.getItem("upsalefkCart")!==null?JSON.parse(sessionStorage.getItem("upsalefkCart")):{};if(upsell){if(upsellButtonVariantValue){_itemOfferKey4=upsell+"."+upsellButtonVariantValue;_orderItems29[_itemOfferKey4]=getQuantity()}else{_orderItems29[upsell]=getQuantity()}sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems29))}}if(!(targetPageType===4)){_context45.next=45;break}_context45.t1=!containerId&&[4,7].includes(pageType);if(!_context45.t1){_context45.next=44;break}_context45.next=44;return captureLead(true);case 44:if(!routeAndClearCart){offer=getOfferFromNavigationItem(buttonId);_offerButtonElement=document.querySelector("[data-id="+buttonId+"]");_offerButtonVariantValue2=_offerButtonElement.getAttribute("variantvalue");_orderItems30=getOrderItems();if(offer){if(_offerButtonVariantValue2){_itemOfferKey5=offer+"."+_offerButtonVariantValue2}else{_itemOfferKey5=offer}_itemOfferKey5=isSubscribeOn?swapSubscriptions(_orderItems30,"",_itemOfferKey5).sectionValue:_itemOfferKey5;_orderItems30[_itemOfferKey5]=getQuantity();sessionStorage.setItem("fkCart",JSON.stringify(_orderItems30));callAddToCartEvent(_itemOfferKey5)}else if(pageType===34&&buttonText.toLowerCase()!="proceed to checkout"){_orderItems31=getOrderItems();offer=sessionStorage.getItem("currentItem");offer=isSubscribeOn?swapSubscriptions(_orderItems31,"",offer).sectionValue:offer;_orderItems31[offer]=getQuantity();sessionStorage.setItem("fkCart",JSON.stringify(_orderItems31));callAddToCartEvent(offer)}else if(pageType===4&&document.getElementsByName("cardNumber").length&&$(e.target).closest(".popup_content").length)sessionStorage.removeItem("fkCart")}case 45:customInputs=$(document).find("input[name^='custom_item_']");customInputs.length&&generateCustomItemData(buttonId,customInputs);if(!(targetPageType===32||targetPageType===27)){_context45.next=54;break}_orderId8=sessionStorage.getItem("orderId");url=addValuesInExternalURL(targetData.externalURL);if(pageType===5){url=addOrderIdInExternalURL(url,_orderId8)}routeAndClearCart&&ccClearSessionCartData();setCurrentWindowLocation(url);return _context45.abrupt("return");case 54:isBuildOrTemplate=checkBuildOrTemplate();if(isBuildOrTemplate){loginButtonData=getLoginPageButtonData(pageData.funnelData,pageType,buttonItem);if(loginButtonData){buttonData=loginButtonData}_route6=redirectPath(buttonData,true);setCurrentWindowLocation(_route6)}else{funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;splitReferenceId=targetData&&targetData.splitReferenceId||"";splitUrl=targetData.splitEnabled?determineSplit(funnelReferenceId,splitReferenceId):redirectPath(buttonData);if(targetPageType===23){window.openPopupIFrame&&openPopupIFrame(splitUrl)}else{isMembershipPageType=isMembershipPage(pageType);if(isMembershipPageType){routeAndClearCart&&ccClearSessionCartData();window.memberRoute&&memberRoute(buttonItem)}else if(pageType===1||pageType===21){routeAndClearCart&&ccClearSessionCartData();navigationFromPresell(targetPageType,splitUrl)}else if(pageType===2||pageType===4){routeAndClearCart&&ccClearSessionCartData();navigationFromLeadOrCheckout(targetPageType,splitUrl,pageType)}else{logPageAnalyticsOnNavigation(pageType,targetPageType);routeAndClearCart&&ccClearSessionCartData();setCurrentWindowLocation(splitUrl)}}}case 56:case"end":return _context45.stop()}},_callee40,null,[[20,24]])}));return _route2.apply(this,arguments)}function ccCheckSubmitLeadOnPopup(dataId){if(!dataId||(pageData&&pageData.pageTypeId)!==4)return;var routeBtn=$("[data-id="+dataId+"]");var containerId=routeBtn.attr("action")==="submitLeadRoute"&&routeBtn.closest(".popup_content").attr("id");if(containerId){var _orderData5=sessionStorage.getItem("orderData");_orderData5=_orderData5?JSON.parse(_orderData5):null;if(_orderData5&&_orderData5.orderStatus&&_orderData5.orderStatus.toLowerCase()!=="partial"){return}else if(!checkRequiredInputs(containerId)){return true}}return containerId}function linkMethod(event,submitAction,loginRedirectUrl,uniqueBtnId){event.preventDefault();if(event.target.tagName.toLowerCase()=="select")return;var linkCoupon=event.currentTarget.getAttribute("coupon");linkCoupon&&pageData.pageTypeId===2&&sessionStorage.setItem("leadCouponCode",linkCoupon);var elementDataId=event.currentTarget&&event.currentTarget.dataset.id,routeAndClearCart=event.currentTarget.getAttribute("action")==="routeAndClearCart";if(event.detail!==1||event.target.tagName==="IMG"&&event.target.getAttribute("href")||event.target.getAttribute("action")==="addToCart"){return}if(submitAction){if(ccRequireProductSectionQtyValue(elementDataId))return;event.target.style.pointerEvents="none";var title=event.target.title;setPaySourceFromPaymentRadios(title,elementDataId);if(title&&prepaidGateways.includes(title.toUpperCase())){sessionStorage.setItem("paySource",title.toUpperCase())}}var elementTextContent=event.currentTarget&&event.currentTarget.textContent;function linkMethodMain(_x48,_x49,_x50,_x51,_x52,_x53){return _linkMethodMain.apply(this,arguments)}function _linkMethodMain(){_linkMethodMain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(e,submit,loginRedirect,elementDataId,elementTextContent,uniqueBtnId){var pageType,buttonId,linkString,linkText,buttonItem,buttonData,linkId,linkData,linkObj,containerId,linkTarget,loginLinkHref,_route3,currentUrl,_pageType,pageReferenceId,requiredPageRefId,targetData,splitReferenceId,targetPageType,funnelReferenceId,_route4,_orderId5,customInputs,upsell,upsellButtonElement,upsellButtonVariantValue,_orderItems7,itemOfferKey,offer,offerButtonElement,_offerButtonVariantValue,_orderItems8,_itemOfferKey,productCardContainerParent,offerButtonVariantValue,variantId,_itemOfferKey2,linkHref,_funnelReferenceId;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:pageType=pageData.pageTypeId;buttonId=elementDataId;linkString=elementTextContent||"";linkText=linkString.trimStart();// let buttonData = pageData[buttonId].NEXT_PAGE;
// const linkId = e.target.dataset.id ? e.target.dataset.id : e.target.parentNode.getAttribute("data-id");
// let linkData = pageData[linkId].NEXT_PAGE;
buttonItem=getNavigationItemFromPageData(buttonId);containerId=ccCheckSubmitLeadOnPopup(buttonId);if(!containerId){_context7.next=11;break}if(!(containerId===true)){_context7.next=9;break}return _context7.abrupt("return");case 9:_context7.next=11;return captureLead(true,containerId);case 11:_context7.prev=11;buttonData=getButtonOrLinkData(buttonItem,pageType);linkId=buttonId?buttonId:$(e.target).closest("[data-id]")[0]?$($(e.target).closest("[data-id]")[0]).attr("data-id"):undefined;linkObj=getNavigationItemFromPageData(linkId);linkData=getButtonOrLinkData(linkObj,pageType);_context7.next=22;break;case 18:_context7.prev=18;_context7.t0=_context7["catch"](11);alert(_context7.t0);return _context7.abrupt("return");case 22:if(!(submit&&pageData.pageTypeId===4&&window.fflPopUpRequired&&fflPopUpRequired(linkId))){_context7.next=27;break}enableInteractions();window.updateFFLModalButtonCSS&&updateFFLModalButtonCSS(linkId);showFFLPopUp();return _context7.abrupt("return");case 27:linkTarget=linkObj?linkObj.target||$("[data-id="+linkObj.elementId+"]").attr("target"):null;if(!(linkObj&&linkObj.href&&loginRedirect)){_context7.next=32;break}loginLinkHref=linkObj.href+"?redirectToMe="+getCurrentWindowLocation().href;linkTarget==="_blank"?window.open(loginLinkHref,""):setCurrentWindowLocation(loginLinkHref);return _context7.abrupt("return");case 32:submit&&disableInteractions(linkId,false,true,uniqueBtnId);if(!(pageData.funnelData&&pageData.funnelData.isFunnelTemplate)){_context7.next=56;break}if(!submit){_context7.next=52;break}if(!checkRequiredInputs(null,linkId)){_context7.next=48;break}_context7.t1=pageType;_context7.next=_context7.t1===2?39:_context7.t1==="leadPage"?39:_context7.t1===15?39:_context7.t1===4?41:_context7.t1==="checkoutPage"?41:_context7.t1===3?43:_context7.t1==="upsellPage"?43:45;break;case 39:importLead(linkId,route);return _context7.abrupt("break",46);case 41:importOrder(linkId,route);return _context7.abrupt("break",46);case 43:importUpsale(linkId,route,null,true);return _context7.abrupt("break",46);case 45:setCurrentWindowLocation(route);case 46:_context7.next=50;break;case 48:sessionStorage.removeItem("paySource");enableInteractions();case 50:_context7.next=54;break;case 52:routeAndClearCart&&ccClearSessionCartData();if(linkObj.href){linkTarget==="_blank"?window.open(linkObj.href,""):setCurrentWindowLocation(linkObj.href)}else{_route3=redirectPath(buttonData,true);linkTarget==="_blank"?window.open(_route3,""):setCurrentWindowLocation(_route3)}case 54:_context7.next=100;break;case 56:currentUrl=getCurrentWindowLocation().href;_pageType=pageData.pageTypeId;pageReferenceId=pageData.currentPage.referenceId;requiredPageRefId=!linkData.targetPageViewReferenceId&&_pageType===3&&submit?pageData.pageViewReferenceId:linkData.targetPageViewReferenceId;targetData=pageData.funnelData.pages.find(function(item){return item.pageView[0].referenceId===requiredPageRefId});if(targetData){_context7.next=64;break}routingNotFound();return _context7.abrupt("return");case 64:splitReferenceId=targetData.splitReferenceId;targetPageType=targetData.pageView[0].pageType;funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;_route4=targetData.splitEnabled?determineSplit(funnelReferenceId,splitReferenceId):redirectPath(linkData);if(targetPageType===32||targetPageType===27){_route4=targetData.externalURL;_orderId5=sessionStorage.getItem("orderId");if(_orderId5){_route4=addOrderIdInExternalURL(_route4,_orderId5)}else if(_pageType==15||_pageType==4){_route4=addOrderIdInExternalURL(_route4,"__ORDERID__")}}if(!submit){_context7.next=96;break}if(!checkRequiredInputs(null,linkId)){_context7.next=92;break}if(!(targetPageType===23)){_context7.next=76;break}window.openPopupIFrame&&openPopupIFrame(_route4);enableInteractions();_context7.next=90;break;case 76:_context7.t2=_pageType;_context7.next=_context7.t2===1?79:_context7.t2===21?79:_context7.t2===2?81:_context7.t2==="leadPage"?81:_context7.t2===15?81:_context7.t2===4?83:_context7.t2==="checkoutPage"?83:_context7.t2===3?85:_context7.t2==="upsellPage"?85:_context7.t2===13?87:_context7.t2==="changeProduct"?87:89;break;case 79:navigationFromPresell(targetPageType,_route4);return _context7.abrupt("break",90);case 81:importLead(linkId,_route4);return _context7.abrupt("break",90);case 83:importOrder(linkId,_route4);return _context7.abrupt("break",90);case 85:importUpsale(linkId,_route4,null,true);return _context7.abrupt("break",90);case 87:window.changeProduct&&changeProduct(_route4);return _context7.abrupt("break",90);case 89:setCurrentWindowLocation(_route4);case 90:_context7.next=94;break;case 92:sessionStorage.removeItem("paySource");enableInteractions();case 94:_context7.next=100;break;case 96:customInputs=$(document).find("input[name^='custom_item_']");customInputs.length&&generateCustomItemData(buttonId,customInputs);_pageType===9&&targetPageType!==4&&sessionStorage.getItem("ccCampaignId")&&sessionStorage.removeItem("ccCampaignId");if(targetPageType===23){routeAndClearCart&&ccClearSessionCartData();window.openPopupIFrame&&openPopupIFrame(_route4)}else{if(!routeAndClearCart&&_pageType===3&&targetPageType===3){upsell=getUpsellFromNavigationItem(buttonId);upsellButtonElement=document.querySelector("[data-id="+buttonId+"]");upsellButtonVariantValue=upsellButtonElement.getAttribute("variantvalue");if(!linkText.toLowerCase().startsWith("no")){getVariants()}_orderItems7=sessionStorage.getItem("upsalefkCart")!==null?JSON.parse(sessionStorage.getItem("upsalefkCart")):{};if(upsell){if(upsellButtonVariantValue){itemOfferKey=upsell+"."+upsellButtonVariantValue;_orderItems7[itemOfferKey]=getQuantity()}else{_orderItems7[upsell]=getQuantity()}sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems7))}}if(!routeAndClearCart&&targetPageType===4){offer=getOfferFromNavigationItem(buttonId);offerButtonElement=document.querySelector("[data-id="+buttonId+"]");_offerButtonVariantValue=offerButtonElement.getAttribute("variantvalue");getVariants();_orderItems8=getOrderItems();if(offer&&![17,18].includes(_pageType)){if(_offerButtonVariantValue){_itemOfferKey=offer+"."+_offerButtonVariantValue}else{_itemOfferKey=offer}_itemOfferKey=isSubscribeOn?swapSubscriptions(_orderItems8,"",_itemOfferKey):_itemOfferKey;_orderItems8[_itemOfferKey]=getQuantity();sessionStorage.setItem("fkCart",JSON.stringify(_orderItems8));callAddToCartEvent(_itemOfferKey)}else if(_pageType===4&&document.getElementsByName("cardNumber").length&&$(e.target).closest(".popup_content").length)sessionStorage.removeItem("fkCart")}if(_pageType===17||_pageType===18||_pageType===33){offer="";productCardContainerParent=$(e.target).closest(".fk-product-card-container").parent();if((_pageType===17||_pageType===18)&&(e.target.parentElement.tagName=="A"||productCardContainerParent.prop("tagName")==="A")){offer=productCardContainerParent.length?productCardContainerParent.attr("offer"):e.target.parentElement.attributes.offer.value}else{offer=e.target.attributes.offer&&e.target.attributes.offer.value||""}sessionStorage.removeItem("currentItem");if(Number(offer)){offerButtonVariantValue="";variantId=getVariants("","",true,"","",buttonId);if((_pageType===17||_pageType===18)&&e.target.parentElement.tagName=="A"){offerButtonVariantValue=e.target.parentElement.attributes.variantvalue.value}else{offerButtonVariantValue=e.target.attributes.variantvalue&&e.target.attributes.variantvalue.value||""}variantId=offerButtonVariantValue||variantId;if(variantId){_itemOfferKey2=offer+"."+variantId;sessionStorage.setItem("currentItem",_itemOfferKey2)}else{sessionStorage.setItem("currentItem",offer)}}}if(_pageType===2||_pageType===4){!routeAndClearCart&&getBundleVariants({},0);if(targetPageType===2||targetPageType===4){registerClick(1)}}if(!routeAndClearCart&&(_pageType===1||_pageType===21)){getVariants();getBundleVariants({},0)}logPageAnalyticsOnNavigation(_pageType,targetPageType);linkHref=linkObj&&linkObj.href;routeAndClearCart&&ccClearSessionCartData();if(linkHref){linkHref=loginRedirect?linkHref+"?redirectToMe="+currentUrl:linkHref;linkTarget==="_blank"?window.open(linkHref,""):setCurrentWindowLocation(linkHref)}else{_route4=loginRedirect?_route4+"?redirectToMe="+currentUrl:_route4;_funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;linkTarget==="_blank"?window.open(_route4,""):setCurrentWindowLocation(_route4)}}case 100:case"end":return _context7.stop()}},_callee7,null,[[11,18]])}));return _linkMethodMain.apply(this,arguments)}try{var recaptchaPageId=pageData&&pageData.pageTypeId;var btnPaySource=sessionStorage.getItem("paySource");if(submitAction&&window.grecaptcha&&window.grecaptcha.enterprise&&captchaProjectId&&captchaSiteKey&&captchaAssessmentKey&&captchaTrigger==="2"&&([7,2].includes(recaptchaPageId)||recaptchaPageId===4&&(!btnPaySource||btnPaySource==="CREDITCARD"))){if(!checkRequiredInputs(null,elementDataId)){sessionStorage.removeItem("paySource");return enableInteractions()}var targetButton=$("[data-id='"+elementDataId+"']");targetButton.attr("disabled",true);if(captchaType==="2"){if($("[id^='"+"ccCaptcha"+"']").length&&grecaptcha.enterprise.getResponse()){linkMethodMain(event,submitAction,loginRedirectUrl,elementDataId,elementTextContent,uniqueBtnId)}else{$("[id^='"+"ccCaptcha"+"']").remove();var uniqueId="ccCaptcha"+Math.random().toString(36).substring(7);$("<div id='"+uniqueId+"'></div>").insertBefore(targetButton);$("[id='"+uniqueId+"']").css("margin","10px 0");ccGenerateCaptchaToken(uniqueId,false,enableInteractions,function(){window.grecaptcha&&window.grecaptcha.enterprise&&window.grecaptcha.enterprise.reset&&window.grecaptcha.enterprise.reset()})}}else{ccGenerateCaptchaToken(null,true,function(){linkMethodMain(event,submitAction,loginRedirectUrl,elementDataId,elementTextContent,uniqueBtnId)},enableInteractions)}}else{linkMethodMain(event,submitAction,loginRedirectUrl,elementDataId,elementTextContent,uniqueBtnId)}}catch(err){sessionStorage.removeItem("paySource");enableInteractions();console.log(err)};}function fetchLeadDetails(obj){var addressField=$("[name=address1]");var useShippingInputs=$("[name=shipAddress1]").length&&addressField.length&&addressField[0].offsetHeight===0;if(obj.billShipSame===1&&obj.address1&&!useShippingInputs){if(document.getElementsByName("fullName")[0]){var fullName=document.getElementsByName("fullName")[0].value.trim();var pos=fullName.indexOf(" ");obj.shipFirstName=pos>-1?fullName.substring(0,pos):fullName;obj.shipLastName=pos>-1?fullName.substring(pos+1):null}else{obj.shipFirstName=document.getElementsByName("firstName")[0]?document.getElementsByName("firstName")[0].value:null;obj.shipLastName=document.getElementsByName("lastName")[0]?document.getElementsByName("lastName")[0].value:null}obj.shipAddress1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;obj.shipAddress2=document.getElementsByName("address2")[0]?document.getElementsByName("address2")[0].value:null;obj.shipCity=document.getElementsByName("city")[0]?document.getElementsByName("city")[0].value:null;obj.shipState=document.getElementsByName("state")[0]?document.getElementsByName("state")[0].value:null;obj.shipPostalCode=document.getElementsByName("postalCode")[0]?document.getElementsByName("postalCode")[0].value:null;obj.shipCountry=document.getElementsByName("country")[0]?document.getElementsByName("country")[0].value:null}else{var _orderData6=JSON.parse(sessionStorage.getItem("orderData"));if(document.getElementsByName("shipFullName")[0]){var _fullName=document.getElementsByName("shipFullName")[0].value.trim();var _pos=_fullName.indexOf(" ");obj.shipFirstName=_pos>-1?_fullName.substring(0,_pos):_fullName;obj.shipLastName=_pos>-1?_fullName.substring(_pos+1):null}else{obj.shipFirstName=document.getElementsByName("shipFirstName")[0]?document.getElementsByName("shipFirstName")[0].value:_orderData6&&_orderData6.shipFirstName?_orderData6.shipFirstName:null;obj.shipLastName=document.getElementsByName("shipLastName")[0]?document.getElementsByName("shipLastName")[0].value:_orderData6&&_orderData6.shipLastName?_orderData6.shipLastName:null}obj.shipAddress1=document.getElementsByName("shipAddress1")[0]?document.getElementsByName("shipAddress1")[0].value:_orderData6&&_orderData6.shipAddress1?_orderData6.shipAddress1:null;obj.shipAddress2=document.getElementsByName("shipAddress2")[0]?document.getElementsByName("shipAddress2")[0].value:_orderData6&&_orderData6.shipAddress2?_orderData6.shipAddress2:null;obj.shipCity=document.getElementsByName("shipCity")[0]?document.getElementsByName("shipCity")[0].value:_orderData6&&_orderData6.shipCity?_orderData6.shipCity:null;obj.shipState=document.getElementsByName("shipState")[0]?document.getElementsByName("shipState")[0].value:_orderData6&&_orderData6.shipState?_orderData6.shipState:null;obj.shipPostalCode=document.getElementsByName("shipPostalCode")[0]?document.getElementsByName("shipPostalCode")[0].value:_orderData6&&_orderData6.shipPostalCode?_orderData6.shipPostalCode:null;obj.shipCountry=document.getElementsByName("shipCountry")[0]?document.getElementsByName("shipCountry")[0].value:_orderData6&&_orderData6.shipCountry?_orderData6.shipCountry:defaultCountryCode;if(obj.billShipSame===1){obj.country=obj.shipCountry;if(obj.shipFirstName){obj.firstName=obj.shipFirstName;obj.lastName=obj.shipLastName;obj.address1=obj.shipAddress1;obj.address2=obj.shipAddress2;obj.city=obj.shipCity;obj.postalCode=obj.shipPostalCode}if(document.getElementsByName("state")[0])obj.state=obj.shipState;//override the geo-located state if no address is entered
}}}function handlePopUpOnScroll(popupBlock){var popupId=popupBlock.getAttribute("id");var minutesDelay=popupBlock.querySelector("[data-minutesdelay]")?Number(popupBlock.querySelector("[data-minutesdelay]").getAttribute("data-minutesdelay")):0;var secondsDelay=popupBlock.querySelector("[data-secondsdelay]")?popupBlock.querySelector("[data-secondsdelay]").getAttribute("data-secondsdelay"):0;var delay=minutesDelay>0?minutesDelay*60+secondsDelay+"000":secondsDelay+"000";document.getElementById(popupId).setAttribute("style","display:none");document.getElementsByTagName("html")[0].style="overflow-y: unset";setTimeout(function(delay){document.getElementById(popupId).setAttribute("style","display:block");document.getElementsByTagName("html")[0].style="overflow-y: hidden"},delay)}window.onscroll=function(){var stickyBar=document.getElementById("stickyBarCustom");var toShowOnScroll=stickyBar&&stickyBar.getAttribute("data-showonscroll")==="yes"?true:false;if(toShowOnScroll){if(window.scrollY>100){document.getElementById("stickyBarCustom").setAttribute("style","display:block")}else{document.getElementById("stickyBarCustom").setAttribute("style","display:none")}}var popupBlock=$(".fk-popup").has("[trigger-on='trigger_on_scroll']")[0];if(popupBlock&&popupBlock.querySelector("[data-showonscroll]")&&popupBlock&&popupBlock.querySelector("[data-showonscroll]").getAttribute("data-showonscroll")==="true"){if(isVisitedOnScroll){handlePopUpOnScroll(popupBlock);isVisitedOnScroll=false}}if(ccIsVisitedOnScrollUp){var offset=window.pageYOffset||document.documentElement.scrollTop;if(offset<ccScrollOffset){var scrollUpPopupBlock=$(".fk-popup").has("[trigger-on='trigger_on_scroll_up']")[0];var scrollUpPopupBody=scrollUpPopupBlock&&scrollUpPopupBlock.querySelector("[data-showonscroll]");if(scrollUpPopupBody&&scrollUpPopupBody.getAttribute("data-showonscrollup")==="true"){handlePopUpOnScroll(scrollUpPopupBlock);ccIsVisitedOnScrollUp=false}}ccScrollOffset=offset<=0?0:offset}if($(".fk-product-row[lazyload='1']").length&&fkCollectionSize&&scrolledCardsCount<fkCollectionSize&&!fkCollectionLoader){if(window.scrollY+window.innerHeight>=$(".fk-product-row").prop("scrollHeight")){fkCollectionLoader=true;var productRow=multiCollectionMenu?$(".fk-product-row[link='".concat(ccCurrentCollectonId,"']")):$(".fk-product-row");fkConfiguredProductCol=multiProdColMap[ccCurrentCollectonId]||fkConfiguredProductCol;$(productCardLoaderHTML).insertAfter(productRow);var nextIndex=scrolledCardsCount+scrollCardsSlotSize;sessionStorage.setItem("productRowCardsCount",nextIndex);var sectionHasVariants=productRow&&$(productRow[0]).find(".fk-variant-tile")[0];setTimeout(function(){populateProductRow(fkProductCollection.slice(scrolledCardsCount,nextIndex),fkConfiguredProductCol,productRow,sectionHasVariants);$(".fk-product-col").css("visibility","visible");loadVariants();setRadioTilesOnLoad();scrolledCardsCount=nextIndex;$("#infiniteCardLoader").remove();fkCollectionLoader=false},2000)}}};function calcTheProductInvoiceAmount(ele,key){$("input[name^=\"product\"]").each(function(){if($(this).is(":checked")){var id=$(this).val();var product=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==id});if(product.length===1&&product.length>0){price+=product[0][key]!=null?parseFloat(product[0][key]):0}else{$.each(product,function(i,product){price+=product[key]!=null?parseFloat(product[0][key]):0})}}});ele.innerText=parseFloat(price).toFixed(2)}function downloadURL(event,buttonObj){event.preventDefault();if(event.detail!==1){return}var URL=$(buttonObj).attr("data-downloadurl");if(URL){var linkElement=document.createElement("a");linkElement.href=URL;linkElement.download=true;linkElement.target="blank";document.body.appendChild(linkElement);linkElement.click();document.body.removeChild(linkElement)}else{alert("No URL found")}}function registerPageAnalytics(clickType,pageReferenceId){try{var _response=false;var analyticsReference=sessionStorage.getItem("analyticsReference");analyticsReference=analyticsReference?JSON.parse(analyticsReference):{};var pageRefData=analyticsReference[pageReferenceId];if(pageRefData){if(clickType===1&&pageRefData===1){analyticsReference[pageReferenceId]=2;_response=true}}else{analyticsReference[pageReferenceId]=1;_response=true}sessionStorage.setItem("analyticsReference",JSON.stringify(analyticsReference));return _response}catch(error){console.log(error)}}function registerClick(clickType,callback,pageInfo){var validCallback=callback&&typeof callback==="function";var pageId=pageInfo?pageInfo.pageTypeId:pageData&&pageData.pageTypeId;var pagesWithMissingOrderData=[3,5];var stringifyOrderData=sessionStorage.getItem("orderData");stringifyOrderData=stringifyOrderData!==null?stringifyOrderData:"";var orderDataOnUpsellAndThankYouPage=pagesWithMissingOrderData.includes(pageId)&&!stringifyOrderData;var skipConversionEvent=stringifyOrderData?preventConversionEvent(JSON.parse(stringifyOrderData),pageId):false;if(orderDataOnUpsellAndThankYouPage||skipConversionEvent){validCallback&&callback();return}var stringifysessionId=sessionStorage.getItem("sessionId");stringifysessionId=stringifysessionId!==null?stringifysessionId:"";var sessionIdValue=sessionStorage.getItem("ccExternalSessionId")||"";var funnelReferenceId=pageData.funnelData?pageData.funnelData.referenceId:null;var pageReferenceId=pageInfo?pageInfo.referenceId:pageData.currentPage.referenceId;var logPageAnalytics=registerPageAnalytics(clickType,pageReferenceId+"-"+sessionIdValue);if(!document.URL.includes("funnels-build")&&logPageAnalytics){var pageTrackerData=JSON.stringify({"sessionStartDateTime":sessionStorage.getItem("sessionStartDateTime")||"","sessionId":stringifysessionId,"requestUri":sessionStorage.getItem("requestUri")||"","httpReferer":sessionStorage.getItem("httpReferer")||"","orderData":stringifyOrderData,"customerOrders":sessionStorage.getItem("customerOrders")||"","products":sessionStorage.getItem("products")||"","userDetails":sessionStorage.getItem("userDetails")||"","dateTimeNow":new Date().toJSON()});var url="".concat(providerUrl,"/SplitTest/clicks/")+funnelReferenceId+"/"+pageReferenceId+"/"+clickType;var MAX_PAYLOAD_SIZE=64*1024;var blobData=new Blob([pageTrackerData]);var beaconSuccess=false;if(blobData.size<=MAX_PAYLOAD_SIZE&&navigator.sendBeacon){beaconSuccess=navigator.sendBeacon(url,pageTrackerData)}if(beaconSuccess){validCallback&&callback()}else{fallBackAnalytics(url,pageTrackerData,validCallback,callback)}return}validCallback&&callback()}function fallBackAnalytics(url,pageTrackerData,validCallback,callback){httpMethod(url,pageTrackerData,getDefaultHeaders(true)).then(function(data){validCallback&&callback(data)})["catch"](function(err){validCallback&&callback(err)})}function previewURL(event){var URL=$(event).attr("data-previewurl");window.open(URL,"_blank")}function checkVariantConfig(productSection){var productVariants=$(productSection).find("[name='variant1'], [name='variant2'], [name='variant3']").filter("select");for(var _i54=productVariants.length-1;_i54>=0;_i54--){if(productVariants[_i54].style.display==="none"){productVariants.splice(_i54,1)}}var productVariantsTiles=$(productSection).find(".variant-label1, .variant-label2, .variant-label3").filter("[data-selected='true']");productVariants=[].concat(_toConsumableArray(productVariantsTiles),_toConsumableArray(productVariants));return productVariants.length>0}function loadProductsToCart(orderItems){var productSelects=_toConsumableArray(document.getElementsByName("productSelect"));var productInputs=[].concat(_toConsumableArray(document.getElementsByName("product")),_toConsumableArray(productSelects));for(var _i55=1;_i55<=2;_i55++){var inputSelector="product"+_i55;productInputs=[].concat(_toConsumableArray(productInputs),_toConsumableArray(document.getElementsByName(inputSelector)))}if(productInputs){var deletedItems=[];var bundleItems=sessionStorage.getItem("bundleItems")!==null?JSON.parse(sessionStorage.getItem("bundleItems")):{};var bundleStringArray=sessionStorage.getItem("bundleStringArray")!==null?JSON.parse(sessionStorage.getItem("bundleStringArray")):{};//set the unchecked boxes
productInputs.forEach(function(product){var productValue=product.getAttribute("value");var productDetails=pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.filter(function(product){return product.campaignProductId==productValue});var productSection=$(product).closest(".fk-product-section")[0];var productVariantElement=product.closest(".fk-product-variant-select");var isVariantSelectsTiles=productSection&&checkVariantConfig(productSection);var variantValue=!productVariantElement&&isVariantSelectsTiles&&productDetails&&productDetails[0]&&productDetails[0].variants.length?getVariants(productSection.id,"",true):"";variantValue=product.getAttribute("variantvalue")||variantValue;var quantity=product.getAttribute("quantity");if(productValue&&product.tagName.toLowerCase()==="input"){if(variantValue){productValue=productValue+"."+variantValue}if(!product.checked){if(Object.keys(bundleItems).length){bundleItems[productValue]&&delete bundleItems[productValue];bundleStringArray[productValue]&&delete bundleStringArray[productValue];for(var _i56=0,_Object$keys=Object.keys(orderItems);_i56<_Object$keys.length;_i56++){var key=_Object$keys[_i56];if(key.split(".")[0]===productValue.split(".")[0]){delete orderItems[key];orderItems=removeSubscriptionProduct(orderItems,key)}}}if(orderItems[productValue]&&(!quantity||orderItems[productValue]==quantity)){deletedItems[productValue]=orderItems[productValue];delete orderItems[productValue]}orderItems=removeSubscriptionProduct(orderItems,productValue)}}});sessionStorage.setItem("bundleItems",JSON.stringify(bundleItems));sessionStorage.setItem("bundleStringArray",JSON.stringify(bundleStringArray));//set the checked boxes
productInputs.forEach(function(product){var productSelectValue=product.value;var productValue=product.getAttribute("value");var variantValue=product.getAttribute("variantvalue");var quantity=product.getAttribute("quantity");if(product.name==="productSelect"){var productSection=$(product).closest(".fk-product-section")[0];var orderBump=productSection&&$(productSection).closest(".bump-div-class")[0];var isOrderBumpChecked=orderBump&&$(orderBump).find("input[type='checkbox']")[0].checked;var productVariants=productSection&&$(productSection).find("[name='variant1'], [name='variant2'], [name='variant3']").filter("select");if((!productSection&&!orderBump||isOrderBumpChecked&&!productVariants.length)&&productSelectValue!==""&&!orderItems[productSelectValue]){var _quantity=productSection&&productSection.querySelectorAll("input[name='quantity'], select[name='quantity']");orderItems[productSelectValue]=_quantity&&_quantity[0]?_quantity[0].value:1;if(prevProdSelectValue&&prevProdSelectValue!==productSelectValue){delete orderItems[prevProdSelectValue];orderItems=removeSubscriptionProduct(orderItems,prevProdSelectValue)}prevProdSelectValue=productSelectValue}}if(productValue&&product.tagName.toLowerCase()==="input"){var productDetails=pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.filter(function(product){return product.campaignProductId==productValue});var productVariantDetails=productDetails&&productDetails[0]&&productDetails[0].variants.length&&!productDetails[0].isVariantBundle;var _productSection=$(product).closest(".fk-product-section")[0];var productVariantElement=product.closest(".fk-product-variant-select");var ignoreSection=!productVariantElement&&_productSection&&productVariantDetails&&!variantValue;var ccVariantBundle=document.getElementsByClassName("cc-bundle-variants")[0];var classesToCheck=["fk-variant-bundle3","fk-variant-bundle4","fk-variant-bundle6"];var separateVariants=_productSection&&classesToCheck.some(function(cls){return _productSection.classList.contains(cls)});var bundleQty=0;productValue=variantValue?productValue+"."+variantValue:productValue;if((!checkedElement||checkedElement.id!==product.id)&&product.checked&&separateVariants){mapBundleVariant(productDetails,_productSection);checkedElement=product}var qtyInput=separateVariants?$(ccVariantBundle).find("[name=\"quantity\"]"):[];for(var _i57=0;_i57<qtyInput.length;_i57++){if(Number(qtyInput[_i57].value)){bundleQty=qtyInput[_i57].value;break}}if(!ignoreSection&&product.checked&&(!qtyInput.length||bundleQty)){if(productVariantElement&&(!checkedElement||checkedElement.id!==product.id)){constructProductVariantElement(product,productVariantElement);checkedElement=product;var productTile=$(product).closest("section")[0];productValue=productTile&&productTile.value+"."+productTile.variantvalue}if(!orderItems[productValue]||quantity&&orderItems[productValue]!=quantity){orderItems[productValue]=quantity?quantity:deletedItems[productValue]?deletedItems[productValue]:1}}}});updateReplacementProducts(orderItems)}return orderItems}function getOrderItems(){var loadProducts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var orderItems={};var fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;if(fkCart&&Object.keys(fkCart).length>0){for(var sessionItemCpId in fkCart){orderItems[sessionItemCpId]=fkCart[sessionItemCpId]}}var notAnUpsellPage=pageData&&pageData.pageTypeId!==3;if(loadProducts&&notAnUpsellPage){orderItems=loadProductsToCart(orderItems)}orderItems=isSubscribeOn||isSubscribeOn===false||twoWaySubscription?swapSubscriptions(orderItems):orderItems;while(urlProdOrderTracker.length){var id=urlProdOrderTracker[0];trackProductOrder(id,orderItems);urlProdOrderTracker.splice(0,1)}for(var _id in orderItems){trackProductOrder(_id,orderItems)}notAnUpsellPage&&sessionStorage.setItem("fkCart",JSON.stringify(orderItems));return orderItems}function getUpsaleItems(){var paySource=sessionStorage.getItem("paySource");var orderItems=sessionStorage.getItem("upsalefkCart")!==null?JSON.parse(sessionStorage.getItem("upsalefkCart")):{};orderItems=loadProductsToCart(orderItems);if(paySource==="PAYPAL"&&sessionStorage.getItem("paypalUpsaleCart")){if(sessionStorage.getItem("upsalePaypalToken")&&sessionStorage.getItem("upsalePaypalPayerId")){orderItems=JSON.parse(sessionStorage.getItem("paypalUpsaleCart"))}}sessionStorage.setItem("upsalefkCart",JSON.stringify(orderItems));return orderItems}function mergeOfferUpsale(upsaleItems){var orderItems={};var fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;if(fkCart&&Object.keys(fkCart).length){for(var sessionItemCpId in fkCart){orderItems[sessionItemCpId]=fkCart[sessionItemCpId]}}if(upsaleItems&&Object.keys(upsaleItems).length){for(var upsaleItem in upsaleItems){orderItems[upsaleItem]=upsaleItems[upsaleItem]}}sessionStorage.setItem("fkCart",JSON.stringify(orderItems));sessionStorage.removeItem("upsalefkCart")}function getOrderItemDetails(){var loadProducts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var orderItems=getOrderItems(loadProducts);var stringOrderItems=JSON.stringify(orderItems);if(glOrderItems==stringOrderItems){return glDetailedOrderItems}glOrderItems=stringOrderItems;var products=pageData&&pageData.selectedCampaign?pageData.selectedCampaign.products:null;var detailedOrderItems={};if(products&&Object.keys(orderItems).length>0){var _loop15=function _loop15(){var sessionItemCpId=campaignProductId;var sessionItemVarId=0;if(sessionItemCpId.indexOf(".")>0){var _productData7=sessionItemCpId.split(".");sessionItemCpId=_productData7[0];sessionItemVarId=_productData7[1]}var productDetails=products.filter(function(data){return data.campaignProductId===parseInt(sessionItemCpId)});if(Object.keys(productDetails).length>0){var obj=JSON.parse(JSON.stringify(productDetails[0]));//deep clone
obj=getMemberPrice(obj);detailedOrderItems[campaignProductId]=obj;detailedOrderItems[campaignProductId]["currentOrderQuantity"]=orderItems[campaignProductId];if(obj.variants&&sessionItemVarId>0){var variantDetails=obj.variants.filter(function(data){return data.variantDetailId===parseInt(sessionItemVarId)});if(Object.keys(variantDetails).length>0){var _variantDetails$;variantDetails[0]=getMemberPrice(variantDetails[0],campaignProductId);detailedOrderItems[campaignProductId]["variant"]=variantDetails[0];detailedOrderItems[campaignProductId]["externalVariantDetailId"]=(_variantDetails$=variantDetails[0])===null||_variantDetails$===void 0?void 0:_variantDetails$.externalVariantDetailId;if(obj.isEditable){detailedOrderItems[campaignProductId]["variant"]["price"]=obj.cycle1_price;detailedOrderItems[campaignProductId]["variant"]["shippingPrice"]=obj.cycle1_shipPrice}}}}else{delete orderItems[campaignProductId];orderItems=removeSubscriptionProduct(orderItems,campaignProductId)}};for(var campaignProductId in orderItems){_loop15()}var _orderData7=JSON.stringify(orderItems);sessionStorage.setItem("fkCart",_orderData7);var multiPayRebillsEnabled=getAddOnKeyValue(findAddOn("multiPayRebills"));if(!multiPayRebillsEnabled&&prevOrderItems!==_orderData7){prevOrderItems=_orderData7;var afterpayButton=document.querySelectorAll(".afterpayButton");var afterPayPara=document.querySelectorAll("afterpay-placement");var display="block";if((afterpayButton||afterPayPara)&&orderItems&&Object.keys(orderItems).length>0){for(var itemId in orderItems){for(var _i58=0;_i58<Object.keys(products).length;_i58++){if(products[_i58].campaignProductId==itemId.split(".")[0]){if(products[_i58].billingCycleType==="RECURRING"){display="none";break}}}if(display==="none")break}}afterpayButton&&afterpayButton.forEach(function(btn){btn.style.display=display==="block"?"inline-block":"none"});afterPayPara&&afterPayPara.forEach(function(ele){ele.style.display=display})}}glDetailedOrderItems=detailedOrderItems;return detailedOrderItems}function populateProductVariants(variants){if(variants.length>0){for(var key in variants){var productvariants=pageData.selectedCampaign.products.find(function(data){return data.productId===parseInt(variants[key].productId)});if(productvariants){if(!productvariants.variants){pageData.selectedCampaign.products.find(function(data){return data.productId===parseInt(variants[key].productId)}).variants=[]}pageData.selectedCampaign.products.find(function(data){return data.productId===parseInt(variants[key].productId)}).variants.push(variants[key])}}}}function setOrderItemDetails(){var variationIds=[];var orderItems=getOrderItems();var products=pageData&&pageData.selectedCampaign?pageData.selectedCampaign.products:null;if(products&&Object.keys(orderItems).length>0){var _loop16=function _loop16(){var sessionItemCpId=campaignProductId;var sessionItemVarId=0;if(sessionItemCpId.indexOf(".")>0){var _productData8=sessionItemCpId.split(".");sessionItemCpId=_productData8[0];sessionItemVarId=_productData8[1]}var productDetails=products.filter(function(data){return data.campaignProductId===parseInt(sessionItemCpId)});if(Object.keys(productDetails).length>0){var obj=JSON.parse(JSON.stringify(productDetails[0]));//deep clone
if((!obj.variants||obj.variants.length===0)&&sessionItemVarId>0){variationIds.push(sessionItemVarId)}}};for(var campaignProductId in orderItems){_loop16()}}return variationIds}function populateVariantAsync(variantDetailId){var params={};params.variantDetailId=variantDetailId;var variantParam=JSON.stringify(params);return httpMethod("".concat(providerUrl,"/Import/Product/Variant"),variantParam)}function getMemberPrice(obj,campaignProductId){//look through all the cart products. Do any of them have a club?
obj.isMemberShipping=false;if(obj.memberPricing&&obj.memberPricing.length>0){var clubId=cookieData["clubId"];var membershipInfo=JSON.parse(sessionStorage.getItem("clubMemberships"));var clubProductId=membershipInfo?membershipInfo.map(function(product){return product.actualProductId})[0]:null;var _orderData8=JSON.parse(sessionStorage.getItem("orderData"));var activeMembership=false;if(_orderData8){activeMembership=_orderData8.activeMembership?_orderData8.activeMembership:null;if(activeMembership){clubId=clubId?clubId:activeMembership.clubId;clubProductId=clubProductId?clubProductId:activeMembership.clubProductId}}if(!clubProductId){var purchases=sessionStorage.getItem("customerPurchases")?JSON.parse(sessionStorage.getItem("customerPurchases")):null;if(purchases&&Object.keys(purchases).length>0){var purchaseEntries=Object.entries(purchases);var purchaseEntriesLength=purchaseEntries.length;for(var _i59=0;_i59<purchaseEntriesLength;_i59++){var purchase=purchaseEntries[_i59][1];if(["ACTIVE","TRIAL"].includes(purchase.status)&&purchase.clubPluginId==clubId){clubProductId=purchase.actualProductId;break}}}}fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;if(!clubProductId&&fkCart&&Object.keys(fkCart).length>0){var _loop17=function _loop17(sessionItemCpId){var productDetails=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId===parseInt(sessionItemCpId.split(".")[0])});if(Object.keys(productDetails).length>0){if(productDetails[0].clubPluginId){clubId=productDetails[0].clubPluginId;clubProductId=productDetails[0].productId;return 1;// break
}}};for(var sessionItemCpId in fkCart){if(_loop17(sessionItemCpId))break}}if(clubId&&clubProductId){var memberPrice=obj.memberPricing.find(function(data){return data.clubPluginId==clubId&&data.clubProductId==clubProductId});if(memberPrice){if(obj.variantDetailId){obj.compareAtPrice=obj.price;obj.price=memberPrice.price;obj.shippingPrice=memberPrice.shipPrice;if(campaignProductId){ccMemberPriceProductMap["".concat(campaignProductId,".").concat(obj.variantDetailId)]=true}}else{obj.compareAtPrice=obj.cycle1_price;obj.cycle1_price=memberPrice.price;obj.cycle1_shipPrice=memberPrice.shipPrice;ccMemberPriceProductMap[obj.campaignProductId]=true}obj.isMemberShipping=memberPrice.isMemberShipping;if(memberPrice.isFreeShipping)obj.isFreeShipping=memberPrice.isFreeShipping;obj.memberPriceApplied=true}}}return obj}function isValidDiscount(priceStr){if(priceStr==="---")return false;var numericPart=parseFloat(priceStr.replace(/[^\d.-]/g,""));return numericPart!==0}function getDiscounts(couponCode,orderItems,defaultCoupon,preventDefaultCouponRemoval,defaultCouponApplied){if(!couponCode||Object.keys(orderItems).length===0)return new Promise(function(resolve,reject){resolve(false)});var validCouponCodes=couponCode;if(defaultCouponApplied&&preventDefaultCouponRemoval){validCouponCodes=defaultCoupon+","+validCouponCodes.split(",").filter(function(item){return item!==defaultCoupon}).join(",")}var params={};var index=0;var orderDataValue=sessionStorage.getItem("orderData");var orderData=orderDataValue?JSON.parse(orderDataValue):null;var orderItemEntries=Object.entries(orderItems);var orderItemEntriesLength=orderItemEntries.length;for(var _i60=0;_i60<orderItemEntriesLength;_i60++){var campaignProductId=orderItemEntries[_i60][0];if(!Number(campaignProductId))continue;var _item5=orderItemEntries[_i60][1];index++;if(campaignProductId.indexOf(".")>0){var _productData9=campaignProductId.split(".");params["product"+index+"_id"]=_productData9[0];params["variant"+index+"_id"]=_productData9[1]}else{params["product"+index+"_id"]=campaignProductId}params["product"+index+"_qty"]=_item5.currentOrderQuantity;if(altValues[campaignProductId+"|"+_item5.currentOrderQuantity])params["product"+index+"_alt"]=getItemAlt(campaignProductId,_item5.currentOrderQuantity)}params=getBundleVariants(params,index).params;params.campaignId=pageData.selectedCampaign.campaignId;params.couponCode=validCouponCodes;var shippingProfileId=getCurrentShipProfile();params.shipProfileId=shippingProfileId&&shippingProfileId.includes("pickup-")?null:shippingProfileId;if(params.shipProfileId&&params.shipProfileId.indexOf(":")>0){var shipData=params.shipProfileId.split(":");params.shipProfileId=null;params.shipCarrier=shipData[1];params.shipMethod=shipData[3]}var shipAddress=getShipProfileAddress();params.shipState=shipAddress.state;params.shipCountry=shipAddress.country;if(cookieData["access_token"]&&cookieData["customerId"]){params.customerId=cookieData["customerId"]}if(!params.customerId&&orderData){params.customerId=orderData.customerId}params.currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;params.cartId=pageData.pageTypeId===4?sessionStorage.getItem("cartId"):null;var couponParams=JSON.stringify(params);var existingParams=sessionStorage.getItem("couponParams");if(couponParams!==existingParams&&params.shipCountry){ccHandleLoader();sessionStorage.setItem("couponParams",couponParams);var requestId=++ccPageDiscountAPIRequestId;var _response2=httpMethod("".concat(providerUrl,"/Import/Coupon"),couponParams).then(function(data){if(data.result==="SUCCESS"){var couponCodes=validCouponCodes&&validCouponCodes.trim().split(",");var couponCodesLength=couponCodes.length;var amtToReduce=0;var responseCoupons=data.message.coupons;var couponsExist=responseCoupons&&Object.keys(responseCoupons).length>0;var discountCal=data.message.priceDiscount;var ret={couponCode:"",priceDiscount:discountCal>=0?discountCal:0,shipDiscount:data.message.shipDiscount?data.message.shipDiscount:0,coupMessage:"",coupons:[]};if(couponsExist){var _i61=0;var _products3=pageData.selectedCampaign.products;var couponEntries=Object.entries(responseCoupons);var couponEntriesLength=couponEntries.length;for(var j=0;j<couponEntriesLength;j++){var code=couponEntries[j][0];var isDefaultCoupon=code===defaultCoupon&&preventDefaultCouponRemoval;var coupon=couponEntries[j][1];var coupProd=coupon.products==="whole order"?"Order":getCouponProductNames(_products3,coupon);if(isValidDiscount(coupon.discount)){ret.coupMessage+="<span style='color:green;font-weight:bold;'>"+code+"</span> ";ret.coupMessage+=coupon.discount+" off "+(coupon.appliesTo=="shipping"?"shipping ":"")+"on "+coupProd+(isDefaultCoupon||$("input[type=checkbox][name=product][coupon='"+code+"' i]:checked").length?"<br>":" <span style='color:red;font-weight:bold;cursor:pointer;' onclick='removeCoupon("+_i61+")'>X</span><br>")}ret.coupons.push(code);_i61++}}if(responseCoupons&&Object.keys(responseCoupons).length!==couponCodesLength||!responseCoupons){var validCoupons=Object.keys(responseCoupons||[]);var invalidCoupons=[];for(var _i62=0;_i62<pageData.selectedCampaign.couponMax;_i62++){if(couponCodes[_i62]&&!validCoupons.includes(couponCodes[_i62].trim().toUpperCase())){invalidCoupons.push(couponCodes[_i62])}}var invalidCouponsLength=invalidCoupons.length;if(invalidCouponsLength>0){for(var _j=0;_j<invalidCouponsLength;_j++){var _code=invalidCoupons[_j];if(!(_code===defaultCoupon)){ret.coupMessage+="<span class='"+commonErrorClass+"' style='color:red;font-weight:bold;'>"+_code+"</span><span>, please enter a valid coupon code.</span><br>"}}}}if(requestId===ccPageDiscountAPIRequestId){sessionStorage.setItem("discountsObj",JSON.stringify(ret))}else{return sessionStorage.getItem("discountsObj")?JSON.parse(sessionStorage.getItem("discountsObj")):0}return ret}else{ccHandleLoader(true);alert(data.message);return sessionStorage.getItem("discountsObj")?JSON.parse(sessionStorage.getItem("discountsObj")):false}});return _response2}var discounts=sessionStorage.getItem("discountsObj")?JSON.parse(sessionStorage.getItem("discountsObj")):{couponCode:"",priceDiscount:0,shipDiscount:0,coupMessage:"",coupons:appliedCouponCode};return Promise.resolve(discounts)}function getCouponProductNames(products,coupon){var couponProducts=coupon.products.trim().split(",");var couponLabel="";var _loop18=function _loop18(key){var productName=products.find(function(row){return row.campaignProductId===parseInt(couponProducts[key])}).productName;if(productName)couponLabel+=productName+", "};for(var key in couponProducts){_loop18(key)}return couponLabel.slice(0,-2)}function applyCoupon(e){e.preventDefault();var existingCouponCodes=appliedCouponCode;var isEmptyCoupon=true;appliedCouponCode=[];var couponInputs=document.getElementsByName("couponCode");couponInputs.forEach(function(input){if(input.value){isEmptyCoupon=false;var couponCodes=input.value.trim().split(",");couponCodes=couponCodes.concat(existingCouponCodes);couponCodes=couponCodes.filter(function(couponCode){return couponCode.trim().length>0});couponCodes=couponCodes.map(function(couponCode){return couponCode.trim()});// remove whitespaces
couponCodes=couponCodes.filter(function(couponCode,index,coupons){return coupons.indexOf(couponCode)==index});// remove duplicates
if(couponCodes.length>0){appliedCouponCode=couponCodes}else{var coupMessage=document.getElementsByName("coupMessage");if(coupMessage.length){removeItems(coupMessage)}}input.value=""}});if(isEmptyCoupon)appliedCouponCode=existingCouponCodes;else displayPrices()}function removeCoupon(index){var revisedCouponCodes=[];var cCodes=appliedCouponCode?appliedCouponCode:[];for(var i in cCodes){if(i!=index)revisedCouponCodes.push(cCodes[i])}appliedCouponCode=revisedCouponCodes.length>0?revisedCouponCodes:[];document.getElementsByName("couponCode")[0].value=revisedCouponCodes.length>0?revisedCouponCodes.join():[];document.getElementsByName("coupMessage").forEach(function(messageArea){messageArea.innerHTML=""});displayPrices()}//returns shipping profile settings and rules based on selected shipProfileId or campaign's default shipping profile
//used in calculateTotals function as part of price display calculations
function getCurrentShipProfile(){//use shipProfileId input value if available
var profileInputs=document.getElementsByName("shipProfileId");var shipProfileId=profileInputs[0]&&(profileInputs[0].type!=="checkbox"||profileInputs[0].checked)?profileInputs[0].value:null;if(profileInputs.length>1){profileInputs.forEach(function(profile){if(profile.type==="radio"&&profile.checked){shipProfileId=profile.value}})}return shipProfileId}function getShipProfile(){var shipProfileId=getCurrentShipProfile();if(shipProfileId&&shipProfileId.indexOf(":")>0){return shipProfileId}//selectedCampaign shipProfiles property will be empty array when no shipping profiles configured in campaign
if(pageData.selectedCampaign.shipProfiles.length===0&&!globalStoreDetails.length)return null;//use campaign's default shipping profile if configured when no shipping profile selected
if((shipProfileId===""||shipProfileId===null)&&pageData.selectedCampaign.defaultShipProfileId!==null){shipProfileId=pageData.selectedCampaign.defaultShipProfileId}if(shipProfileId){var profile=pageData.selectedCampaign.shipProfiles.find(function(data){return data.shipProfileId===parseInt(shipProfileId)});if(typeof shipProfileId=="string"&&shipProfileId.startsWith("pickup-")){shipProfileId=shipProfileId.substring(7);profile=globalStoreDetails.find(function(data){return data.storePickupId===parseInt(shipProfileId)})}return profile?profile:null}else{return null}}//returns shipping address object with country, state, and continent properties
//used by applyShipProfileProductRules and getShipProfileOrderPrice functions to determine application of shipping profile regional price rules
function getShipProfileAddress(){var fastlaneShipAddress=window.ccPayPalFastlaneShipProfileAddress&&ccPayPalFastlaneShipProfileAddress();if(fastlaneShipAddress)return fastlaneShipAddress;var stripeLinkShipAddress=window.ccPayStripeLinkShipProfileAddress&&ccPayStripeLinkShipProfileAddress();if(stripeLinkShipAddress)return stripeLinkShipAddress;var shipAddress={};var orderData=JSON.parse(sessionStorage.getItem("orderStatusInfo")||sessionStorage.getItem("orderData"));var billShipSameElement=$("[type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").first();var billShipSameElementLength=billShipSameElement.length;var billShipSame=billShipSameElement.prop("checked");//use shipCountry input if available OR country input if available and billing and shipping addresses are the same OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("shipCountry")[0]){shipAddress.country=document.getElementsByName("shipCountry")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("country")[0]){shipAddress.country=document.getElementsByName("country")[0].value}else if(orderData&&orderData.shipCountry){shipAddress.country=orderData.shipCountry}else if(!billShipSameElementLength&&document.getElementsByName("country")[0]){shipAddress.country=document.getElementsByName("country")[0].value}else if(orderData&&orderData.country){shipAddress.country=orderData.country}else{shipAddress.country=defaultCountryCode}//use shipState input if available OR state input if available and billing and shipping addresses are the same OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("shipState")[0]){shipAddress.state=document.getElementsByName("shipState")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("state")[0]){shipAddress.state=document.getElementsByName("state")[0].value}else if(orderData&&orderData.shipState){shipAddress.state=orderData.shipState}else if(!billShipSameElementLength&&document.getElementsByName("state")[0]){shipAddress.state=document.getElementsByName("state")[0].value}else if(orderData&&orderData.state){shipAddress.state=orderData.state}else{shipAddress.state=""}//use shipCity input if available OR city input if available and billing and shipping addresses are the same OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("shipCity")[0]){shipAddress.city=document.getElementsByName("shipCity")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("city")[0]){shipAddress.city=document.getElementsByName("city")[0].value}else if(orderData&&orderData.shipCity){shipAddress.city=orderData.shipCity}else if(!billShipSameElementLength&&document.getElementsByName("city")[0]){shipAddress.city=document.getElementsByName("city")[0].value}else if(orderData&&orderData.city){shipAddress.city=orderData.city}else{shipAddress.city=""}//use shipAddress1 input if available OR address1 input if available and billing and shipping addresses are the same OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("shipAddress1")[0]){shipAddress.address1=document.getElementsByName("shipAddress1")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("address1")[0]){shipAddress.address1=document.getElementsByName("address1")[0].value}else if(orderData&&orderData.shipAddress1){shipAddress.address1=orderData.shipAddress1}else if(!billShipSameElementLength&&document.getElementsByName("address1")[0]){shipAddress.address1=document.getElementsByName("address1")[0].value}else if(orderData&&orderData.address1){shipAddress.address1=orderData.address1}else{shipAddress.address1=""}if(document.getElementsByName("shipAddress2")[0]){shipAddress.address2=document.getElementsByName("shipAddress2")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("address2")[0]){shipAddress.address2=document.getElementsByName("address2")[0].value}else if(orderData&&orderData.shipAddress2){shipAddress.address2=orderData.shipAddress2}else if(!billShipSameElementLength&&document.getElementsByName("address2")[0]){shipAddress.address2=document.getElementsByName("address2")[0].value}else if(orderData&&orderData.address2){shipAddress.address2=orderData.address2}else{shipAddress.address2=""}//use shipPostalCode input if available OR postalCode input if available and billing and shipping addresses are the same OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("shipPostalCode")[0]){shipAddress.postalCode=document.getElementsByName("shipPostalCode")[0].value}else if(billShipSameElementLength&&billShipSame&&document.getElementsByName("postalCode")[0]){shipAddress.postalCode=document.getElementsByName("postalCode")[0].value}else if(orderData&&orderData.shipPostalCode){shipAddress.postalCode=orderData.shipPostalCode}else if(!billShipSameElementLength&&document.getElementsByName("postalCode")[0]){shipAddress.postalCode=document.getElementsByName("postalCode")[0].value}else if(orderData&&orderData.postalCode){shipAddress.postalCode=orderData.postalCode}else{shipAddress.postalCode=""}//use phoneNumber input if available OR use value set on previous page OR empty string when no value already set
if(document.getElementsByName("phoneNumber")[0]){if(phFormatByCountry==="true"){shipAddress.phoneNumber=document.getElementsByClassName("iti__selected-dial-code")[0]?document.getElementsByClassName("iti__selected-dial-code")[0].innerHTML+document.getElementsByName("phoneNumber")[0].value:"";shipAddress.phoneNumber=shipAddress.phoneNumber?shipAddress.phoneNumber.replace(/^\+?1-?/g,"").replace(/[\(\)\-\s]/g,""):""}else{shipAddress.phoneNumber=document.getElementsByName("phoneNumber")[0].value}}else if(orderData&&orderData.phoneNumber){shipAddress.phoneNumber=orderData.phoneNumber}else{shipAddress.phoneNumber=""}//set the continent from selectedCampaign countries based on shipping address country
shipAddress.continent="";if(shipAddress.country){var selectedCampaignCountry=pageData.selectedCampaign.countries.find(function(data){return data.countryCode===shipAddress.country});if(selectedCampaignCountry)shipAddress.continent=selectedCampaignCountry.continent}if(orderData&&orderData.firstName){shipAddress.firstName=orderData.firstName}if(orderData&&orderData.lastName){shipAddress.lastName=orderData.lastName}return shipAddress}//returns orderItems array with updated shipping prices after applying ship profile rules
//used by calculateTotals function when a shipping profile is set and does not apply one shipping price to the entire order
function applyShipProfileProductRules(shipProfile,items){var shipProfileRules=shipProfile.rules;var update=false;//skip this block when ship profile has no regional or product price rules
if(shipProfileRules!==null){//get the shipping address state, country, and continent needed to determine application of regional price rules
var shipAddress=getShipProfileAddress();//loop through the order items and update cycle1_shipPrice based on any applicable price rules
var itemsEntries=Object.entries(items);var itemsEntriesLength=itemsEntries.length;for(var _i63=0;_i63<itemsEntriesLength;_i63++){var prod=itemsEntries[_i63][1];prod.itemCountThreshold=null;var appliedRule=null;//the ship profile with the most specific applicable price rule that will be applied to item's shipping price
var maxPStrength=0;//used to determine the most specific product price rule - Ex: campaign product specific rule has higher strength (5) than rule that applies to all products (1)
var maxRStrength=0;//used to determine the most specific regional rule - Ex: rule that applies only to state of Georgia has higher strength (3) than rule that applies to all of North America (1)
//loop through shipProfile rules and determine the most specific applicable rule if any
var shipProfileRulesLength=shipProfileRules&&shipProfileRules.length;var _loop19=function _loop19(){var rule=shipProfileRules[j];if(!verifyShipProfileThresholds(rule))return 0;// continue
var tags=prod.productTags&&prod.productTags.split(",")||[];var ruleTags=rule.productTypeSelect==="TAGS"&&rule.productTags&&rule.productTags.split(",")||[];var tag=tags.filter(function(ele){return ruleTags.includes(ele)});if(ruleTags.length&&!tag.length)return 0;// continue
var pStrength=0;//rule's product strength
var rStrength=0;//rule's region strength
//if rule matches shipping address continent OR country and/or state, assign that regional strength value
if(rule.region){//region value of rules that apply to entire continent all start with "REG_"
if(rule.region.substr(0,4)==="REG_"){if(rule.region.substr(4,2)!==shipAddress.continent)return 0;// continue
rStrength=1}else if(rule.zoneId){var zone=pageData.selectedCampaign.zones.find(function(data){return data.zoneId==rule.zoneId});if(zone&&zone.countryCodes.indexOf(shipAddress.country)>-1){rStrength=2;if(zone.stateCodes){if(shipAddress.state&&zone.stateCodes.indexOf(shipAddress.state)>-1){rStrength=3}else{return 0;// continue
}}}else{return 0;// continue
}}else{if(rule.region===shipAddress.country){rStrength=2;if(rule.state){if(rule.state===shipAddress.state){rStrength=3}else{return 0;// continue
}}}else{return 0;// continue
}}}if(rStrength>=maxRStrength){maxRStrength=rStrength}else{return 0;// continue
}if(rule.productTypeSelect==="SINGLE"&&prod.campaignProductId==rule.campaignProductId){pStrength=5}else if(rule.productTypeSelect==="TAGS"){pStrength=4}else if(rule.productTypeSelect==="CATEGORY"&&prod.productCategoryId==rule.productCategoryId){pStrength=4}else if(rule.productTypeSelect==="OFFERS"&&prod.productType==="OFFER"){pStrength=3}else if(rule.productTypeSelect==="UPSELLS"&&prod.productType==="UPSALE"){pStrength=2}else if(rule.productTypeSelect==="PRODUCTS"){pStrength=1}if(pStrength>maxPStrength){appliedRule=rule;maxPStrength=pStrength}else if(pStrength>0&&pStrength==maxPStrength&&evaluateShipThresholds(appliedRule,rule)){appliedRule=rule;maxPStrength=pStrength}},_ret3;for(var j=0;j<shipProfileRulesLength;j++){_ret3=_loop19();if(_ret3===0)continue}//apply any applicable price rule - if upcharge, rule price is added to current item shipping price - otherwise, rule price overrides current item shipping price
prod.isUpcharge=false;if(appliedRule&&prod.cycle1_isShippable){update=true;var variantShipPrice=void 0;if(!prod.isMemberShipping){if(shipProfile.isUpcharge){prod.isUpcharge=true;prod.cycle1_shipPrice=parseFloat(prod.shippingPrice)+parseFloat(appliedRule.shipPrice);if(prod.variant&&parseFloat(prod.variant.shippingPrice)>0){variantShipPrice=prod.variant["shipPrice"]=prod.variant.shipPrice||prod.variant.shippingPrice;prod.variant.shippingPrice=parseFloat(variantShipPrice)+parseFloat(appliedRule.shipPrice)}}else{prod.cycle1_shipPrice=parseFloat(appliedRule.shipPrice);if(prod.variant&&parseFloat(prod.variant.shippingPrice)>0){prod.variant.shippingPrice=parseFloat(appliedRule.shipPrice)}prod.itemCountThreshold=appliedRule.itemCountThreshold?appliedRule.itemCountThreshold:null}}}}}//shipProfiles that only bill the highest shipping price item
if(shipProfile.highestShipPriceOnly){var maxShipCampaignProductId=null;//campaign product ID of item with highest shipping price
var maxShipPrice=0;//highest item shipping price
//loop through order items and determine which item has the highest shipping price
for(var _i64 in items){var _prod=items[_i64];var shipPrice=_prod.variant&&parseFloat(_prod.variant.shippingPrice)>0&&!_prod.isVariantBundle?_prod.variant.shippingPrice:_prod.cycle1_shipPrice;shipPrice=parseFloat(shipPrice);if(shipPrice>maxShipPrice){maxShipCampaignProductId=_i64;maxShipPrice=shipPrice}}//set the shipping price of all other items to zero
for(var _i65 in items){if(_i65!==maxShipCampaignProductId){items[_i65].cycle1_shipPrice=0;if(items[_i65].variant){items[_i65].variant.shippingPrice=0}}}}return{update:update,items:items}}//returns shipping price for the entire order
//used by calculateTotals function when a shipping profile is set and applies one shipping price to the entire order
function getShipProfileOrderPrice(shipProfile){var shipProfileRules=shipProfile.rules;if(shipProfileRules===null)return 0;//get the shipping address state, country, and continent needed to determine application of regional price rules
var shipAddress=getShipProfileAddress();var appliedRule=null;//the ship profile with the most specific applicable price rule that will be applied to item's shipping price
var maxRStrength=0;//used to determine the most specific regional rule - Ex: rule that applies only to state of Georgia has higher strength (3) than rule that applies to all of North America (1)
//loop through shipProfile rules and determine the most specific applicable rule if any
var shipProfileRulesLength=shipProfileRules.length;var _loop20=function _loop20(){var rule=shipProfileRules[_i66];if(!verifyShipProfileThresholds(rule))return 0;// continue
var rStrength=0;//rule's region strength
//if rule matches shipping address continent OR country and/or state, assign that regional strength value
if(rule.region){//region value of rules that apply to entire continent all start with "REG_"
if(rule.region.substr(0,4)==="REG_"){if(rule.region.substr(4,2)!==shipAddress.continent){return 0;// continue
}rStrength=1}else if(rule.zoneId){var zone=pageData.selectedCampaign.zones.find(function(data){return data.zoneId==rule.zoneId});if(zone&&zone.countryCodes.indexOf(shipAddress.country)>-1){rStrength=2;if(zone.stateCodes){if(shipAddress.state&&zone.stateCodes.indexOf(shipAddress.state)>-1){rStrength=3}else{return 0;// continue
}}}else{return 0;// continue
}}else{if(rule.region===shipAddress.country){rStrength=2;if(rule.state){if(rule.state===shipAddress.state){rStrength=3}else{return 0;// continue
}}}else{return 0;// continue
}}}if(rStrength>maxRStrength||rStrength==maxRStrength&&evaluateShipThresholds(appliedRule,rule)){maxRStrength=rStrength;appliedRule=rule}},_ret4;for(var _i66=0;_i66<shipProfileRulesLength;_i66++){_ret4=_loop20();if(_ret4===0)continue}return appliedRule?appliedRule.shipPrice:null}function evaluateShipThresholds(appliedRule,rule){//are the rule thresholds more applicable than the currently matched rule?
if(!appliedRule)return true;var valueThreshold=parseFloat(rule.valueThreshold);var weightThreshold=parseFloat(rule.weightThreshold);var maxWeightThreshold=parseFloat(rule.maxWeightThreshold);if(valueThreshold>0&&weightThreshold>0&&maxWeightThreshold>0)return valueThreshold>parseFloat(appliedRule.valueThreshold)&&weightThreshold>parseFloat(appliedRule.weightThreshold)&&maxWeightThreshold<parseFloat(appliedRule.maxWeightThreshold);if(valueThreshold>0&&weightThreshold>0)return valueThreshold>parseFloat(appliedRule.valueThreshold)&&weightThreshold>parseFloat(appliedRule.weightThreshold);if(valueThreshold>0&&maxWeightThreshold>0)return valueThreshold>parseFloat(appliedRule.valueThreshold)&&maxWeightThreshold<parseFloat(appliedRule.maxWeightThreshold);if(weightThreshold>0&&maxWeightThreshold>0)return weightThreshold>parseFloat(appliedRule.weightThreshold)&&maxWeightThreshold<parseFloat(appliedRule.maxWeightThreshold);if(valueThreshold>0)return valueThreshold>parseFloat(appliedRule.valueThreshold);if(weightThreshold>0)return weightThreshold>parseFloat(appliedRule.weightThreshold);if(maxWeightThreshold>0)return maxWeightThreshold<parseFloat(appliedRule.maxWeightThreshold);return false}function verifyShipProfileThresholds(rule){if(parseFloat(rule.valueThreshold)>0){var exchangeRate=sessionStorage.getItem("exchangeRate")!==null?sessionStorage.getItem("exchangeRate"):1;var valueThreshold=parseFloat((parseFloat(rule.valueThreshold)*exchangeRate).toFixed(2));var subTotal=0;var cartProducts=getOrderItemDetails();if(Object.keys(cartProducts).length>0){var cartProductsEntries=Object.entries(cartProducts);var cartProductsEntriesLength=cartProductsEntries.length;for(var _i67=0;_i67<cartProductsEntriesLength;_i67++){var _item6=cartProductsEntries[_i67][1];var unitPrice=_item6.variant&&parseFloat(_item6.variant.price)>0&&!_item6.isVariantBundle&&!_item6.isEditable?_item6.variant.price:_item6.cycle1_price;subTotal+=parseFloat(getItemPrice(cartProductsEntries[_i67][0],unitPrice,_item6.currentOrderQuantity).toFixed(2))}}if(valueThreshold>subTotal)return false}if(parseFloat(rule.weightThreshold)>0||parseFloat(rule.maxWeightThreshold)>0){var _subTotal=0;var _cartProducts=getOrderItemDetails();if(Object.keys(_cartProducts).length>0){var _cartProductsEntries=Object.entries(_cartProducts);var _cartProductsEntriesLength=_cartProductsEntries.length;for(var _i68=0;_i68<_cartProductsEntriesLength;_i68++){var _item7=_cartProductsEntries[_i68][1];var weight=_item7.variant&&parseFloat(_item7.variant.weight)>0&&!_item7.isVariantBundle?_item7.variant.weight:_item7.weight;var qty=_item7.variant&&parseFloat(_item7.variant.productQty)>1&&!_item7.isVariantBundle?_item7.variant.productQty:_item7.productQty;_subTotal+=parseFloat((weight*_item7.currentOrderQuantity*qty).toFixed(3))}}if(parseFloat(rule.weightThreshold)>_subTotal)return false;if(parseFloat(rule.maxWeightThreshold)>0&&parseFloat(rule.maxWeightThreshold)<=_subTotal)return false}return true}function getTaxRate(){var params=sessionStorage.getItem("taxData")!==null&&JSON.parse(sessionStorage.getItem("taxData"));var taxRate=params&&parseFloat(params.taxRate)||0;var vatTaxRate=params&&params.isVat?1+taxRate:1;var isVat=params&&params.isVat||false;var addVatToPrice=params&&params.addVatToPrice;var taxParams={isVat:isVat,vatTaxRate:vatTaxRate,taxRate:taxRate,addVatToPrice:addVatToPrice};return taxParams}function ccHandleLoader(stopLoader){var loaders=document.getElementsByClassName("ccGrandTotalLoader");!loaders[0]&&$(".grandTotal").append("<span class='ccGrandTotalLoader fa fa-spinner fa-pulse fa-lg m-r-xs'></span>");if(stopLoader){for(var _i69=loaders.length-1;_i69>=0;_i69--){loaders[_i69].remove()}}}function ccObjectDifferenceChecker(){var newObj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var oldObj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var bundleProductObj=JSON.parse(sessionStorage.getItem("bundleItems")||"{}");var data={},variantRegex=/^variant([0-9]+)_id$/,productRegex=/^product([0-9]+)_id$/,qtyRegex=/^product([0-9]+)_qty$/;var obj1Length=Object.keys(newObj).length,obj2Length=Object.keys(oldObj).length;var a=obj1Length>obj2Length?newObj:oldObj;var b=obj1Length>obj2Length?oldObj:newObj;for(var _i70 in a){if(a[_i70]!=b[_i70]){if(variantRegex.test(_i70)){var num=_i70.match(variantRegex)[1];if(bundleProductObj[newObj["product".concat(num,"_id")]]){continue}}else if(qtyRegex.test(_i70)){var _num=_i70.match(qtyRegex)[1];if(bundleProductObj[newObj["product".concat(_num,"_id")]]){continue}}else if(productRegex.test(_i70)&&bundleProductObj[newObj[_i70]]){continue}data[_i70]=newObj[_i70]}}return Object.keys(data).length}function ccGetUserPageParameters(orderItems,shippingContact){var params={},bundleParams;try{var _params$shipProfileId,_customerOrders$;var countryElement=document.getElementsByName("country")[0];if(document.getElementsByName("fullName")[0]){var fullName=document.getElementsByName("fullName")[0].value.trim();var pos=fullName.indexOf(" ");params.firstName=pos>-1?fullName.substring(0,pos):fullName;params.lastName=pos>-1?fullName.substring(pos+1):null}else{params.firstName=document.getElementsByName("firstName")[0]?document.getElementsByName("firstName")[0].value:null;params.lastName=document.getElementsByName("lastName")[0]?document.getElementsByName("lastName")[0].value:null}params.emailAddress=document.getElementsByName("emailAddress")[0]?document.getElementsByName("emailAddress")[0].value:null;params.shipProfileId=getCurrentShipProfile()||null;if((_params$shipProfileId=params.shipProfileId)!==null&&_params$shipProfileId!==void 0&&_params$shipProfileId.includes(":")){params.shipProfileId=null}params.address1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;params.address2=document.getElementsByName("address2")[0]?document.getElementsByName("address2")[0].value:null;params.postalCode=document.getElementsByName("postalCode")[0]?document.getElementsByName("postalCode")[0].value:null;params.city=document.getElementsByName("city")[0]?document.getElementsByName("city")[0].value:null;params.state=document.getElementsByName("state")[0]?document.getElementsByName("state")[0].value:null;params.country=countryElement?countryElement.value:defaultCountryCode;if($("[name='checkbox'][name=billShipSame], [name='radio'][name=billShipSame].cc-same-as-shipping").first().length){params.billShipSame=$("[name='checkbox'][name=billShipSame], [name='radio'][name=billShipSame].cc-same-as-shipping").first().prop("checked")?1:0}else if(document.getElementsByName("address1")[0]&&!document.getElementsByName("shipAddress1")[0]){params.billShipSame=1}fetchLeadDetails(params);if(shippingContact){params.shipCity=shippingContact.locality;params.shipState=shippingContact.administrativeArea;params.shipCountry=shippingContact.countryCode;params.shipPostalCode=shippingContact.postalCode}params.campaignId=pageData.selectedCampaign.campaignId;params.couponCode=appliedCouponCode.length>0?appliedCouponCode.toString():null;var shipProfile=pageData.selectedCampaign?getShipProfile():null;if(shipProfile&&shipProfile.applyEntireOrder){var _JSON$parse2=JSON.parse(sessionStorage.getItem("totals")),shipTotal=_JSON$parse2.shipTotal;params.profileShipPrice=shipTotal.toString()}var index=0;for(var sessionItemCpId in orderItems){if(!Number(sessionItemCpId))continue;index++;params["product"+index+"_id"]=orderItems[sessionItemCpId].campaignProductId;params["product"+index+"_qty"]=orderItems[sessionItemCpId].currentOrderQuantity;if(orderItems[sessionItemCpId].variant!==undefined)params["variant"+index+"_id"]=orderItems[sessionItemCpId].variant.variantDetailId;if(altValues[sessionItemCpId+"|"+orderItems[sessionItemCpId].currentOrderQuantity])params["product"+index+"_alt"]=getItemAlt(sessionItemCpId,orderItems[sessionItemCpId].currentOrderQuantity)}bundleParams=getBundleVariants(params,index);params=bundleParams?bundleParams.params:params;var customerOrders=sessionStorage.getItem("customerOrders");customerOrders=customerOrders?JSON.parse(customerOrders):[];if(cookieData["access_token"]&&cookieData["customerId"]||sessionStorage.getItem("isUniqueCheckoutId")&&(_customerOrders$=customerOrders[0])!==null&&_customerOrders$!==void 0&&_customerOrders$.customerId){params.customerId=cookieData["customerId"]||customerOrders[0].customerId}if(cookieData["access_token"]&&cookieData["customerId"]){params.customerId=cookieData["customerId"]}params.currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;params.cartId=pageData.pageTypeId===4?sessionStorage.getItem("cartId"):null;params=window.ccPayPalFastlaneTaxDetails?ccPayPalFastlaneTaxDetails(params):params;params=window.ccGetSetStripeLinkUserDetails?ccGetSetStripeLinkUserDetails(params):params}catch(err){console.log("err",err)}return{params:params,bundleParams:bundleParams}}function ccGetSurchargeProfile(country,state){try{var _pageData5,_sortArry;var sortArry=[[],[],[],[]],supportedPaySource=["*","CREDITCARD"];(_pageData5=pageData)===null||_pageData5===void 0||(_pageData5=_pageData5.selectedCampaign)===null||_pageData5===void 0||(_pageData5=_pageData5.surcharges)===null||_pageData5===void 0||_pageData5.forEach(function(o){if(!o.paySource||supportedPaySource.includes(o.paySource)){if(o.countryCode&&o.countryCode!=="*"&&o.stateCode&&o.stateCode!=="*"){var _o$stateName;o!==null&&o!==void 0&&(_o$stateName=o.stateName)!==null&&_o$stateName!==void 0&&_o$stateName.toString()?sortArry[0].push(o):sortArry[1].push(o)}else if(o.countryCode&&o.countryCode!=="*"){sortArry[2].push(o)}else{sortArry[3].push(o)}}});sortArry=sortArry.reduce(function(collection,arr){return[].concat(_toConsumableArray(collection),_toConsumableArray(arr))},[]);var profile=(_sortArry=sortArry)===null||_sortArry===void 0?void 0:_sortArry.find(function(o){return(o.countryCode==="*"?true:o.countryCode===country)&&(o.stateCode==="*"?true:o.stateCode===state)});return profile}catch(_unused3){return false}}function ccSetSurchargeLabel(surchargeName){$(".cc-surcharge-name").each(function(){this.innerHTML=surchargeName?surchargeName:this.getAttribute("cc-label-default-text")})}function ccHandleCleanSurchargeAPIResponse(data){if(data.result==="SUCCESS"&&data.message.surchargeName){var _data$message3=data.message,surchargeName=_data$message3.surchargeName,surcharge=_data$message3.surcharge;var currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;var matchedCurrency=pageData.selectedCampaign.currencies&&pageData.selectedCampaign.currencies.find(function(currency){return currency.currencyCode==currencyCode});var finalSurcharge=matchedCurrency&&!matchedCurrency.sendToGateway?parseFloat(surcharge)*Number(sessionStorage.getItem("exchangeRate")):parseFloat(surcharge);return{surchargeName:surchargeName,surcharge:finalSurcharge}}}function ccCalculateSurcharge(_x54,_x55){return _ccCalculateSurcharge.apply(this,arguments)}function _ccCalculateSurcharge(){_ccCalculateSurcharge=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee41(orderItems,shippingContact){var data,_params2,bundleParams,profile,surchargeParams,existingSurchargeParams,_response12,_data3,obj,surchargeName,surcharge,_data4,_surcharge,_surchargeName,_data5,_obj,_surchargeName2,_surcharge2;return _regeneratorRuntime().wrap(function _callee41$(_context46){while(1)switch(_context46.prev=_context46.next){case 0:_context46.prev=0;if(!(pageData.selectedCampaign&&pageData.pageTypeId===4&&Object.keys(orderItems).length>0&&!sessionStorage.getItem("ccConfirmPayPalCalled"))){_context46.next=46;break}data=ccGetUserPageParameters(orderItems,shippingContact),_params2=data.params,bundleParams=data.bundleParams;profile=ccGetSurchargeProfile(_params2.shipCountry,_params2.shipState);if(!profile){_context46.next=44;break}_params2.getSurchargePrice="true";_params2.paySource="CREDITCARD";surchargeParams=JSON.stringify(_params2);existingSurchargeParams=sessionStorage.getItem("ccSurchargeParams");if(!(surchargeParams!==existingSurchargeParams&&(bundleParams!==null&&bundleParams!==void 0&&bundleParams.isNewBundle||(bundleParams===null||bundleParams===void 0?void 0:bundleParams.isNewBundle)===null||ccObjectDifferenceChecker(surchargeParams,JSON.parse(existingSurchargeParams||"{}"))))){_context46.next=26;break}sessionStorage.setItem("ccSurchargeParams",surchargeParams);sessionStorage.removeItem("ccSurchargeData");_response12=httpMethod("".concat(providerUrl,"/SalesTax/order"),surchargeParams);ccSurchargeInflightRequests.set(surchargeParams,_response12);_context46.next=16;return _response12;case 16:_data3=_context46.sent;obj=ccHandleCleanSurchargeAPIResponse(_data3);if(!obj){_context46.next=24;break}surchargeName=obj.surchargeName,surcharge=obj.surcharge;sessionStorage.setItem("ccSurchargeData",JSON.stringify(obj));ccSetSurchargeLabel(surchargeName);ccSurchargeInflightRequests["delete"](surchargeParams);return _context46.abrupt("return",surcharge);case 24:_context46.next=42;break;case 26:_data4=JSON.parse(sessionStorage.getItem("ccSurchargeData"));if(!_data4){_context46.next=33;break}_surcharge=_data4.surcharge,_surchargeName=_data4.surchargeName;ccSetSurchargeLabel(_surchargeName);return _context46.abrupt("return",_surcharge);case 33:if(!ccSurchargeInflightRequests.has(existingSurchargeParams)){_context46.next=42;break}_context46.next=36;return ccSurchargeInflightRequests.get(existingSurchargeParams);case 36:_data5=_context46.sent;_obj=ccHandleCleanSurchargeAPIResponse(_data5);if(!_obj){_context46.next=42;break}_surchargeName2=_obj.surchargeName,_surcharge2=_obj.surcharge;ccSetSurchargeLabel(_surchargeName2);return _context46.abrupt("return",_surcharge2);case 42:_context46.next=46;break;case 44:ccSetSurchargeLabel();return _context46.abrupt("return",0);case 46:![3,5].includes(pageData.pageTypeId)&&ccSetSurchargeLabel();return _context46.abrupt("return",false);case 50:_context46.prev=50;_context46.t0=_context46["catch"](0);console.log(_context46.t0);case 53:case"end":return _context46.stop()}},_callee41,null,[[0,50]])}));return _ccCalculateSurcharge.apply(this,arguments)}function calculateTax(_x56,_x57){return _calculateTax.apply(this,arguments)}function _calculateTax(){_calculateTax=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee42(orderItems,shippingContact){var countryElement,shipCountryElement,countryVal,shipCountryVal,noCountryInputOnPage,data,_params3,bundleParams,failValidation,isVat,taxRate,addVatToPrice,taxParams,existingParams,_response13,_data6,totals,finalSalesTax,subTotal,grandTotal,shipTotal,vat,compareAtTotal,vatPrices,vatShipPrices,vatCompareAtPrices,exchangeRate,currencyCode,matchedCurrency,taxes,key,vatPrice,_key11,vatShipPrice,_key12,_key13,taxData,_totals;return _regeneratorRuntime().wrap(function _callee42$(_context47){while(1)switch(_context47.prev=_context47.next){case 0:_context47.prev=0;if(!(pageData.selectedCampaign&&!pageData.selectedCampaign.taxServiceId&&pageData.selectedCampaign.taxes.length==0)){_context47.next=3;break}return _context47.abrupt("return",false);case 3:if(!(pageData.selectedCampaign&&pageData.pageTypeId===4&&Object.keys(orderItems).length>0&&!sessionStorage.getItem("ccConfirmPayPalCalled"))){_context47.next=63;break}countryElement=document.getElementsByName("country")[0],shipCountryElement=document.getElementsByName("shipCountry")[0],countryVal=countryElement===null||countryElement===void 0?void 0:countryElement.value,shipCountryVal=shipCountryElement===null||shipCountryElement===void 0?void 0:shipCountryElement.value;noCountryInputOnPage=countryElement&&!countryVal&&shipCountryElement&&!shipCountryVal||!countryElement&&shipCountryElement&&!shipCountryVal||!shipCountryElement&&countryElement&&!countryVal;if(!(noCountryInputOnPage&&$(".cc-open-path-checkout, .cc-stripe-link-submit, .cc-fastlane-submit").length?false:noCountryInputOnPage)){_context47.next=8;break}return _context47.abrupt("return",false);case 8:data=ccGetUserPageParameters(orderItems,shippingContact),_params3=data.params,bundleParams=data.bundleParams;if(pageData.selectedCampaign.taxServiceId){failValidation=!_params3.shipAddress1||!_params3.shipCity||!_params3.shipPostalCode||!_params3.shipCountry||ccGetCountryStates(_params3.shipCountry).length&&!_params3.shipState}else{failValidation=!_params3.shipCountry}if(!failValidation){_context47.next=12;break}return _context47.abrupt("return",false);case 12:isVat=false;taxRate=0;addVatToPrice=true;taxParams=JSON.stringify(_params3);existingParams=sessionStorage.getItem("taxParams");if(!(taxParams!==existingParams&&(bundleParams.isNewBundle||bundleParams.isNewBundle===null||ccObjectDifferenceChecker(_params3,JSON.parse(existingParams||"{}"))))){_context47.next=55;break}sessionStorage.removeItem("taxData");ccHandleLoader();sessionStorage.setItem("taxParams",taxParams);_response13=httpMethod("".concat(providerUrl,"/SalesTax/order"),taxParams);ccTaxInflightRequests.set(taxParams,_response13);_context47.next=25;return _response13;case 25:_data6=_context47.sent;if(!(_data6.result==="SUCCESS")){_context47.next=52;break}totals=JSON.parse(sessionStorage.getItem("totals"));finalSalesTax=0,subTotal=parseFloat(totals.subTotal),grandTotal=parseFloat(totals.grandTotal),shipTotal=parseFloat(totals.shipTotal),vat=0,compareAtTotal=parseFloat(totals.compareAtTotal);vatPrices=_data6.message.vatPrices;vatShipPrices=_data6.message.vatShipPrices;vatCompareAtPrices=_data6.message.vatCompareAtPrices;exchangeRate=sessionStorage.getItem("exchangeRate")!==null?sessionStorage.getItem("exchangeRate"):1;exchangeRate=parseFloat(exchangeRate);isVat=vatPrices?true:false;currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;matchedCurrency=pageData.selectedCampaign.currencies&&pageData.selectedCampaign.currencies.find(function(currency){return currency.currencyCode==currencyCode});if(!vatPrices){sessionStorage.removeItem("vatPrices");sessionStorage.removeItem("vatCompareAtPrices");finalSalesTax=matchedCurrency&&!matchedCurrency.sendToGateway?parseFloat(_data6.message)*exchangeRate:parseFloat(_data6.message)}else{taxes=_data6.message.taxes;vatPrices&&sessionStorage.setItem("vatPrices",JSON.stringify(vatPrices));vatCompareAtPrices&&sessionStorage.setItem("vatCompareAtPrices",JSON.stringify(vatCompareAtPrices));grandTotal-=subTotal+shipTotal;subTotal=0;shipTotal=0;compareAtTotal=0;for(key in vatPrices){vatPrice=parseFloat(vatPrices[key]&&vatPrices[key].replaceAll(",",""));subTotal+=vatPrice}for(_key11 in vatShipPrices){vatShipPrice=parseFloat(vatShipPrices[_key11]&&vatShipPrices[_key11].replaceAll(",",""));shipTotal+=vatShipPrice}for(_key12 in taxes){vat+=parseFloat(taxes[_key12])}for(_key13 in vatCompareAtPrices){compareAtTotal+=parseFloat(vatCompareAtPrices[_key13])}grandTotal+=subTotal+shipTotal;if(matchedCurrency&&!matchedCurrency.sendToGateway){grandTotal*=exchangeRate;subTotal*=exchangeRate;shipTotal*=exchangeRate;vat*=exchangeRate;compareAtTotal*=exchangeRate}totals.subTotal=subTotal.toFixed(2);totals.shipTotal=shipTotal.toFixed(2);totals.compareAtTotal=compareAtTotal.toFixed(2);sessionStorage.setItem("vatShipTotal",totals.shipTotal)}totals.grandTotal=(grandTotal-totals.salesTax+finalSalesTax).toFixed(2);totals.vat=vat.toFixed(2);totals.salesTax=finalSalesTax.toFixed(2);sessionStorage.setItem("ccExternalTax",totals.salesTax);sessionStorage.setItem("totals",JSON.stringify(totals));taxRate=parseFloat(_data6.message.taxRate||0).toFixed(2);addVatToPrice=_data6.message.addVatToPrice===false?_data6.message.addVatToPrice:true;taxData={taxRate:taxRate,isVat:isVat,addVatToPrice:addVatToPrice};sessionStorage.setItem("taxData",JSON.stringify(taxData));displayPricesApply();ccTaxInflightRequests["delete"](taxParams);return _context47.abrupt("return",totals);case 52:ccHandleLoader(true);case 53:_context47.next=63;break;case 55:if(!ccTaxInflightRequests.has(existingParams)){_context47.next=58;break}_context47.next=58;return ccTaxInflightRequests.get(existingParams);case 58:_totals=JSON.parse(sessionStorage.getItem("totals"));_totals.salesTax=(Number(sessionStorage.getItem("ccExternalTax"))||0).toFixed(2);if(getTaxRate().isVat){_totals.shipTotal=(Number(sessionStorage.getItem("vatShipTotal"))||0).toFixed(2)}sessionStorage.setItem("totals",JSON.stringify(_totals));return _context47.abrupt("return",_totals);case 63:return _context47.abrupt("return",false);case 66:_context47.prev=66;_context47.t0=_context47["catch"](0);console.log(_context47.t0);case 69:case"end":return _context47.stop()}},_callee42,null,[[0,66]])}));return _calculateTax.apply(this,arguments)}function getExternalShipping(){return _getExternalShipping.apply(this,arguments)}function _getExternalShipping(){_getExternalShipping=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee43(){var input,shipEngine,_params4,ip,_orderItems32,index,sessionItemCpId,_productData20,checkoutCurrency,symbol,shipParams,existingParams,_response14;return _regeneratorRuntime().wrap(function _callee43$(_context48){while(1)switch(_context48.prev=_context48.next){case 0:input=document.getElementsByName("shipProfileId")[0];if(!(!input||input.type!=="select-one")){_context48.next=3;break}return _context48.abrupt("return");case 3:shipEngine=getAddOnKeyValue(findAddOn("shipEngineEnabled"));if(!(shipEngine==="1")){_context48.next=43;break}_params4=getShipProfileAddress();_params4.shipAddress1=_params4.address1;_params4.shipCity=_params4.city;_params4.shipState=_params4.state;_params4.shipCountry=_params4.country;_params4.shipPostalCode=_params4.postalCode;_params4.shipFirstName="John";_params4.shipLastName="Smith";if(!(!_params4.shipCity&&!_params4.shipPostalCode&&!_params4.shipState)){_context48.next=18;break}_context48.next=16;return getIpPhysicalAddress();case 16:ip=_context48.sent;if(ip&&ip.zip_code){_params4.shipCity=ip.city;_params4.shipState=ip.region_code;_params4.shipCountry=ip.country_code;_params4.shipPostalCode=ip.zip_code}case 18:if(!(!_params4.shipCity||!_params4.shipPostalCode||!_params4.shipCountry||ccGetCountryStates(_params4.shipCountry).length&&!_params4.shipState)){_context48.next=20;break}return _context48.abrupt("return",false);case 20:_orderItems32=getOrderItems();index=0;_context48.t0=_regeneratorRuntime().keys(_orderItems32);case 23:if((_context48.t1=_context48.t0()).done){_context48.next=33;break}sessionItemCpId=_context48.t1.value;if(Number(sessionItemCpId)){_context48.next=27;break}return _context48.abrupt("continue",23);case 27:index++;if(sessionItemCpId.indexOf(".")>0){_productData20=sessionItemCpId.split(".");_params4["product"+index+"_id"]=_productData20[0];_params4["variant"+index+"_id"]=_productData20[1]}else{_params4["product"+index+"_id"]=sessionItemCpId}_params4["product"+index+"_qty"]=_orderItems32[sessionItemCpId];if(altValues[sessionItemCpId+"|"+_orderItems32[sessionItemCpId]])_params4["product"+index+"_alt"]=getItemAlt(sessionItemCpId,_orderItems32[sessionItemCpId]);_context48.next=23;break;case 33:_params4=getBundleVariants(_params4,index).params;if(cookieData["access_token"]&&cookieData["customerId"]){_params4.customerId=cookieData["customerId"]}_params4.campaignId=pageData.selectedCampaign.campaignId;checkoutCurrency=returnCurrencyCode()||pageData.selectedCampaign.currency;_params4.currencyCode=checkoutCurrency;_params4.cartId=pageData.pageTypeId===4?sessionStorage.getItem("cartId"):null;symbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol?pageData.selectedCampaign.currencySymbol:"$";shipParams=JSON.stringify(_params4);existingParams=sessionStorage.getItem("shipParams");if(shipParams!==existingParams){sessionStorage.setItem("shipParams",shipParams);_response14=httpMethod("".concat(providerUrl,"/SalesTax/Shiprate"),shipParams).then(function(data){$("[name=shipProfileId] option").each(function(){if($(this).val().includes(":")){$(this).remove()}});if(data.result==="SUCCESS"){var dataMessage=data.message;var dataMessageLen=dataMessage&&dataMessage.length;if(dataMessageLen){var updateShipProfileOptions=function updateShipProfileOptions(dataMessage,dataMessageLength,exchangeRate){for(var _i146=0;_i146<dataMessageLength;_i146++){var profile=dataMessage[_i146];var option=document.createElement("OPTION");var shipProfilePriceCal=parseFloat(profile.shippingAmount)*parseFloat(exchangeRate);var shipProfileDisplayPrice=shipProfilePriceCal.toFixed(2);option.value=profile.rateId+":"+profile.serviceType+":"+profile.shippingAmount+":"+profile.carrierName+":"+shipProfileDisplayPrice;option.innerHTML=profile.serviceType+" ("+ccFormatCurrency(shipProfileDisplayPrice,symbol)+")";input.add(option)}if(input.options.length>0&&input.value==""){var selectedIndex=input.options[0].value!=""?0:1;input.value=input.options[selectedIndex].value}};var ccExchangeRateList=JSON.parse(sessionStorage.getItem("ccExchangeRateList"))||{};var shipRateCurrencyCode=dataMessage[0].currencyCode;if(shipRateCurrencyCode&&shipRateCurrencyCode!==checkoutCurrency){var shipAndCheckoutCurrency=shipRateCurrencyCode+"|"+checkoutCurrency;if(!ccExchangeRateList[shipAndCheckoutCurrency]){httpMethod("".concat(providerUrl,"/Currency/exchangerate"),JSON.stringify({"currencyCode":checkoutCurrency,"baseCurrencyCode":shipRateCurrencyCode})).then(function(res){if(res.result==="SUCCESS"){updateShipProfileOptions(dataMessage,dataMessageLen,res.message);displayPrices();ccExchangeRateList[shipAndCheckoutCurrency]=res.message;sessionStorage.setItem("ccExchangeRateList",JSON.stringify(ccExchangeRateList))}})["catch"](function(err){err});return}else{updateShipProfileOptions(dataMessage,dataMessageLen,ccExchangeRateList[shipAndCheckoutCurrency])}}else{updateShipProfileOptions(dataMessage,dataMessageLen,1)}}}displayPrices()})}case 43:return _context48.abrupt("return",false);case 44:case"end":return _context48.stop()}},_callee43)}));return _getExternalShipping.apply(this,arguments)}function calculateTotals(){return _calculateTotals.apply(this,arguments)}function _calculateTotals(){_calculateTotals=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee44(){var subTotal,salesTax,shipTotal,discount,insurance,savings,compareAtTotal,surcharge,pageTypeId,totals,vat,orderDataString,orderData,orderDiscount,skipConvert,totalShipping,shippableOrder,shipProfile,exchangeRate,currentOrderItems,shipData,orderStatus,checkoutFlow,currentOrderItemsLength,currentOrderItemsEntries,currentOrderItemsEntriesLength,shopifyItems,prevBundle,_ccProductPercentageValue,_i147,_pageData12,campaignProductId,_item19,unitPrice,shipPrice,compareAtPrice,useVariantPrice,newVariantPrice,currentOrderQuantity,_exchangeRate,sendingCurrencyTxn,productAltValue,productPrice,productQty,qty,storePickOpt,productShipPrice,freeShipThreshold,entireOrderShipPrice,defaultCoupon,checkoutPage,shippableCheckout,loadPayPalSdk,preventDefaultCouponRemoval,defaultCouponApplied,discounts,coupMessage,_exchangeRate2,applyCouponButton,couponCodeInput,coupon,taxRequestId,newTotalParams,surchargeRequestId,surchargeValue,discountedPrice,_newTotalParams;return _regeneratorRuntime().wrap(function _callee44$(_context49){while(1)switch(_context49.prev=_context49.next){case 0:subTotal=0;salesTax=0;shipTotal=0;discount=0;insurance=0;savings=0;compareAtTotal=0;surcharge=0;ccUpdatedDiscount=0;pageTypeId=pageData&&pageData.pageTypeId;if(document.getElementsByName("insureShipment")[0]&&document.getElementsByName("insureShipment")[0].checked===true){insurance=parseFloat(document.getElementById("shipmentInsurancePrice").value)}totals=sessionStorage.getItem("totals")!==null&&JSON.parse(sessionStorage.getItem("totals"));vat=parseFloat(totals.vat||0);orderDataString=sessionStorage.getItem("orderData");orderData=orderDataString&&JSON.parse(orderDataString);if(!(pageTypeId==5)){_context49.next=26;break}if(!orderData){_context49.next=26;break}orderDiscount=orderData.discountPrice>=0?orderData.discountPrice:0;subTotal=parseFloat(orderData.subTotal)+parseFloat(orderDiscount);salesTax=parseFloat(orderData.taxTotal);shipTotal=parseFloat(orderData.shipTotal);discount=parseFloat(orderData.totalDiscount);surcharge=parseFloat(orderData.surcharge||0);skipConvert=orderData.currencyCode===(returnCurrencyCode()||pageData.selectedCampaign.currency);if(orderData.vatSubTotal){subTotal=parseFloat(orderData.vatSubTotal.replaceAll(",",""));salesTax=0}return _context49.abrupt("return",prepareTotals(subTotal,vat,salesTax,shipTotal,discount,0,0,0,surcharge,skipConvert));case 26:getExternalShipping();loadShipProfiles();totalShipping=0;shippableOrder=false;shipProfile=pageData.selectedCampaign?getShipProfile():null;exchangeRate=sessionStorage.getItem("exchangeRate")!==null?parseFloat(sessionStorage.getItem("exchangeRate")):1;currentOrderItems=getOrderItemDetails();cartChanged=cartProductLength!==Object.keys(currentOrderItems).length;cartProductLength=Object.keys(currentOrderItems).length;cartChanged&&refreshOrderBumps.length&&ccResetRefreshOrderBumps(true);if(shipProfile&&typeof shipProfile==="string"&&shipProfile.indexOf(":")>0){shipData=shipProfile.split(":");totalShipping=parseFloat(shipData[4]);shipProfile=null;if(pageData.selectedCampaign.defaultShipProfileId!==null){shipProfile=pageData.selectedCampaign.shipProfiles.find(function(data){return data.shipProfileId===parseInt(pageData.selectedCampaign.defaultShipProfileId)});if(shipProfile){shipProfile.applyEntireOrder=1}}}orderStatus=orderData&&["COMPLETE","PENDING","COD_PENDING"].includes(orderData.orderStatus),checkoutFlow=[2,3,4].includes(pageTypeId);currentOrderItemsLength=Object.keys(currentOrderItems).length;if(currentOrderItemsLength){//when shipping profile is set and does not apply to entire order, get currentOrderItems with updated shipping prices after applying ship profile rules
if(shipProfile&&!shipProfile.applyEntireOrder)currentOrderItems=applyShipProfileProductRules(shipProfile,currentOrderItems).items;//total up subTotal (price) and shipTotal (shipping)
currentOrderItemsEntries=Object.entries(currentOrderItems);currentOrderItemsEntries.sort(function(list1,list2){return(list1[1].isPricePercent||0)-(list2[1].isPricePercent||0)});currentOrderItemsEntriesLength=currentOrderItemsEntries.length,shopifyItems=pageData.cartData&&pageData.cartData.itemsInfo||{};_ccProductPercentageValue=null;for(_i147=0;_i147<currentOrderItemsEntriesLength;_i147++){campaignProductId=currentOrderItemsEntries[_i147][0];_item19=currentOrderItemsEntries[_i147][1];unitPrice=0,shipPrice=0,compareAtPrice=0;if(!_item19.isVariantBundle||!prevBundle||prevBundle!=_item19.campaignProductId){useVariantPrice=_item19.variant&&!_item19.isVariantBundle&&!_item19.isEditable,newVariantPrice=useVariantPrice&&parseFloat(ccGetProductCurrencyPrice(_item19.campaignProductId+"."+_item19.variant.variantDetailId)||_item19.variant.price);unitPrice=newVariantPrice>0?newVariantPrice:Number(ccGetProductCurrencyPrice(_item19.campaignProductId,1))||_item19.cycle1_price;shipPrice=_item19.variant&&parseFloat(_item19.variant.shippingPrice)>0&&!_item19.isVariantBundle?_item19.variant.shippingPrice:_item19.cycle1_shipPrice;compareAtPrice=_item19.compareAtPrice&&parseFloat(_item19.compareAtPrice)>0?_item19.compareAtPrice:unitPrice;compareAtPrice=_item19.variant&&_item19.variant.compareAtPrice&&parseFloat(_item19.variant.compareAtPrice)>0&&!_item19.isVariantBundle?_item19.variant.compareAtPrice:compareAtPrice}prevBundle=_item19.campaignProductId;currentOrderQuantity=!_item19.isVariantBundle?_item19.currentOrderQuantity:1;if(checkoutFlow&&_item19.isPricePercent===1&&!shopifyItems[campaignProductId]){if(_ccProductPercentageValue===null){if(orderStatus){_exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1;sendingCurrencyTxn=orderData.currencyCode===(returnCurrencyCode()||pageData.selectedCampaign.currency);_ccProductPercentageValue=Number((Number(orderData.subTotal)*(sendingCurrencyTxn?1:_exchangeRate)).toFixed(2))||0}else{_ccProductPercentageValue=Number(subTotal)||0}sessionStorage.setItem("ccCartProductsPercentageTotal",_ccProductPercentageValue)}productAltValue=altValues[campaignProductId+"|"+currentOrderQuantity];productPrice=Number(_item19.cycle1_price)||0,productQty=currentOrderQuantity;if(productAltValue){productPrice=Number(productAltValue.split("|")[0])||0;productQty=1}subTotal+=parseFloat(((_ccProductPercentageValue||0)*productPrice*.01*productQty).toFixed(2))}else{subTotal+=parseFloat(getItemPrice(campaignProductId,unitPrice,currentOrderQuantity).toFixed(2));sessionStorage.setItem("ccCartProductsPercentageTotal",Number(subTotal))}qty=shipProfile&&!shipProfile.applyEntireOrder&&_item19.isUpcharge?1:currentOrderQuantity;shipPrice=shipProfile&&!shipProfile.applyEntireOrder&&_item19.isUpcharge&&_item19.currentOrderQuantity>1?shipPrice+parseFloat(_item19.shippingPrice*(_item19.currentOrderQuantity-1)):shipPrice;storePickOpt=shipProfile&&shipProfile.storePickupId&&_item19.allowStorePickup=="1"&&_item19.billingCycleType==="ONE_TIME";productShipPrice=_item19.isFreeShipping||storePickOpt?0:parseFloat(getShipPrice(shipPrice,qty,true,_item19));shipTotal+=productShipPrice;shippableOrder=((_pageData12=pageData)===null||_pageData12===void 0||(_pageData12=_pageData12.selectedCampaign)===null||_pageData12===void 0?void 0:_pageData12.insureShipProductId)!=campaignProductId&&_item19.cycle1_isShippable?true:shippableOrder;compareAtTotal+=parseFloat(getItemPrice(null,compareAtPrice,currentOrderQuantity,false,false,true).toFixed(2));savings=compareAtTotal>subTotal?compareAtTotal-subTotal:0}}else if(!orderStatus){sessionStorage.setItem("ccCartProductsPercentageTotal",0)}if(shipProfile){//when shipping profile applies one shipping price to the entire order
freeShipThreshold=shipProfile.freeShipThreshold?parseFloat((parseFloat(shipProfile.freeShipThreshold)*exchangeRate).toFixed(2)):0;if(shipProfile.applyEntireOrder){entireOrderShipPrice=totalShipping>0?totalShipping:parseFloat(getShipProfileOrderPrice(shipProfile)*exchangeRate);//if upcharge, shipping profile price is added to current order shipping total
if(shipProfile.isUpcharge){shipTotal+=entireOrderShipPrice}else if((entireOrderShipPrice||entireOrderShipPrice===0)&&(shipProfile.rules!==null||freeShipThreshold==0)){//otherwise, shipping profile price overrides current order shipping total
shipTotal=entireOrderShipPrice}}//when shipping profile freeShipThreshold is set, if order subTotal is greater than or equal to freeShipThreshold, order's shipping is free - Ex: Free shipping for orders $50 and over
if(!shipProfile.includeCoupons&&freeShipThreshold>0&&subTotal>=freeShipThreshold)shipTotal=0}else if(totalShipping>0){shipTotal=totalShipping}if($("input[type=checkbox][freeshipping=true]").is(":checked")||!shippableOrder)shipTotal=0;//total amount (price) without shipping or discounts is taxable
defaultCoupon=pageData.selectedCampaign.defaultCouponCode,checkoutPage=pageTypeId==4;if(currentOrderItemsLength&&$(".btnPayPal, .btnPayPal2").length&&Number(pageData.selectedCampaign.captureOnShipment)&&checkoutPage){shippableCheckout=sessionStorage.getItem("ccShippableCheckout");loadPayPalSdk=shippableCheckout===null?shippableOrder===false:shippableOrder!==(shippableCheckout==="true");if(loadPayPalSdk){sessionStorage.setItem("ccShippableCheckout",shippableOrder);window.configurePayPalSmartButtons&&configurePayPalSmartButtons()}}preventDefaultCouponRemoval=getAddOnKeyValue(findAddOn("PRE_COUPON_REMOVAL"))==="true";defaultCouponApplied=appliedCouponCode.includes(defaultCoupon);$("input[type=checkbox][name=product][coupon]:checked").each(function(){var coupon=this.getAttribute("coupon");coupon=coupon&&coupon.trim().toUpperCase();if(coupon&&!appliedCouponCode.includes(coupon))appliedCouponCode.splice(0,0,coupon)});if(checkoutPage){window.ccShippableOrder=shippableOrder;configureReachBadge(!shippableOrder);if(preventDefaultCouponRemoval&&defaultCoupon&&!defaultCouponApplied){appliedCouponCode.splice(0,0,defaultCoupon);defaultCouponApplied=true}if(window.ccApplyIdmeCouponOnAppliedCoupons){appliedCouponCode=ccApplyIdmeCouponOnAppliedCoupons(appliedCouponCode,defaultCouponApplied,preventDefaultCouponRemoval)}window.ccRenderInsureShipWidget&&ccRenderInsureShipWidget(shippableOrder)}if(!(appliedCouponCode&&checkoutPage)){_context49.next=90;break}ccPreDiscountTotals={subTotal:subTotal,vat:vat,salesTax:salesTax,shipTotal:shipTotal,discount:discount,insurance:insurance,savings:savings,compareAtTotal:compareAtTotal,surcharge:surcharge};prepareTotals(subTotal,vat,salesTax,shipTotal,discount,insurance,savings,compareAtTotal,surcharge);_context49.next=53;return getDiscounts(appliedCouponCode.toString(),currentOrderItems,defaultCoupon,preventDefaultCouponRemoval,defaultCouponApplied);case 53:discounts=_context49.sent;coupMessage=document.getElementsByName("coupMessage");if(discounts){discount+=discounts.priceDiscount+discounts.shipDiscount;//Reduce taxable by price discount
_exchangeRate2=sessionStorage.getItem("exchangeRate")!==null?sessionStorage.getItem("exchangeRate"):1;if(discounts.coupMessage){if(coupMessage.length){removeItems(coupMessage)}applyCouponButton=$("button[action=applyCoupon]");couponCodeInput=$("[name=couponCode]");if(applyCouponButton.length&&couponCodeInput.length){applyCouponButton.after("<span name='coupMessage'><br>"+discounts.coupMessage+"</span>")}else if(couponCodeInput.length){couponCodeInput.after("<span name='coupMessage'><br>"+discounts.coupMessage+"</span>")}}else if(coupMessage.length){removeItems(coupMessage)}appliedCouponCode=discounts.coupons}else if(discounts===0){coupMessage.length&&removeItems(coupMessage)}else{if(coupMessage.length){removeItems(coupMessage)}coupon=null;if(sessionStorage.getItem("leadCouponCode")!==null){coupon=sessionStorage.getItem("leadCouponCode")}else{coupon=pageData.selectedCampaign.defaultCouponCode}appliedCouponCode=coupon&&appliedCouponCode.includes(coupon)?handleCouponSplit(coupon):[]}ccUpdatedDiscount=discount;subTotal=ccPreDiscountTotals.subTotal;vat=ccPreDiscountTotals.vat;salesTax=ccPreDiscountTotals.salesTax;shipTotal=ccPreDiscountTotals.shipTotal;discount=ccUpdatedDiscount;insurance=ccPreDiscountTotals.insurance;savings=ccPreDiscountTotals.savings;compareAtTotal=ccPreDiscountTotals.compareAtTotal;surcharge=ccPreDiscountTotals.surcharge;prepareTotals(subTotal,vat,salesTax,shipTotal,discount,insurance,savings,compareAtTotal,surcharge);taxRequestId=++ccPageTaxAPIRequestId;_context49.next=70;return calculateTax(currentOrderItems);case 70:newTotalParams=_context49.sent;if(!(taxRequestId!==ccPageTaxAPIRequestId)){_context49.next=73;break}return _context49.abrupt("return",true);case 73:if(newTotalParams){vat=parseFloat(newTotalParams.vat);salesTax=parseFloat(newTotalParams.salesTax);subTotal=parseFloat(newTotalParams.subTotal);shipTotal=parseFloat(newTotalParams.shipTotal);compareAtTotal=parseFloat(newTotalParams.compareAtTotal);savings=compareAtTotal>subTotal?compareAtTotal-subTotal:0}surchargeRequestId=++ccSurchargeAPIRequestId;_context49.next=77;return ccCalculateSurcharge(currentOrderItems);case 77:surchargeValue=_context49.sent;if(!(surchargeRequestId!==ccSurchargeAPIRequestId)){_context49.next=80;break}return _context49.abrupt("return",true);case 80:if(surchargeValue!==false){surcharge=surchargeValue}surcharge===0?$(".cc-surcharge-hide").addClass("d-none"):$(".cc-surcharge-hide").removeClass("d-none");if(freeShipThreshold>0){discountedPrice=!pageData.selectedCampaign.ccCurrencySendToGateway?parseFloat((discount*exchangeRate).toFixed(2)):discount;shipProfile&&shipProfile.includeCoupons&&subTotal-discountedPrice>=freeShipThreshold?shipTotal=0:null}window.calculateShipInsurance&&calculateShipInsurance(subTotal);shipTotal=$("input[type=checkbox][freeshipping=true]").is(":checked")||!shippableOrder?0:shipTotal;prepareTotals(subTotal,vat,salesTax,shipTotal,ccUpdatedDiscount,insurance,savings,compareAtTotal,surcharge);displayPricesApply();return _context49.abrupt("return",true);case 90:_context49.next=92;return calculateTax(currentOrderItems);case 92:_newTotalParams=_context49.sent;if(_newTotalParams){vat=parseFloat(_newTotalParams.vat);salesTax=parseFloat(_newTotalParams.salesTax);subTotal=parseFloat(_newTotalParams.subTotal);shipTotal=parseFloat(_newTotalParams.shipTotal);compareAtTotal=parseFloat(_newTotalParams.compareAtTotal);savings=compareAtTotal>subTotal?compareAtTotal-subTotal:0}surcharge===0?$(".cc-surcharge-hide").addClass("d-none"):$(".cc-surcharge-hide").removeClass("d-none");freeShipThreshold>0&&shipProfile&&shipProfile.includeCoupons&&subTotal>=freeShipThreshold?shipTotal=0:null;shipTotal=$("input[type=checkbox][freeshipping=true]").is(":checked")||!shippableOrder?0:shipTotal;window.calculateShipInsurance&&calculateShipInsurance(subTotal);return _context49.abrupt("return",prepareTotals(subTotal,vat,salesTax,shipTotal,discount,insurance,savings,compareAtTotal,surcharge));case 99:case"end":return _context49.stop()}},_callee44)}));return _calculateTotals.apply(this,arguments)}function removeItems(items,limit,removeLabel){var index=limit?limit:0;for(var _i71=items.length-1;_i71>=index;_i71--){!removeLabel&&items[_i71].remove();removeLabel&&$(items[_i71]).closest(".fk-element-container").remove()}}function prepareTotals(subTotal,vat,salesTax,shipTotal,discount,insurance,savings,compareAtTotal,surcharge,skipConvert){var _window$ccValidShipPr;subTotal=parseFloat(subTotal.toFixed(2));vat=parseFloat(vat.toFixed(2));salesTax=parseFloat(salesTax.toFixed(2));shipTotal=parseFloat(shipTotal.toFixed(2));discount=parseFloat(discount.toFixed(2));insurance=parseFloat(insurance.toFixed(2));savings=parseFloat(savings.toFixed(2));compareAtTotal=parseFloat(compareAtTotal.toFixed(2));surcharge=parseFloat(surcharge.toFixed(2));if(sessionStorage.getItem("exchangeRate")&&!skipConvert){var exchangeRate=sessionStorage.getItem("exchangeRate"),thankyouPage=pageData.pageTypeId===5;subTotal=thankyouPage?parseFloat((subTotal*exchangeRate).toFixed(2)):subTotal;discount=!pageData.selectedCampaign.ccCurrencySendToGateway?parseFloat((discount*exchangeRate).toFixed(2)):discount;shipTotal=thankyouPage?parseFloat((shipTotal*exchangeRate).toFixed(2)):shipTotal;salesTax=thankyouPage?parseFloat((salesTax*exchangeRate).toFixed(2)):salesTax;vat=thankyouPage?parseFloat((vat*exchangeRate).toFixed(2)):vat;surcharge=thankyouPage?parseFloat((surcharge*exchangeRate).toFixed(2)):surcharge}var grandTotal=(subTotal+shipTotal+salesTax+insurance-discount+surcharge).toFixed(2);var totals={subTotal:subTotal,vat:vat,salesTax:salesTax,shipTotal:shipTotal,grandTotal:grandTotal,discount:discount,insurance:insurance,savings:savings,compareAtTotal:compareAtTotal,surcharge:surcharge};sessionStorage.setItem("totals",JSON.stringify(totals));![3,5].includes(pageData.pageTypeId)&&((_window$ccValidShipPr=window.ccValidShipProfilesCollection)===null||_window$ccValidShipPr===void 0?void 0:_window$ccValidShipPr.length)&&ccPopulateValidShipProfiles(document.getElementsByName("shipProfileId")[0],window.ccValidShipProfilesCollection,getShipProfile());return totals}function displayPrices(_x58){return _displayPrices.apply(this,arguments)}function _displayPrices(){_displayPrices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee45(evaluateFFL){var upsellProduct,upsellVariant,upsellQuantity,buttonsAndLinks,_orderItems33;return _regeneratorRuntime().wrap(function _callee45$(_context50){while(1)switch(_context50.prev=_context50.next){case 0:if(!(pageData.pageTypeId==3)){_context50.next=23;break}if(!($(".dynamic-price-total, .dynamic-shipping-total, .vat, .salesTax, .grandTotal, .discount, .insurance, .savings, .compareAtTotal, .cc-surcharge").length==0)){_context50.next=3;break}return _context50.abrupt("return");case 3:upsellQuantity=getQuantity();buttonsAndLinks=document.querySelectorAll("button,a");buttonsAndLinks.forEach(function(element){var productButtonValue=element.getAttribute("upsell");if(productButtonValue&&parseInt(productButtonValue)>0){upsellProduct=productButtonValue;upsellVariant=parseInt(element.getAttribute("variant"));if(parseInt(element.getAttribute("quantity"))>0)upsellQuantity=parseInt(element.getAttribute("quantity"))}});if(!upsellProduct){_context50.next=20;break}_orderItems33={};upsellProduct+=upsellVariant?"."+upsellVariant:"";_orderItems33[upsellProduct]=upsellQuantity;if(!window.ccPreUpsellfkCart){window.ccPreUpsellfkCart=sessionStorage.getItem("fkCart")}sessionStorage.setItem("fkCartSave",sessionStorage.getItem("fkCart"));sessionStorage.setItem("fkCart",JSON.stringify(_orderItems33));_context50.next=15;return calculateTotals();case 15:displayPricesApply();sessionStorage.setItem("fkCart",sessionStorage.getItem("fkCartSave")||window.ccPreUpsellfkCart||JSON.stringify({}));sessionStorage.removeItem("fkCartSave");_context50.next=21;break;case 20:displayPricesApply();case 21:_context50.next=27;break;case 23:_context50.next=25;return calculateTotals();case 25:if(!appliedCouponCode||appliedCouponCode.length===0||[5,9].includes(pageData.pageTypeId))displayPricesApply();if(window.ltk){callLisTrakConversion(window.ltk,"CaptureEmail");callLisTrakConversion(window.ltk,"UpdateCart")}case 27:!evaluateFFL&&window.evaluateFFLSectionDisplay&&evaluateFFLSectionDisplay();renderPopupCartDetails();case 29:case"end":return _context50.stop()}},_callee45)}));return _displayPrices.apply(this,arguments)}function clearTwoWayItems(){var items=document.querySelectorAll(".cc-twoway-product-item");if(!items||items.length<=1)return;// keep the first one, remove rest
items.forEach(function(item,index){if(index>0)item.remove()})}function displayTwoWaySubscription(){var _pageData6;clearTwoWayItems();var fkCart=JSON.parse(sessionStorage.getItem("fkCart")||"{}");var products=((_pageData6=pageData)===null||_pageData6===void 0||(_pageData6=_pageData6.selectedCampaign)===null||_pageData6===void 0?void 0:_pageData6.products)||[];var twoWayBlock=document.querySelector(".cc-twoway-subscription");var templateItem=document.querySelector(".cc-twoway-product-item");if(!twoWayBlock||!templateItem)return;// Hide the template initially
$(templateItem).hide();var itemsAdded=0;// Convert fkCart object â†’ array: [ { fullKey, qty, campaignProductId, variantId } ]
var cartItems=Object.entries(fkCart).map(function(_ref25){var _ref26=_slicedToArray(_ref25,2),key=_ref26[0],qty=_ref26[1];var _key$split=key.split("."),_key$split2=_slicedToArray(_key$split,2),campaignProductId=_key$split2[0],variantId=_key$split2[1];return{campaignProductId:campaignProductId,variantId:variantId,qty:qty}});cartItems.forEach(function(cartItem){var recurringProduct;var cartProduct=products.find(function(p){return p.campaignProductId==cartItem.campaignProductId});if(cartProduct.billingCycleType==="ONE_TIME"){recurringProduct=products.find(function(p){return p.productId==cartProduct.productId&&p.billingCycleType==="RECURRING"})}else{recurringProduct=cartProduct}if(!recurringProduct)return;// If recurring already in cart â†’ skip
var recurringAlreadyInCart=Object.keys(fkCart).some(function(key){return key.split(".")[0]==recurringProduct.campaignProductId});if(recurringAlreadyInCart)return;// ---- CLONE UI ELEMENT ----
var clone=templateItem.cloneNode(true);$(clone).show();// Fill product name
var nameEl=clone.querySelector(".cc-twoway-product-title");if(nameEl){var variantName;if(cartItem.variantId){var variantDetail=recurringProduct.variants.find(function(variant){return variant.variantDetailId==cartItem.variantId});variantName=variantDetail?variantDetail.title:""}var name=variantName?recurringProduct.productName+" "+variantName:recurringProduct.productName;nameEl.textContent=name||"Product Name"}var prodVariantId=cartItem.variantId?recurringProduct.campaignProductId+"."+cartItem.variantId:recurringProduct.campaignProductId;// Fill dropdown with recurring options
var dropdown=clone.querySelector(".cc-twoway-product-select");dropdown.setAttribute("cc-value",prodVariantId);dropdown.addEventListener("change",function(event){setRebillCart(prodVariantId,false,false)});if(dropdown){dropdown.innerHTML="";var params=getRecurringOptionsForProduct(recurringProduct);var recurringOptions=params.options||[];createAppendOptions(recurringOptions,dropdown,prodVariantId)}var lastItem=_toConsumableArray(document.querySelectorAll(".cc-twoway-product-item")).pop();lastItem.insertAdjacentElement("afterend",clone);itemsAdded++});// Hide block entirely if no items eligible
twoWayBlock.style.display=itemsAdded>0?"block":"none"}function generateTwoWayOnCart(product){var onetimeProdId=product.billingCycleType==="RECURRING"?swapSubscriptions("","",product.campaignProductId,true):null;onetimeProdId=onetimeProdId?product.variant?onetimeProdId.oneTimeId+"."+product.variant.variantDetailId:onetimeProdId.oneTimeId:"";// GET MATCHING RECURRING OPTIONS
var params=getRecurringOptionsForProduct(product);var recurringOptions=params.options||[];var recurringId=params?product.variant?params.recurringId+"."+product.variant.variantDetailId:params.recurringId:"";var subscribeLink,dropdown,revertLink;if(recurringId||onetimeProdId){// Subscribe link
subscribeLink=document.createElement("div");subscribeLink.setAttribute("class",onetimeProdId?"cc-subscribe-link":"cc-subscribe-link cc-fade cc-show");subscribeLink.style.display=onetimeProdId?"none":"block";subscribeLink.setAttribute("value",recurringId);subscribeLink.addEventListener("click",function(event){subscribeOrRevertProduct(event,recurringId,true)});subscribeLink.style.cursor="pointer";subscribeLink.style.color="#0c59abff";subscribeLink.style.marginTop="4px";subscribeLink.style.fontSize="14px";subscribeLink.innerText="Subscribe & Save";// Dropdown 
dropdown=document.createElement("select");dropdown.setAttribute("class",onetimeProdId?"cc-dropdown":"cc-dropdown cc-dropdown-transition");dropdown.setAttribute("cc-value",recurringId);dropdown.addEventListener("change",function(event){setRebillCart(recurringId,true,false);displayPrices()});dropdown.style.display=onetimeProdId?"block":"none";dropdown.style.marginTop="5px";dropdown.style.padding="6px";dropdown.style.borderRadius="6px";dropdown.style.border="1px solid #CCC";createAppendOptions(recurringOptions,dropdown,recurringId);// Revert link 
revertLink=document.createElement("div");revertLink.setAttribute("class",onetimeProdId?"cc-revert-link":"cc-revert-link cc-fade");revertLink.setAttribute("value",onetimeProdId);revertLink.addEventListener("click",function(event){subscribeOrRevertProduct(event,onetimeProdId)});revertLink.style.cursor="pointer";revertLink.style.color="rgba(252, 140, 21, 1)";revertLink.style.marginTop="5px";revertLink.style.fontSize="13px";revertLink.innerText="Revert Subscription";revertLink.style.display=onetimeProdId?"block":"none";//Subscribe clicked
subscribeLink&&subscribeLink.addEventListener("click",function(){// hide subscribe (fade-out)
subscribeLink.classList.remove("cc-show");setTimeout(function(){return subscribeLink.style.display="none"},250);// show dropdown (display â†’ animate)
dropdown.style.display="block";requestAnimationFrame(function(){return dropdown.classList.add("cc-show")});// show revert (fade-in)
revertLink.style.display="block";requestAnimationFrame(function(){return revertLink.classList.add("cc-show")})});// Revert clicked
revertLink&&revertLink.addEventListener("click",function(){// slide dropdown up
dropdown.classList.remove("cc-show");setTimeout(function(){return dropdown.style.display="none"},350);// fade-out revert link
revertLink.classList.remove("cc-show");setTimeout(function(){return revertLink.style.display="none"},250);// fade-in subscribe link
subscribeLink.style.display="block";requestAnimationFrame(function(){return subscribeLink.classList.add("cc-show")})})}return{subscribeLink:subscribeLink,dropdown:dropdown,revertLink:revertLink}}function displayPricesApplyMethod(){convertStaticCurrencyValues();ccUpdateTokenSpanValues();ccUpdateTokenSpanValues("[data-cc-perc-prod]");showVariantImageOnProductSection();var pageTypeId=pageData.pageTypeId;pageTypeId===4&&displayTwoWaySubscription();var _JSON$parse3=JSON.parse(sessionStorage.getItem("totals")),subTotal=_JSON$parse3.subTotal,vat=_JSON$parse3.vat,salesTax=_JSON$parse3.salesTax,shipTotal=_JSON$parse3.shipTotal,grandTotal=_JSON$parse3.grandTotal,discount=_JSON$parse3.discount,insurance=_JSON$parse3.insurance,savings=_JSON$parse3.savings,compareAtTotal=_JSON$parse3.compareAtTotal,surcharge=_JSON$parse3.surcharge;var symbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol?pageData.selectedCampaign.currencySymbol:"$";if(cellFormat.length>0){cartDisplay()}$(".cc-cart-container").length&&ccDisplayCustomCart();pageTypeId===9&&confirmation();if(document.getElementsByClassName("panelCartCircle")[0]){panelCartCircleUpdate()}var totalAmountElement=document.getElementById("totalAmountIs");if(totalAmountElement)totalAmountElement.innerHTML=ccFormatCurrency(parseFloat(subTotal).toFixed(2),symbol);var shippingChargesElement=document.getElementById("shippingCharges");if(shippingChargesElement)shippingChargesElement.innerHTML=ccFormatCurrency(parseFloat(shipTotal).toFixed(2),symbol);var thankyouPage=pageTypeId===5;var orderSavings=thankyouPage?ccSavings:savings;var orderData=JSON.parse(sessionStorage.getItem("orderData"));if(pageTypeId===5&&orderData){vat=parseFloat(orderData.taxTotal)}if([3,5].includes(pageTypeId)&&orderData){var exchangeRate=orderData.currencyCode===(returnCurrencyCode()||pageData.selectedCampaign.currency)?1:Number(sessionStorage.getItem("exchangeRate"));surcharge=parseFloat(orderData.surcharge||0)*exchangeRate}var priceElementClassMap=[["dynamic-price-total",subTotal],["dynamic-shipping-total",shipTotal],["vat",vat],["salesTax",salesTax],["grandTotal",grandTotal],["discount",discount],["insurance",insurance],["savings",orderSavings],["cc-negative-savings",orderSavings],["compareAtTotal",thankyouPage?ccCompareAtTotal:compareAtTotal],["cc-surcharge",surcharge]];if(pageTypeId===4){var taxObj=getTaxRate();priceElementClassMap.push(["salesTaxPercent",(taxObj.isVat?0:taxObj.taxRate*100)+"%"])}var priceElementClassMapLength=priceElementClassMap.length;for(var _i72=0;_i72<priceElementClassMapLength;_i72++){var key=priceElementClassMap[_i72][0];var value=priceElementClassMap[_i72][1];var displayElements=document.getElementsByClassName(key);var displayElementsLength=displayElements.length;if(displayElementsLength>0){for(var j=0;j<displayElementsLength;j++){var element=displayElements[j];var replaceTax=!element.classList.contains("vat")||parseFloat(salesTax)>0;if($(element).closest(".cc-invoice-details-block").length)continue;if(["discount","cc-negative-savings"].includes(key)&&parseFloat(value)>0){element.innerHTML="-"+ccFormatCurrency(parseFloat(value).toFixed(2),symbol)}else if(key==="salesTaxPercent"){element.innerHTML=value}else if(key!=="salesTax"||replaceTax){var _price4=parseFloat(value).toFixed(2);var showFreeLabel=$(element).hasClass("cc-cart-row-free-label")&&Number(_price4)===0&&["dynamic-price-total","dynamic-shipping-total","grandTotal"].includes(key)?"FREE":null;element.innerHTML=showFreeLabel?showFreeLabel:ccFormatCurrency(_price4,symbol)}}}}pageTypeId===9&&getLoginOrderDetails();displayGatewayScripts()}function addProduct(event){displayPrices()}function addToCart(event){var campaignProductId=event.target.value;var orderItems=getOrderItems();orderItems[campaignProductId]=1;sessionStorage.setItem("fkCart",JSON.stringify(orderItems));displayPrices()}function deselectVariantRadioTiles(campaignProductId){var productId=campaignProductId&&campaignProductId.split(".")[0];if(!productId){return}var section=$("section[name='product'][value='"+productId+"']");var tilesInputs=section&&section.length&&section.find("input[type='radio'][class='variant-radio']");var tilesInputLength=tilesInputs&&tilesInputs.length||0;for(var _i73=0;_i73<tilesInputLength;_i73++){var _item8=tilesInputs[_i73];_item8.checked=false;var styleObj={"box-shadow":"none"};var radioName=_item8.name.toLowerCase();radioName=radioName.split("-")[0];if(radioName.includes("color")&&!$(_item8).closest("[varianttype]").hasClass("ccNoColorTile")){styleObj["border"]="2px solid rgb(197, 202, 205)"}else{styleObj["background-color"]="transparent"}$(_item8.parentElement).css(styleObj);_item8.parentElement.dataset.selected="false"};}function removeFromCart(campaignProductId){ccHandleButtonStylesForRemovedProducts(campaignProductId);var orderItems=getOrderItems();delete orderItems[campaignProductId];orderItems=removeSubscriptionProduct(orderItems,campaignProductId);sessionStorage.setItem("fkCart",JSON.stringify(orderItems));displayPrices();deselectVariantRadioTiles(campaignProductId);openNav()}function ccQtyInputHandler(e,increment){e.preventDefault();var fieldName=$(e.target).data("field");var parent=$(e.target).closest("div");var currentVal=parseInt(parent.find("input[name="+fieldName+"]").val(),10);var input=parent.find("input[name="+fieldName+"]");if(!isNaN(currentVal)){increment?input.val(currentVal+1):currentVal>0?input.val(currentVal-1):null}else{input.val(1)}}function plusQuantity(campaignProductId,sectionId,fromSection,event){var orderItems=getOrderItems();var isVariantBundle1=event&&$(event.target).closest(".fk-variant-bundle1")[0];var isVariantBundle3=event&&$(event.target).closest(".cc-bundle-variants")[0];var isFinalCheckout=pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length;if(fromSection){ccQtyInputHandler(event,true);getVariants(sectionId,true);isVariantBundle3&&displayPrices()}campaignProductId=campaignProductId||sessionStorage.getItem("productAndVariantId");var currentQty=parseInt(orderItems[campaignProductId]);if(orderItems[campaignProductId]){if(orderItems[campaignProductId]<999){orderItems[campaignProductId]=(currentQty+1).toString()}}else orderItems[campaignProductId]=1;if(!fromSection||!isVariantBundle1&&isFinalCheckout){sessionStorage.setItem("fkCart",JSON.stringify(orderItems));displayPrices()}sessionStorage.removeItem("productAndVariantId")}function minusQuantity(campaignProductId,element,sectionId,fromSection,event){var orderItems=getOrderItems();var isVariantBundle1=event&&$(event.target).closest(".fk-variant-bundle1")[0];var isVariantBundle3=event&&$(event.target).closest(".cc-bundle-variants")[0];var isFinalCheckout=pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length;if(fromSection){ccQtyInputHandler(event);getVariants(sectionId,true);isVariantBundle3&&displayPrices()}campaignProductId=sessionStorage.getItem("productAndVariantId")||campaignProductId;if(parseInt(orderItems[campaignProductId])>1||$(element).closest(".fk-shopping-cart-quantity-wrapper-class").length===0){if(orderItems[campaignProductId]){var currentQty=parseInt(orderItems[campaignProductId]);orderItems[campaignProductId]=(currentQty-1).toString();if(orderItems[campaignProductId]<1){delete orderItems[campaignProductId];orderItems=removeSubscriptionProduct(orderItems,campaignProductId)}}if(!fromSection||!isVariantBundle1&&isFinalCheckout){sessionStorage.setItem("fkCart",JSON.stringify(orderItems));displayPrices()}}else{element.setAttribute("disabled","true")}sessionStorage.removeItem("productAndVariantId")}function panelCartCircleUpdate(){var cartProducts=getOrderItemDetails();var numberOfCartItems=0;if(cartProducts&&Object.keys(cartProducts).length>0){var cartProductsEntries=Object.entries(cartProducts);var cartProductsEntriesLength=cartProductsEntries.length;var prevBundleProduct;var bundleArray=[];for(var _i74=0;_i74<cartProductsEntriesLength;_i74++){var _product13=cartProductsEntries[_i74][1];var isVariantBundle=_product13&&_product13.isVariantBundle;var campaignProductId=cartProductsEntries[_i74][0];var showBundleInCart=isVariantBundle&&(!prevBundleProduct||prevBundleProduct!=_product13.campaignProductId&&!bundleArray[campaignProductId]);if(showBundleInCart){numberOfCartItems+=1;bundleArray.push(campaignProductId)}else if(isVariantBundle){continue}else{numberOfCartItems+=parseInt(cartProductsEntries[_i74][1].currentOrderQuantity)}prevBundleProduct=_product13&&_product13.campaignProductId}document.getElementsByClassName("panelCartCircle")[0].innerHTML=numberOfCartItems}else{document.getElementsByClassName("panelCartCircle")[0].innerHTML=0}}function updateCSSForShoppingCartSections(element){$(element).css({"overflow-wrap":"normal","word-wrap":"normal","word-break":"normal"})}function createCustomProperties(customCartProperty,accordionDynamicCartRow,accordionEmptyDynamicCartData,accordionDynamicCartData,customProperties,firstProperty,rebillCartFrequency,trialOfferLabel){if(customCartProperty){var quantity;var newDynamicHorizontalLine=document.createElement("hr");var productDetails=customCartProperty.split("|");productDetails.splice(0,1);var productDetailsLength=productDetails.length;for(var j=0;j<productDetailsLength;j++){if(j==0){quantity=document.createElement("p");quantity.innerHTML="<b>Quantity</b>"+": "+productDetails[j];customProperties.appendChild(quantity)}else{var customPropertiesData=document.createElement("p");var productDetailsCollection=productDetails[j].split(":");if(productDetailsCollection.length>2){productDetailsCollection=productDetailsCollection.slice(0,2)}if(ccCheckBase64CustomDataKey(productDetailsCollection[0]))continue;var productDetailsString=productDetailsCollection.join(":");var highlightPropertyName="<b>"+productDetailsCollection[0]+"</b>";var formattedProperty=productDetailsString.replace(productDetailsCollection[0],highlightPropertyName);customPropertiesData.innerHTML=formattedProperty.replaceAll(":",": ");customProperties.appendChild(customPropertiesData)}!firstProperty&&j==0&&quantity.prepend(newDynamicHorizontalLine);accordionDynamicCartData.appendChild(customProperties);accordionDynamicCartRow.appendChild(accordionEmptyDynamicCartData);accordionDynamicCartRow.appendChild(accordionDynamicCartData)}}var createAccordionCartRow=function createAccordionCartRow(message){var customPropertiesData=document.createElement("p");customPropertiesData.innerHTML=message;customProperties.append(customPropertiesData);accordionDynamicCartData.appendChild(customProperties);accordionDynamicCartRow.appendChild(accordionEmptyDynamicCartData);accordionDynamicCartRow.appendChild(accordionDynamicCartData)};trialOfferLabel&&createAccordionCartRow(trialOfferLabel);rebillCartFrequency&&createAccordionCartRow(rebillCartFrequency)}function ccDisplayCustomCart(){var pageId=pageData&&pageData.pageTypeId;var memberAreaPage=pageId===9;var thankyouPage=pageId===5,checkoutFlow=[2,3,4].includes(pageId),ccIsVat=!getTaxRate().isVat;var disableActions=[3,5,9].includes(pageId);var cartProducts=memberAreaPage?getLoginOrderDetails().items||{}:getOrderItemDetails();var sessionOrderData=sessionStorage.getItem("orderData"),invoiceExchangeRate=1;sessionOrderData=sessionOrderData&&JSON.parse(sessionOrderData);if(thankyouPage&&sessionOrderData&&!(cartProducts&&Object.keys(cartProducts).length)){cartProducts=sessionOrderData&&sessionOrderData.items||{};memberAreaPage=true}if(thankyouPage||pageId===3){invoiceExchangeRate=Number(sessionStorage.getItem("exchangeRate"))||invoiceExchangeRate;if((sessionOrderData&&sessionOrderData.currencyCode)===(returnCurrencyCode()||pageData.selectedCampaign.currency))invoiceExchangeRate=1}var cartProductsLength=Object.keys(cartProducts).length;var cartElement=$(".cc-cart-container");if(!cartProductsLength){cartElement.css("display","none")}else{cartElement.css("display","block")}var cartElementLength=cartElement.length;if(cartElementLength){var _customCart2=sessionStorage.getItem("customCart");_customCart2=_customCart2&&JSON.parse(_customCart2)||{};var upsaleComboProducts=sessionStorage.getItem("upsaleComboProducts");upsaleComboProducts=upsaleComboProducts&&JSON.parse(upsaleComboProducts)||[];var bundleItems=sessionStorage.getItem("bundleItems")!==null?JSON.parse(sessionStorage.getItem("bundleItems")):{};if(Object.keys(bundleItems).length){ccConstructBundleItem("","",bundleItems);var bundleStringArray=sessionStorage.getItem("bundleStringArray")!==null?JSON.parse(sessionStorage.getItem("bundleStringArray")):{};for(var _i75 in bundleStringArray){upsaleComboProducts.push(bundleStringArray[_i75])}}if(upsaleComboProducts&&upsaleComboProducts.length){var customCartCount=_customCart2?Object.keys(_customCart2).length:0;upsaleComboProducts.forEach(function(item,index){_customCart2[customCartCount+index]=item})}var processedCustomCart={};if(_customCart2){var _loop21=function _loop21(){var customCartValue=_customCart2[item];customCartValue=customCartValue.split("|");var productData={};customCartValue.forEach(function(item,index){if(index===1){productData[index]=["Quantity",item]}if(index>1){var itemData=item.split(":");if(itemData[0]){productData[index]=[itemData[0],itemData[1]||""]}}});var cartKey=customCartValue[0].split(".")[0];processedCustomCart[cartKey]=productData};for(item in _customCart2){_loop21()}}var _rebillCart=sessionStorage.getItem("rebillCart");_rebillCart=_rebillCart&&JSON.parse(_rebillCart);var tempCartProducts=cartProducts;var currencySymbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol||"";var productPercentagePrice=Number(sessionStorage.getItem("ccCartProductsPercentageTotal"))||0;var shopifyItems=pageData.cartData&&pageData.cartData.itemsInfo||{};for(var _i76=0;_i76<cartElementLength;_i76++){var cartObj=$(cartElement[_i76]);cartProducts=tempCartProducts;memberAreaPage=pageId==9?true:false;var invoiceElement=cartObj.hasClass("cc-invoice-container")&&[3,5].includes(pageId);if(invoiceElement){cartProducts=sessionOrderData&&sessionOrderData.items||{};memberAreaPage=true}cartObj.find(".cc-cart-items-count").html(cartProductsLength);var cartRow=cartObj.find(".cc-cart-row").first();var cartRowCloner=cartRow.clone(true);cartRow.css("display","none");cartObj.find(".cc-cart-row").slice(1).remove();var cartProductsEntries=Object.entries(cartProducts);if(!cartObj.hasClass("cc-invoice-container")){cartProductsEntries=sortCartDisplayOrder(cartProductsEntries,getCartDisplayOrder())}var cartProductsEntriesLength=cartProductsEntries.length;var prevProd=void 0;var _loop22=function _loop22(){var cartRowClone=cartRowCloner.clone(true);var campaignProductId=cartProductsEntries[j][0];var product=cartProductsEntries[j][1];var customAttrs=product.customization;var prodId=campaignProductId.split(".")[0];var itemAltValue=altValues&&altValues[campaignProductId+"|"+product.currentOrderQuantity];var insureShipProduct=pageData.selectedCampaign.insureShipProductId==campaignProductId;var productPercentageItemPrice;if(ccIsVat&&checkoutFlow&&product.isPricePercent===1&&!shopifyItems[campaignProductId]){var itemAltValuePrice=itemAltValue&&itemAltValue.split("|")[1];productPercentageItemPrice=(productPercentagePrice*(Number(itemAltValuePrice?itemAltValuePrice:product.cycle1_price)||0)*0.01).toFixed(2)}if(!product.isVariantBundle||!prevProd||prevProd!=prodId){if(memberAreaPage&&customAttrs){var customAttrsObj=customAttrs&&customAttrs.length&&customAttrs[0];var _productData10={};if(customAttrsObj&&customAttrsObj.quantity){_productData10[0]=["Quantity",customAttrsObj.quantity]}var productAttributes=customAttrsObj&&customAttrsObj.attributes;productAttributes&&productAttributes.length&&productAttributes.forEach(function(item,index){_productData10[index+1]=[item.key,item.value]});processedCustomCart[campaignProductId]=_productData10}var currentOrderQuantity=memberAreaPage?product.qty:product.currentOrderQuantity;var image=cartRowClone.find(".cc-cart-row-img");var prodQtyBubble=cartRowClone.find(".cc-cart-prod-qty-bubble");if(image.length){var imageUrl=product.variant&&product.variant.imageUrl!==""?product.variant.imageUrl:product.imageUrl;if(!imageUrl&&invoiceElement){var campaignProduct=pageData.selectedCampaign.products.find(function(item){return item.campaignProductId.toString()===product.productId});if(campaignProduct){imageUrl=campaignProduct.imageUrl;var productVariantId=product.variantDetailId;if(productVariantId){var productVariants=campaignProduct.variants;var _productVariant=productVariants&&productVariants.length&&productVariants.find(function(item){return item.variantDetailId.toString()===productVariantId});imageUrl=_productVariant&&_productVariant.imageUrl||imageUrl}}}image.attr("src",imageUrl);image.attr("data-src",imageUrl);prodQtyBubble.html(currentOrderQuantity);if(!imageUrl){cartRowClone.find(".cc-cart-row-img").remove();prodQtyBubble.remove()}}else{prodQtyBubble.remove()}var prodSavingPrice=cartRowClone.find(".cc-cart-row-prod-saving");var prodSavingPerc=cartRowClone.find(".cc-cart-row-prod-saving-perc");var savingElement=prodSavingPrice.length||prodSavingPerc.length;var tempProductPrice=0;var prodPrice=cartRowClone.find(".cc-cart-row-prod-price");if(prodPrice.length||savingElement){var showLabel;var showFreeLabel=prodPrice.hasClass("cc-cart-row-free-label");if(memberAreaPage){tempProductPrice=Number((Number(product.vatPrice||product.price)*invoiceExchangeRate).toFixed(2));showLabel=showFreeLabel&&Number(tempProductPrice)===0;prodPrice.html(showLabel?"FREE":ccFormatCurrency(tempProductPrice,currencySymbol))}else{var unitPrice=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;tempProductPrice=productPercentageItemPrice?productPercentageItemPrice:getItemPrice(campaignProductId,unitPrice,1).toFixed(2);showLabel=showFreeLabel&&Number(tempProductPrice)===0;prodPrice.html(showLabel?"FREE":ccFormatCurrency(tempProductPrice,currencySymbol))}!showLabel&&prodPrice.removeClass("cc-cart-row-free-label")}var prodTotalPrice=cartRowClone.find(".cc-cart-row-prod-total");if(prodTotalPrice.length&&!memberAreaPage){var _unitPrice=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var totalPrice=productPercentageItemPrice?(Number(productPercentageItemPrice)*(itemAltValue?1:product.currentOrderQuantity)).toFixed(2):getItemPrice(campaignProductId,_unitPrice,product.currentOrderQuantity).toFixed(2);var _showLabel=prodPrice.hasClass("cc-cart-row-free-label")&&Number(totalPrice)===0;!_showLabel&&prodTotalPrice.removeClass("cc-cart-row-free-label");prodTotalPrice.html(_showLabel?"FREE":ccFormatCurrency(totalPrice,currencySymbol))}var tempProductComparePrice=0;var prodComparePrice=cartRowClone.find(".cc-cart-row-prod-compare");if((prodComparePrice.length||savingElement)&&!memberAreaPage){var _unitPrice2=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var compareAtPrice=product.compareAtPrice&&parseFloat(product.compareAtPrice)>0?product.compareAtPrice:null;compareAtPrice=product.variant&&product.variant.compareAtPrice&&parseFloat(product.variant.compareAtPrice)>0&&!product.isVariantBundle?product.variant.compareAtPrice:compareAtPrice;if(compareAtPrice){tempProductComparePrice=parseFloat(getItemPrice(null,compareAtPrice,1,false,false,true).toFixed(2));compareAtPrice=ccFormatCurrency(tempProductComparePrice,currencySymbol);prodComparePrice.html(compareAtPrice)}else{prodComparePrice.html("");prodSavingPrice.html("");prodSavingPerc.html("")}}if(tempProductComparePrice&&savingElement&&!disableActions){var savingPrice=parseFloat((tempProductComparePrice-parseFloat(tempProductPrice)).toFixed(2));var savingPerc=parseFloat(savingPrice)/tempProductComparePrice*100;prodSavingPrice.html(ccFormatCurrency(savingPrice<0?"0.00":savingPrice),currencySymbol);prodSavingPerc.html((savingPerc<0?0:savingPerc.toFixed(0))+"%")}var prodQty=cartRowClone.find(".cc-cart-row-prod-qty");if(prodQty.length){prodQty.html(currentOrderQuantity)}var productVariant=product.variant;var maxVariantSupport=3;var variantContainer=cartRowClone.find(".cc-cart-row-variant");var outOfStock=false;if(productVariant&&!product.isVariantBundle){outOfStock=verifyStock&&product.cycle1_isShippable&&parseInt(productVariant.stockQuantity)<parseInt(currentOrderQuantity);for(var k=1;k<=maxVariantSupport;k++){if(!productVariant.hasOwnProperty("variantName"+k)){break}var variantName=productVariant["variantName"+k];if(variantName){var variantContainerClone=variantContainer.clone(true);variantContainerClone.find(".cc-cart-row-prod-variant").html(productVariant["variantOptionName"+k]);variantContainerClone.find(".cc-cart-row-prod-variant-label").html(variantName);variantContainerClone.insertBefore(variantContainer)}}}else{outOfStock=verifyStock&&product.cycle1_isShippable&&parseInt(product.stockQuantity)<parseInt(currentOrderQuantity)}var createVariantContainer=function createVariantContainer(label,variant,removeLabel,removeVariantClasses){var variantContainerClone=variantContainer.clone(true);var variantElement=variantContainerClone.find(".cc-cart-row-prod-variant");variantElement.html(variant);label&&variantContainerClone.find(".cc-cart-row-prod-variant-label").html(label);removeLabel&&variantContainerClone.find(".cc-cart-row-prod-variant-label").remove();removeVariantClasses&&removeVariantClasses.forEach(function(item){variantElement.removeClass(item)});variantContainerClone.insertBefore(variantContainer)};var processedCustomCartProduct=processedCustomCart[campaignProductId]||processedCustomCart[prodId];if(processedCustomCartProduct){var classesToRemove=["cc-cart-row-frequency","cc-cart-row-show-trial"];for(var _item9 in processedCustomCartProduct){if(ccCheckBase64CustomDataKey(processedCustomCartProduct[_item9][0]))continue;createVariantContainer(processedCustomCartProduct[_item9][0],processedCustomCartProduct[_item9][1],null,classesToRemove)}}if(variantContainer.find(".cc-cart-row-prod-variant").hasClass("cc-cart-row-show-trial")&&product.trialEnabled&&product.cycle1_billDelay&&product.cycle2_price){var currencyPrice=ccGetProductCurrencyPrice(product.campaignProductId,2);var billDelay=product.cycle1_billDelay,showTrialProdLabel="Trial: "+ccFormatCurrency(currencyPrice?Number(currencyPrice):getItemPrice(null,product.cycle2_price,1).toFixed(2))+" in "+billDelay+" "+"day"+(Number(billDelay)>1?"s":"");createVariantContainer(null,showTrialProdLabel,true,["cc-cart-row-frequency"])}var rebillFrequency=_rebillCart&&_rebillCart[campaignProductId];if(variantContainer.find(".cc-cart-row-prod-variant").hasClass("cc-cart-row-frequency")&&!rebillFrequency&&product.billingCycleType==="RECURRING"&&!product.cycle2_billDelay&&product.cycle1_billDelay){var variantBillDelay=product.variant&&product.variant.billDelay;rebillFrequency=variantBillDelay?variantBillDelay:product.cycle1_billDelay;rebillFrequency=rebillFrequency===1?rebillFrequency+" day":rebillFrequency+" days";rebillFrequency=(product.cycle1_isShippable?"Delivery every":"Billing every")+" "+rebillFrequency}rebillFrequency&&createVariantContainer(null,rebillFrequency,true,["cc-cart-row-show-trial"]);variantContainer.remove();var productTitle=cartRowClone.find(".cc-cart-row-prod-title");if(productTitle.length){var productVariantName=product.variantName||product.title;var productName=memberAreaPage?product.name+(productVariantName?"<br>"+productVariantName:""):product.productName;productTitle.html(productName+(!memberAreaPage&&outOfStock?"  - OUT-OF-STOCK":""))}var plusIcon=cartRowClone.find(".cc-cart-row-prod-qty-plus");product.isVariantBundle?plusIcon[0].style.visibility="hidden":null;if(plusIcon.length){disableActions||insureShipProduct?plusIcon.css({"pointer-events":"none","filter":"opacity(0.5)"}):plusIcon[0].setAttribute("onclick","plusQuantity('"+campaignProductId+"');")}var minusIcon=cartRowClone.find(".cc-cart-row-prod-qty-minus");product.isVariantBundle?minusIcon[0].style.visibility="hidden":null;if(minusIcon.length){if(parseInt(product.currentOrderQuantity)===1||disableActions||insureShipProduct){minusIcon.css({"pointer-events":"none","filter":"opacity(0.5)"})}else{minusIcon[0].onclick=function(e){e.target.style.pointerEvents="none";minusQuantity(campaignProductId,e.target)}}}var _productId7=campaignProductId&&campaignProductId.split(".")[0];var trashIcon=cartRowClone.find(".cc-cart-row-trash-icon");if(_productId7&&fkCheckboxAndRadioProductIdHashMap[_productId7]||disableActions||insureShipProduct){trashIcon.remove()}else if(trashIcon.length){trashIcon[0].setAttribute("onclick","removeFromCart('"+campaignProductId+"');")}var toggleIcon=cartRowClone.find(".cc-toggle-row-details");if(toggleIcon.length){var variantElements=cartRowClone.find(".cc-cart-row-variant");if(variantElements.length){variantElements.css("display","none");toggleIcon[0].onclick=function(){if(toggleIcon.hasClass("cc-rotate-row-icon")){variantElements.first().css("display")==="none"?toggleIcon.css("transform","rotate(90deg)"):toggleIcon.css("transform","rotate(0deg)")}variantElements.toggle()}}else{toggleIcon.remove()}}var twoWayDiv=document.querySelector(".cc-twoway-subscription");if(twoWayDiv&&product){var links=generateTwoWayOnCart(product);var productContent=$(cartRowClone).find(".cc-cart-row-content")[0];links.subscribeLink&&productContent.appendChild(links.subscribeLink);links.dropdown&&productContent.appendChild(links.dropdown);links.revertLink&&productContent.appendChild(links.revertLink)}cartRowClone.css("display","block");cartObj.append(cartRowClone)}prevProd=prodId};for(var j=0;j<cartProductsEntriesLength;j++){_loop22()}}}}function ccConstructBundleItem(productId,product,bundleItems,breakTag){var bundleStringArray=sessionStorage.getItem("bundleStringArray")!==null?JSON.parse(sessionStorage.getItem("bundleStringArray")):{};var bundleVariantAndQty="";var _loop23=function _loop23(){var bundleProdId=bundleItems[_i77].split(".")[0];if(!productId||productId==bundleProdId){product=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==bundleProdId});var bundleString=bundleProdId+"|1|";var bundleProdArray=bundleItems[_i77].split("|");var _loop24=function _loop24(){if(bundleProdArray[_i78]!=""){var qty=bundleProdArray[_i78].split(":")[1];var bundleProdData=bundleProdArray[_i78].split(":")[0];var variantId=bundleProdData.split(".")[1];var variant=product&&product.variants.find(function(data){return data.variantDetailId==variantId});productId&&variant?bundleVariantAndQty+=variant.title+" :  "+qty+breakTag:null;variant?bundleString+=variant.title+":"+qty+"|":null}};for(var _i78 in bundleProdArray){_loop24()}bundleStringArray[bundleProdId]=bundleString}};for(var _i77 in bundleItems){_loop23()}sessionStorage.setItem("bundleStringArray",JSON.stringify(bundleStringArray));return bundleVariantAndQty}function ccBundleDisplay(confirmation,productData,product,bundleIndex,newSymbol,itemPrice,qty){var productId=productData.split(".")[0];$("head").append(comboStyles);var listOfItem="";var breakTag=confirmation?"<br>":"<br><br>";var bundleItems=sessionStorage.getItem("bundleItems")!==null?JSON.parse(sessionStorage.getItem("bundleItems")):{};var bundleVariantAndQty=ccConstructBundleItem(productId,product,bundleItems,breakTag);if(confirmation===false){listOfItem="<a type=\"button\" data-toggle=\"collapse\" data-target=\"#index"+bundleIndex+"\" onClick=\"rotateCaret(event)\"><i class=\"fas fa-caret-right combo-caret\"></i></a>"+" "+product.productName+"<tr><td ><div id=\"index"+bundleIndex+"\" class=\"collapse combo\"> "+bundleVariantAndQty+" </div></td></tr>"}else if(confirmation===true){var productVariant=(pageData.pageTypeId===9?product.variantName:product.title)||"";var prodName=product.name||product.productName;listOfItem="<tr><td><a type=\"button\" data-toggle=\"collapse\" data-target=\"#index"+bundleIndex+"\" onClick=\"rotateCaret(event)\"><i class=\"fas fa-caret-right combo-caret\"></i></a>"+" "+prodName+" "+productVariant+"</td><td style=\"text-align:center;\">"+qty+"</td><td style=\"text-align:right;\"> "+ccFormatCurrency(itemPrice,newSymbol)+" </td></tr><tr><td><div id=\"index"+bundleIndex+"\" class=\"collapse combo\"> "+bundleVariantAndQty+" </div></td></tr>"}else if(confirmation==="sideCart"){var caretIcon="<a type='button' class='bundleAnchor' data-toggle='collapse' data-target='#index"+bundleIndex+"' onClick='rotateCaret(event)'><i class='fas fa-caret-right combo-caret'></i></a>";var bundleItemsString="<span id='index"+bundleIndex+"' class='collapse combo popUpCartBundle'> "+bundleVariantAndQty+"</span>";listOfItem={caretIcon:caretIcon,bundleItemsString:bundleItemsString}}return listOfItem}function getRecurringOptionsForProduct(product){var _pageData7;var allProducts=((_pageData7=pageData)===null||_pageData7===void 0||(_pageData7=_pageData7.selectedCampaign)===null||_pageData7===void 0?void 0:_pageData7.products)||[];if(!product)return{options:[],recurringId:null};var siblingProducts=allProducts.filter(function(p){return p.productId===product.productId});var oneTimeSibling=siblingProducts.find(function(p){return p.billingCycleType==="ONE_TIME"})||null;var recurringSibling=siblingProducts.find(function(p){return p.billingCycleType==="RECURRING"})||null;//Gather cycles subscriptionOptions preferred, fallback to cycle1_billDelay...cycle6_billDelay
var cycles=[];if(oneTimeSibling&&oneTimeSibling.subscriptionOptions){cycles=oneTimeSibling.subscriptionOptions.split(",")}else if(recurringSibling){cycles.push(recurringSibling["cycle1_billDelay"]+" Days");var variantId=product.variant?product.variant.variantDetailId:null;var prodVariantId=variantId?recurringSibling.campaignProductId+"."+variantId:recurringSibling.campaignProductId;!nonRebillSubscriptions.includes(prodVariantId)&&nonRebillSubscriptions.push(prodVariantId)}//Return recurring ID + options (dummy or real)
return{recurringId:recurringSibling?recurringSibling.campaignProductId:null,options:cycles}}function cartDisplay(){var cartTable=document.getElementById("fk-dynamic-cart-table"),pageTypeId=pageData&&pageData.pageTypeId;var showTrialOffer=cellFormat&&cellFormat.find(function(item){return $(item).hasClass("cc-cart-row-show-trial")});if(cartTable&&(sessionStorage.getItem("customCart")!==null||sessionStorage.getItem("rebillCart")!==null||showTrialOffer))!cartTable.classList.contains("fold-table")&&cartTable.classList.add("fold-table");var dynamicCartBody=document.querySelector("tbody[id='fk-dynamic-cart-body']");var cartHeader=document.querySelector("thead[id='fk-dynamic-cart-head']");if(!cartTable)return;var memberAreaPage=pageTypeId===9;var cartProducts=memberAreaPage?getLoginOrderDetails().items||{}:getOrderItemDetails();dynamicCartBody.innerHTML="";if(pageTypeId===33){cartHeader.style.borderBottom="1px solid #808080"}if(cartProducts&&Object.keys(cartProducts).length>0){var cartProductsEntries=sortCartDisplayOrder(Object.entries(cartProducts),getCartDisplayOrder());var cartProductsEntriesLength=cartProductsEntries.length;var productCombo=JSON.parse(sessionStorage.getItem("upsaleComboProducts")||"{}");var isCombo=productCombo&&productCombo.length>0;isCombo&&$("head").append(comboStyles);var collapseIndex=1,bundleIndex=1;var listOfItem="";var comboResult,matchUpsale,prevBundleProduct,bundleList;var shopifyItems=pageData.cartData&&pageData.cartData.itemsInfo||{},checkoutFlow=[2,3,4].includes(pageTypeId);var productPercentagePrice=Number(sessionStorage.getItem("ccCartProductsPercentageTotal"))||0;var ccIsVat=!getTaxRate().isVat;var bundleArray=[];var _loop25=function _loop25(){var product=cartProductsEntries[_i79][1];var campaignProductId=memberAreaPage&&product&&product.variantDetailId?cartProductsEntries[_i79][0]+"."+product.variantDetailId:cartProductsEntries[_i79][0];var combosList=[];var isVariantBundle=product&&product.isVariantBundle;var showBundleInCart=isVariantBundle&&(!prevBundleProduct||prevBundleProduct!=product.campaignProductId&&!bundleArray[campaignProductId]);if(showBundleInCart){listOfItem=ccBundleDisplay(false,campaignProductId,product,bundleIndex);bundleArray.push(campaignProductId);bundleIndex++}else if(isVariantBundle){listOfItem="";return 1;// continue
}prevBundleProduct=product&&product.campaignProductId;if(isCombo){comboResult=comboDisplay(false,productCombo,campaignProductId,product.currentOrderQuantity,product,collapseIndex,matchUpsale);listOfItem=comboResult.listOfItem;matchUpsale=comboResult.matchUpsale;if(matchUpsale){combosList.push(campaignProductId);collapseIndex++}}var newDynamicCartRow=document.createElement("TR");newDynamicCartRow.classList.add("fk-custom-cart-view");var accordionDynamicCartRow=document.createElement("TR");accordionDynamicCartRow.classList.add("fk-custom-cart-fold");var accordionEmptyDynamicCartData=document.createElement("TD");accordionEmptyDynamicCartData.style.visibility="hidden";var accordionDynamicCartData=document.createElement("TD");accordionDynamicCartData.colSpan="3";var customProperties=document.createElement("div");customProperties.classList.add("fold-content");var customCartData=sessionStorage.getItem("customCart")!==null?JSON.parse(sessionStorage.getItem("customCart")):{};var customAttrString=ccProductAttrToString(product);if(memberAreaPage&&customAttrString){customCartData[0]=customAttrString}var customProductIds=[];var isCustomProperty=false,showTrialProdLabel;for(var _productData11 in customCartData){customProductIds.push(customCartData[_productData11].split("|")[0])}var trialProd=showTrialOffer&&product.trialEnabled&&product.cycle1_billDelay&&product.cycle2_price;if(trialProd){var billDelay=product.cycle1_billDelay;var currencyPrice=ccGetProductCurrencyPrice(product.campaignProductId,2);showTrialProdLabel="Trial: "+ccFormatCurrency(currencyPrice?Number(currencyPrice):getItemPrice(null,product.cycle2_price,1).toFixed(2))+" in "+billDelay+" "+"day"+(Number(billDelay)>1?"s":"")}var rebilCartData=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):{};var rebilCartDetails=rebilCartData[campaignProductId];if(customProductIds.includes(campaignProductId)){isCustomProperty=true;for(var _productData12 in customCartData){var firstProperty=_productData12==0&&_i79==0?true:false;if(customCartData[_productData12].split("|")[0]==campaignProductId){createCustomProperties(customCartData[_productData12],accordionDynamicCartRow,accordionEmptyDynamicCartData,accordionDynamicCartData,customProperties,firstProperty,rebilCartDetails,showTrialProdLabel)}}}else if(rebilCartDetails||showTrialProdLabel){isCustomProperty=true;var _firstProperty=_i79==0?true:false;createCustomProperties(null,accordionDynamicCartRow,accordionEmptyDynamicCartData,accordionDynamicCartData,customProperties,_firstProperty,rebilCartDetails,showTrialProdLabel)}var caretIcon=document.createElement("i");caretIcon.innerHTML="&nbsp;";caretIcon.style.cssText="cursor:pointer;transition:all .3s ease";caretIcon.id="caretIcon";caretIcon.classList="fa fa-caret-right";if(pageTypeId===33){newDynamicCartRow.style.borderBottom="1px solid #808080"}var cellFormatLength=cellFormat.length;var insureShipProduct=pageData.selectedCampaign.insureShipProductId==cartProductsEntries[_i79][0];var itemAltValue=altValues&&altValues[campaignProductId+"|"+product.currentOrderQuantity];var _loop26=function _loop26(){var cell=cellFormat[j];var isQuantityCirclePresent=cell.getElementsByClassName("quantity-circle");if(cell.title.toLowerCase()==="image"){var newDynamicImage=document.createElement("TD");cell.id!==""&&newDynamicImage.setAttribute("id",cell.id);newDynamicImage.className="table-cell image-quantity";var imageUrl=product.variant&&product.variant.imageUrl!==""?product.variant.imageUrl:product.imageUrl;if(imageUrl!==""&&!memberAreaPage){//put the image here
var productImage=document.createElement("img");productImage.src=imageUrl;productImage.className="product-cart-image";if(cell.firstChild!==null&&cell.firstChild.tagName==="IMG"){productImage.className=cell.firstChild.className;if(cell.firstChild.id!=="")productImage.setAttribute("id",cell.firstChild.id)}if(isQuantityCirclePresent&&isQuantityCirclePresent.length>0){var imageQuantityContainer=document.createElement("div");imageQuantityContainer.className="image-quantity-container";var quantityText=document.createElement("div");quantityText.innerText=product.currentOrderQuantity;quantityText.className="quantity-circle";imageQuantityContainer.appendChild(productImage);if(cell.childNodes&&cell.childNodes[0]&&cell.childNodes[0].childElementCount>1){if(cell.childNodes[0].lastChild&&cell.childNodes[0].lastChild.id!==""){quantityText.setAttribute("id",cell.childNodes[0].lastChild.id)}imageQuantityContainer.appendChild(quantityText)}newDynamicImage.appendChild(imageQuantityContainer)}else{newDynamicImage.appendChild(productImage)}}newDynamicCartRow.appendChild(newDynamicImage)}if(cell.title.toLowerCase()==="item"){var newDynamicItem=document.createElement("TD");var newDynamicItemNewLine=document.createElement("BR");newDynamicItem.innerHTML=cell.innerHTML;cell.id!==""&&newDynamicItem.setAttribute("id",cell.id);newDynamicItem.className="table-cell";var currentOrderQuantity=product.currentOrderQuantity;var productStockStatus="";if(!product.variant){productStockStatus=verifyStock&&product.cycle1_isShippable&&parseInt(product.stockQuantity)<parseInt(currentOrderQuantity)?"  - OUT-OF-STOCK":""}if(combosList.includes((product.campaignProductId||campaignProductId).toString())||isVariantBundle){newDynamicItem.innerHTML=listOfItem+productStockStatus}else{newDynamicItem.innerHTML=memberAreaPage?product.name+(product.variantName?"<br>"+product.variantName:""):product.productName+productStockStatus}isCustomProperty&&newDynamicItem.prepend(caretIcon);if(product.variant&&product.variant.title&&!isVariantBundle){var variantStockStatus=verifyStock&&product.cycle1_isShippable&&parseInt(product.variant.stockQuantity)<parseInt(currentOrderQuantity)?"  - OUT-OF-STOCK":"";var newDynamicTitle=document.createElement("span");newDynamicTitle.innerText=product.variant.title+variantStockStatus;newDynamicItem.appendChild(document.createElement("BR"));newDynamicItem.appendChild(newDynamicTitle)}newDynamicItem.appendChild(newDynamicItemNewLine);if(cell.classList.contains("fk-shopping-cart-item")&&cell.getElementsByTagName("I")[0]){var _productId8=campaignProductId&&campaignProductId.split(".")[0];if(_productId8&&!fkCheckboxAndRadioProductIdHashMap[_productId8]&&!memberAreaPage&&!insureShipProduct){var trashElement=document.createElement("I");trashElement.className=cell.getElementsByTagName("I")[0].classList.toString();trashElement.style.cursor="pointer";newDynamicItem.appendChild(trashElement);trashElement.setAttribute("onclick","removeFromCart('"+campaignProductId+"');")}}newDynamicCartRow.appendChild(newDynamicItem);var twoWayDiv=document.querySelector(".cc-twoway-subscription");if(twoWayDiv&&product){var links=generateTwoWayOnCart(product);links.subscribeLink&&newDynamicItem.appendChild(links.subscribeLink);links.dropdown&&newDynamicItem.appendChild(links.dropdown);links.revertLink&&newDynamicItem.appendChild(links.revertLink)}}if(cell.title.toLowerCase()==="quantity"){var newDynamicQuantity=document.createElement("TD");updateCSSForShoppingCartSections(newDynamicQuantity);newDynamicQuantity.innerHTML=cell.innerHTML;newShoppingCart=$(newDynamicQuantity).find(".fk-shopping-cart-quantity-wrapper-class")[0];childElement=newShoppingCart?newShoppingCart.childNodes:newDynamicQuantity.childNodes;newDynamicQuantity.setAttribute("id",cell.id);newDynamicQuantity.className="table-cell";newDynamicQuantity.style.textAlign="center";var _currentOrderQuantity=!isVariantBundle?product.currentOrderQuantity:"1";if(childElement){childElement.forEach(function(ele){if($(ele).text().length>0&&ele.tagName!=="I"){if(ele.tagName==="DIV"){ele.textContent=null;var newQuantitySpan=document.createElement("SPAN");$(newQuantitySpan).css({"margin":"0 auto"});newQuantitySpan.textContent=memberAreaPage?product.qty:_currentOrderQuantity;ele.appendChild(newQuantitySpan)}else{ele.textContent=memberAreaPage?product.qty:_currentOrderQuantity}}var minusHide=product.isVariantBundle&&ele&&ele.classList&&(ele.classList.contains("fk-shopping-cart-minus")||ele.classList.contains("minus-style"));var plusHide=product.isVariantBundle&&ele&&ele.classList&&(ele.classList.contains("fk-shopping-cart-plus")||ele.classList.contains("plus-style"));minusHide||plusHide?ele.style.visibility="hidden":null;if(!minusHide&&ele&&ele.classList&&(ele.classList.contains("fk-shopping-cart-minus")||ele.classList.contains("minus-style"))){ele.textContent=!ele.classList.contains("minus-style")?"-":"";if(ele.classList.contains("fk-shopping-cart-minus")){var _orderItems9=getOrderItems();if(parseInt(_orderItems9[campaignProductId])>1){ele.setAttribute("onclick","minusQuantity('"+campaignProductId+"',this);")}else{ele.setAttribute("disabled","true")}}else{ele.setAttribute("onclick","minusQuantity('"+campaignProductId+"',this);")}if(memberAreaPage||insureShipProduct){ele.setAttribute("onclick","");ele.setAttribute("disabled","true")}}if(!plusHide&&ele&&ele.classList&&(ele.classList.contains("fk-shopping-cart-plus")||ele.classList.contains("plus-style"))){ele.textContent=!ele.classList.contains("plus-style")?"+":"";if(memberAreaPage||insureShipProduct){ele.setAttribute("onclick","");ele.setAttribute("disabled","true")}else{ele.setAttribute("onclick","plusQuantity('"+campaignProductId+"');")}}})}newDynamicCartRow.appendChild(newDynamicQuantity)}var productPercentageItemPrice;if(ccIsVat&&checkoutFlow&&product.isPricePercent===1&&!shopifyItems[campaignProductId]){var itemAltValuePrice=itemAltValue&&itemAltValue.split("|")[1];productPercentageItemPrice=(productPercentagePrice*(Number(itemAltValuePrice?itemAltValuePrice:product.cycle1_price)||0)*0.01).toFixed(2)}var currencySymbol=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.currencySymbol||"";if(cell.title.toLowerCase()==="price"){var freeLabel=$(cell).hasClass("cc-cart-row-free-label");var newDynamicPrice=document.createElement("TD");updateCSSForShoppingCartSections(newDynamicPrice);cell.id!==""&&newDynamicPrice.setAttribute("id",cell.id);newDynamicPrice.className="table-cell";if(memberAreaPage){var _price5=product.vatPrice||product.price;newDynamicPrice.innerHTML=freeLabel&&Number(_price5)===0?"FREE":ccFormatCurrency(_price5,currencySymbol);newDynamicCartRow.appendChild(newDynamicPrice)}else{var unitPrice=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var prodPrice=productPercentageItemPrice?productPercentageItemPrice:getItemPrice(campaignProductId,unitPrice,1).toFixed(2);newDynamicPrice.innerHTML=freeLabel&&Number(prodPrice)===0?"FREE":ccFormatCurrency(prodPrice,currencySymbol);newDynamicCartRow.appendChild(newDynamicPrice)}}if(cell.title.toLowerCase()==="total"&&!memberAreaPage){var _newDynamicPrice=document.createElement("TD");updateCSSForShoppingCartSections(_newDynamicPrice);cell.id!==""&&_newDynamicPrice.setAttribute("id",cell.id);_newDynamicPrice.className="table-cell";var _unitPrice3=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var _prodPrice=productPercentageItemPrice?(Number(productPercentageItemPrice)*Number(itemAltValue?1:product.currentOrderQuantity)).toFixed(2):getItemPrice(campaignProductId,_unitPrice3,product.currentOrderQuantity).toFixed(2);_newDynamicPrice.innerHTML=Number(_prodPrice)===0&&$(cell).hasClass("cc-cart-row-free-label")?"FREE":ccFormatCurrency(_prodPrice,currencySymbol);newDynamicCartRow.appendChild(_newDynamicPrice)}if(cell.title.toLowerCase()==="compare"&&!memberAreaPage){var _newDynamicPrice2=document.createElement("TD");updateCSSForShoppingCartSections(_newDynamicPrice2);cell.id!==""&&_newDynamicPrice2.setAttribute("id",cell.id);_newDynamicPrice2.className="table-cell";var _unitPrice4=product.variant&&parseFloat(product.variant.price)>0&&!product.isVariantBundle&&!product.isEditable?product.variant.price:product.cycle1_price;var compareAtPrice=product.compareAtPrice&&parseFloat(product.compareAtPrice)>0?product.compareAtPrice:null;compareAtPrice=product.variant&&product.variant.compareAtPrice&&parseFloat(product.variant.compareAtPrice)>0&&!product.isVariantBundle?product.variant.compareAtPrice:compareAtPrice;_newDynamicPrice2.innerHTML=compareAtPrice?ccFormatCurrency(getItemPrice(null,compareAtPrice,1,false,false,true).toFixed(2),currencySymbol):"";newDynamicCartRow.appendChild(_newDynamicPrice2)}if(cell.title.toLowerCase()==="action"){var newDynamicAction=document.createElement("TD");cell.id!==""&&newDynamicAction.setAttribute("id",cell.id);newDynamicAction.className="table-cell";newDynamicAction.style.textAlign="center";newDynamicAction.innerHTML=cell.innerHTML;var _trashElement=newDynamicAction.querySelectorAll("i");if(_trashElement&&_trashElement.length>0){_trashElement[0].setAttribute("onclick","removeFromCart('"+campaignProductId+"');")}memberAreaPage&&_trashElement[0]&&$(_trashElement[0]).remove();var linkElement=newDynamicAction.querySelectorAll("a");if(linkElement&&linkElement.length>0){linkElement[0].setAttribute("offer",product.campaignProductId);product.variant&&linkElement[0].setAttribute("variantvalue",product.variant.variantDetailId)}newDynamicCartRow.appendChild(newDynamicAction)}};for(var j=0;j<cellFormatLength;j++){_loop26()}dynamicCartBody.appendChild(newDynamicCartRow);dynamicCartBody.appendChild(accordionDynamicCartRow);$(".fold-content p:first-child > hr").remove()},newShoppingCart,childElement;for(var _i79=0;_i79<cartProductsEntriesLength;_i79++){if(_loop25())continue}}$(".fold-table tr.fk-custom-cart-view td:nth-child(2)").on("click",function(){$(this).find("i").toggleClass("fk-caret-rotate");$(this).parents(".fold-table tr.fk-custom-cart-view").toggleClass("fk-custom-open").next(".fk-custom-cart-fold").toggleClass("fk-custom-open")})}function initializeCountryStates(callback){//initialize array of campaign states indexed by countryCode - ex: ["US"] => [{stateCode:"AL",stateName:"Alabama"}]
pageData.selectedCampaign.states=[];//pageData.selectedCampaign.countries = array of campaign country objects - ex: {countryName:"United States", countryCode:"US"}
//loop through campaign countries array and add empty array at countryCode index
pageData.selectedCampaign.countries.forEach(function(country){pageData.selectedCampaign.states[country.countryCode]=[]});if(checkElementExist("country")||checkElementExist("shipCountry")){//get all possible countries/states data - then loop through and add the campaign country states to the campaignStates array
//countries array entry looks like this: {countryCode:"US",countryName:"United States",stateCode:"GA",stateName:"Georgia"}
$.getJSON("".concat(assetsUrl,"/countries.json"),function(data){data.forEach(function(state){if(pageData.selectedCampaign.states[state.countryCode])pageData.selectedCampaign.states[state.countryCode].push({stateCode:state.stateCode,stateName:state.stateName})});var loadFromURL=sessionStorage.getItem("orderData")?false:true;loadCountries("country",loadFromURL);loadCountries("shipCountry",loadFromURL);setGeoFromIP();callback&&callback();if([2,4].includes(pageData.pageTypeId)&&ccUrlParams.get("orderId")){var sessionData=sessionStorage.getItem("ccOrderQueryWithOrderIdData");sessionData=sessionData&&JSON.parse(sessionData);sessionData&&autoLoadInputs(sessionData)}})}else{setGeoFromIP();callback&&callback()}}function checkElementExist(inputName){var input=document.getElementsByName(inputName)[0];if(!input||input.type!=="select-one"){return false}return true}function loadCountries(inputName,loadFromURL){var input=document.getElementsByName(inputName)[0];var urlParams=new URLSearchParams(getCurrentWindowLocation().search);var sessionAddressInfo=sessionStorage.getItem("ccCountryAndStateInfoTracker");sessionAddressInfo=sessionAddressInfo?JSON.parse(sessionAddressInfo):{};var paramValue=loadFromURL&&urlParams.has(inputName)?urlParams.get(inputName):null;if(!input||input.type!=="select-one")return;var disableDefaultCountrySelection=getAddOnKeyValue(findAddOn("DEF_COUNTRY_SELECT"))==="false";var chooseOptionText=input.options.length>0&&input.options[0].value===""?input.options[0].text:null;pageData.selectedCampaign.countries.sort(function(a,b){return a.countryName.localeCompare(b.countryName)});input.innerHTML="";var orderData=JSON.parse(sessionStorage.getItem("orderData"));//Set the default value to the saved session value if it exists
var sessionVal=orderData&&orderData.hasOwnProperty(inputName)&&orderData[inputName]!==null?orderData[inputName]:sessionAddressInfo[inputName]||null;var defaultVal=paramValue?paramValue:sessionVal!==null?sessionVal:null;var countriesLength=pageData.selectedCampaign.countries.length;var nonDefaultValue=!defaultVal;for(var _i80=0;_i80<countriesLength;_i80++){var country=pageData.selectedCampaign.countries[_i80];var option=document.createElement("OPTION");option.value=country.countryCode;option.innerHTML=country.countryName;//Make US the first option if in campaign, then Canada, then list campaign countries alphabetically
if(country.countryCode==="US"||country.countryCode==="CA")input.prepend(option);else input.add(option);//if Canada is in campaign, set Canada as default value - US will override as default value if US is in campaign
defaultVal=sessionVal===null&&paramValue===null&&(country.countryCode==="CA"||country.countryCode==="US")?country.countryCode:defaultVal}if(disableDefaultCountrySelection&&nonDefaultValue){var _option=document.createElement("OPTION");_option.value="";_option.innerHTML=chooseOptionText;input.prepend(_option);defaultVal=""}defaultVal=!defaultVal?input.options[0].value:defaultVal;var stateName=inputName==="country"?"state":"shipState";var stateInput=document.getElementsByName(stateName)[0];if(!stateInput||stateInput.type!=="select-one")return;input.addEventListener("change",/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(){var countryValue,productVariantElement,shopifyCurrency,baseCurrency,billShipSameObj,billShipSameValue,currencySelect,countryObj,currencyObj,currency;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:countryValue=this.value;loadStates(stateName,countryValue,true);_context8.next=4;return displayPrices();case 4:productVariantElement=document.getElementsByClassName("fk-product-variant-select")[0];productVariantElement&&variantSelectFlag===1&&changeTilePrices(productVariantElement);if(!(getAddOnKeyValue(findAddOn("EN_CURR_CG_BY_CNTY"))==="true"&&[2,4].includes(pageData.pageTypeId))){_context8.next=12;break}shopifyCurrency=pageData.cartData&&pageData.cartData.currency,baseCurrency=pageData.selectedCampaign.currency,billShipSameObj=$("[type='checkbox'][name='billShipSame']");billShipSameValue=billShipSameObj.length||$("[type='radio'][name='billShipSame'].cc-same-as-shipping").length?billShipSameObj.prop("checked")||$("[type='radio'][name='billShipSame'].cc-same-as-shipping").prop("checked"):orderData&&orderData.billShipSame;if(!(this.name==="shipCountry"&&!billShipSameValue)){_context8.next=11;break}return _context8.abrupt("return");case 11:if(!shopifyCurrency||shopifyCurrency===baseCurrency){currencySelect=$("select[name=currency]").first();countryObj=pageData.selectedCampaign.countries.find(function(item){return item.countryCode===countryValue});currencyObj=countryObj&&countryObj.currencyCode&&fetchCurrentCurrencyObj(countryObj.currencyCode);currency=currencyObj&&currencyObj.currencyCode||baseCurrency;currencySelect.length?currencySelect.val(currency).change():setPriceAndCurrency(currency)}case 12:case"end":return _context8.stop()}},_callee8,this)})));if(defaultVal!==null){var stateValue=loadFromURL&&urlParams.has(stateName)?urlParams.get(stateName):sessionAddressInfo[stateName]||null;input.value=defaultVal;loadStates(stateName,defaultVal,"",stateValue)}}function loadStates(inputName,countryCode,isCountryChanged,stateValue){var input=document.getElementsByName(inputName)[0];if(!input||input.type!=="select-one")return;var chooseOptionText=input.options.length>0&&input.options[0].value===""?input.options[0].text:null;input.innerHTML="";if(chooseOptionText){var chooseOption=document.createElement("OPTION");chooseOption.value="";chooseOption.innerHTML=chooseOptionText;input.prepend(chooseOption)}var statesArray=pageData.selectedCampaign.states[countryCode];var blackListedStates=pageData.selectedCampaign.blacklist;if(blackListedStates){var stateEntries=blackListedStates.split(",").filter(Boolean).reduce(function(acc,next){var _next$split=next.split(":"),_next$split2=_slicedToArray(_next$split,2),key=_next$split2[0],value=_next$split2[1];if(acc.hasOwnProperty(key)){acc[key].push(value)}else{acc[key]=new Array;acc[key].push(value)}return acc},{});if(stateEntries.hasOwnProperty(countryCode)){stateEntries[countryCode].forEach(function(ele){statesArray=statesArray.filter(function(state){return ele!==state.stateCode})})}}if(pageData.selectedCampaign.shopPayUrl){statesArray=statesArray.filter(function(state){return countryCode!=="IT"||isNaN(parseFloat(state.stateCode))})}if(typeof statesArray==="undefined"||statesArray.length===0)return;var defaultVal=null;var orderData=JSON.parse(sessionStorage.getItem("orderData"));var customerOrders=JSON.parse(sessionStorage.getItem("customerOrders"));//Set the default value to the saved session value if it exists
if(orderData&&orderData.hasOwnProperty(inputName)&&orderData[inputName]!==null)defaultVal=orderData[inputName];else if(customerOrders&&customerOrders[0].hasOwnProperty(inputName)&&customerOrders[0][inputName]!==null)defaultVal=customerOrders[0][inputName];var statesArrayLength=statesArray.length;for(var _i81=0;_i81<statesArrayLength;_i81++){var state=statesArray[_i81];var option=document.createElement("OPTION");option.value=state.stateCode;option.innerHTML=state.stateName;input.add(option)}defaultVal=stateValue?stateValue:defaultVal?defaultVal:null;if(defaultVal!==null&&!isCountryChanged){input.value=defaultVal}else if(isCountryChanged||chooseOptionText){input.value=""}input.addEventListener("change",function(){displayPrices();var productVariantElement=document.getElementsByClassName("fk-product-variant-select")[0];productVariantElement&&variantSelectFlag===1&&changeTilePrices(productVariantElement)})}function changeCountry(){return}function changeCountry2(){return}function loadMonth(){var input=document.getElementsByName("cardMonth")[0];if(!input||input.type!=="select-one")return;if(input.options.length<12){var chooseOptionText=input.options.length>0&&input.options[0].text.toLowerCase().indexOf("month")>-1?input.options[0].text:null;input.innerHTML="";var months=["January","February","March","April","May","June","July","August","September","October","November","December"];for(var _i82=0;_i82<12;_i82++){var option=document.createElement("OPTION");option.value=(_i82+1).toString();option.innerHTML=months[_i82];input.add(option)}if(chooseOptionText){var chooseOption=document.createElement("OPTION");chooseOption.value="";chooseOption.innerHTML=chooseOptionText;input.prepend(chooseOption);input.value=""}}}function loadYear(){var input=document.getElementsByName("cardYear")[0];if(!input||input.type!=="select-one")return;var chooseOptionText=input.options.length>0&&input.options[0].text.toLowerCase().indexOf("year")>-1?input.options[0].text:null;input.innerHTML="";var d=new Date;var year=d.getFullYear();for(var _i83=0;_i83<16;_i83++){var option=document.createElement("OPTION");option.value=(year+_i83).toString();option.innerHTML=(year+_i83).toString();input.add(option)}if(chooseOptionText){var chooseOption=document.createElement("OPTION");chooseOption.value="";chooseOption.innerHTML=chooseOptionText;input.prepend(chooseOption);input.value=""}}function ccPopulateValidShipProfiles(input,validShipProfilesCollection,shipProfile,totals){if(!input)return;var disableShowShipProfilePrices=getAddOnKeyValue(findAddOn("DIS_SHOW_SHIP_PRICES"));if(input.type==="select-one"){$("[name=shipProfileId] option").each(function(){if($(this).val().includes(":")){validShipProfilesCollection.push({"shipProfileId":$(this).val(),"profileName":$(this).text()})}});var chooseOptionText=input.options.length>0&&input.options[0].value==""?input.options[0].text:null;input.innerHTML="";var validShipProfileLength=validShipProfilesCollection.length;for(var _i84=0;_i84<validShipProfileLength;_i84++){var shipProfileId=validShipProfilesCollection[_i84].shipProfileId;var option=document.createElement("OPTION");option.value=shipProfileId;var shipLabel="";if(disableShowShipProfilePrices==="true"){shipLabel=validShipProfilesCollection[_i84].profileName}else{shipLabel=addShippingDisplay(validShipProfilesCollection[_i84],shipLabel,totals)}option.innerHTML=shipLabel;input.add(option);if(shipProfile){if(typeof shipProfile==="string"){if(shipProfile==shipProfileId)input.value=shipProfileId}else if(shipProfile.shipProfileId==shipProfileId){input.value=shipProfileId}else if(shipProfile.storePickupId&&"pickup-"+shipProfile.storePickupId==shipProfileId){input.value=shipProfileId}}else if(_i84===0){input.value=shipProfileId}}if(chooseOptionText){var chooseOption=document.createElement("OPTION");chooseOption.value="";chooseOption.innerHTML=chooseOptionText;input.prepend(chooseOption);if(input.options.length==1)input.value=""}if(input.options.length>0&&input.value==""){//choose an external value if no profiles are valid
for(var i=0;i<input.options.length;i++){if(input.options[i].value.indexOf(":")>0){input.value=input.options[i].value;break}}}}else if(input.type==="radio"){var currentProfileId=shipProfile?shipProfile.shipProfileId||"pickup-"+shipProfile.storePickupId:null;populateRadioShipProfiles(validShipProfilesCollection,currentProfileId)}input.removeEventListener("change",displayPrices);input.addEventListener("change",displayPrices)}function loadShipProfiles(){var allowStorePickup=false;globalStoreDetails=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.storePickup||[];var input=document.getElementsByName("shipProfileId")[0];if(!input)return;var validShipProfilesCollection=[];var shipProfile=pageData.selectedCampaign?getShipProfile():null;var pageDataShipProfiles=pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.shipProfiles||[];var shipProfilesLength=pageDataShipProfiles.length;if(shipProfilesLength===0)return;var items=getOrderItemDetails();var itemSave=JSON.stringify(items);var totals=JSON.parse(sessionStorage.getItem("totals"));for(var _i85=0;_i85<shipProfilesLength;_i85++){var profile=pageDataShipProfiles[_i85];//determine all valid profiles
if(parseFloat(profile.freeShipThreshold)>0&&profile.rules===null&&totals&&parseFloat(totals.subTotal)>=parseFloat(profile.freeShipThreshold)){profile.sortedShipPrice=0;validShipProfilesCollection.push(profile)}else if(profile.applyEntireOrder){var shipPrice=getShipProfileOrderPrice(profile);if(shipPrice!=null){profile.sortedShipPrice=shipPrice;validShipProfilesCollection.push(profile)}}else if(Object.keys(items).length>0){var itemClone=JSON.parse(JSON.stringify(items));//deep clone
var shipItems=applyShipProfileProductRules(profile,itemClone);if(shipItems.update){profile.sortedShipPrice=0;validShipProfilesCollection.push(profile)}}}if(Object.keys(items).length&&globalStoreDetails.length){for(var _i86 in items){if(items[_i86].allowStorePickup=="1"&&items[_i86].billingCycleType==="ONE_TIME"){allowStorePickup=true;break}}if(allowStorePickup){for(var _i87 in globalStoreDetails){validShipProfilesCollection.push({"shipProfileId":"pickup-"+globalStoreDetails[_i87].storePickupId,"profileName":"Pickup: "+globalStoreDetails[_i87].title+" "+globalStoreDetails[_i87].address})}}else if(shipProfile&&shipProfile.storePickupId){shipProfile=null}}validShipProfilesCollection=validShipProfilesCollection.sort(function(a,b){var sp1=parseFloat(a.sortedShipPrice),sp2=parseFloat(b.sortedShipPrice);return sp1-sp2});window.ccValidShipProfilesCollection=validShipProfilesCollection;ccPopulateValidShipProfiles(input,validShipProfilesCollection,shipProfile,totals)}function populateRadioShipProfiles(validProfiles,currentProfileId){var disableShowShipProfilePrices=getAddOnKeyValue(findAddOn("DIS_SHOW_SHIP_PRICES"));var totals=JSON.parse(sessionStorage.getItem("totals"));try{var shipRadioBtnContainers=$(".fk-form-radio-button-parent").has("input[name='shipProfileId']");if(!shipRadioBtnContainers.length){return}shipRadioBtnContainers.attr("shipradio",true);var shipProfileDiv=shipRadioBtnContainers.first();shipProfileDiv.find("[name='shipProfileId']").attr({"value":0});shipProfileDiv.find(".form-check-label").text("None");shipProfileDiv.attr("shipradio",false);$("[shipradio=true]").remove();var validProfilesLength=validProfiles.length;for(var _i88=0;_i88<validProfilesLength;_i88++){//add radio button for each valid profile
var cloned=shipProfileDiv.clone(true);cloned.find("[name='shipProfileId']").attr({"value":validProfiles[_i88].shipProfileId});var shipLabel="";if(disableShowShipProfilePrices==="true"){shipLabel=validProfiles[_i88].profileName}else{shipLabel=addShippingDisplay(validProfiles[_i88],shipLabel,totals)}cloned.find(".form-check-label").html(shipLabel);cloned.insertBefore(shipProfileDiv)}validProfilesLength&&shipProfileDiv.remove();if(currentProfileId)$("input[name=shipProfileId][value="+currentProfileId+"]").prop("checked",true);else shipRadioBtnContainers.first().prop("checked",true)}catch(error){console.log(error)}}function addShippingDisplay(shipProfile,label,totals){var exchangeRate=sessionStorage.getItem("exchangeRate")!==null?parseFloat(sessionStorage.getItem("exchangeRate")):1;var freeShipThreshold=shipProfile.freeShipThreshold?parseFloat((parseFloat(shipProfile.freeShipThreshold)*exchangeRate).toFixed(2)):0;var shipDisplay="";var shipPrice="";if(shipProfile.applyEntireOrder){shipPrice=getShipProfileOrderPrice(shipProfile);shipPrice=shipPrice>0?parseFloat(shipPrice*exchangeRate).toFixed(2):shipPrice;shipDisplay=shipPrice=="0.00"?"FREE":ccFormatCurrency(shipPrice,pageData.selectedCampaign.currencySymbol)}if(freeShipThreshold){if(freeShipThreshold>0&&totals&&(shipProfile.includeCoupons?parseFloat(totals.subTotal)-parseFloat(totals.discount||0):parseFloat(totals.subTotal))>=freeShipThreshold){shipDisplay="FREE"}else if(shipPrice=="0.00"){shipPrice=getShipProfileOrderPrice(shipProfile);shipDisplay=""}}label=shipDisplay?shipProfile.profileName+" - "+shipDisplay:shipProfile.profileName;return label}function navigate(attributes){var URL=attributes.href.value;var target=attributes.target.value;if(target!==null&&target!==""){window.open(URL,target)}else{getCurrentWindowLocation().replace(URL)}}function checkBoxChange(attributes){if(attributes&&attributes["name"]&&attributes["onclick"]){var name=attributes["name"].value.toLowerCase();var checked=attributes["onclick"].ownerElement.checked;var orderBumpParent=$(attributes["onclick"].ownerElement).closest(".bump-div-class");var bill=["firstName","lastName","address1","address2","city","country","state","postalCode","fullName"];var _ship=["shipFirstName","shipLastName","shipAddress1","shipAddress2","shipCity","shipCountry","shipState","shipPostalCode","shipFullName"];var setBillShipInputs=0;if(name==="billshipsame"&&attributes["type"]&&attributes["type"].value==="radio"){if(checked&&!$(attributes["onclick"].ownerElement).hasClass("cc-same-as-shipping")){checked=false}}if(name==="billshipsame"&&attributes.openCheckBoxSection&&attributes.openCheckBoxSection.value!=""){//determine if checkbox opens bill or ship inputs
var shippingSectionID="#"+attributes.openCheckBoxSection.value;var shippingSectionIDElement=$(shippingSectionID);if(shippingSectionIDElement&&shippingSectionIDElement.length>0){var findShipAddress=$(shippingSectionID).find("[name=shipAddress1]");setBillShipInputs=findShipAddress&&findShipAddress.length>0?1:2}}if(name==="billshipsame"&&checked){var billLength=bill.length;for(var _i89=0;_i89<billLength;_i89++){var billInput=document.getElementsByName(bill[_i89])[0];var shipInput=document.getElementsByName(_ship[_i89])[0];if(billInput&&shipInput){if(setBillShipInputs!=2&&billInput.value!==undefined&&billInput.value!==""&&billInput.value!==shipInput.value){shipInput.value=billInput.value;if(_ship[_i89]==="shipCountry"){loadStates("shipState",shipInput.value);continue}}if(setBillShipInputs!=1&&shipInput.value!==undefined&&shipInput.value!==""&&shipInput.value!==billInput.value){billInput.value=shipInput.value;if(bill[_i89]==="country"){loadStates("state",billInput.value);continue}}}}}else if(name==="billshipsame"&&!checked){var parentForm=attributes["name"].ownerElement&&attributes["name"].ownerElement.form?_toConsumableArray(attributes["name"].ownerElement.form):null;var billIndex=-1;var shipIndex=-1;if(parentForm){parentForm.forEach(function(formElement,index){if(formElement.name==="address1"){billIndex=index}if(formElement.name==="shipAddress1"){shipIndex=index}});if(shipIndex==-1||billIndex<shipIndex&&billIndex>-1){clearAddressValues(_ship)}else{clearAddressValues(bill)}}if(!$("[name=\"country\"]").val()){$("[name=\"country\"] option:eq(0)").prop("selected",true);loadStates("state",$("[name=\"country\"]").val())}if(!$("[name=\"shipCountry\"]").val()){$("[name=\"shipCountry\"] option:eq(0)").prop("selected",true);loadStates("shipState",$("[name=\"shipCountry\"]").val())}}else if(name==="orderbump"){adjustVariantOrderBump(orderBumpParent,checked)}}displayShipSection(attributes);displayPrices()}function adjustVariantOrderBump(orderBumpParent,checked){if(orderBumpParent){var productSectionElement=$(orderBumpParent).find(".fk-product-section");var productVariants=$(productSectionElement).find("[name='variant1'], [name='variant2'], [name='variant3']").filter("select");var _product14=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==$(productSectionElement).attr("value")});var campaignProductId=_product14&&_product14[0]&&_product14[0].campaignProductId;var quantityInput=productSectionElement[0]&&productSectionElement[0].querySelectorAll("input[name='quantity'], select[name='quantity']")[0];if(!$(quantityInput).val()){$(quantityInput).val(1)}if(campaignProductId){var _orderItems10=getOrderItems();if(checked){getVariants(productSectionElement[0]&&productSectionElement[0].id)}else{if(_orderItems10&&Object.keys(_orderItems10).length>0){var orderItemsEntries=Object.entries(_orderItems10);var orderItemsEntriesLength=orderItemsEntries.length;for(var _i90=0;_i90<orderItemsEntriesLength;_i90++){var key=orderItemsEntries[_i90][0];campaignProductId=isSubscribeOn?swapSubscriptions(_orderItems10,"",campaignProductId).sectionValue:campaignProductId;if(key.includes(campaignProductId.toString())){delete _orderItems10[key];_orderItems10=removeSubscriptionProduct(_orderItems10,key)}}sessionStorage.setItem("fkCart",JSON.stringify(_orderItems10))}}}}}// Method created for sliding inputs (JIRA Ticket #FUN2-1745)
function slideForm(attributes,e){e.preventDefault();var openID="";var dataType="";if(attributes.openid.value!==""){openID="#"+attributes.openid.value;dataType=attributes.openiddatatype?attributes.openiddatatype.value:""}var buttonHideID="#"+e.currentTarget.id;if(openID!==""&&$(openID).is(":hidden")){getCurrentWindowLocation().hash=openID;$(openID).slideDown("slow");if(dataType!=="form"){smoothScrolling(e)}}$(buttonHideID).hide()}//Method to slide button and link without hiding it
function slideWithoutHideForm(attributes,e){e.preventDefault();var openID="";var dataType="";var openSectionElements=$("button[action=\"openSectionWithoutHide\"], a[action=\"openSectionWithoutHide\"]");if(attributes.openid.value!==""){openID="#"+attributes.openid.value;dataType=attributes.openiddatatype?attributes.openiddatatype.value:""}if(openID!==""){var elementDisplayProp=$(openID).css("display");openSectionElements.each(function(){var elementOpenId="#"+$(this).attr("openid");if($("#"+attributes.id.value).closest(elementOpenId).length===0){$(elementOpenId).hide()}});if(elementDisplayProp!=="none"){return}getCurrentWindowLocation().hash=openID;$(openID).slideDown("slow");if(dataType!=="form"){smoothScrolling(e,hideCheckBoxSection)}}}// Method created for sliding inputs - calling import lead functionality on a sliding input (JIRA Ticket #FUN2-1745)
function slideMethod(_x59,_x60){return _slideMethod.apply(this,arguments)}function _slideMethod(){_slideMethod=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee46(attributes,e){var openID,dataType,buttonId,buttonHideID,windowLocation,route,errorID,tag;return _regeneratorRuntime().wrap(function _callee46$(_context51){while(1)switch(_context51.prev=_context51.next){case 0:e.preventDefault();if(!(e.detail!==1)){_context51.next=3;break}return _context51.abrupt("return");case 3:openID="";dataType="";if(attributes.openid.value!==""){openID="#"+attributes.openid.value;dataType=attributes.openiddatatype?attributes.openiddatatype.value:""}buttonId=e.currentTarget.dataset.id;buttonHideID="#"+e.currentTarget.id;windowLocation=getCurrentWindowLocation().href;route=windowLocation+openID;if(!checkRequiredInputs(null,buttonId)){_context51.next=20;break}disableInteractions(buttonId,true,true);_context51.next=14;return importLead(buttonId,route);case 14:errorID="error-"+buttonId;tag=document.getElementById(errorID);if(tag){tag.setAttribute("id","");tag.innerHTML=""}if(openID!==""&&$(openID).is(":hidden")){getCurrentWindowLocation().hash=openID;$(openID).slideDown("slow");if(dataType!=="form"){smoothScrolling(e)}autoLoadInputs()}$(buttonHideID).hide();enableInteractions();case 20:case"end":return _context51.stop()}},_callee46)}));return _slideMethod.apply(this,arguments)}function smoothScrolling(e,callback){var target=$(getCurrentWindowLocation().hash);target=target.length?target:$("[name="+getCurrentWindowLocation().hash.slice(1)+"]");if(target.length){if(e){e.preventDefault()}$("html, body").animate({scrollTop:target.offset().top},1000,function(){var $target=$(target);$target.focus();if($target.is(":focus")){return false}else{$target.attr("tabindex","-1");callback&&callback();$target.focus()};})}}function ccGetCurrencyNumber(){var campaign=pageData&&pageData.selectedCampaign;if(!campaign)return;var currencyCode=returnCurrencyCode();if(!currencyCode||currencyCode===campaign.currency){return campaign.currencyNumber}else{var currencyObj=campaign.currencies&&campaign.currencies.find(function(item){return item.currencyCode===currencyCode});return currencyObj&&currencyObj.currencyNumber}}function openSurveySection(attributes,e){e.preventDefault();var parentID="";var targetSurveyID="";var surveySectionElement=$(e.target).closest("section.fk-section");ccProgressBar=document.getElementById("progressbar");if(e.currentTarget.localName==="button"){var buttonDataID=e.currentTarget.dataset.id;var button=$("button[data-id='"+buttonDataID+"']")[0];if(button.parentNode.nodeName==="SECTION"){var customName=button.parentNode.attributes.customName?button.parentNode.attributes.customName.value:"";if(customName!==""){customName=customName.replace(" ","_");var custom="custom_"+customName;sessionStorage.setItem(custom,button.innerHTML)}}parentID="#"+surveySectionElement[0].attributes.id.value}else{var radioDataID=e.currentTarget.dataset.id;var radioButton=$("input[data-id='"+radioDataID+"']")[0];var inputContainer=radioButton.parentNode;if(inputContainer.parentNode.nodeName==="SECTION"){var _customName=inputContainer.parentNode.attributes.customName?inputContainer.parentNode.attributes.customName.value:"";if(_customName!==""){_customName=_customName.replace(" ","_");var _custom="custom_"+_customName;sessionStorage.setItem(_custom,inputContainer.lastElementChild.innerHTML)}}parentID="#"+surveySectionElement[0].attributes.id.value}decrementSectionCount--;targetSurveyID+=attributes.opensurveysection?attributes.opensurveysection.value:"";if(targetSurveyID&&targetSurveyID!=="#"&&$(targetSurveyID).is(":hidden")){$(targetSurveyID).slideDown("fast");if(parentID&&parentID!==""){$(parentID).hide()}if(decrementSectionCount===0){$("#progressbar").hide();$("#progressbarcontainer").hide()}}else if(e.target.attributes.opensurveysection){var targetNonSurveyID="#"+e.target.attributes.opensurveysection.value;targetNonSurveyID.length>1&&$(targetNonSurveyID).slideDown("fast");if(parentID&&parentID!==""){$(parentID).hide()}if(decrementSectionCount===0){$("#progressbar").hide();$("#progressbarcontainer").hide()}}// Only takes place if progress bar is present
if(ccProgressBar){var valueSet=100/surveySectionCount;var newWidth=parseInt(ccProgressBar.style.width.replace("%",""))+valueSet;if(newWidth<=100){ccProgressBar.style.width=newWidth+percentage;ccProgressBar.innerHTML=Math.round(newWidth)+percentage}}return true}function displayShipSection(attributes){if(attributes.openCheckBoxSection&&attributes.openCheckBoxSection.value!=""){var shippingSectionID="#"+attributes.openCheckBoxSection.value;var shippingSectionIDElement=$(shippingSectionID);var nestedHTML=shippingSectionIDElement&&shippingSectionIDElement[0]&&shippingSectionIDElement[0].outerHTML;var openCheckBoxElement=$(nestedHTML).find("[opencheckboxsection]");$(openCheckBoxElement).each(function(){var openCheckBoxName=$(this).attr("name");var openCheckBoxNameElement=openCheckBoxName&&document.getElementsByName(openCheckBoxName);var checked=openCheckBoxNameElement&&openCheckBoxNameElement[0]&&openCheckBoxNameElement[0].checked;var openCheckBoxValue=$(this).attr("opencheckboxsection");if(openCheckBoxValue){var elementId="#"+openCheckBoxValue;if(openCheckBoxName=="billShipSame"){checked?$(elementId).hide():$(elementId).slideDown()}else{checked?$(elementId).slideDown():$(elementId).hide()}}});if(attributes.type&&attributes.type.nodeValue==="radio"){if(attributes.name&&attributes.name.nodeValue==="billShipSame"){var element=attributes["onclick"]&&attributes["onclick"].ownerElement;if(element){var checked=element.checked;if(checked&&$(element).hasClass("cc-same-as-shipping")){checked=false}checked?$(shippingSectionID).slideDown():$(shippingSectionID).hide()}return}$("input:radio:not([name=billShipSame])").each(function(){var openCheckBoxSectionValue=$(this).attr("openCheckBoxSection");if(openCheckBoxSectionValue){var checkedValue=$(this)[0]&&$(this)[0].checked;if(checkedValue){$("#"+openCheckBoxSectionValue).slideDown()}else{$("#"+openCheckBoxSectionValue).hide()}}})}else{$(shippingSectionID).is(":hidden")?$(shippingSectionID).slideDown():$(shippingSectionID).slideUp()}}}function disableButtons(disabled){var buttons=document.getElementsByTagName("button");var buttonsLength=buttons.length;if(buttonsLength!==0){for(var _i91=0;_i91<buttonsLength;_i91++){buttons[_i91].disabled=disabled}}}function disableLinks(pointerEvents){var links=document.getElementsByTagName("a");var linksLength=links.length;for(var _i92=0;_i92<linksLength;_i92++){links[_i92].style.pointerEvents=pointerEvents}}function turnOnSpinner(buttonOrLinkId,uniqueBtnId){var buttonElement=$("button[data-id='"+buttonOrLinkId+"']").length?$("button[data-id='"+buttonOrLinkId+"']"):$("a[data-id='"+buttonOrLinkId+"']");var uniqueElement=document.querySelector("[uniqueBtnId = '".concat(uniqueBtnId,"']"));var spinner=document.getElementById("fk-submit-spinner");if(spinner)spinner.style.display="block";else if(buttonElement.parents(".fk-popup")[0]){$(getParentSpinnerDiv()).insertAfter(buttonElement[0].parentNode)}else{var ele=uniqueElement||buttonElement;$(getSpinnerDiv()).insertAfter(ele)}}function getParentSpinnerDiv(){var parentSpinnerDiv=document.createElement("div");var spinnerDiv=document.createElement("div");parentSpinnerDiv.style.display="flex";parentSpinnerDiv.style.justifyContent="center";parentSpinnerDiv.id="fk-submit-spinner";spinnerDiv.className="fa fa-spinner fa-pulse fa-lg m-r-xs";spinnerDiv.style.display="inline-block";spinnerDiv.style.textAlign="center";parentSpinnerDiv.appendChild(spinnerDiv);return parentSpinnerDiv}function getSpinnerDiv(){var spinnerDiv=document.createElement("div");spinnerDiv.id="fk-submit-spinner";spinnerDiv.className="fa fa-spinner fa-pulse fa-lg m-r-xs";spinnerDiv.style.display="block";spinnerDiv.style.textAlign="center";return spinnerDiv}function turnOffSpinner(){var fkSpinner=document.getElementById("fk-submit-spinner");if(fkSpinner){fkSpinner.style.display="none";fkSpinner.remove()}}function disableInteractions(id,isButton,isLink,uniqueBtnId){isButton&&disableButtons(true);isLink&&disableLinks("none");turnOnSpinner(id,uniqueBtnId)}function enableInteractions(){var overlayEffectDiv=document.getElementById("overlayEffectDiv");if(overlayEffectDiv){overlayEffectDiv.style.display="none"}disableButtons(false);disableLinks("auto");turnOffSpinner()}function moveToNextTab(){$("#shipping").hide();$("#payment").show();$("#quantityTab").addClass("active");$("#shippingTab").removeClass("active")}function initAddressFields(){window.loadPlacesAutocomplete&&loadPlacesAutocomplete()}function initSocialProof(){if(pageData.funnelData&&pageData.funnelData.addOns){var socialProofKey=pageData.funnelData.addOns.filter(function(addOns){return addOns.keyName==="Social_Proof"});if(socialProofKey.length!==0&&socialProofKey[0].keyValue){var newScript=document.createElement("script");newScript.type="text/javascript";newScript.src="https://cdn-kk.cappedoutsocial.com/widget/js/popup-"+socialProofKey[0].keyValue+".js";document.body.appendChild(newScript)}}}function assignProdQtyEventListeners(){var productSections=document.getElementsByClassName("fk-product-section");var productSectionsLength=productSections.length;var _loop27=function _loop27(){var productSection=productSections[_i93];var product=pageData.selectedCampaign&&pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==productSection.getAttribute("value")});if(product&&product[0]){if(product[0].maxOrderQty){var quantityInput=productSection.querySelectorAll("input[name='quantity']");quantityInput&&quantityInput[0]&&quantityInput[0].addEventListener("change",function(event){quantityProdSectionOnChange(event,product[0].maxOrderQty)})}var quantitySelect=productSection.querySelectorAll("select[name='quantity']");quantitySelect.length>0&&quantitySelect[0].addEventListener("change",function(event){if(pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length){getVariants(productSection.id);displayPrices()}})}};for(var _i93=0;_i93<productSectionsLength;_i93++){_loop27()}}function assignCardDetailsEventListeners(){var cardDate=document.querySelectorAll("input[name='cardDate']");var cardMonth=document.getElementsByName("cardMonth");var cardYear=document.getElementsByName("cardYear");cardDate&&cardDate[0]&&cardDate[0].addEventListener("change",function(event){var cardDateValueParsed=event.target.value.replace("/","");if(cardDateValueParsed){var month=cardDateValueParsed.substring(0,2);var year=cardDateValueParsed.substr(cardDateValueParsed.length-2);$(cardMonth[0]).attr("value",parseInt(month));$(cardYear[0]).attr("value",parseInt(year))}})}function quantityProdSectionOnChange(event,maxOrderQty){if(event.target.value>maxOrderQty){$("#alertTopAutoHideDiv")&&$("#alertTopAutoHideDiv").remove();$("body").prepend("<div id='alertTopAutoHideDiv' style='position:fixed; top:0; left:0; width:100%; z-index:999;'><div class='alert alert-danger alert-dismissible' role='alert' ><strong> Quantity cannot exceed "+maxOrderQty+" </strong><button type='button' class='close' data-dismiss='alert' aria-label='Close'> <span aria-hidden='true'>&times;</span></button></div></div>");event.target.value=maxOrderQty;setTimeout(function(){$("#alertTopAutoHideDiv").remove()},4000)}if(event.target.value<=0){event.target.value=""}}function fillInInputIfExists(field,value){if(document.getElementsByName(field).length){document.getElementsByName(field)[0].value=value}}function getCurrentWindowLocation(){if(window.location!==window.parent.location){//  Inside IFrame
return window.parent.location}else{return window.location}}function replaceCurrentWindow(route){if(route&&route.startsWith("https://")){window.location.replace(route);return}var reference="";if(checkDomainForRoute()){reference="/"+pageData.funnelData.referenceId}route=route.startsWith("/")?route:reference+"/"+route;// Its like a redirection, replace() does not keep the originating page in the session history
window.location.replace(route)}function getAbsolutePathByUrl(url){var parts=url.split("/");var size=3;if(checkDomainForRoute()){size=4}return parts.slice(0,size).join("/")}function setCurrentWindowLocation(route){window.onbeforeunload=null;var redirectRoute=route.startsWith("http")?route:getAbsolutePathByUrl(getCurrentWindowLocation().href)+"/"+route;if(window.location!==window.parent.location){//  Inside IFrame
window.parent.location.href=redirectRoute}else{window.location.href=redirectRoute}}function loadScript(url,callback,appendTo,id,dataSetAttrs,attributes,scriptContent,onErrorCallback){var scriptType=arguments.length>8&&arguments[8]!==undefined?arguments[8]:"text/javascript";// Adding the script tag to the head as suggested before
var appendElement=appendTo?document[appendTo]:document.head;var script=document.createElement("script");script.type=scriptType;url?script.src=url:null;if(id){script.id=id}if(dataSetAttrs&&dataSetAttrs.length){dataSetAttrs.forEach(function(attrs){script.dataset[attrs.key]=attrs.value})}if(attributes&&attributes.length){attributes.forEach(function(attrs){script.setAttribute(attrs.key,attrs.value)})}// Then bind the event to the callback function.
// There are several events for cross browser compatibility.
script.onreadystatechange=callback;script.onload=callback;if(scriptContent){script.innerHTML=scriptContent}script.onerror=onErrorCallback;// Fire the loading
appendElement.appendChild(script)}function clearAddressValues(addressOrigin){var addressLength=addressOrigin.length;for(var _i94=0;_i94<addressLength;_i94++){if(document.getElementsByName(addressOrigin[_i94])[0]&&document.getElementsByName(addressOrigin[_i94])[0].value!=""){document.getElementsByName(addressOrigin[_i94])[0].value=""}}}function openPopUp(element){var popupId=element?element.getAttribute("openpopup"):"customizable_popup";var modal=document.getElementById(popupId);var recurringExists=false;var modalTitle=modal.getAttribute("name");if(modalTitle==="Subscribe"){var _orderItems11=getOrderItems();var _loop28=function _loop28(id){var product=pageData.selectedCampaign.products.find(function(data){return data.campaignProductId==id.split(".")[0]});var recurringId=product.billingCycleType==="ONE_TIME"?swapSubscriptions("","",id):id;if(recurringId!==id){recurringExists=true;return 1;// break
}};for(var id in _orderItems11){if(_loop28(id))break}}if(modal){var submitButtonInModal=$(modal).find("button[action=submit], a[action=submit], .gpay-button, div[title=AmazonPay], .paypal-buttons");var noRecurringOnOrder=modalTitle==="Subscribe"&&!recurringExists;var buttonId=$(element).attr("data-id");if(pageData&&pageData.pageTypeId===4&&submitButtonInModal.length&&!checkRequiredInputs(null,buttonId)){sessionStorage.removeItem("paySource");return}else if(noRecurringOnOrder){callMethodApply(buttonId);return}modal.style.display="block"}}function loadStaticCurrencyValues(){var currencyCharArray=campaignBaseCurrencySymbol&&campaignBaseCurrencySymbol.split("")||[];var currencyRegEx=currencyCharArray.reduce(function(regexp,_char){return regexp+"["+_char+"]"},"");var regexString="("+currencyRegEx+"\\d[0-9]{0,9})(,\\d{3})*(\\.\\d{1,})?";var updatedRegex=new RegExp(regexString,"g");staticCurrencyValues=[];$("body").find(":not(iframe):not(.fk-shopping-cart):not(.fk-dynamic-invoice-price-row):not(.dynamic-shipping-total):not(.dynamic-price-total):not(.vat):not(.salesTax):not(.grandTotal):not(.discount):not(.insurance):not(.savings):not(.cc-negative-savings):not(.compareAtTotal):not(.cc-surcharge)").addBack().contents().filter(function(index){var _this2=this;if(this.nodeType==3&&this.textContent.indexOf(campaignBaseCurrencySymbol)>-1){var values=this.textContent.match(updatedRegex);values&&values.forEach(function(value){if(!staticCurrencyValues.includes(value.substring(campaignBaseCurrencySymbol.length))){var element=$($(_this2).parent()[0]);var id=element.attr("id");if(!id){id="ccdynamiclabel"+index;element.attr("id",id)}staticCurrencyValues.push(id+"~|~"+value.substring(campaignBaseCurrencySymbol.length))}})};})}function convertStaticCurrencyValues(){var previousSymbol=sessionStorage.getItem("previousCurrencySymbol")?sessionStorage.getItem("previousCurrencySymbol"):campaignBaseCurrencySymbol;var previousFxRate=sessionStorage.getItem("previousExchangeRate")?sessionStorage.getItem("previousExchangeRate"):"1";var newSymbol=sessionStorage.getItem("currencyCodeSymbol")?sessionStorage.getItem("currencyCodeSymbol"):campaignBaseCurrencySymbol;var newFxRate=sessionStorage.getItem("exchangeRate")?sessionStorage.getItem("exchangeRate"):"1";var checkoutWorkFlowPages=[2,3,4,5].includes(pageData.pageTypeId);if(newSymbol!=previousSymbol||!ccSkipStaticCurrencyConversion&&checkoutWorkFlowPages){var skipElement=$("#items-list, .fk-dynamic-invoice-row, .fk-product-price");var staticCurrencyValuesLength=staticCurrencyValues.length;if(staticCurrencyValuesLength&&!ccSkipStaticCurrencyConversion){ccSkipStaticCurrencyConversion=true;previousSymbol=campaignBaseCurrencySymbol}var _loop29=function _loop29(){var value=staticCurrencyValues[_i95].split("~|~")[1];var dataCurrencyId=staticCurrencyValues[_i95].split("~|~")[0];var wrapperElement=document.getElementById(dataCurrencyId);if($(wrapperElement).closest(skipElement).length)return 1;// continue
var previousValue=previousSymbol!==campaignBaseCurrencySymbol?convertStaticValue(value,previousSymbol,previousFxRate):campaignBaseCurrencySymbol+value;var newValue=newSymbol!==campaignBaseCurrencySymbol?convertStaticValue(value,newSymbol,newFxRate):campaignBaseCurrencySymbol+value;if(checkoutWorkFlowPages&&!($(wrapperElement).prop("tagName")==="SPAN"&&$(wrapperElement).attr("data-cc-price"))){var applyProductPrices=$(wrapperElement).hasClass("cc-apply-currency-rules")?"data-cc-price-type='true'":"";newValue="<span data-cc-check-decimal='true' data-cc-price='"+value+"' "+applyProductPrices+">"+newValue+"</span>"}if(wrapperElement){wrapperElement.innerHTML=wrapperElement.innerHTML.replaceAll(previousValue,function replacementCallBack(){return newValue})}};for(var _i95=0;_i95<staticCurrencyValuesLength;_i95++){if(_loop29())continue}}sessionStorage.setItem("previousCurrencySymbol",newSymbol);sessionStorage.setItem("previousExchangeRate",newFxRate)}function convertStaticValue(value,currencySymbol,exchangeRate){var newValue=value;if(value.includes(".")||exchangeRate.includes(".")){newValue=(parseFloat(value)*parseFloat(exchangeRate)).toFixed(2)}else{newValue=parseInt(value)*parseInt(exchangeRate)}return currencySymbol+newValue.toString()}var ccActionPurchaseItem=null;function replaceTokens(){var headerAndLabelList=["H1","H2","H3","H4","H5","H6","P","LABEL","SPAN","B","I"];var textBoxesAndLabels=document.querySelectorAll("label, input[type='text'], div, h1, h2, h3, h4, h5, h6, p, span, a, b, .fk-product-image, i");var purchaseItem=sessionStorage.getItem("ccActionPurchaseItem");ccActionPurchaseItem=pageData.pageTypeId===13&&purchaseItem?JSON.parse(purchaseItem):null;textBoxesAndLabels.forEach(function(el){if(el.tagName=="INPUT"){assignTokenValues("input",el)}if(el.tagName=="IMG"&&el.classList&&el.classList.contains("fk-product-image")){assignTokenValues("prodImg",el)}if(headerAndLabelList.indexOf(el.tagName)>-1){assignTokenValues("label",el)}if(el.tagName=="DIV"){var childNodes=Object.assign([],el.childNodes);var childNodesLength=childNodes.length;for(var _i96=0;_i96<childNodesLength;_i96++){var node=childNodes[_i96];var tokenMatch=node.textContent.match(/{{(.*?)}}/g);if(node.nodeName=="#text"&&tokenMatch&&tokenMatch.length){assignTokenValues("label",el);break}}}if(el.tagName=="A"){if(el.childNodes[0]&&el.childNodes[0].nodeName=="#text"){assignTokenValues("label",el)}assignTokenValues("href",el)}});for(var _productId9 in ccProdSectionProducts){delete ccProdSectionProducts[_productId9]};ccUpdateTokenSpanValues()}function assignTokenValues(inputType,el){var currentItem=sessionStorage.getItem("currentItem");if(!currentItem&&(el.closest(".cc-dynamic-order-bump")||el.closest(".cc-dynamic-product-section")))return;var date=new Date;var orderData=JSON.parse(sessionStorage.getItem("orderData"));var requestUri=sessionStorage.getItem("requestUri");var uriParams=requestUri&&new URL(requestUri).searchParams;var loginOrder=sessionStorage.getItem("loginOrder");var loginCustomer=sessionStorage.getItem("loginCustomer");loginOrder=loginOrder&&loginOrder!=="undefined"&&JSON.parse(loginOrder)||{};if(pageData.pageTypeId===8&&loginCustomer&&loginCustomer!=="undefined"){loginOrder=JSON.parse(loginCustomer)||loginOrder}var customerOrders=JSON.parse(sessionStorage.getItem("customerOrders"));var membershipInfo=getMembershipDetails();var membership=membershipInfo?membershipInfo:[];var orderStatusInfo=JSON.parse(sessionStorage.getItem("orderStatusInfo"));var elSubAndSave=el.closest(".cc-subscribe-and-save");var tokenVariantId="",tokenVariant=null;if(!currentItem&&[4,33].includes(pageData.pageTypeId)){fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):null;if(fkCart&&Object.keys(fkCart).length>0)currentItem=Object.keys(fkCart)[0]}var tokenItem;var productId=$(el).closest(".fk-product-section").attr("value");if(pageData.pageTypeId===34&&elSubAndSave){var elParent=el.parentElement;var radio=elParent&&($(elParent).find(".one-time")[0]||$(elParent).find(".recurring")[0]);productId=radio?radio.value:productId}productId=productId&&productId.trim();if(Number(productId))currentItem=productId;if(orderStatusInfo){tokenItem=orderStatusInfo;updateMap(orderStatusInfo)}else if(currentItem){if(!ccProdSectionProducts[currentItem]){var _productData13=currentItem.split(".");tokenItem=pageData.selectedCampaign&&pageData.selectedCampaign.products.find(function(data){return data.campaignProductId==_productData13[0]});if(tokenItem){tokenItem=Object.assign({},tokenItem);tokenItem=getMemberPrice(tokenItem);if(tokenItem.variants&&!ccDynamicProductSection&&!dynamicOrderBump&&!refreshOrderBumps.length){var variantDetails=_productData13.length>1?tokenItem.variants.find(function(data){return data.variantDetailId===parseInt(_productData13[1])}):tokenItem.variants[0];if(variantDetails){var _tokenItem2,_variantDetails;//adjust a few items with variant details
variantDetails=getMemberPrice(variantDetails,(_tokenItem2=tokenItem)===null||_tokenItem2===void 0?void 0:_tokenItem2.campaignProductId);tokenItem.productName+=" "+variantDetails.title;tokenItem.cycle1_price=parseFloat(variantDetails.price)>0&&!tokenItem.isVariantBundle&&!tokenItem.isEditable?variantDetails.price:tokenItem.cycle1_price;tokenItem.cycle1_shipPrice=parseFloat(variantDetails.shippingPrice)>0&&!tokenItem.isVariantBundle?variantDetails.shippingPrice:tokenItem.cycle1_shipPrice;tokenItem.imageUrl=variantDetails.imageUrl?variantDetails.imageUrl:tokenItem.imageUrl;tokenItem.memberPriceApplied=variantDetails.memberPriceApplied;tokenItem.tokenVariantId=variantDetails.variantDetailId;tokenItem.tokenVariantCurrencyPrices=(_variantDetails=variantDetails)===null||_variantDetails===void 0||(_variantDetails=_variantDetails.currencyPrices)===null||_variantDetails===void 0?void 0:_variantDetails.length}}tokenItem.cycle1_price=parseFloat(tokenItem.cycle1_price).toFixed(2);tokenItem.cycle1_shipPrice=parseFloat(tokenItem.cycle1_shipPrice).toFixed(2)}ccProdSectionProducts[currentItem]=tokenItem}tokenItem=ccProdSectionProducts[currentItem]}else if(orderData&&orderData["items"]){tokenItem=orderData["items"][0]}else if(loginOrder&&loginOrder["items"]){tokenItem=loginOrder["items"][0]}else if(customerOrders&&customerOrders[0]["items"]){var key=Object.keys(customerOrders[0]["items"])[0];tokenItem=customerOrders[0]["items"][key]}var formattedValue="";var tokenValue="";var token="";if(inputType=="prodImg"&&tokenItem&&tokenItem.imageUrl){el.src=tokenItem.imageUrl}if(inputType=="input"){tokenValue=el.value}if(inputType=="label"){tokenValue=el.innerHTML}if(inputType=="href"){tokenValue=decodeURIComponent(el.href)}var remSubstring=tokenValue&&tokenValue.match(/{{(.*?)}}/g);if(remSubstring&&remSubstring.length>0){for(var _i97=0;_i97<remSubstring.length;_i97++){var trimmedString=remSubstring[_i97].trim().replace(/(?:^(?:&nbsp;)+)|(?:(?:&nbsp;)+$)/g,"");token=trimmedString;trimmedString=trimmedString.split("{{")[1].split("}}")[0];var isDate=trimmedString.indexOf("yy")>-1||trimmedString.indexOf("MM")>-1||trimmedString.indexOf("ddd")>-1;var orderOrUriValue=orderData&&orderData[trimmedString]||uriParams&&uriParams.has(trimmedString)&&uriParams.get(trimmedString);if(trimmedString==="savings_percent"){var savingsPercentValue=sessionStorage.getItem("savingsPercentValue")!==null?sessionStorage.getItem("savingsPercentValue"):null;formattedValue=savingsPercentValue||"";sessionStorage.removeItem("savingsPercentValue")}else if(isDate){formattedValue=setDateFormat(date,trimmedString)}else if(ccActionPurchaseItem&&ccActionPurchaseItem[trimmedString]){var value=ccActionPurchaseItem[trimmedString];formattedValue=trimmedString.indexOf("date")>-1?setDateFormat(value,"yyyy-MM-dd"):value}else if(!orderStatusInfo&&orderOrUriValue){if(trimmedString.indexOf("date")>-1){formattedValue=setDateFormat(orderOrUriValue,"yyyy-MM-dd")}else{formattedValue=orderOrUriValue}}else if(!orderStatusInfo&&loginOrder&&(loginOrder[trimmedString]||loginOrder.fulfillments&&loginOrder.fulfillments[0]&&loginOrder.fulfillments[0][trimmedString])){var _value2=loginOrder[trimmedString]||loginOrder.fulfillments&&loginOrder.fulfillments[0]&&loginOrder.fulfillments[0][trimmedString];if(trimmedString.indexOf("date")>-1){formattedValue=setDateFormat(_value2,"yyyy-MM-dd")}else{formattedValue=_value2}}else if(!orderStatusInfo&&customerOrders&&customerOrders[0][trimmedString]){if(trimmedString.indexOf("date")>-1){formattedValue=setDateFormat(customerOrders[0][trimmedString],"yyyy-MM-dd")}else{formattedValue=customerOrders[0][trimmedString]}}else if(tokenItem&&tokenItem[trimmedString]||orderStatusInfo&&tokenItem&&tokenItem.fulfillments&&tokenItem.fulfillments[0]&&tokenItem.fulfillments[0][trimmedString]){var _value3=tokenItem[trimmedString]||tokenItem.fulfillments&&tokenItem.fulfillments[0]&&tokenItem.fulfillments[0][trimmedString];if(trimmedString.indexOf("date")>-1){formattedValue=setDateFormat(_value3,"yyyy-MM-dd")}else{formattedValue=_value3}}else if(membership&&membership[trimmedString]){if(trimmedString.indexOf("date")>-1){formattedValue=setDateFormat(membership[trimmedString],"yyyy-MM-dd")}else{formattedValue=membership[trimmedString]}}else{var isBuildOrTemplate=checkBuildOrTemplate();if(isBuildOrTemplate){formattedValue=token}else{formattedValue=""}}if(trimmedString==="stockQuantity"&&!formattedValue){formattedValue="0"}var priceValue=formattedValue,cycle1PriceToken=trimmedString.includes("cycle1_price");if(cycle1PriceToken&&formattedValue!==""){formattedValue=(parseFloat(formattedValue)*vatTaxRate).toFixed(2)}if(trimmedString.match(/price/gi)&&formattedValue!==""){if((!formattedValue||Number(formattedValue)===0)&&trimmedString==="compareAtPrice"){formattedValue=""}else if([2,3,4,34].includes(pageData.pageTypeId)){var _tokenItem$currencyPr;var hasCurrencyPrices=!tokenItem.memberPriceApplied&&cycle1PriceToken&&(tokenItem.tokenVariantId?tokenItem.tokenVariantCurrencyPrices:(_tokenItem$currencyPr=tokenItem.currencyPrices)===null||_tokenItem$currencyPr===void 0?void 0:_tokenItem$currencyPr.length);var addVariantId=tokenItem.tokenVariantId?"."+tokenItem.tokenVariantId:"";var _productId10=(pageData.cartData||hasCurrencyPrices)&&tokenItem&&tokenItem.campaignProductId+addVariantId;if(hasCurrencyPrices)formattedValue=ccGetProductCurrencyPrice(_productId10,1)||formattedValue;var attr=cycle1PriceToken&&tokenItem.isPricePercent===1?" data-cc-perc-prod='true' ":"";var currencyPriceAttr=hasCurrencyPrices?" data-cc-currency-prod='true' ":"";formattedValue="<span "+attr+currencyPriceAttr+"data-cc-prod-id='"+_productId10+"' "+"data-cc-price-type='"+trimmedString+"' data-cc-price='"+priceValue+"'>"+ccFormatCurrency(formattedValue,pageData.selectedCampaign.currencySymbol)+"</span>"}else{formattedValue=pageData.selectedCampaign.currencySymbol+formattedValue}}if(inputType=="input"){el.value=tokenValue.replace(token,formattedValue);tokenValue=el.value}if(inputType=="label"){formattedValue=typeof formattedValue==="string"?formattedValue.replaceAll("\n","<br>"):formattedValue;if(trimmedString==="ffl_info"&&globalOrderData&&globalOrderData.customFields&&globalOrderData.customFields.fflNumber){var fflNumber=sessionStorage.getItem("fflNumber");var fflAddress=sessionStorage.getItem("fflAddress");fflAddress=fflAddress?fflAddress.split(","):[];formattedValue=(fflNumber?fflNumber:"")+(fflAddress[0]?"<br>"+fflAddress[0]:"")+(fflAddress[1]?"<br>"+fflAddress[1]+", ":"")+(fflAddress[2]||"")}else if((pageData.pageTypeId===17||pageData.pageTypeId===18)&&trimmedString==="collectionName"){formattedValue="<span class='cc-collection-name-label'></span>"}else if(trimmedString==="trackingNumber"&&formattedValue){formattedValue=addTrackingNumberLink(formattedValue,false)}el.innerHTML=tokenValue.replace(token,formattedValue);tokenValue=el.innerHTML}if(inputType=="href"){el.href=tokenValue.replace(token,formattedValue);tokenValue=el.href}}}}function addTrackingNumberLink(trackingValue,returnElement){var trackingNumber=trackingValue+"";var trackingNumberLength=trackingNumber.length;if(trackingNumber[0]==="9"&&trackingNumberLength>=20&&trackingNumberLength<=26){trackingValue="<a target='_blank' href='https://tools.usps.com/go/TrackConfirmAction_input?strOrigTrackNum="+trackingNumber+"'>"+trackingNumber+"</a>"}else if(trackingNumber.substring(0,2).toLowerCase()==="1z"){trackingValue="<a target='_blank' href='https://wwwapps.ups.com/WebTracking/track?track=yes&trackNums="+trackingNumber+"'>"+trackingNumber+"</a>"}if(returnElement&&trackingValue&&trackingValue.length>trackingNumberLength){trackingValue=$(trackingValue)[0]}return trackingValue}function setDateFormat(date,dateFormat){var orderDate=typeof date==="string"?new Date(date):date;var formattedDate="";var monthShort=["Jan","Feb","$ar","Apr","$ay","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var monthLong=["January","February","$arch","April","$ay","June","July","August","September","October","November","December"];var dayShort=["Sun","Mon","Tue","We$","Thu","Fri","Sat"];var dayLong=["Sun$ay","Mon$ay","Tues$ay","We$nes$ay","Thurs$ay","Fri$ay","Satur$ay"];var year=orderDate.getFullYear().toString();formattedDate=dateFormat;formattedDate=formattedDate.replace("yyyy",year);formattedDate=formattedDate.replace("yy",year.substring(2,4));formattedDate=formattedDate.replace("MMMM",monthLong[orderDate.getMonth()]);formattedDate=formattedDate.replace("MMM",monthShort[orderDate.getMonth()]);formattedDate=formattedDate.replace("MM",appendLeadingZeroes(orderDate.getMonth()+1));formattedDate=formattedDate.replace("M",orderDate.getMonth()+1);formattedDate=formattedDate.replace(/\$/g,"M");//so the replace on line above this does not get "May"
formattedDate=formattedDate.replace("dddd",dayLong[orderDate.getDay()]);formattedDate=formattedDate.replace("ddd",dayShort[orderDate.getDay()]);formattedDate=formattedDate.replace("dd",appendLeadingZeroes(orderDate.getDate()));formattedDate=formattedDate.replace("d",orderDate.getDate());formattedDate=formattedDate.replace(/\$/g,"d");//so the replace on line above this does not get "day"
return formattedDate}function affixImports(type,url,onloadFunction){if(type==="js"){var newScript=document.createElement("script");var scriptData=document.getElementById("scriptData");if(onloadFunction){newScript.onload=onloadFunction}document.body.insertBefore(newScript,scriptData);newScript.src=url}else{// To move the links to head if anything is present other than it
var listItems=document.getElementsByTagName("link");Array.from(listItems,function(elem){if(elem.parentElement.nodeName!=="HEAD"){document.head.appendChild(elem)}});var newLink=document.createElement("link");document.head.insertBefore(newLink,listItems[listItems.length-1].nextSibling);newLink.rel="stylesheet";newLink.href=url}}function appendLeadingZeroes(n){if(n<=9){return"0"+n}return n}function selectRadioTiles(element,source){var variantTypeCheckedValue=element.getAttribute("varianttype");var productVariantElement=element.closest(".fk-product-variant-select");if(variantTypeCheckedValue&&variantTypeCheckedValue.toLowerCase().includes("color")&&!element.classList.contains("ccNoColorTile")){var border=productVariantElement?"2px solid #000000":"2px solid #000000";var boxShadow=productVariantElement?"rgb(230 241 241) 0px 0px 1px 1px inset":"0 0 0 2px #f3f5f6 inset";$(element).css({"border":border,"box-shadow":boxShadow})}else{if(source==="from-on-load"){element.firstElementChild.checked=true}var selectedColor=$(element).closest(".fk-product-section").attr("selectedcolor");var _boxShadow=productVariantElement?"rgb(230 241 241) 0px 0px 1px 1px inset":"0 0 0 2px #000";$(element).css({"background-color":selectedColor?selectedColor:"","cursor":"pointer","box-shadow":_boxShadow});productVariantElement&&$(element).css({"border":"2px solid #000000"})}$(element).attr("data-selected","true")}function productVariantTileClick(element){var variantRadioTiles=element.closest(".variant-parent-div");if(variantRadioTiles&&variantRadioTiles.children&&variantRadioTiles.children.length>0){var childElementLength=variantRadioTiles.children.length;var childElements=variantRadioTiles.children;for(var _i98=0;_i98<childElementLength;_i98++){var childElement=childElements[_i98];childElement=childElement.tagName.toLowerCase()=="div"?childElement.firstElementChild:childElement;var variantTypeValue=childElement.getAttribute("varianttype");if(variantTypeValue&&variantTypeValue.toLowerCase().includes("color")&&!childElement.classList.contains("ccNoColorTile")){$(childElement).css({"box-shadow":"unset","border":"2px solid #c5cacd"})}else{childElement.style.setProperty("background-color","unset","important");childElement.style.setProperty("box-shadow","unset","important");if($(element).closest(".fk-product-variant-select")[0]){childElement.style.setProperty("border","2px solid #c5cacd")}}$(childElement).attr("data-selected","false")}}if(element.checked==true){if(element&&element.parentElement){selectRadioTiles(element.parentElement)}}}$("input[type=radio][class=variant-radio]").on("click change",function(e){productVariantTileClick(this)});function showVariantImageOnProductSection(){var prodSection=document.querySelectorAll(".fk-product-section");if(prodSection&&prodSection.length>0){prodSection.forEach(function(prodSection){var prodImg=$(prodSection).find("img");var prodValue=prodSection&&prodSection.getAttribute("value");var prodPrice=$(prodSection).find(".fk-price")[0];var prodShipPrice=$(prodSection).find(".fk-ship-price")[0];showVariantImage(prodSection,prodImg[0],prodValue,prodPrice,prodShipPrice)})}}function mapSelectVariant(product,productSection,productData,index,isChangeProdSection){try{var tileVariantValue={};for(var _i99=1;_i99<=3;_i99++){var key="variant"+_i99;tileVariantValue[key]=$(productSection).find("[data-selected=true][name="+key+"]").find("[type=radio]").attr("data-value")}$(productSection).find(".variant-parent-div").remove();var variantsLength=product&&product.variants&&product.variants.length;var variantTypeCount=variantsLength>0?getNumOfVariantTypes(product):0;var firstSelect=productSection.querySelector("select[name='variant"+1+"']");var firstSelectGroup=firstSelect&&firstSelect.closest(".fk-element-container");["1","2","3"].map(function(value){var currentValueSelect=productSection.querySelector("select[name='variant"+value+"']");if(isChangeProdSection&&value<=variantTypeCount&&!currentValueSelect&&firstSelectGroup){var newSelect=firstSelect.cloneNode();var newSelectGroup=firstSelectGroup.cloneNode();newSelectGroup.removeAttribute("id");newSelect.setAttribute("name","variant"+value);var label=$(firstSelect).siblings("label")[0];var newLabel=label&&label.cloneNode();newSelectGroup.append(newSelect);newLabel&&newSelect.before(newLabel);productSection.querySelector("select[name='variant"+(value-1)+"']").closest(".fk-element-container").after(newSelectGroup)}else if(value!=1&&value>variantTypeCount&&isChangeProdSection){var variantEle=productSection.querySelectorAll("select[name='variant"+value+"']");removeItems(variantEle,"",true)}var productVariants=productSection.querySelectorAll("select[name='variant"+value+"']");var productVariantsTile=productSection.querySelectorAll(".variant-label"+value);var variantTileLabel="";var usedValues=[];if(productVariants&&productVariants.length>0){product&&populateVariantSelects(product,productSection,productVariants,"",value,productData,true,isChangeProdSection)}else if(productVariantsTile&&productVariantsTile.length>0){variantTileLabel=$(productVariantsTile).siblings("label");if(product.variants&&product.variants.length>0){product.variants.sort(function(a,b){return a["variantOptionSequence"+value]-b["variantOptionSequence"+value]});var variantTileParent=document.createElement("div");variantTileParent.className="variant-parent-div";variantTileParent.style.display="flex";variantTileParent.style.flexWrap="wrap";variantTileParent.style.alignSelf="flex-start";var tileClasses=Array.from(productVariantsTile[0].classList);var noColorTileClass=tileClasses.includes("ccNoColorTile");var productRowSection=$(productSection).closest(".fk-product-row")[0];var dynamicSection=productSection.classList.contains("cc-dynamic-product-section")||productSection.classList.contains("cc-dynamic-order-bump")||productSection.classList.contains("cc-refresh-order-bump");var isDynamicSection=dynamicSection||productRowSection;var variantImageClassExists=tileClasses.includes("fk-variant-image");var prodVariantSelection=productSection.classList.contains("fk-product-variant-select");var variantImageNameClassExists=prodVariantSelection&&variantImageClassExists&&tileClasses.includes("fk-variant-image-name");var prodVariants=product.variants;var prodVariantsLength=prodVariants.length;var _loop30=function _loop30(){var variant=prodVariants[_i100];var optionName=variant["variantOptionName"+value];var variantTypeNameVar=variant["variantName"+value];var imageExists=variantImageClassExists?variant["imageUrl"]:true;if(optionName&&imageExists){var variantimageText,variantTileDiv;var variantTypeName=variant["variantName"+value];var variantRadioInput=document.createElement("input");variantRadioInput.setAttribute("type","radio");variantRadioInput.setAttribute("data-value",variant["variantDetailId"]);variantRadioInput.style.display="none";variantRadioInput.className="variant-radio";variantRadioInput.name=variantTypeName+"-"+(index+1);var variantTile=document.createElement("label");var variantValue=optionName;variantTile.innerText=optionName;VariantType=document.createAttribute("variantType");// Create a "class" attribute
title=document.createAttribute("title");// Create a "class" attribute
VariantType.value=variantTypeName;// Set the value of the class attribute
variantTile.setAttribute("variantoptionvalue",optionName);variantTile.setAttributeNode(VariantType);var isColorVariant=variantTypeName.toLowerCase().includes("color")&&!noColorTileClass;if(variantTypeName&&variantTypeName!==""&&(isColorVariant||variantImageClassExists)){var borderRadius="50%",dimension="25px",bgColor=variantValue;if(variantImageClassExists){borderRadius="0%";dimension="50px";bgColor="transparent";variantTile.style.backgroundImage="url("+variant["imageUrl"]+")";variantTile.style.backgroundRepeat="no-repeat";variantTile.style.backgroundPosition="center";if(!productVariantsTile[0].closest(".fk-product-variant-select")){variantTile.style.backgroundSize="contain"}if(variantImageNameClassExists){variantTileDiv=document.createElement("div");variantimageText=document.createElement("label");variantTileDiv.style.display="flex";variantTileDiv.style.flexDirection="column";variantTileDiv.style.flex="1";VariantType2=document.createAttribute("variantType");VariantType2.value=variantTypeName;// Set the value of the class attribute            
variantTileDiv.setAttributeNode(VariantType2);variantimageText.innerText=optionName;variantimageText.style.margin="-11px 10px 0";variantimageText.style.backgroundColor="black";variantimageText.style.color="white";variantimageText.style.fontSize="10px"}}if(!productVariantsTile[0].closest(".fk-product-variant-select")||isColorVariant&&!variantImageClassExists){variantTile.style.height=dimension;variantTile.style.width=dimension;variantTile.style.flex="unset"}variantTile.style.setProperty("background-color",bgColor,"important");variantTile.style.border="2px solid #c5cacd";variantTile.style.fontSize="0";variantTile.style.borderRadius=borderRadius;title.value=variantValue;variantTile.setAttributeNode(title)}variantTile.className="variant-label"+value+(noColorTileClass?" ccNoColorTile":"");variantTile.setAttribute("name","variant"+value);variantTile.setAttribute("data-selected","false");variantTileLabel=$(productVariantsTile).siblings("label");productVariantsTile[0].innerText="";if(variantTileLabel&&variantTileLabel.length>0){variantTileLabel[0].parentElement.appendChild(variantTileParent);variantTileLabel[0].innerHTML=variant["variantName"+value]}else{productVariantsTile[0].parentElement.append(variantTileParent)}productVariantsTile[0].id!==""&&variantTile.setAttribute("id",productVariantsTile[0].id);$(productVariantsTile[0]).hide();if(!usedValues.includes(optionName)){usedValues.push(optionName);variantTile.appendChild(variantRadioInput);if(variantImageNameClassExists){variantTileDiv.appendChild(variantTile);variantTileDiv.appendChild(variantimageText);variantTileParent.appendChild(variantTileDiv)}else{variantTileParent.appendChild(variantTile)}}if(_i100===product.variants.length-1&&productData.length>1){//set current variant
var _variant=product.variants.filter(function(data){return data.variantDetailId==productData[1]});$(variantTileParent).children().each(function(){var innerText=$(this).text();if(innerText===_variant[0]["variantOptionName"+value]){selectRadioTiles(this)}})}}else{$(productVariantsTile[0]).hide();if(!variantImageClassExists&&variantTileLabel&&variantTileLabel.length>0){$(variantTileLabel[0]).hide()}}},VariantType,title,VariantType2;for(var _i100=0;_i100<prodVariantsLength;_i100++){_loop30()}}else{$(productVariantsTile[0]).hide();variantTileLabel&&variantTileLabel.length&&$(variantTileLabel[0]).hide()}}});for(var _i101=1;_i101<=3;_i101++){var _key3="variant"+_i101;var tileValue=tileVariantValue[_key3];tileValue&&$(productSection).find("[name="+_key3+"]").find("[data-value="+tileValue+"]").click()}}catch(error){console.log(error)}}function ccHandleBundleSetValue(productSection,product,variant,orderItems,sessionItemCpId,bundleVarCount){var productVariantSelects=productSection&&productSection.querySelector(".fk-variant-bundle-select-identifier"+bundleVarCount);var productVariants=productSection&&productSection.querySelectorAll("[name = 'variants'"),productVariantsLength=productVariants===null||productVariants===void 0?void 0:productVariants.length;if(productVariantSelects){productVariantSelects.value=variant.variantDetailId}else if(productVariantsLength){var variantId=variant.variantDetailId;for(var _i102=0;_i102<productVariantsLength;_i102++){if(productVariants[_i102].getAttribute("variantValue")==variantId){var qtyInput=productVariants[_i102].querySelector(".quantity-field")||productVariants[_i102].children[1];qtyInput.value=orderItems[sessionItemCpId];break}}}var id=pageData.pageViewReferenceId+"|"+sessionItemCpId;removeBundleFromCart[id]=1}function removeProductsFromCart(product,productSection){try{//remove products from cart
var prodCampId=product[0]&&product[0].campaignProductId;var _orderItems12=getOrderItems();var reccProductId=swapSubscriptions(_orderItems12,"",prodCampId).sectionValue;var bundleVarCount=1;var _loop31=function _loop31(){if(sessionItemCpId.indexOf(".")>0){var _productData14=sessionItemCpId.split(".");var productSelect=productSection.querySelector("[name = 'productSelect']");var bundlesOnPage=document.querySelectorAll(".fk-variant-bundle1, .fk-variant-bundle2, .fk-variant-bundle3, .fk-variant-bundle4, .fk-variant-bundle5, .fk-variant-bundle6").length;var bundleWithSelect=bundlesOnPage===1&&product[0].isVariantBundle&&productSelect;var bundleProductsPageRef=sessionStorage.getItem("bundleProductsPageRef")!==null?JSON.parse(sessionStorage.getItem("bundleProductsPageRef")):{};var id=pageData.pageViewReferenceId+"|"+sessionItemCpId;if(bundleWithSelect&&handleBundleEle){var numOfProducts=productSelect.options.length;if(bundleProductsPageRef[id]&&_productData14[0]!=prodCampId&&numOfProducts){for(var _i103 in productSelect.options){if(productSelect.options[_i103].value==_productData14[0]){ccProdSelectSectionLoad(productSection,_productData14[0],"",true);product=pageData.selectedCampaign.products.filter(function(product){return product.campaignProductId==_productData14[0]});prodCampId=product[0]&&product[0].campaignProductId}}}}if(_productData14[0]==prodCampId||_productData14[0]==reccProductId||bundleWithSelect&&bundleProductsPageRef[id]){if(![2,34].includes(pageData.pageTypeId)){delete _orderItems12[sessionItemCpId];twoWaySubscription&&setRebillCart(sessionItemCpId,"","",true)}var variant=product[0]&&product[0].variants.find(function(data){return data.variantDetailId==_productData14[1]});if(variant){if(product[0].isVariantBundle&&handleBundleEle){var qty=product[0].bundleProductQty||product[0].campaignProductQty||product[0].productQty;ccHandleBundleSetValue(productSection,product,variant,_orderItems12,sessionItemCpId,bundleVarCount);bundleVarCount=bundleVarCount<qty?bundleVarCount+1:1}else{["1","2","3"].map(function(value){var productVariants=productSection&&productSection.querySelectorAll("select[name='variant"+value+"']");if(productVariants&&productVariants.length>0){productVariants[0].value=variant["variantOptionName"+value]}})}}}}else if(sessionItemCpId==(product[0]&&product[0].campaignProductId)){var button=productSection&&productSection.querySelectorAll("button");if(button&&button.length>0&&button[0].innerHTML==="Select"){button[0].innerHTML="Selected";button[0].className="btn btn-success"}}};for(var sessionItemCpId in _orderItems12){_loop31()}sessionStorage.setItem("fkCart",JSON.stringify(_orderItems12))}catch(error){console.log(error)}}function mapProductVariantNameSelect(product,productSection,isChangeProdSection){try{var productNameSelect=productSection.querySelectorAll("select[name='productVariant']")[0];var selectValue=$(productNameSelect).val();if(productNameSelect){var chooseOptionText=productNameSelect.options.length>0&&productNameSelect.options[0].value===""?productNameSelect.options[0].text:null;var usedValues=[];var firstVariant=product&&product[0]&&product[0].variants&&product[0].variants[0]&&product[0].variants[0].title&&product[0].variants[0].title.charAt(0);if(isNaN(+firstVariant)){product[0].variants.sort(function(a,b){return a.title[0].charCodeAt(0)-b.title[0].charCodeAt(0)})}isChangeProdSection&&$(productNameSelect).siblings("label").first().html("Variants");productNameSelect.innerHTML="";if(chooseOptionText){var chooseOption=document.createElement("OPTION");chooseOption.value="";chooseOption.innerHTML=chooseOptionText;productNameSelect.add(chooseOption)}var variantsLength=product[0].variants.length;var actionCurrentItem=sessionStorage.getItem("actionCurrentItem");var variantDetailId=pageData.pageTypeId===13&&isChangeProdSection&&actionCurrentItem?actionCurrentItem.split(".")[1]:"";var currentVariant=variantsLength&&variantDetailId&&product[0].variants.find(function(data){return data.variantDetailId==variantDetailId});for(var _i104=0;_i104<variantsLength;_i104++){var variant=product[0].variants[_i104];var option=document.createElement("OPTION");var optionName=variant.variantDetailId;var variantIdMatch=currentVariant&&currentVariant.variantDetailId==variant.variantDetailId;if(variantIdMatch||!currentVariant&&isChangeProdSection&&_i104===0){selectValue=optionName}option.value=optionName;option.innerHTML=variant.title;if(!usedValues.includes(optionName)){productNameSelect.add(option);usedValues.push(optionName)}}var conditionsImply=selectValue&&usedValues.includes(selectValue)&&![17,18].includes(pageData.pageTypeId);conditionsImply&&$(productNameSelect).val(selectValue).change()}}catch(error){console.log(error)}}function mapBundleVariant(product,productSection){try{if(product[0].isVariantBundle){var ccVariantBundle=document.getElementsByClassName("cc-bundle-variants")[0];var parentArea=ccVariantBundle||productSection;var classesToCheck=["fk-variant-bundle3","fk-variant-bundle4","fk-variant-bundle6"];var separateVariants=productSection&&classesToCheck.some(function(cls){return productSection.classList.contains(cls)});var isRadioSection=$(productSection).find(".fk-product-radio")[0];var prodRadios=document.getElementsByClassName("fk-product-radio");var prodTileRadioSelected=false;for(var _i105=0;_i105<prodRadios.length;_i105++){if(prodRadios[_i105].checked===true&&prodRadios[_i105].closest(".fk-variant-bundle1, .fk-variant-bundle2, .fk-variant-bundle3, .fk-variant-bundle4, .fk-variant-bundle5, .fk-variant-bundle6")){prodTileRadioSelected=true;break}}if(ccVariantBundle)ccVariantBundle.style.display=prodRadios.length&&!prodTileRadioSelected?"none":"block";var productVariants=parentArea.querySelectorAll("div[name='variant-bundle-parent']");var variantBundleSelects=parentArea.querySelectorAll("select[name='variantBundleSelect']");var initialVariantColumn=parentArea.querySelector(".cc-variant-row")||parentArea.querySelector(".cc-variant-row-parent");var productElement=productSection.getElementsByClassName("fk-product-name");var divSelectedValue={};if(productElement&&productElement.length>0){var stockStatus=verifyStock&&product[0].cycle1_isShippable&&product[0].stockQuantity.toString()==="0"?"  - OUT-OF-STOCK":"";productElement[0].innerHTML=product[0].productName+stockStatus}var productVariantsCheck=productVariants&&productVariants.length>0;if(!productVariantsCheck&&variantBundleSelects.length===0&&(!separateVariants||!isRadioSection||isRadioSection.checked)){var variantBundleParentDiv=$(parentArea).find(".fk-variant-bundle-parent-div");var variantBundleParentDivLength=variantBundleParentDiv.length;for(var _i106=0;_i106<variantBundleParentDivLength;_i106++){var _item10=variantBundleParentDiv[_i106];var value=$(_item10).attr("variantvalue");divSelectedValue[value]=$(_item10).find("[name=quantity]").val()}productVariants=variantBundleParentDiv;variantBundleParentDivLength>1&&$(parentArea).find(".fk-variant-bundle-parent-div").slice(1).remove();productVariantsCheck=true;var variantQtyInput=productVariants[0]&&productVariants[0].querySelector("input[type='number']");$(variantQtyInput).val("")}if(productVariants&&productVariants.length&&(!separateVariants||!isRadioSection||isRadioSection.checked)){if(separateVariants&&(!isRadioSection||isRadioSection.checked))ccVariantBundle.style.display="block";product[0].variants.sort(function(a,b){return b["variantOptionSequence1"]-a["variantOptionSequence1"]});var usedValues=[];var cloneProductVariants=productVariants[0].cloneNode(true);var variantsLength=product[0].variants.length;for(var _i107=0;_i107<variantsLength;_i107++){var variant=product[0].variants[_i107];if(!usedValues.includes(variant["title"])){var child=cloneProductVariants.cloneNode(true);child.classList.add("fk-variant-bundle-parent-div");child.setAttribute("name","variants");child.setAttribute("variantvalue",variant["variantDetailId"]);var _stockStatus=verifyStock&&variant["stockQuantity"].toString()==="0"?"  - OUT-OF-STOCK":"";child.childNodes[0].innerHTML=variant["title"]+_stockStatus;var _value4=divSelectedValue[variant["variantDetailId"]];$(child).find("[name=quantity]").val(_value4||"");productVariants[0].insertAdjacentElement("afterend",child);usedValues.push(variant["title"])}}productVariants[0].remove()}if(initialVariantColumn&&(!separateVariants||!isRadioSection||isRadioSection.checked)){if(separateVariants&&(!isRadioSection||isRadioSection.checked))ccVariantBundle.style.display="block";var variants=product[0].variants;var bundleProductQuantity=product[0].bundleProductQty||product[0].campaignProductQty||product[0].productQty;variants.sort(function(a,b){return a["variantDetailId"]-b["variantDetailId"]});var selectedValues={},maxVariants=3,variantToCheck=variants[0];var count=0;for(var j=1;j<=maxVariants;j++){var key="variantName".concat(j);if(variantToCheck[key])count+=1}for(var _j2=1;_j2<=count;_j2++){for(var _i108=1;_i108<=bundleProductQuantity;_i108++){var _key4="fk-variant-bundle-select-identifier".concat(_j2).concat(_i108);selectedValues[_key4]=$(parentArea).find("."+_key4).val()}}var columnSize=12/count;var variantRowParent=document.createElement("div");variantRowParent.className="cc-variant-row-parent";for(var _i109=1;_i109<=bundleProductQuantity;_i109++){var variantRow=document.createElement("div");variantRow.className="row cc-variant-row".concat(_i109);variantRow.style.width="100%";variantRowParent.appendChild(variantRow);var variantRowSelects=initialVariantColumn.querySelectorAll("select");var variantRowSelectId=$(variantRowSelects[0]).attr("id")?$(variantRowSelects[0]).attr("id"):"";var _loop32=function _loop32(_j3){var select=document.createElement("select");select.className="col form-control-custom fk-form-select mb-3 fk-variant-bundle-select-identifier".concat(_i109).concat(_j3);select.id=variantRowSelectId;select.name="variantMultiSelect";var variantListed=[];variants.forEach(function(variant){var option=document.createElement("option");var variantOptionNameKey="variantOptionName".concat(_j3);if(!variantListed.includes(variant[variantOptionNameKey])){option.innerText=capitalize(variant[variantOptionNameKey]);select.appendChild(option)}variantListed.push(variant[variantOptionNameKey])});variantRow.appendChild(select)};for(var _j3=1;_j3<=count;_j3++){_loop32(_j3)}}$(initialVariantColumn).after(variantRowParent);initialVariantColumn.remove();if(!separateVariants){for(var _j4=1;_j4<=count;_j4++){for(var _i110=1;_i110<=bundleProductQuantity;_i110++){var _key5="fk-variant-bundle-select-identifier".concat(_j4).concat(_i110);var _value5=selectedValues[_key5];_value5&&$(parentArea).find("."+_key5).val(_value5).change()}}}}else if(variantBundleSelects&&variantBundleSelects.length>0&&(!separateVariants||!isRadioSection||isRadioSection.checked)){if(separateVariants&&(!isRadioSection||isRadioSection.checked))ccVariantBundle.style.display="block";var _bundleProductQuantity=product[0].bundleProductQty||product[0].campaignProductQty||product[0].productQty;var _selectedValues={};var identifier="fk-variant-bundle-select-identifier";for(var _i111=0;_i111<_bundleProductQuantity;_i111++){var _key6=identifier+(_i111+1);_selectedValues[_key6]=$(parentArea).find("."+_key6).val()}var variantBundleSelectId=$(variantBundleSelects[0]).attr("id")?$(variantBundleSelects[0]).attr("id"):"";variantBundleSelects.length>1&&$(parentArea).find("select[name='variantBundleSelect']").slice(1).remove();product[0].variants.sort(function(a,b){return a["variantDetailId"]-b["variantDetailId"]});var bundleVariantOptions=product[0].variants.map(function(variant){var stockStatus=verifyStock&&variant.stockQuantity.toString()==="0"?"  - OUT-OF-STOCK":"";return"<option value='"+variant.variantDetailId+"'>"+variant.title+stockStatus+"</option>"}).join("");var dynamicBundleVariantSelects=Array.from(Array(_bundleProductQuantity),function(item,index){return"<select class='form-control-custom fk-form-select mb-3 "+identifier+(index+1)+"' id='"+variantBundleSelectId+"' name='variantBundleSelect'>"+bundleVariantOptions+"</select>"}).join("");$(variantBundleSelects[0]).after(dynamicBundleVariantSelects);variantBundleSelects[0].remove();if(!separateVariants){for(var _i112=0;_i112<_bundleProductQuantity;_i112++){var _key7=identifier+(_i112+1);var _value6=_selectedValues[_key7];_value6&&$(parentArea).find("."+_key7).val(_value6).change()}}}}}catch(error){console.log(error)}}function changeTilePrices(productVariantElement){var tileVariants=$(productVariantElement).find(".fk-product-tile-parent");var tileLength=tileVariants.length;var productId=productVariantElement.getAttribute("value");var product=pageData.selectedCampaign.products.find(function(product){return product.campaignProductId===parseInt(productId)});var _loop33=function _loop33(_i113){var variant=product.variants.find(function(variant){return variant.variantDetailId===parseInt(tileVariants[_i113].variantvalue)});populateDataClass(tileVariants[_i113],product,variant,productId,1)};for(var _i113=0;_i113<tileLength;_i113++){_loop33(_i113)}}function populateDataClass(parentArea,product,variant,productId,qty,j,useDynamicImgClass){try{var currenySymbol=pageData.selectedCampaign.currencySymbol;var variantAddId=variant!==null&&variant!==void 0&&variant.variantDetailId?"."+(variant===null||variant===void 0?void 0:variant.variantDetailId):"";var itemId=productId+""+variantAddId;var useVariantPrice=variant&&!product.isVariantBundle&&!product.isEditable;var newVariantPrice=useVariantPrice&&parseFloat(ccGetProductCurrencyPrice(itemId)||variant.price);var unitPrice=newVariantPrice>0?newVariantPrice:parseFloat(ccGetProductCurrencyPrice(itemId,1)||product.cycle1_price);var vatPrice=unitPrice&&getItemPrice(itemId,unitPrice,qty,false);var qtyPerOrder=variant&&parseInt(variant.productQty)||1;var compareAtPrice=product.compareAtPrice&&parseFloat(product.compareAtPrice)>0?getItemPrice(null,parseFloat(product.compareAtPrice),qty,false,false,true):null;var actualCompareAtPrice=variant&&variant.compareAtPrice&&parseFloat(variant.compareAtPrice)>0&&!product.isVariantBundle?getItemPrice(null,parseFloat(variant.compareAtPrice),qty,false,false,true):compareAtPrice;compareAtPrice=actualCompareAtPrice||vatPrice;var exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1,prodTax=1;var prodPrice=unitPrice*qty,prodCompareAtPrice=compareAtPrice/(exchangeRate*prodTax);var imagePath=variant&&variant.imageUrl!==""?variant.imageUrl:product.imageUrl;if(imagePath!==""){$(parentArea).find(useDynamicImgClass?".cc-dynamic-img":"img").first().attr({"src":imagePath,"data-src":imagePath})}$(parentArea).find(".product-name").first().html(product.productName||"");$(parentArea).find(".product-base-description").first().html(product.productDescription||"");if(variant||!useDynamicImgClass){$(parentArea).find(".tile-title").first().html(variant&&variant["variantOptionName"+j]);$(parentArea).find(".product-description").first().html(variant&&variant.title)}$(parentArea).find(".product-price").first().html("<span data-cc-price-type='true' data-cc-price='"+prodPrice+"'>"+ccFormatCurrency(vatPrice.toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".unit-price").first().html("<span data-cc-price-type='true' data-cc-price='"+unitPrice/qtyPerOrder+"'>"+ccFormatCurrency((vatPrice/qtyPerOrder).toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".compare-at-price").first().html("<span data-cc-price-type='true' data-cc-price='"+prodCompareAtPrice+"'>"+ccFormatCurrency(compareAtPrice.toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".compare-at-unit-price").first().html("<span data-cc-price-type='true' data-cc-price='"+prodCompareAtPrice/qtyPerOrder+"'>"+ccFormatCurrency((compareAtPrice/qtyPerOrder).toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".product-savings").first().html("<span data-cc-price-type='true' data-cc-price='"+(prodCompareAtPrice-prodPrice)+"'>"+ccFormatCurrency((compareAtPrice-vatPrice).toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".savings-unit-price").first().html("<span data-cc-price-type='true' data-cc-price='"+((prodCompareAtPrice-prodPrice)/qtyPerOrder).toFixed(2)+"'>"+ccFormatCurrency((compareAtPrice/qtyPerOrder-vatPrice).toFixed(2),currenySymbol)+"</span>");$(parentArea).find(".savings-percent").first().html(parseFloat((compareAtPrice-vatPrice)/compareAtPrice*100).toFixed(0)+"%");!actualCompareAtPrice||Number(actualCompareAtPrice)===0?$(parentArea).find(".compare-at-price, .compare-at-unit-price").hide():$(parentArea).find(".compare-at-price, .compare-at-unit-price").show()}catch(e){e}}function getNumOfVariantTypes(product){var variantTypeCount=0;for(var _i114=1;_i114<=3;_i114++){var variantNameAttr="variantName"+_i114;var variantName=product.variants[0][variantNameAttr];if(variantName&&variantName!==""){variantTypeCount++}}return variantTypeCount}function constructProductVariantElement(selectedElement,parentSection,orderItems){try{var productTile=selectedElement?$(selectedElement).closest(".fk-product-tile-parent")[0]:$(parentSection).find(".fk-product-tile-parent")[0];var childElements=_toConsumableArray($(parentSection).find(".fk-product-variant-area")[0].childNodes);var productContainer=$(parentSection).find(".fk-product-display-container")[0];var variantsLength;var variantContainer=$(parentSection).find(".fk-variant-display-container")[0];var firstOptions=[],variantLabels;for(var _i115=1;_i115<=3;_i115++){var firstLabel=$(variantContainer).find(".variant-label"+_i115)[1];var opt=$(firstLabel).attr("variantoptionvalue");opt=opt&&opt.replace(/ /g,"");opt&&firstOptions.push(opt)}var _product15=null;if(productTile&&variantSelectFlag===0){var classList=_toConsumableArray(productTile.classList);var variantCategoryNum;var classListLength=classList.length;for(var _i116=0;_i116<classListLength;_i116++){if(["variant-tile1","variant-tile2","variant-tile3"].includes(classList[_i116])){var className=classList[_i116];variantCategoryNum=parseInt(className[className.length-1]);break}}variantLabels=$(parentSection).find(".fk-variant-label");var _productId11=parentSection.getAttribute("value");_product15=pageData.selectedCampaign.products.find(function(product){return product.campaignProductId===parseInt(_productId11)});if(variantLabels.length){var variantTypeCount=0;variantsLength=_product15&&_product15.variants&&_product15.variants.length;if(variantsLength){variantTypeCount=getNumOfVariantTypes(_product15);var _loop34=function _loop34(j){_product15.variants.sort(function(a,b){return a["variantOptionSequence"+j]-b["variantOptionSequence"+j]});var variantForTile=j===variantCategoryNum||j===variantTypeCount?true:false;if(variantForTile&&variantSelectFlag===0){var tempTile=productTile;var _loop35=function _loop35(_i117){createTile();function createTile(){var unitPrice=_product15.variants[_i117]&&parseFloat(_product15.variants[_i117].price)>0&&!_product15.isVariantBundle&&!_product15.isEditable?parseFloat(_product15.variants[_i117].price):parseFloat(_product15.cycle1_price);var newProdTile=productTile.cloneNode(true);populateDataClass(newProdTile,_product15,_product15.variants[_i117],_productId11,1,j);newProdTile.value=_productId11;newProdTile.variantvalue=_product15.variants[_i117].variantDetailId;$(newProdTile).attr({"price":unitPrice,"variantName":_product15.variants[_i117].title});var tileRadio=$(newProdTile).find(".fk-product-radio")[0];$(tileRadio).attr({"value":_productId11,"variantvalue":_product15.variants[_i117].variantDetailId,"quantity":1,"id":_product15.variants[_i117].variantDetailId});tileRadio.addEventListener("click",function(e){e.stopPropagation();displayPrices()});var section=$(newProdTile).closest("section")[0];var variantName=newProdTile.getAttribute("variantName").replace(/ /g,"");tempTile.after(newProdTile);$(section).attr("style","display: none !important");matched=variantName&&checkVariantMatch(_product15,variantName,firstOptions);if(matched===firstOptions.length){if(_i117===0&&parentSection.offsetHeight>0){checkedElement=tileRadio;tileRadio.checked=true;$(newProdTile).find("button").first().html("SELECTED")}$(section).attr("style","display: block")}tempTile=newProdTile}};for(var _i117=0;_i117<variantsLength;_i117++){_loop35(_i117)}productTile.remove()}};for(var j=1;j<=variantTypeCount;j++){_loop34(j)}}}}if(variantSelectFlag===0){$(".fk-product-variant-select").trigger("click")}variantSelectFlag=variantsLength?1:variantSelectFlag}catch(error){console.log(error)}}function checkVariantMatch(product,variantName,partialVariants){var matched=0;var variant=product.variants.find(function(variant){return variant.title.replace(/ /g,"")===variantName});var partialVariantLength=partialVariants.length;if(variant){for(var _i118=1;_i118<=3;_i118++){for(var j=0;j<partialVariantLength;j++){var variantOptionName=variant["variantOptionName"+_i118];if(variantOptionName&&variantOptionName.replace(/ /g,"")==partialVariants[j]){matched++}}}}return matched};function filterTiles(productVariantElement,product){try{var variantLabels=$(productVariantElement).find(".variant-label1, .variant-label2, .variant-label3").filter("[data-selected='true']");var tileVariants=$(productVariantElement).find(".fk-product-tile-parent");var tileLength=tileVariants.length,partialVariants=[],variantLabelLength=variantLabels.length;if(variantLabelLength){for(var _i119=0;_i119<variantLabelLength;_i119++){var opt=$(variantLabels[_i119]).attr("variantoptionvalue");opt&&partialVariants.push(opt.replace(/ /g,""))}}var count=0;for(var _i120=0;_i120<tileLength;_i120++){var _matched=0;var section=$(tileVariants[_i120]).closest("section").first().attr("style","display: none !important");var variantName=tileVariants[_i120].getAttribute("variantName")&&tileVariants[_i120].getAttribute("variantName").replace(/ /g,"");_matched=variantName&&checkVariantMatch(product,variantName,partialVariants);if(_matched===partialVariants.length){section&&section.attr("style","display: block");var defaultSelectRadio=count===0?$(tileVariants[_i120]).find(".fk-product-radio")[0]:"";if(defaultSelectRadio&&productVariantElement.offsetHeight>0){checkedElement=defaultSelectRadio;defaultSelectRadio.checked=true;count++;$(defaultSelectRadio).trigger("click")}}}}catch(err){err}}function showInitialElement(productSection){var variantEle=productSection.querySelector("select[name='variant1']")||productSection.querySelector("select[name='productVariant']");var elementContainer=variantEle&&variantEle.closest(".fk-element-container");elementContainer&&$(elementContainer).show()}function hideRemoveVariantSelects(productSection,noVariants){if(noVariants){var variantEle=productSection.querySelector("select[name='variant1']")||productSection.querySelector("select[name='productVariant']");var elementContainer=variantEle&&variantEle.closest(".fk-element-container");elementContainer&&$(elementContainer).hide()}["2","3"].map(function(value){var variantEle=productSection.querySelectorAll("select[name='variant"+value+"']");removeItems(variantEle,"",true)});var productVariantNameSelect=$(productSection).find("[name=productVariant]")[0]}function hideRemoveComboEle(productSection,noVariants){var comboEle=$(productSection).find("[name=comboEle]");removeItems(comboEle,1,true);noVariants&&$(comboEle[0]).hide()}function productDetailSubscription(ccSubscribeAndSave,product,productId){var idParams=swapSubscriptions("","",productId,true);var expectedProductId=idParams.sectionValue;var exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1;var oneTimeId=idParams.oneTimeId;var oneTimePrice,subscribePrice;if(expectedProductId!=productId||product.billingCycleType==="RECURRING"&&oneTimeId){if(product.billingCycleType=="ONE_TIME"){var expectedProduct=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==expectedProductId});oneTimePrice=parseFloat(product.cycle1_price);subscribePrice=parseFloat(expectedProduct.cycle1_price);expectedProductId&&$(".recurring")[0].setAttribute("value",expectedProductId);$(".one-time")[0].setAttribute("value",productId);$(".one-time")[0].checked=true}else{var oneTimeProduct=pageData.selectedCampaign.products.find(function(prod){return prod.campaignProductId==oneTimeId});subscribePrice=parseFloat(product.cycle1_price);oneTimePrice=parseFloat(oneTimeProduct.cycle1_price);oneTimeId&&$(".one-time")[0].setAttribute("value",oneTimeId);$(".recurring")[0].setAttribute("value",productId);$(".recurring")[0].checked=true}var savingsPercentValue=parseFloat((oneTimePrice-subscribePrice)/oneTimePrice*100).toFixed(0)+"%";$(".one-time-price").first().text(pageData.selectedCampaign.currencySymbol+(oneTimePrice*exchangeRate).toFixed(2));$(".recurring-price").first().text(pageData.selectedCampaign.currencySymbol+(subscribePrice*exchangeRate).toFixed(2));$(".subscription-savings-percent").first().text(savingsPercentValue);sessionStorage.setItem("savingsPercentValue",savingsPercentValue)}else{ccSubscribeAndSave.style.display="none"}}function loadVariants(prodSelect,previousValue,skipRecall){var productSections=document.getElementsByClassName("fk-product-section");var currentItem=sessionStorage.getItem("currentItem");var newItem=sessionStorage.getItem("newProductItem");var currentProductQty=sessionStorage.getItem("currentProductQty");var productSectionsLength=productSections.length;var currentItemData=newItem?newItem.split("."):currentItem&&currentItem.split(".");var currentItemId=currentItemData&&currentItemData[0];var currentItemProduct=currentItemId&&pageData.selectedCampaign&&pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==currentItemId});if(productSectionsLength>0){var _loop36=function _loop36(){var productSection=productSections[_i121];var sectionClassList=productSection.classList;var sectionValue=productSection.getAttribute("value");var isSectionDynamic=sectionClassList.contains("cc-dynamic-product-section")||sectionClassList.contains("cc-dynamic-order-bump")||sectionClassList.contains("cc-refresh-order-bump");var pageTypeId=pageData.pageTypeId;var comboElement=sectionClassList.contains("fk-combo-product");var dynamicChangeProduct=sectionClassList.contains("cc-dynamic-change-product");var comboChangeProdSection=sectionClassList.contains("cc-change-product-section");var onlyComboOnChangeProd=comboElement&&pageTypeId===13&&productSections.length===1;var isComboChangeProdSection=comboChangeProdSection||onlyComboOnChangeProd&&Number(sectionValue);var isDyChangeProdSection=dynamicChangeProduct||onlyComboOnChangeProd&&!Number(sectionValue);var productValue=newItem&&!ccDynamicProductSection&&!isComboChangeProdSection?newItem:currentItem&&!isComboChangeProdSection&&(pageTypeId===34||isSectionDynamic)?currentItem:sectionValue;var productData=productValue&&productValue.split(".");var sectionProductSelect=$(productSection).find("[name='productSelect']");if(productValue&&sectionProductSelect&&sectionProductSelect[0]){var defaultOpt=Number(sectionProductSelect[0].options[0].value);if(!Number(productValue)){sectionProductSelect[0].value=sectionProductSelect[0].options[0].value;if(defaultOpt&&defaultOpt!=0&&typeof defaultOpt=="number"){productValue=defaultOpt.toString();productData=productValue&&productValue.split(".")}}else{sectionProductSelect[0].value=productValue&&productValue.split(".")[0]}}if(productData){!dynamicChangeProduct&&isDyChangeProdSection&&sectionClassList.add("cc-dynamic-change-product");!comboChangeProdSection&&isComboChangeProdSection&&sectionClassList.add("cc-change-product-section");var isVariantTileClassAdded=Array.from(sectionClassList).includes("fk-variant-tile");var productVariantNameSelect=$(productSection).find("[name=productVariant]")[0];var _product16=pageData.selectedCampaign&&pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==productData[0]});var isComboExists=_product16.length&&_product16[0].combinations.length;var isComboProdSection=comboElement&&(pageTypeId!==13||Number(sectionValue)&&isComboExists);var sectionId=productSection.getAttribute("id");var ccVariantBundle=document.getElementsByClassName("cc-bundle-variants")[0];var parentArea=ccVariantBundle||productSection;var qtyPlusButton=parentArea.getElementsByClassName("button-plus")[0];var qtyMinusButton=parentArea.getElementsByClassName("button-minus")[0];qtyPlusButton?qtyPlusButton.setAttribute("onclick","plusQuantity('', '"+sectionId+"', true, event);"):null;qtyMinusButton?qtyMinusButton.setAttribute("onclick","minusQuantity('', '', '"+sectionId+"', true, event);"):null;if(isDyChangeProdSection&&currentItem||isComboChangeProdSection){productSection.setAttribute("value",productData[0]);if(_product16[0].combinations.length>0){hideRemoveVariantSelects(productSection);showInitialElement(productSection);displayCombos(_product16,productSection,true,previousValue)}else if(_product16[0].variants&&!_product16[0].variants.length){hideRemoveVariantSelects(productSection,true);hideRemoveComboEle(productSection,true)}else if(productVariantNameSelect){hideRemoveComboEle(productSection);showInitialElement(productSection);mapProductVariantNameSelect(_product16,productSection,true)}else{hideRemoveComboEle(productSection);showInitialElement(productSection);mapSelectVariant(_product16[0],productSection,productData,_i121,true)}}else if(isSectionDynamic){var dynamicElement=dynamicOrderBump||ccDynamicProductSection;var isRefreshBump=[4].includes(pageTypeId)&&sectionClassList.contains("cc-refresh-order-bump");if(dynamicElement&&currentItem){[2,3,4].includes(pageTypeId)&&dynamicElement.setAttribute("value",currentItemId);mapSelectVariant(currentItemProduct[0],dynamicElement,currentItemData,_i121)}else if(isRefreshBump){mapSelectVariant(_product16[0],productSection,productData,_i121)}pageData.pageTypeId===3&&removeProductsFromCart(_product16,productSection);setRadioTilesOnLoad()}else if(currentItem&&!ccDynamicProductSection&&!dynamicOrderBump&&!refreshOrderBumps.length){if(productSectionsLength==1&&[13,34].includes(pageTypeId)){var ccSubscribeAndSave=document.getElementsByClassName("cc-subscribe-and-save")[0];productSection.setAttribute("value",productData[0]);if(ccSubscribeAndSave){productDetailSubscription(ccSubscribeAndSave,_product16[0],productData[0])}else{isComboProdSection&&displayCombos(_product16,productSection)}}mapSelectVariant(_product16[0],productSection,productData,_i121)}else if(productValue&&!isSectionDynamic){if(_product16&&_product16.length>0){if(isComboProdSection){displayCombos(_product16,productSection)}else if(_product16[0].variants&&_product16[0].variants.length>0){isVariantTileClassAdded?mapSelectVariant(_product16[0],productSection,productData,_i121):iterateAndMapVariants(_product16,productSection,prodSelect);mapBundleVariant(_product16,productSection);mapProductVariantNameSelect(_product16,productSection)}else{hideVariantContainer(productSection,_product16,prodSelect)}!skipRecall&&removeProductsFromCart(_product16,productSection)}}}};for(var _i121=0;_i121<productSectionsLength;_i121++){_loop36()}}}function createOptions(optionName,newSelect,usedValues){var option=document.createElement("OPTION");option.value=optionName&&optionName.replace("  - OUT-OF-STOCK","");option.innerHTML=optionName;if(!usedValues.includes(optionName)){newSelect.add(option);usedValues.push(optionName)}}function displayCombos(product,productSection,isChangeProdSection,previousValue){try{var combinations=product[0].combinations;var _productId12=product[0].campaignProductId;var comboEle=productSection.querySelector("div[name='comboEle']");var productSelect=productSection.querySelector("[name='productSelect']");var comboEleCollection=$(productSection).find("div[name='comboEle']");var combinationsLength=combinations.length;var combinationSelectValues={};for(var _i122=0;_i122<combinationsLength;_i122++){combinationSelectValues["productCombo"+_i122]=$(productSection).find("[name=productCombo"+_i122+"]").val()}comboEleCollection.length>1&&comboEleCollection.slice(1).remove();if(comboEle&&combinations&&combinations.length>0){var tempComboEle=comboEle;var customizations;if(isChangeProdSection){var actionPurchaseId=sessionStorage.getItem("actionPurchaseId");var customPurchases=JSON.parse(sessionStorage.getItem("customPurchases"));var purchaseOrder=customPurchases[actionPurchaseId];customizations=purchaseOrder&&purchaseOrder.customization}for(var value=0;value<combinations.length;value++){var newComboSection=tempComboEle.cloneNode(true);var newSelect=newComboSection.querySelector("select");newSelect.name="productCombo"+value;var stockStatus=verifyStock&&product[0].cycle1_isShippable&&combinations[value].stockQuantity.toString()==="0"?"  - OUT-OF-STOCK":"";newComboSection.firstElementChild.innerHTML=combinations[value].comboProductName;tempComboEle.after(newComboSection);newComboSection.style.display="block";combinations[value].variants.sort(function(a,b){return a["title"]-b["title"]});var usedValues=[];newSelect.innerHTML="";var variantsLength=combinations[value].variants.length;if(variantsLength>0){for(var _i123=0;_i123<variantsLength;_i123++){var _stockStatus2=verifyStock&&product[0].cycle1_isShippable&&combinations[value].variants[_i123].stockQuantity.toString()==="0"?"  - OUT-OF-STOCK":"";var optionName=combinations[value].variants[_i123]["title"];if(optionName){optionName=combinations[value].variants[_i123]["title"]+_stockStatus2}if(customizations){var customVariantsLength=customizations.length;for(var j=0;j<customVariantsLength;j++){if(customizations[j].variantDetailId==combinations[value].variants[_i123].variantDetailId){combinationSelectValues["productCombo"+value]=optionName}}}createOptions(optionName,newSelect,usedValues)}}else{var _optionName=combinations[value].comboProductName+stockStatus;createOptions(_optionName,newSelect,usedValues)}tempComboEle=newComboSection}}comboEle.style.display="none";for(var _i124=0;_i124<combinationsLength;_i124++){var _value7=combinationSelectValues["productCombo"+_i124];if(_value7&&(previousValue&&previousValue==_productId12||!previousValue))$(productSection).find("[name=productCombo"+_i124+"]").val(_value7).change()}}catch(error){error}}function populateVariantSelects(product,productSection,productVariants,prodSelect,value,productData,fromMapSelect,isChangeProdSection){var variantDetailId,currentVariant,usedValues=[];var variantLabel=$(productVariants).siblings("label");$(productVariants[0]).css("display","block");if(product.variants&&product.variants.length>0){var selectValue=prodSelect?"":$(productVariants[0]).val();product.variants.sort(function(a,b){return a["variantOptionSequence"+value]-b["variantOptionSequence"+value]});productVariants[0].innerHTML="";if(isChangeProdSection){var actionCurrentItem=sessionStorage.getItem("actionCurrentItem");variantDetailId=actionCurrentItem?actionCurrentItem.split(".")[1]:"";currentVariant=variantDetailId&&product.variants.find(function(data){return data.variantDetailId==variantDetailId})}var variantsLength=product.variants.length;for(var _i125=0;_i125<variantsLength;_i125++){var variant=product.variants[_i125];var stockStatus=verifyStock&&product.variants[_i125].stockQuantity.toString()==="0"?"  - OUT-OF-STOCK":"";var optionName=product.variants[_i125]["variantOptionName"+value];var variantIdMatch=currentVariant&&currentVariant.variantDetailId==variant.variantDetailId;if(optionName){optionName=optionName+stockStatus}createOptions(optionName,productVariants[0],usedValues,fromMapSelect,variant);if(variant["variantName"+value]===null){$(productVariants).hide();$(variantLabel).hide()}if(fromMapSelect){var productRowSection=$(productSection).closest(".fk-product-row")[0];var dynamicSection=productSection.classList.contains("cc-dynamic-product-section")||productSection.classList.contains("cc-dynamic-order-bump")||productSection.classList.contains("cc-refresh-order-bump");var isDynamicSection=dynamicSection||productRowSection;if(isDynamicSection&&_i125===0){selectValue=optionName}if(variantIdMatch||!currentVariant&&isChangeProdSection&&_i125===0){selectValue=optionName}if(variantLabel&&variantLabel.length>0){variantLabel[0].innerHTML=variant["variantName"+value]}var variantTypeName=variant["variantName"+value];var VariantType=document.createAttribute("variantType");VariantType.value=variantTypeName;productVariants[0].setAttributeNode(VariantType);if(productData.length>1){//set current variant
var _variant2=product.variants.find(function(data){return data.variantDetailId==productData[1]});productVariants[0].value=_variant2&&_variant2["variantOptionName"+value]}}}var isRefreshBumps=$(productVariants[0]).closest(".cc-refresh-order-bump")[0];var conditionsImply=!isRefreshBumps&&![17,18].includes(pageData.pageTypeId)&&selectValue&&usedValues.includes[selectValue];conditionsImply&&$(productVariants[0]).val(selectValue).change()}else{$(productVariants).hide();$(variantLabel).hide()}}function hideVariantContainer(productSection,product){["1","2","3"].map(function(value){var productVariants=productSection.querySelectorAll("select[name='variant"+value+"']");var productVariantsTile=productSection.querySelectorAll(".variant-label"+value);var variantElem=productVariants[0]||productVariantsTile[0];var variantLabel=$(variantElem).siblings("label");$(productVariants).hide();$(productVariantsTile).hide();$(variantLabel).hide()})}function iterateAndMapVariants(product,productSection,prodSelect){try{["1","2","3"].map(function(value){var productVariants=productSection.querySelectorAll("select[name='variant"+value+"']");if(productVariants&&productVariants.length>0){product&&product[0]&&populateVariantSelects(product[0],productSection,productVariants,prodSelect,value)}})}catch(error){console.log(error)}}function getShopPayCheckoutUrl(orderItems){var validShopPayUrl=false;var shopPayUrl=pageData.selectedCampaign.shopPayUrl;var orderItemsCopy=JSON.parse(JSON.stringify(getOrderItems()));if(!shopPayUrl||Object.keys(orderItems).length===0){var errMsg=!shopPayUrl?"ShopPay payment is not enabled. Please try other payment method.":"No products exist in the order.";alert("Error: "+errMsg);return false}shopPayUrl+="/cart/";Object.keys(orderItemsCopy).forEach(function(key){var keys=key.split(".");var qty=parseInt(orderItemsCopy[key]);qty=qty>0?qty:1;var externalVariantId=getExternalVariantId(keys[0],keys[1]?keys[1]:"");if(externalVariantId){validShopPayUrl=true;shopPayUrl+=externalVariantId+":"+qty+","}});if(!validShopPayUrl){alert("Error: Unable to generate ShopPay checkout. Please try other payment method.");return false}shopPayUrl=shopPayUrl.substring(0,shopPayUrl.length-1);shopPayUrl+="?payment=shop_pay";return shopPayUrl}function getExternalVariantId(productId,variantId){var products=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==productId});var product=products&&products[0]?products[0]:"";if(!product)return false;if(!variantId&&product.externalVariantDetailId)return product.externalVariantDetailId;if(variantId&&product.variants&&product.variants.length>0){var variant=product.variants.filter(function(data){return data.variantDetailId==variantId});if(variant&&variant[0]&&variant[0].externalVariantDetailId)return variant[0].externalVariantDetailId}return false}function getVariantsAndDisplay(event){var productSection=event.currentTarget.closest("section.fk-product-section");getVariants(productSection.id);displayPrices()}function getVariants(productSectionId,qtyChange,getVariantId,addGetVariantId,addToCart,buttonId){try{var productSections=document.getElementsByClassName("fk-product-section");var productSectionsLength=productSections.length;var comboCount=0,comboUpdate=false;if(productSectionsLength>0){var _loop37=function _loop37(){var productSection=productSections[_i126];var buttonSection=$(productSection).find("[data-id='".concat(buttonId,"']"))[0];if(buttonId&&!buttonSection){return 0;// continue
}if(productSectionId&&productSection.getAttribute("id")!=productSectionId)return 0;// continue
if($(productSection).closest(".bump-div-class").find("[name=orderBump]").prop("checked")===false){return 0;// continue
}if($(productSection).find("input[name='product'], input[name='product1'], input[name='product2']").prop("checked")===false&&!getVariantId){return 0;// continue
}var sectionValue=productSection.getAttribute("value");var subAndSaveRadio=productSection.querySelectorAll("input[name='Subscribe']:checked")[0];sectionValue=subAndSaveRadio?subAndSaveRadio.value:sectionValue;var sectionId=$(productSection).attr("id");var orderBumpVariant=sectionId&&sectionId.startsWith("orderBumpVariants");var checkoutPayPage=pageData.pageTypeId==4&&document.getElementsByName("cardNumber").length;if(sectionValue&&$(productSection).find("[name='variants']").length==0&&(!orderBumpVariant||productSection.offsetHeight||checkoutPayPage)){var _product17=pageData.selectedCampaign.products.filter(function(data){return data.campaignProductId==sectionValue});var isComboExists=_product17.length&&_product17[0].combinations.length;var productVariants=$(productSection).find("[name='variant1'], [name='variant2'], [name='variant3']").filter("select");for(var _i127=productVariants.length-1;_i127>=0;_i127--){if(productVariants[_i127].style.display==="none"){productVariants.splice(_i127,1)}}var productVariantsTiles=$(productSection).find(".variant-label1, .variant-label2, .variant-label3").filter("[data-selected='true']");productVariants=[].concat(_toConsumableArray(productVariantsTiles),_toConsumableArray(productVariants));productVariants.sort(function(a,b){return a.getAttribute("name")>b.getAttribute("name")?1:-1});var isProductNameSelectorExists=productSection.querySelectorAll("select[name='productVariant']")[0];var quantity=productSection.querySelectorAll("input[name='quantity'], select[name='quantity']");var sectionInputs=$(productSection).find("input[name='product'], input[name='product1'], input[name='product2']");var variantInputValue=sectionInputs.length?sectionInputs[0].getAttribute("variantvalue"):null;var comboElement=productSection.classList.contains("fk-combo-product");var sectionClassList=productSection.classList;var isSectionDynamic=sectionClassList.contains("cc-dynamic-product-section")||sectionClassList.contains("cc-dynamic-order-bump");var isComboProdSection=comboElement&&(pageData.pageTypeId!==13||Number(sectionValue)&&isComboExists);var isProdSelectExists=$(productSection).find("[name='productSelect']")[0];var orderBump=$(productSection).closest(".bump-div-class")[0];var useCartQty=false;var filteredProductVariants;var qty=0;if(quantity&&quantity[0]){qty=quantity[0].value}else if(isProdSelectExists&&orderBump||isComboProdSection||isProductNameSelectorExists||productVariants&&productVariants.length>0||pageData.pageTypeId===34||isSectionDynamic){qty=1;useCartQty=true}if((qty>0||qtyChange)&&_product17&&_product17[0]){_product17[0].variants.sort(function(a,b){return a["variantDetailId"]-b["variantDetailId"]});if(isComboProdSection&&!qtyChange){var selectedCombiItems={};var comboOpt=productSection.querySelectorAll("div[name='comboEle']");var comboOptLength=comboOpt.length;var comboString="";var comboProd=_product17[0].campaignProductId.toString()+"|"+qty.toString()+"|";for(var _i128=0;_i128<comboOptLength;_i128++){var comboProdName=productSection.querySelectorAll("div[name='comboEle']")[_i128].firstChild.innerHTML;var _item11=comboOpt[_i128].querySelector("select").value;selectedCombiItems[_i128]=_defineProperty({},comboProdName,_item11)}var selectedComboLength=Object.keys(selectedCombiItems).length;for(var _i129=0;_i129<selectedComboLength;_i129++){comboString+=JSON.stringify(selectedCombiItems[_i129])}comboString=comboString.replaceAll(",","|").replaceAll("{","").replaceAll("}","|").replaceAll("\"","");comboProd=comboProd.concat(comboString);if(pageData.pageTypeId===13){comboUpdate=true;sessionStorage.setItem("selectedCombo",comboProd)}if(pageData.pageTypeId===3){var _orderItems13=getUpsaleItems();_orderItems13["product_custom"+(comboCount+1)]=comboProd;comboCount++;sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems13))}}//filter products[0].variants by variant1.value, variant2.value, and variant3.value to get the correct variantDetailId
//variant1 should always have a value.  variant2 and 3 may not
//set variantDetailId to the filter result (if more than 1 in result, take the first)
//this logic also supports products without variants, in a product section
else if(_product17[0].variants&&_product17[0].variants.length>0&&!isProductNameSelectorExists){var selectedVariantsMap={};productVariants&&productVariants.length&&productVariants.map(function(item,index){var elementTagName=$(item).prop("tagName");var elementNameAttr=$(item).prop("name");var itemValue=item.value?item.value.replace("  - OUT-OF-STOCK",""):item.value;var elementValue=elementTagName.toLowerCase()==="select"?itemValue:item.getAttribute("variantoptionvalue")||item.innerText;if(elementValue&&elementValue!=="null"&&elementValue!=="undefined"){selectedVariantsMap["variant"+(index+1)]=elementValue}});var selectedVariantsLength=Object.keys(selectedVariantsMap).length;filteredProductVariants=selectedVariantsLength>0&&_product17[0].variants.find(function(variantItem){var matchedVariants=0;for(var _i130=1;_i130<=selectedVariantsLength;_i130++){if(variantItem["variantOptionName"+_i130]===selectedVariantsMap["variant"+_i130]){matchedVariants+=1}else{break}}return matchedVariants===selectedVariantsLength})}if(isProductNameSelectorExists||variantInputValue){var productNameVariantVal=isProductNameSelectorExists?isProductNameSelectorExists.value:variantInputValue;filteredProductVariants=_product17[0].variants.find(function(item){return item.variantDetailId===parseInt(productNameVariantVal)})}var variantDetailId=filteredProductVariants&&filteredProductVariants.variantDetailId?filteredProductVariants.variantDetailId:productSection.getAttribute("variantvalue");if(_product17[0].variants&&_product17[0].variants.length>0&&variantDetailId==null){return 0;// continue
}if(variantDetailId&&getVariantId){return{v:variantDetailId}}if(variantDetailId!=null||productVariants.length==0||comboUpdate){var itemKey=sectionValue;var prodId=itemKey;if(variantDetailId!=null)itemKey+="."+variantDetailId;if(qtyChange){sessionStorage.setItem("productAndVariantId",itemKey);return{v:void 0}}if(pageData.pageTypeId===3){var _orderItems14=getUpsaleItems();_orderItems14[itemKey]=qty;sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems14))}else if(pageData.pageTypeId===34){var _orderItems15=getOrderItems();var currentItem=sessionStorage.getItem("currentItem");currentItem=isSubscribeOn?swapSubscriptions(_orderItems15,"",currentItem).sectionValue:currentItem;currentItem&&delete _orderItems15[currentItem];_orderItems15[itemKey]=qty;sessionStorage.setItem("fkCart",JSON.stringify(_orderItems15));sessionStorage.setItem("currentItem",itemKey)}else if(pageData.pageTypeId===2){var _orderItems16=getOrderItems();prodId=isSubscribeOn?swapSubscriptions(_orderItems16,"",prodId).sectionValue:prodId;delete _orderItems16[prodId];_orderItems16[itemKey]=qty;sessionStorage.setItem("fkCart",JSON.stringify(_orderItems16))}else if(pageData.pageTypeId===13){sessionStorage.setItem("newProductItem",itemKey);sessionStorage.setItem("currentItem",itemKey);sessionStorage.setItem("currentProductQty",qty);sessionStorage.setItem("newProductQty",qty)}else if(pageData.pageTypeId!==3){if(![17,18].includes(pageData.pageTypeId)||addToCart){var _orderItems17=getOrderItems();if(!_orderItems17[itemKey]||!useCartQty)_orderItems17[itemKey]=qty;sessionStorage.setItem("fkCart",JSON.stringify(_orderItems17));var customInputs=$(productSection).find("input[name^='custom_item_']");if(pageData.pageTypeId===4&&customInputs.length){customItemCheck(customInputs,itemKey,productSection)}}}}if(variantDetailId&&addGetVariantId){return{v:variantDetailId}}}else if(quantity&&quantity[0]&&productVariants.length==0){var _itemKey=productSection.getAttribute("value");if(pageData.pageTypeId===3){var _orderItems18=getUpsaleItems();delete _orderItems18[_itemKey];sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems18))}else{var _orderItems19=getOrderItems();delete _orderItems19[_itemKey];_orderItems19=removeSubscriptionProduct(_orderItems19,_itemKey);sessionStorage.setItem("fkCart",JSON.stringify(_orderItems19))}}}},_ret5;for(var _i126=0;_i126<productSectionsLength;_i126++){_ret5=_loop37();if(_ret5===0)continue;if(_ret5)return _ret5.v}}}catch(error){error}}function getBundleVariants(params,index){var outOfStockBundleVariants=[];var outOfStockBundleProductIds=[];var variantBundleElements=document.querySelectorAll(".fk-variant-bundle1, .fk-variant-bundle2, .fk-variant-bundle3, .fk-variant-bundle4, .fk-variant-bundle5, .fk-variant-bundle6");var baseVariantIds=[];var isNewBundle=null;if(variantBundleElements.length){variantBundleElements.forEach(function(el){var _el$getAttribute;var val=(_el$getAttribute=el.getAttribute("value"))===null||_el$getAttribute===void 0?void 0:_el$getAttribute.trim();if(val)baseVariantIds.push(val)});for(var key in params){if(/^product\d+_(id|qty)$/.test(key)||/^variant\d+_id$/.test(key)){delete params[key]}}var ccCartType=pageData.pageTypeId===3?"upsalefkCart":"fkCart";var ccPageCart=JSON.parse(sessionStorage.getItem(ccCartType)||"{}");var _loop38=function _loop38(_key8){if(baseVariantIds.some(function(id){return _key8.startsWith(id+".")})){delete ccPageCart[_key8]}};for(var _key8 in ccPageCart){_loop38(_key8)}sessionStorage.setItem(ccCartType,JSON.stringify(ccPageCart));var newIndex=0;for(var _key9 in ccPageCart){var _key9$split=_key9.split("."),_key9$split2=_slicedToArray(_key9$split,2),_productId13=_key9$split2[0],variantId=_key9$split2[1];var qty=ccPageCart[_key9];newIndex++;params["product".concat(newIndex,"_id")]=_productId13;if(variantId){params["variant".concat(newIndex,"_id")]=variantId}params["product".concat(newIndex,"_qty")]=qty}index=newIndex}var productSections=document.getElementsByClassName("fk-product-section");var productSectionsLength=productSections.length;ccDeleteBundleFromCart();var bundleItems=sessionStorage.getItem("bundleItems")!==null?JSON.parse(sessionStorage.getItem("bundleItems")):{};var orderItems=getOrderItems();var bundleProductsPageRef=sessionStorage.getItem("bundleProductsPageRef")!==null?JSON.parse(sessionStorage.getItem("bundleProductsPageRef")):{};if(productSectionsLength>0){var _loop39=function _loop39(){var productSection=productSections[_i131];var item;var campaignProdId=isSubscribeOn?swapSubscriptions("","",productSection.getAttribute("value")).sectionValue:productSection.getAttribute("value");var isRadioSection=$(productSection).find(".fk-product-radio")[0];var ccVariantBundle=document.getElementsByClassName("cc-bundle-variants")[0];var classesToCheck=["fk-variant-bundle3","fk-variant-bundle4","fk-variant-bundle6"];var separateVariants=productSection&&classesToCheck.some(function(cls){return productSection.classList.contains(cls)});var qtyInput=separateVariants?$(ccVariantBundle).find("[name=\"quantity\"]"):[];var bundleQty=0;for(var _i132=0;_i132<qtyInput.length;_i132++){if(Number(qtyInput[_i132].value)){bundleQty=qtyInput[_i132].value;break}}var parentArea=separateVariants?ccVariantBundle:productSection;if((!isRadioSection||isRadioSection.checked&&(!qtyInput.length||bundleQty))&&Number(campaignProdId)&&$(parentArea).find("[name='variants']").length){var productVariants=parentArea.querySelectorAll("[name='variants']");var productVariantsLength=productVariants.length;var bundle="";isNewBundle=!bundleItems[campaignProdId];for(var j=0;j<productVariantsLength;j++){var productVariant=productVariants[j];var bundleVarQty=Number(productVariant.children[1].value).toString();var qtyValue=productVariant.querySelector(".quantity-field")&&productVariant.querySelector(".quantity-field").value||bundleVarQty;if(parseInt(qtyValue)>0){index++;params["product"+index+"_id"]=campaignProdId;params["variant"+index+"_id"]=productVariant.getAttribute("variantvalue");params["product"+index+"_qty"]=qtyValue;var _productData15=[];_productData15[0]=campaignProdId;_productData15[1]=productVariant.getAttribute("variantvalue");var _productId14=_productData15.join(".");item=verifyStock&&getOutStockedVariant(_productData15,"","","",qtyValue);if(item&&item.length>0){outOfStockBundleVariants.push(item);outOfStockBundleProductIds.push(_productId14)}orderItems[_productId14]=qtyValue;bundle+=_productId14+":"+qtyValue+"|";bundleItems[campaignProdId]=bundle;var id=pageData.pageViewReferenceId+"|"+_productId14;bundleProductsPageRef[id]=qtyValue}}}if((!isRadioSection||isRadioSection.checked&&(!qtyInput.length||bundleQty))&&Number(campaignProdId)&&$(parentArea).find(".cc-variant-row-parent").length){var _product18=pageData.selectedCampaign.products.find(function(product){return product.campaignProductId==campaignProdId});_product18&&_product18.variants.sort(function(a,b){return a["variantDetailId"]-b["variantDetailId"]});var maxVariants=3;var existingCombinations={},bundleQuantities={},_bundle="";variantOptionsChosen=[];var bundleProductQuantity=_product18.bundleProductQty||_product18.campaignProductQty||_product18.productQty;isNewBundle=!bundleItems[campaignProdId];var _loop40=function _loop40(){var variantOption=[];for(var _i133=1;_i133<=maxVariants;_i133++){var _key10="variantName".concat(_i133);if(_product18.variants[0][_key10]){var identifier=".fk-variant-bundle-select-identifier".concat(_j5).concat(_i133);var select=parentArea.querySelector(identifier);variantOption.push(select.value)}}var chosenVariantTitle=variantOption.join("/");var chosenVariant=_product18.variants.find(function(variant){return variant.title.replace(/\s+/g,"")==chosenVariantTitle.replace(/\s+/g,"")});var variantId=chosenVariant&&chosenVariant.variantDetailId;var productId="".concat(campaignProdId,".").concat(variantId);if(existingCombinations[productId]){var indexKey=existingCombinations[productId];var qtyKey="product".concat(indexKey,"_qty");params[qtyKey]="".concat((parseInt(params[qtyKey])||1)+1);bundleQuantities[productId]++}else{index++;existingCombinations[productId]=index;bundleQuantities[productId]=1;params["product".concat(index,"_id")]=campaignProdId;params["variant".concat(index,"_id")]=variantId;params["product".concat(index,"_qty")]="1";if(verifyStock){var _item12=getOutStockedVariant([campaignProdId,variantId],"","","",1);if(_item12!==null&&_item12!==void 0&&_item12.length){outOfStockBundleVariants.push(_item12);outOfStockBundleProductIds.push(productId)}}bundleProductsPageRef["".concat(pageData.pageViewReferenceId,"|").concat(productId)]=1}orderItems[productId]=bundleQuantities[productId].toString();_bundle=Object.entries(bundleQuantities).map(function(_ref28){var _ref29=_slicedToArray(_ref28,2),id=_ref29[0],qty=_ref29[1];return"".concat(id,":").concat(qty)}).join("|")+"|";bundleItems[campaignProdId]=_bundle};for(var _j5=1;_j5<=bundleProductQuantity;_j5++){_loop40()}}else if((!isRadioSection||isRadioSection.checked&&(!qtyInput.length||bundleQty))&&Number(campaignProdId)&&$(parentArea).find("[name='variantBundleSelect']").length){var variantBundleSelects=parentArea.querySelectorAll("[name='variantBundleSelect']");var variantBundleSelectsLength=variantBundleSelects.length;var _existingCombinations={};var _bundleQuantities={};var _bundle2="";isNewBundle=!bundleItems[campaignProdId];for(var _j6=0;_j6<variantBundleSelectsLength;_j6++){var select=variantBundleSelects[_j6];var _variantId3=select.value;var _productId15="".concat(campaignProdId,".").concat(_variantId3);if(_existingCombinations[_productId15]){var indexKey=_existingCombinations[_productId15];var qtyKey="product".concat(indexKey,"_qty");params[qtyKey]="".concat((parseInt(params[qtyKey])||1)+1);_bundleQuantities[_productId15]++}else{index++;_existingCombinations[_productId15]=index;_bundleQuantities[_productId15]=1;params["product".concat(index,"_id")]=campaignProdId;params["variant".concat(index,"_id")]=_variantId3;params["product".concat(index,"_qty")]="1";if(verifyStock){var _item13=getOutStockedVariant([campaignProdId,_variantId3],"","","",1);if(_item13!==null&&_item13!==void 0&&_item13.length){outOfStockBundleVariants.push(_item13);outOfStockBundleProductIds.push(_productId15)}}bundleProductsPageRef["".concat(pageData.pageViewReferenceId,"|").concat(_productId15)]=1}orderItems[_productId15]=_bundleQuantities[_productId15].toString();_bundle2=Object.entries(_bundleQuantities).map(function(_ref30){var _ref31=_slicedToArray(_ref30,2),id=_ref31[0],qty=_ref31[1];return"".concat(id,":").concat(qty)}).join("|")+"|";bundleItems[campaignProdId]=_bundle2}}};for(var _i131=0;_i131<productSectionsLength;_i131++){_loop39()}}sessionStorage.setItem("fkCart",JSON.stringify(orderItems));sessionStorage.setItem("bundleProductsPageRef",JSON.stringify(bundleProductsPageRef));sessionStorage.setItem("bundleItems",JSON.stringify(bundleItems));var bundleStockParams={params:params,outOfStockBundleVariants:outOfStockBundleVariants,outOfStockBundleProductIds:outOfStockBundleProductIds,isNewBundle:isNewBundle};return bundleStockParams}function ccAddAndOpenCart(event){event.preventDefault();event.stopImmediatePropagation();try{toggleProductSelection(event)}catch(err){}openNav()}function toggleProductSelection(e){var isReset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var target=e.target,currentTarget=e.currentTarget;if(isReset){currentTarget=e;target=e}var qtyInput=!isReset&&$(e.currentTarget).closest(".fk-product-section").find("[name='quantity']");if(qtyInput&&qtyInput.length&&!Number(qtyInput.val()))return;var clickableElementId=currentTarget.dataset.id;var product=null;var prodSection=null;var initBtnValue=e.currentTarget.getAttribute("data-text-value")||"Select";var btnSelectedText=e.currentTarget.getAttribute("selectedText")||"Selected";var btnSelectedBgColor=e.currentTarget.getAttribute("selectedBgColor")||"#218838";var btnSelectedTextColor=e.currentTarget.getAttribute("selectedTextColor")||"Selected";var initTextColor=$(currentTarget).attr("initTextColor");var initBgColor=$(currentTarget).attr("initBgColor");if(!initBgColor){var currentColor=$(currentTarget).css("background-color");$(currentTarget).attr("initBgColor",currentColor);initBgColor=currentColor}if(!initTextColor){var currentTextColor=$(currentTarget).css("color");$(currentTarget).attr("initTextColor",currentTextColor);initTextColor=currentTextColor}if(clickableElementId&&clickableElementId!==""){var clickableElement=$("button[data-id='"+clickableElementId+"'],a[data-id='"+clickableElementId+"']")[0];prodSection=clickableElement.closest("section.fk-product-section");var variantId="";if(pageData.pageTypeId===34){getVariants("","","","",true);product=sessionStorage.getItem("currentItem")}else if([1,2,17,18,21].includes(pageData.pageTypeId)){product=clickableElement.getAttribute("offer");//get the variant within this particular product section
var quantityExists=$(prodSection).find("[name='quantity']")[0];var variantSelect=$(prodSection).find("[name='variant1']").filter("select");if(prodSection&&(quantityExists||variantSelect.length!==0&&variantSelect.is(":visible")||$(prodSection).find(".variant-label1").filter("[data-selected='true']").length>0)){variantId=getVariants(prodSection.getAttribute("id"),"","",true,true)}else{prodSection=null}}else if(pageData.pageTypeId===3)product=clickableElement.getAttribute("upsell");else product=clickableElement.getAttribute("offer");if(!product||isNaN(parseFloat(product))){if(clickableElement){product=findParentNode(clickableElement,"product");if(product)product=product.getAttribute("value");product=variantId?product+"."+variantId:product}}else{var variantValue=clickableElement.getAttribute("variantvalue");if(variantValue)product=product+"."+variantValue}}if(product&&!isNaN(parseFloat(product))){if(currentTarget.innerHTML===btnSelectedText){currentTarget.innerHTML=initBtnValue;initBgColor?currentTarget.style.setProperty("background-color",initBgColor,"important"):currentTarget.className="btn btn-primary";btnSelectedTextColor&&initTextColor?currentTarget.style.setProperty("color",initTextColor,"important"):null;if(pageData.pageTypeId===3){var _orderItems20=getUpsaleItems();delete _orderItems20[product];sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems20))}else{var _orderItems21=getOrderItems();delete _orderItems21[product];_orderItems21=removeSubscriptionProduct(_orderItems21,product);sessionStorage.setItem("fkCart",JSON.stringify(_orderItems21))}}else if(!isReset){if(currentTarget.innerHTML===initBtnValue){currentTarget.innerHTML=btnSelectedText;btnSelectedBgColor?currentTarget.style.setProperty("background-color",btnSelectedBgColor,"important"):currentTarget.className="btn btn-success";btnSelectedTextColor?currentTarget.style.setProperty("color",btnSelectedTextColor,"important"):null}// If this is an upsale page, add product to upsale cart
// Else add to cart
if(pageData.pageTypeId===3){var _orderItems22=getUpsaleItems();var quantity=prodSection&&prodSection.querySelectorAll("input[name='quantity'], select[name='quantity']");if(quantity&&quantity[0]){_orderItems22[product]=quantity[0].value>0?quantity[0].value:""}else{_orderItems22[product]=1}sessionStorage.setItem("upsalefkCart",JSON.stringify(_orderItems22))}else if([2,17,18].includes(pageData.pageTypeId)&&prodSection){//catalog page cart was set above in getVariants
product=isSubscribeOn?swapSubscriptions(orderItems,"",product).sectionValue:product;callAddToCartEvent(product)}else{var _orderItems23=getOrderItems();product=isSubscribeOn?swapSubscriptions(_orderItems23,"",product).sectionValue:product;_orderItems23[product]=pageData.pageTypeId===34?getQuantity():1;sessionStorage.setItem("fkCart",JSON.stringify(_orderItems23));callAddToCartEvent(product)}}displayPrices()}}function getProductDetails(product){var obj={productName:product,productValue:0};var currentOrderItems=getOrderItemDetails(false);if(currentOrderItems[product]){var _item14=currentOrderItems[product];var unitPrice=_item14.variant&&parseFloat(_item14.variant.price)>0&&!_item14.isVariantBundle&&!_item14.isEditable?_item14.variant.price:_item14.cycle1_price;var title=_item14.variant?" "+_item14.variant.title:"";obj.productName=_item14.productName+title;obj.productValue=parseFloat(getItemPrice(product,unitPrice,_item14.currentOrderQuantity).toFixed(2));obj.quantity=_item14.currentOrderQuantity;obj.campaignProductId=_item14.campaignProductId;obj.externalProductId=_item14.externalProductId;obj.variantDetailId=_item14.variant?_item14.variant.variantDetailId:""}return obj}function findParentNode(el,parentName){while(el.parentNode){el=el.parentNode;if(el.getAttribute("name")===parentName){return el}}return null}function autoUpdateNameOnCardInput(){if(pageData.pageTypeId!==4)return;if(!sessionStorage.getItem("ccCardNameOverridden")){var address1=$("[name=address1]"),shipAddress1=$("[name=shipAddress1]"),nameOnCard=$("[name=nameOnCard]");var getNameInputValue=function getNameInputValue(shipping){var _getInputValue,_getInputValue2,_getInputValue3;var firstName="firstName",lastName="lastName",fullName="fullName";if(shipping){firstName="shipFirstName";lastName="shipLastName";fullName="shipFullName"}var fullNameValue=((_getInputValue=getInputValue(fullName))===null||_getInputValue===void 0?void 0:_getInputValue.trim())||"";if(fullNameValue)return fullNameValue;var firstNameValue=((_getInputValue2=getInputValue(firstName))===null||_getInputValue2===void 0?void 0:_getInputValue2.trim())||"",lastNameValue=((_getInputValue3=getInputValue(lastName))===null||_getInputValue3===void 0?void 0:_getInputValue3.trim())||"";return firstNameValue&&lastNameValue?firstNameValue+" "+lastNameValue:firstNameValue||lastNameValue};if(shipAddress1.length&&address1.length){var billShipSameObj=$("[type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").first();var billShipSame=billShipSameObj.length?billShipSameObj.prop("checked"):address1.length&&!shipAddress1.length;if(billShipSame&&shipAddress1[0].offsetHeight>0){nameOnCard.val(getNameInputValue(true));return}}nameOnCard.val(getNameInputValue())}}$("[name=nameOnCard]").on("change input",function(){sessionStorage.setItem("ccCardNameOverridden",true)});$("[name=shipFirstName], [name=shipLastName], [name=firstName], [name=lastName], [name=shipFullName], [name=fullName], [type='checkbox'][name=billShipSame], [type='radio'][name=billShipSame].cc-same-as-shipping").on("change input",function(){autoUpdateNameOnCardInput()});//Auto-load inputs with order data submitted on previous pages - Ex: firstName input on checkout page automatically filled with firstName submitted on leadPage
function autoLoadInputs(orderDataParam){var ccIdMeDetails=window.ccGetIdmeUserSessionDetails&&ccGetIdmeUserSessionDetails()||{};var ccUrlParams=new URLSearchParams(getCurrentWindowLocation().search);var orderData=orderDataParam?orderDataParam:JSON.parse(sessionStorage.getItem("orderData"));var inputs=$("input, select");var updatePriceTotals=false;if(orderData){if(pageData.pageTypeId===3){orderData.couponCode=""}orderData.country&&loadStates("state",orderData.country);orderData.shipCountry&&loadStates("shipState",orderData.shipCountry);var items=orderData.items;var isCampaignMatched=pageData.selectedCampaign.campaignId==orderData.campaignId;if(ccUrlParams.has("includeProducts")&&isCampaignMatched&&items){var _orderItems24=getOrderItems();for(var index in items){var _item15=items[index];var itemKey=_item15.variantDetailId?_item15.productId+"."+_item15.variantDetailId:_item15.productId;_orderItems24[itemKey]=_item15.qty}sessionStorage.setItem("fkCart",JSON.stringify(_orderItems24));updatePriceTotals=true;if(pageData.pageTypeId===4){var urlCouponCode=(ccUrlParams.get("couponCode")||"").trim(),_item16=urlCouponCode&&getOrderItems();if(_item16&&Object.keys(_item16).length&&!appliedCouponCode.includes(urlCouponCode)){appliedCouponCode.push(urlCouponCode)}}}}var inputsLength=inputs.length;for(var _i134=0;_i134<inputsLength;_i134++){var input=inputs[_i134];var inputValue=orderData&&orderData[input.name]?orderData[input.name]:ccUrlParams.has(input.name)?ccUrlParams.get(input.name):ccIdMeDetails[input.name]||"";if(inputValue){var formInputs=document.getElementsByName(input.name);var formInputsLength=formInputs.length;for(var j=0;j<formInputsLength;j++){var formInput=formInputs[j];if(formInput.type==="checkbox"){if(inputValue==="on"||inputValue===true||inputValue==="true"||inputValue==="1"||inputValue===1)formInput.checked=true;else formInput.checked=false}else if(formInput.type==="radio"){if(formInput.value===inputValue)formInput.checked=true}else formInput.value=inputValue}}else if(input.name==="product"&&(input.type==="checkbox"||input.type==="radio")){var changeProductItem=pageData.pageTypeId===13&&sessionStorage.getItem("currentItem")?sessionStorage.getItem("currentItem"):null;var quantity=input.getAttribute("quantity");if(fkCart[input.value]&&(!quantity||fkCart[input.value]==quantity)||changeProductItem&&(changeProductItem===input.value||input.getAttribute("variantvalue")&&changeProductItem==input.value+"."+input.getAttribute("variantvalue")||!input.getAttribute("variantvalue")&&changeProductItem.includes(input.value+"."))){input.checked=true;updatePriceTotals=true;var prodSection=$(input).closest("section.fk-product-section");if(prodSection&&prodSection.length&&changeProductItem){var button=prodSection[0].querySelectorAll("button");button&&button.length&&button[0].click()}}}else if(input.name==="fullName"){var firstName=orderData&&orderData["firstName"]?orderData["firstName"]:ccUrlParams.has("firstName")?ccUrlParams.get("firstName"):ccIdMeDetails["firstName"]||"";if(firstName){var lastName=orderData&&orderData["lastName"]?orderData["lastName"]:ccUrlParams.has("lastName")?ccUrlParams.get("lastName"):ccIdMeDetails["lastName"]||"";var _formInputs=document.getElementsByName(input.name);var _formInputsLength=_formInputs.length;for(var _j7=0;_j7<_formInputsLength;_j7++){_formInputs[_j7].value=firstName+" "+lastName}}}else if(input.name==="shipFullName"){var shipFirstName=orderData&&orderData["shipFirstName"]?orderData["shipFirstName"]:ccUrlParams.has("shipFirstName")?ccUrlParams.get("shipFirstName"):ccIdMeDetails["shipFirstName"]||"";if(shipFirstName){var shipLastName=orderData&&orderData["shipLastName"]?orderData["shipLastName"]:ccUrlParams.has("shipLastName")?ccUrlParams.get("shipLastName"):ccIdMeDetails["shipLastName"]||"";var _formInputs2=document.getElementsByName(input.name);var _formInputsLength2=_formInputs2.length;for(var _j8=0;_j8<_formInputsLength2;_j8++){_formInputs2[_j8].value=shipFirstName+" "+shipLastName}}}}autoUpdateNameOnCardInput();if(updatePriceTotals)displayPrices()}function ccSetCountryAndStateValues(countryInput,countryValue,stateInput,stateValue){if(countryInput){if(countryInput.value!=countryValue){countryInput.value=countryValue;var event=new Event("change");countryInput.dispatchEvent(event);var stateInputName=stateInput&&stateInput.getAttribute("name");stateInputName&&loadStates(stateInputName,countryValue)}if(stateInput&&stateValue){stateInput.value=$(stateInput).find("option[value="+stateValue+"]").val()||$(stateInput).find("option").first().val()||"";var event=new Event("change");stateInput.dispatchEvent(event)}}}$("[name=country], [name=shipCountry], [name=state], [name=shipState]").on("change",function(){var sessionInfo=sessionStorage.getItem("ccCountryAndStateInfoTracker");sessionInfo=sessionInfo?JSON.parse(sessionInfo):{};var selectElement=$(this),name=selectElement.attr("name"),value=selectElement.val();sessionInfo[name]=value;switch(name){case"country":sessionInfo["state"]="";break;case"shipCountry":sessionInfo["shipState"]="";break}sessionStorage.setItem("ccCountryAndStateInfoTracker",JSON.stringify(sessionInfo));window.ccTriggerSocialProofOnCountryChange&&ccTriggerSocialProofOnCountryChange(name,value)});//load state/country from IP address
function setGeoFromIP(){return _setGeoFromIP.apply(this,arguments)}//return currency from sessionStorage if present
function _setGeoFromIP(){_setGeoFromIP=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee47(){var address1,shipAddress1,country,state,shipCountry,shipState,ip,currencyElements,currencyCodeValue,pageDataCurrency,pageDataCurrencies,currency,countryCode,regionCode,sessionAddressInfo,_ccUrlParams2,orderData,isUniqueCheckoutId,customerOrders,customerOrderData,selectedCampaignCountry;return _regeneratorRuntime().wrap(function _callee47$(_context52){while(1)switch(_context52.prev=_context52.next){case 0:address1=document.getElementsByName("address1")[0]?document.getElementsByName("address1")[0].value:null;shipAddress1=document.getElementsByName("shipAddress1")[0]?document.getElementsByName("shipAddress1")[0].value:null;country=document.getElementsByName("country")[0];state=document.getElementsByName("state")[0];shipCountry=document.getElementsByName("shipCountry")[0];shipState=document.getElementsByName("shipState")[0];ip=null;currencyElements=document.getElementsByName("currency")[0]?document.getElementsByName("currency")[0]:null;currencyCodeValue=returnCurrencyCode();pageDataCurrency=pageData.selectedCampaign.currency;pageDataCurrencies=pageData.selectedCampaign.currencies;currency=pageData.cartData&&pageData.cartData.currency;if(currency){if(!fetchCurrentCurrencyObj(currency)){if(pageDataCurrencies&&pageDataCurrencies.length){pageData.selectedCampaign.currencies.push({currencySymbol:currency,currencyCode:currency})}else{pageData.selectedCampaign.currencies=[{currencySymbol:currency,currencyCode:currency}]}pageDataCurrencies=pageData.selectedCampaign.currencies}currencyCodeValue=currency}if(!(!address1&&!shipAddress1&&(country||shipCountry))){_context52.next=19;break}_context52.next=16;return getIpPhysicalAddress();case 16:ip=_context52.sent;countryCode=ip&&ip.country_code;if(countryCode){if(pageData.selectedCampaign.countries.find(function(data){return data.countryCode==countryCode})){regionCode=ip.region_code;sessionAddressInfo=sessionStorage.getItem("ccCountryAndStateInfoTracker");sessionAddressInfo=sessionAddressInfo?JSON.parse(sessionAddressInfo):{};_ccUrlParams2=new URLSearchParams(getCurrentWindowLocation().search);countryCode=_ccUrlParams2&&_ccUrlParams2.has("country")?_ccUrlParams2.get("country"):sessionAddressInfo["country"]||countryCode;regionCode=_ccUrlParams2&&_ccUrlParams2.has("state")?_ccUrlParams2.get("state"):sessionAddressInfo["state"]||regionCode;ccSetCountryAndStateValues(country,countryCode,state,regionCode);countryCode=_ccUrlParams2&&_ccUrlParams2.has("shipCountry")?_ccUrlParams2.get("shipCountry"):sessionAddressInfo["shipCountry"]||ip.country_code;regionCode=_ccUrlParams2&&_ccUrlParams2.has("shipState")?_ccUrlParams2.get("shipState"):sessionAddressInfo["shipState"]||ip.region_code;ccSetCountryAndStateValues(shipCountry,countryCode,shipState,regionCode)}}case 19:orderData=sessionStorage.getItem("orderData");orderData=orderData?JSON.parse(orderData):{};if(!(orderData&&orderData.country)){_context52.next=25;break}defaultCountryCode=orderData.country;_context52.next=35;break;case 25:defaultCountryCode=pageData.selectedCampaign.countries.length&&!pageData.selectedCampaign.states["US"]?pageData.selectedCampaign.countries[0].countryCode:"US";if(ip){_context52.next=32;break}_context52.next=29;return getIpPhysicalAddress();case 29:_context52.t0=_context52.sent;_context52.next=33;break;case 32:_context52.t0=ip;case 33:ip=_context52.t0;if(ip&&ip.country_code&&pageData.selectedCampaign.countries.find(function(obj){return obj.countryCode===ip.country_code})){defaultCountryCode=ip.country_code;vatTaxRate=getTaxRate().vatTaxRate}case 35:window.ccTriggerSocialProofOnGeoData&&ccTriggerSocialProofOnGeoData(country,shipCountry,ip,defaultCountryCode);isUniqueCheckoutId=sessionStorage.getItem("isUniqueCheckoutId");if(cookieData["access_token"]||isUniqueCheckoutId){customerOrders=sessionStorage.getItem("customerOrders");customerOrders=customerOrders?JSON.parse(customerOrders):[];customerOrderData=customerOrders[0]||{};ccSetCountryAndStateValues(country,customerOrderData.country,state,customerOrderData.state);ccSetCountryAndStateValues(shipCountry,customerOrderData.shipCountry,shipState,customerOrderData.shipState)}if(!(pageDataCurrencies&&pageDataCurrencies.length)){_context52.next=50;break}loadStaticCurrencyValues();if(currencyCodeValue){_context52.next=48;break}sessionStorage.setItem("currencyCode",pageDataCurrency);if(ip){_context52.next=46;break}_context52.next=45;return getIpPhysicalAddress();case 45:ip=_context52.sent;case 46:if(ip&&ip.country_code){selectedCampaignCountry=pageData.selectedCampaign.countries.find(function(obj){return obj.countryCode===ip.country_code});if(selectedCampaignCountry&&pageDataCurrencies.find(function(obj){return obj.currencyCode===selectedCampaignCountry.currencyCode})){sessionStorage.setItem("currencyCode",selectedCampaignCountry.currencyCode)}}currencyCodeValue=returnCurrencyCode();case 48:if(currencyElements){$(currencyElements).find("option").remove().end().append("<option value="+pageDataCurrency+">"+pageDataCurrency+"</option>").attr("selected","selected");$(pageDataCurrencies).each(function(){var currencyObj=this;currencyObj.currencyCode!==pageDataCurrency&&$(currencyElements).append($("<option></option>").attr("value",currencyObj.currencyCode).text(currencyObj.currencyCode))});$(currencyElements).find("option[value=\""+currencyCodeValue+"\"]").attr("selected","selected");currency&&$(currencyElements).attr("disabled",currency!==pageData.selectedCampaign.currency)}setPriceAndCurrency(currencyCodeValue);case 50:case"end":return _context52.stop()}},_callee47)}));return _setGeoFromIP.apply(this,arguments)}function returnCurrencyCode(){return sessionStorage.getItem("currencyCode")?sessionStorage.getItem("currencyCode"):null}//Fire pixels returned from Import Click (importClick or useSession function)
function firePixel(pixelHtml){var pixelDiv=document.createElement("DIV");pixelDiv.innerHTML=pixelHtml;document.body.appendChild(pixelDiv)}//CRM-4650
function fireSiftPixel(beaconKey){var _sift=window._sift=window._sift||[];_sift.push(["_setAccount",beaconKey]);_sift.push(["_setUserId",""]);_sift.push(["_setSessionId",sessionStorage.getItem("sessionId")]);_sift.push(["_trackPageview"]);(function(){var ta=document.createElement("script");ta.type="text/javascript";ta.async=true;ta.src="https://cdn.sift.com/s.js";document.body.appendChild(ta)})()}function getQuantity(){var qty=1;var qtyInput=document.getElementsByName("quantity")[0];if(qtyInput){qty=parseInt(qtyInput.value)||1;qty=qty>0?qty:1}return qty}function setShoppingCartSpinner(){var dynamicCartRow=document.querySelector("tr[id='fk-dynamic-cart-row']");if(dynamicCartRow){$(dynamicCartRow).find("button").attr("disabled",false);$(dynamicCartRow).find("a").css("pointer-events","auto");cellFormat=Array.prototype.slice.call(dynamicCartRow.cells);if(cellFormat.length>0){dynamicCartRow.innerHTML="<td colspan=4>"+getSpinnerDiv().outerHTML+"</td>";dynamicCartRow.style.display="contents"}}}function findAddOn(addOnKey){var addons=pageData&&pageData.funnelData&&pageData.funnelData.addOns||funnelJson&&funnelJson.funnelData&&funnelJson.funnelData.addOns;if(addons){return addons.find(function(addOns){return addOns.keyName===addOnKey})}else{return null}}function getAddOnKeyValue(addOn){return addOn?addOn.keyValue:""}function generateDisplayItems(shipping,tax,discount,displayItemObj){var cartLabelValues=["Shipping","Sales Tax","Discount"];var cartValues=[shipping,tax,discount];var cartLength=cartValues.length;for(var _i135=0;_i135<cartLength;_i135++){var displayItemObject={};if(cartValues[_i135]){displayItemObject.label=cartLabelValues[_i135];displayItemObject.type="LINE_ITEM";displayItemObject.price=cartLabelValues[_i135]==="Discount"?"-"+cartValues[_i135]:cartValues[_i135].toString();displayItemObj.lineItems.push(displayItemObject)}}}function addOverlayEffectScripts(){try{if(document.getElementById("overlayEffectDiv")){return}$("head").append(overlayStyles);$("body").append(overlayHTML)}catch(err){console.log("Error: Unable to add overlay scripts")}}function hideOverlayEffect(){try{document.getElementById("overlayEffectDiv").style.display="none"}catch(err){console.log("Error: Unable to hide overlay effect")}}function showOverlayEffect(){try{document.getElementById("overlayEffectDiv").style.display="block"}catch(err){console.log("Error: Unable to show overlay effect")}}function configureAmazonPay(){var amazonBillerId=getAddOnKeyValue(findAddOn("amazonBillerId"));var amazonClientId=getAddOnKeyValue(findAddOn("amazonClientId"));var amazonSellerId=getAddOnKeyValue(findAddOn("amazonSellerId"));var amazonAccessKey=getAddOnKeyValue(findAddOn("amazonAccessKey"));var amazonRecurring=getAddOnKeyValue(findAddOn("amazonRecurring"));if(!amazonBillerId||!amazonClientId||!amazonSellerId||!amazonAccessKey)return;sessionStorage.setItem("amazonBillerId",amazonBillerId);var useAmazonSandbox=document.URL.includes("dev-funnels");window.onAmazonLoginReady=function(){amazon.Login.setClientId(amazonClientId)};window.onAmazonPaymentsReady=function(){//get parameters from the URL query string
var ccUrlParams=new URLSearchParams(getCurrentWindowLocation().search);if(ccUrlParams.has("access_token")){var amazonAccessToken=ccUrlParams.get("access_token");sessionStorage.setItem("amazonAccessToken",amazonAccessToken);addAmazonAddressBook();addAmazonWallet();//get Amazon profile details: username, email address, userID
var profileResponse;var amazonProfileUrl=useAmazonSandbox?"https://api.sandbox.amazon.com/user/profile":"https://api.amazon.com/user/profile";$.ajax({async:false,type:"GET",// cors: true,
headers:{"Authorization":"bearer "+amazonAccessToken},url:amazonProfileUrl,success:function success(result){profileResponse=result},error:function error(xhr){return xhr.status}});sessionStorage.setItem("amazonEmail",profileResponse.email);sessionStorage.setItem("amazonName",profileResponse.name);sessionStorage.setItem("amazonUserId",profileResponse.user_id)}else{addAmazonButton()}};var amazonScriptUrl=useAmazonSandbox?"https://static-na.payments-amazon.com/OffAmazonPayments/us/sandbox/js/Widgets.js":"https://static-na.payments-amazon.com/OffAmazonPayments/us/js/Widgets.js";loadScript(amazonScriptUrl);function addAmazonButton(){document.querySelectorAll(".btnAmazonGold, .btnAmazonLight, .btnAmazonDark").forEach(function(amazonButton){var buttonColor=amazonButton.className.includes("btnAmazonGold")?"Gold":amazonButton.className.includes("btnAmazonLight")?"LightGray":"DarkGray";var divId=amazonButton.id;var amazonButtonDiv=document.createElement("div");var datasetId=amazonButton.dataset.id;amazonButtonDiv.className=amazonButton.className;amazonButtonDiv.dataset.id=datasetId;amazonButtonDiv.title=amazonButton.title;amazonButtonDiv.attributes=amazonButton.attributes;amazonButtonDiv.style.backgroundImage="none";amazonButtonDiv.style.padding="0px";amazonButton.insertAdjacentElement("beforebegin",amazonButtonDiv);amazonButton.remove();amazonButtonDiv.id=divId;var authRequest;OffAmazonPayments.Button(divId,amazonSellerId,{type:"PwA",color:buttonColor,size:"x-large",authorization:function authorization(){loginOptions={scope:"profile payments:widget payments:shipping_address",popup:"true"};authRequest=amazon.Login.authorize(loginOptions,getCurrentWindowLocation().href)},onError:function onError(error){alert("Amazon Error: "+error.getErrorCode()+" - "+error.getErrorMessage())}});var amazonBtnImgTag=amazonButtonDiv.querySelectorAll("img")[0];amazonBtnImgTag?$(amazonBtnImgTag).css({"max-height":"fit-content","height":"auto","width":"100%"}):null})}function addAmazonAddressBook(){var addressBookDiv=document.createElement("div");addressBookDiv.id="amazonAddressBookDiv";addressBookDiv.style.width="500px";addressBookDiv.style.height="400px";var amazonBtn=document.querySelectorAll(".btnAmazonGold, .btnAmazonLight, .btnAmazonDark")[0];amazonBtn.insertAdjacentElement("beforebegin",addressBookDiv);if(amazonRecurring){sessionStorage.setItem("amazonRebillEnabled",1);new OffAmazonPayments.Widgets.AddressBook({sellerId:amazonSellerId,agreementType:"BillingAgreement",onReady:function onReady(billingAgreement){var amazonOrderId=billingAgreement.getAmazonBillingAgreementId();sessionStorage.setItem("paySource","AMAZON");sessionStorage.setItem("amazonOrderId",amazonOrderId);addConsentWidget(amazonOrderId)},design:{designMode:"responsive"},onError:function onError(error){alert("Amazon Error: "+error.getErrorCode()+" - "+error.getErrorMessage())}}).bind("amazonAddressBookDiv")}else{new OffAmazonPayments.Widgets.AddressBook({sellerId:amazonSellerId,onOrderReferenceCreate:function onOrderReferenceCreate(orderReference){var amazonOrderId=orderReference.getAmazonOrderReferenceId();sessionStorage.setItem("paySource","AMAZON");sessionStorage.setItem("amazonOrderId",amazonOrderId)},design:{designMode:"responsive"},onError:function onError(error){alert("Amazon Error: "+error.getErrorCode()+" - "+error.getErrorMessage())}}).bind("amazonAddressBookDiv")}}function addAmazonWallet(){var walletDiv=document.createElement("div");walletDiv.id="amazonWalletDiv";walletDiv.style.width="500px";walletDiv.style.height="400px";var amazonBtn=document.querySelectorAll(".btnAmazonGold, .btnAmazonLight, .btnAmazonDark")[0];amazonBtn.insertAdjacentElement("beforebegin",walletDiv);new OffAmazonPayments.Widgets.Wallet({sellerId:amazonSellerId,design:{designMode:"responsive"},onError:function onError(error){alert("Amazon Error: "+error.getErrorCode()+" - "+error.getErrorMessage())}}).bind("amazonWalletDiv")}function addConsentWidget(amazonBillingAgreementId){var consentDiv=document.createElement("div");consentDiv.id="amazonConsentDiv";consentDiv.style.width="500px";consentDiv.style.height="400px";var amazonBtn=document.querySelectorAll(".btnAmazonGold, .btnAmazonLight, .btnAmazonDark")[0];amazonBtn.insertAdjacentElement("beforebegin",consentDiv);new OffAmazonPayments.Widgets.Consent({sellerId:amazonSellerId,amazonBillingAgreementId:amazonBillingAgreementId,design:{designMode:"responsive"},onConsent:function onConsent(billingAgreementConsentStatus){var consentStatus=billingAgreementConsentStatus.getConsentStatus();if(consentStatus)sessionStorage.setItem("amazonConsentReceived",1);else sessionStorage.removeItem("amazonConsentReceived")},onError:function onError(error){alert("Amazon Error: "+error.getErrorCode()+" - "+error.getErrorMessage())}}).bind("amazonConsentDiv")}}function configureSquare(){var squareLabels=document.querySelectorAll(".squareCheckoutLabel");var squareAppId=getAddOnKeyValue(findAddOn("squareApplicationId"));var squareLocationId=getAddOnKeyValue(findAddOn("squareLocationId"));if(!squareLabels[0]||!squareAppId||!squareLocationId)return;var squareForm="<form id=\"payment-form\"><div id=\"square-card-container\"></div><input type=\"button\" value=\"\" id=\"square-card-button\" class=\"d-none\"></form><input type=\"hidden\" id=\"formCardNonce\" name=\"formCardNonce\" value=\"\" />";squareLabels[0].insertAdjacentHTML("beforebegin",squareForm);squareLabels[0].style.display="none";var squareUrl=document.URL.includes("dev-funnels")?"https://sandbox.web.squarecdn.com/v1/square.js":"https://web.squarecdn.com/v1/square.js";loadScript(squareUrl,initSquare)}function initSquare(){return _initSquare.apply(this,arguments)}function _initSquare(){_initSquare=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee52(){var squareAppId,squareLocationId,squareInitializeCard,_squareInitializeCard,squareTokenize,_squareTokenize,squarePayments,squareCard,handleSquarePaymentToken,_handleSquarePaymentToken,squareCardButton,handleSquareSuccess,handleSquareError;return _regeneratorRuntime().wrap(function _callee52$(_context57){while(1)switch(_context57.prev=_context57.next){case 0:handleSquareError=function _handleSquareError(error){alert(error);enableInteractions()};handleSquareSuccess=function _handleSquareSuccess(token){var nonce=document.getElementById("formCardNonce");if(nonce)nonce.value=token;var squareSubmitBtnId=localStorage.getItem("squareSubmitBtnId");callMethodApply(squareSubmitBtnId)};_handleSquarePaymentToken=function _handleSquarePaymentT2(){_handleSquarePaymentToken=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee51(event,paymentMethod){var nonce,_token2;return _regeneratorRuntime().wrap(function _callee51$(_context56){while(1)switch(_context56.prev=_context56.next){case 0:event.preventDefault();nonce=document.getElementById("formCardNonce");if(!(nonce&&nonce.value!="")){_context56.next=6;break}handleSquareSuccess(nonce.value);_context56.next=16;break;case 6:_context56.prev=6;_context56.next=9;return squareTokenize(paymentMethod);case 9:_token2=_context56.sent;handleSquareSuccess(_token2);_context56.next=16;break;case 13:_context56.prev=13;_context56.t0=_context56["catch"](6);handleSquareError(_context56.t0.message);case 16:case"end":return _context56.stop()}},_callee51,null,[[6,13]])}));return _handleSquarePaymentToken.apply(this,arguments)};handleSquarePaymentToken=function _handleSquarePaymentT(_x74,_x75){return _handleSquarePaymentToken.apply(this,arguments)};_squareTokenize=function _squareTokenize3(){_squareTokenize=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee50(paymentMethod){var tokenResult,errorMessage;return _regeneratorRuntime().wrap(function _callee50$(_context55){while(1)switch(_context55.prev=_context55.next){case 0:_context55.next=2;return paymentMethod.tokenize();case 2:tokenResult=_context55.sent;if(!(tokenResult.status==="OK")){_context55.next=7;break}return _context55.abrupt("return",tokenResult.token);case 7:errorMessage="Tokenization failed with status:"+tokenResult.status;if(tokenResult.errors&&tokenResult.errors[0]&&tokenResult.errors[0].message)errorMessage+=" and error: "+tokenResult.errors[0].message;throw new Error(errorMessage);case 10:case"end":return _context55.stop()}},_callee50)}));return _squareTokenize.apply(this,arguments)};squareTokenize=function _squareTokenize2(_x73){return _squareTokenize.apply(this,arguments)};_squareInitializeCard=function _squareInitializeCard3(){_squareInitializeCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee49(payments){var card;return _regeneratorRuntime().wrap(function _callee49$(_context54){while(1)switch(_context54.prev=_context54.next){case 0:_context54.next=2;return payments.card();case 2:card=_context54.sent;_context54.next=5;return card.attach("#square-card-container");case 5:return _context54.abrupt("return",card);case 6:case"end":return _context54.stop()}},_callee49)}));return _squareInitializeCard.apply(this,arguments)};squareInitializeCard=function _squareInitializeCard2(_x72){return _squareInitializeCard.apply(this,arguments)};if(window.Square){_context57.next=11;break}handleSquareError("Square.js failed to load properly");return _context57.abrupt("return");case 11:squareAppId=getAddOnKeyValue(findAddOn("squareApplicationId"));squareLocationId=getAddOnKeyValue(findAddOn("squareLocationId"));_context57.prev=13;squarePayments=window.Square.payments(squareAppId,squareLocationId);_context57.next=21;break;case 17:_context57.prev=17;_context57.t0=_context57["catch"](13);handleSquareError("applicationId and/or locationId is incorrect");return _context57.abrupt("return");case 21:_context57.prev=21;_context57.next=24;return squareInitializeCard(squarePayments);case 24:squareCard=_context57.sent;_context57.next=31;break;case 27:_context57.prev=27;_context57.t1=_context57["catch"](21);handleSquareError("Initializing Card failed. Reason: "+_context57.t1.message);return _context57.abrupt("return");case 31:squareCardButton=document.getElementById("square-card-button");squareCardButton.addEventListener("click",/*#__PURE__*/function(){var _ref108=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee48(event){var squareSubmitBtnId;return _regeneratorRuntime().wrap(function _callee48$(_context53){while(1)switch(_context53.prev=_context53.next){case 0:squareSubmitBtnId=localStorage.getItem("squareSubmitBtnId");disableInteractions(squareSubmitBtnId,true,false);_context53.next=4;return handleSquarePaymentToken(event,squareCard);case 4:case"end":return _context53.stop()}},_callee48)}));return function(_x76){return _ref108.apply(this,arguments)}}());case 33:case"end":return _context57.stop()}},_callee52,null,[[13,17],[21,27]])}));return _initSquare.apply(this,arguments)}function configureLoyaltyLion(){var loyaltyLionPluginId=getAddOnKeyValue(findAddOn("loyaltyLionPluginId"));var loyaltyLionToken=getAddOnKeyValue(findAddOn("loyaltyLionToken"));if(!loyaltyLionPluginId||!loyaltyLionToken)return;!function(t,n){function o(n){var o=t.getElementsByTagName("script")[0],i=t.createElement("script");i.src=n,i.crossOrigin="",o.parentNode.insertBefore(i,o)}if(!n.isLoyaltyLion){window.loyaltylion=n,void 0===window.lion&&(window.lion=n),n.version=2,n.isLoyaltyLion=!0;var i=new Date,e=i.getFullYear().toString()+i.getMonth().toString()+i.getDate().toString();o("https://sdk.loyaltylion.net/static/2/loader.js?t="+e);var r=!1;n.init=function(t){if(r)throw new Error("Cannot call loyaltylion.init more than once");r=!0;var a=n._token=t.token;if(!a)throw new Error("Token must be supplied to loyaltylion.init");for(var l=[],s="_push configure bootstrap shutdown on removeListener authenticateCustomer".split(" "),c=0;c<s.length;c+=1)!function(t,n){t[n]=function(){l.push([n,Array.prototype.slice.call(arguments,0)])}}(n,s[c]);o("https://sdk.loyaltylion.net/sdk/start/"+a+".js?t="+e+i.getHours().toString()),n._initData=t,n._buffer=l}}}(document,window.loyaltylion||[]);var membership=null;var loginCustomer=null;var loyaltyLionAuthToken=sessionStorage.getItem("loyaltyLionAuthToken")?sessionStorage.getItem("loyaltyLionAuthToken"):null;membership=sessionStorage.getItem("membership")?JSON.parse(sessionStorage.getItem("membership")):null;loginCustomer=sessionStorage.getItem("loginCustomer")?JSON.parse(sessionStorage.getItem("loginCustomer")):null;if(loyaltyLionAuthToken&&(membership||loginCustomer)){var customerId=membership?membership.customerId:loginCustomer.customerId;var customerEmail=membership?membership.emailAddress:loginCustomer.emailAddress;var tokenData=loyaltyLionAuthToken.split("||");loyaltylion.init({token:loyaltyLionToken,customer:{id:customerId,email:customerEmail},auth:{date:tokenData[1],token:tokenData[0]}})}else{loyaltylion.init({token:loyaltyLionToken})}loyaltylion.on("ready",function(){loyaltylion.registerHook("customers.rewards.claimed",/*#__PURE__*/function(){var _ref33=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(_ref32){var claimedReward,obj,data,_response3,returnAction;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1)switch(_context9.prev=_context9.next){case 0:claimedReward=_ref32.claimedReward;if(claimedReward.redeemable.code){obj={};obj.campaignId=parseInt(pageData.funnelData.campaign);obj.rewardsPluginId=loyaltyLionPluginId;obj.reward=JSON.stringify(claimedReward);data=JSON.stringify(obj);_response3=httpMethod("".concat(providerUrl,"/Import/Coupon"),data).then(function(data){if(data.result==="SUCCESS"){if(pageData.pageTypeId===4){appliedCouponCode.push(claimedReward.redeemable.code);displayPrices()}}})}returnAction=pageData.pageTypeId===4?"hide_claim_modal":"show_claim_modal";return _context9.abrupt("return",{action:returnAction});case 4:case"end":return _context9.stop()}},_callee9)}));return function(_x61){return _ref33.apply(this,arguments)}}())})}function ccAddReachBadge(html){if(!html)return;var filterGenericBtnAndLink=$("button[action=submit], a[action=submit]").filter(function(){var submitBtnCls=$(this).attr("class")||"";var submitBtnClsArr=submitBtnCls.split(" ");return!btnClasses.some(function(item){return submitBtnClsArr.includes(item)})});if(filterGenericBtnAndLink.length){filterGenericBtnAndLink.each(function(i,btn){var tempElement=document.createElement("div");tempElement.innerHTML=html;var divEle=tempElement.querySelector("div");if(reachTheme==="dark"){divEle.style.backgroundColor="#424242";divEle.style.color="#aaa9ad"}btn.insertAdjacentElement("beforebegin",divEle)})}}function configureReachBadge(_x62){return _configureReachBadge.apply(this,arguments)}function _configureReachBadge(){_configureReachBadge=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee53(digitalGoods){var isCardInput,reachBadgeElements,termsUrl,locale,reachSandbox,reachProduction,reachUrl,reachResponse,reachJson;return _regeneratorRuntime().wrap(function _callee53$(_context58){while(1)switch(_context58.prev=_context58.next){case 0:isCardInput=document.getElementsByName("cardNumber").length;if(!(isCardInput&&reachMerchantId)){_context58.next=33;break}reachBadgeElements=$(".reach--disclosure .reach--inline-link"),termsUrl=function termsUrl(digital){return"https://www.withreach.com/".concat(digital?"digital-":"","terms-of-service")};if(!reachBadgeElements.length){_context58.next=6;break}reachBadgeElements.attr("href",termsUrl(digitalGoods));return _context58.abrupt("return");case 6:locale=(reachLocale||"").trim().toLowerCase();if(!(!locale||locale.startsWith("en-")||locale==="en")){_context58.next=10;break}ccAddReachBadge(ccReachBadgeHtml(termsUrl(digitalGoods),reachTheme));return _context58.abrupt("return");case 10:if(window.ccReachBadgeCallInit){_context58.next=33;break}window.ccReachBadgeCallInit=true;$("head").append(reachBadgeStyles);reachSandbox="https://checkout.rch.how/v2.22/badge?MerchantId=";reachProduction="https://checkout.rch.io/v2.22/badge?MerchantId=";reachUrl=document.URL.includes("dev-funnels")?reachSandbox:reachProduction;_context58.prev=16;_context58.next=19;return fetch(reachUrl+reachMerchantId+"&Theme="+reachTheme+"&Locale="+reachLocale);case 19:reachResponse=_context58.sent;if(!reachResponse.ok){_context58.next=26;break}_context58.next=23;return reachResponse.json();case 23:reachJson=_context58.sent;ccAddReachBadge(reachJson&&reachJson.Html);$(".reach--disclosure .reach--inline-link").attr("href",termsUrl(window.ccShippableOrder!==undefined?window.ccShippableOrder:false));case 26:_context58.next=33;break;case 28:_context58.prev=28;_context58.t0=_context58["catch"](16);console.log(_context58.t0);$("style[ccreachstyles=true]").remove();window.ccReachBadgeCallInit=null;case 33:case"end":return _context58.stop()}},_callee53,null,[[16,28]])}));return _configureReachBadge.apply(this,arguments)}function ccGetElementId(name){if(!name)return;var element=$("[name='"+name+"']");var id=element.length?element.attr("id")||element.attr("id","ccOE"+name)&&element.attr("id"):"";return id?"#"+id:id}function ccErrorResponse(proceed,errorMessage,errorTitle,data){return{proceed:proceed,errorMessage:errorMessage,errorTitle:errorTitle,data:data}}function ccOpenPathLoadSuccess(){var checkoutBtn=$(".cc-open-path-checkout");if(!checkoutBtn.length){console.warn("OpenPath routing button not configured");return}var checkoutBtnDataId=checkoutBtn.first().attr("data-id");var defualBillShipSameValue=false;if($("[name='checkbox'][name='billShipSame'], [name='radio'][name='billShipSame'].cc-same-as-shipping").first().length){defualBillShipSameValue=$("[name='checkbox'][name='billShipSame'], [name='radio'][name='billShipSame'].cc-same-as-shipping").first().prop("checked")?true:false}else if(document.getElementsByName("address1")[0]&&!document.getElementsByName("shipAddress1")[0]){defualBillShipSameValue=true}$("[name='shipCountry']").on("change",function(){!$(this).val()&&$(this).val(defaultCountryCode||"US")});var widget=new openElements(ccOpenPathUser,{enableECheck:false,paymentType:"SALE",shipping:{"country":"US"},sameShippingToBillingAddress:defualBillShipSameValue});widget.attach({payment:"open-elements-form",process:"open-elements-button",shippingAddress:"open-elements-shipping",billingAddress:"open-elements-billing",terms:"open-elements-terms",notification:"open-elements-notification-div"});var connectionObj={},shippingObj={},billingObj={};if($("[name='emailAddress']").length)connectionObj["email"]=ccGetElementId("emailAddress");if($("[name='phoneNumber']").length)connectionObj["phone"]=ccGetElementId("phoneNumber");if($("[type='checkbox'][name='billShipSame']").length){connectionObj["sameShippingToBillingAddress"]=ccGetElementId("billShipSame")}else if($("[type='radio'][name='billShipSame'].cc-same-as-shipping").length){var id=$("[type='radio'][name='billShipSame'].cc-same-as-shipping").attr("id");if(!id){id="ccOE"+"radioBillShipSame";$("[type='radio'][name='billShipSame'].cc-same-as-shipping").attr("id",id)}connectionObj["sameShippingToBillingAddress"]="#"+id}if($("[name='shipAddress1']").length)shippingObj["address1"]=ccGetElementId("shipAddress1");if($("[name='shipAddress2']").length)shippingObj["address2"]=ccGetElementId("shipAddress2");if($("[name='shipCity']").length)shippingObj["city"]=ccGetElementId("shipCity");if($("[name='shipState']").length)shippingObj["state"]=ccGetElementId("shipState");if($("[name='shipPostalCode']").length)shippingObj["postalCode"]=ccGetElementId("shipPostalCode");if($("[name='shipCountry']").length)shippingObj["country"]=ccGetElementId("shipCountry");if($("[name='shipFirstName']").length)shippingObj["firstname"]=ccGetElementId("shipFirstName");if($("[name='shipLastName']").length)shippingObj["lastname"]=ccGetElementId("shipLastName");if($("[name='address1']").length)billingObj["address1"]=ccGetElementId("address1");if($("[name='address2']").length)billingObj["address2"]=ccGetElementId("address2");if($("[name='city']").length)billingObj["city"]=ccGetElementId("city");if($("[name='state']").length)billingObj["state"]=ccGetElementId("state");if($("[name='postalCode']").length)billingObj["postalCode"]=ccGetElementId("postalCode");if($("[name='country']").length)billingObj["country"]=ccGetElementId("country");if($("[name='firstName']").length)billingObj["firstname"]=ccGetElementId("firstName");if($("[name='lastName']").length)billingObj["lastname"]=ccGetElementId("lastName");if(Object.keys(shippingObj).length)connectionObj["shipping"]=shippingObj;if(Object.keys(billingObj).length)connectionObj["billing"]=billingObj;$("[type='checkbox'][name='billShipSame']").on("change",function(){widget.setSameShippingToBillingAddress($(this).prop("checked"))});$("[type='radio'][name='billShipSame']").on("change",function(){widget.setSameShippingToBillingAddress($("[type='radio'][name='billShipSame'].cc-same-as-shipping").prop("checked"))});widget.connect(connectionObj);widget.beforeSend(/*#__PURE__*/function(){var _ref34=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(data){var callData,gatewaySdkParams;return _regeneratorRuntime().wrap(function _callee10$(_context10){while(1)switch(_context10.prev=_context10.next){case 0:_context10.prev=0;if(!(window.fflPopUpRequired&&fflPopUpRequired(checkoutBtnDataId))){_context10.next=5;break}window.updateFFLModalButtonCSS&&updateFFLModalButtonCSS(checkoutBtnDataId);showFFLPopUp();return _context10.abrupt("return",ccErrorResponse(false,"Select a FFL address","FFL",data));case 5:sessionStorage.setItem("paySource","OPENPATH_IPAY");_context10.next=8;return callMethodApply(checkoutBtnDataId);case 8:callData=_context10.sent;gatewaySdkParams=callData&&callData.result==="SUCCESS"&&callData.message&&callData.message.gatewaySdkParams;enableInteractions();if(!gatewaySdkParams){_context10.next=13;break}return _context10.abrupt("return",{proceed:true,data:_objectSpread(_objectSpread({},data),{},{currency:gatewaySdkParams.currency,orderId:gatewaySdkParams.orderId,order_id:gatewaySdkParams.orderId,total:parseFloat(gatewaySdkParams.total),total_amount:parseFloat(gatewaySdkParams.total),is_recurring:true})});case 13:sessionStorage.removeItem("paySource");return _context10.abrupt("return",ccErrorResponse(false,data&&data.message||"","Error",data));case 17:_context10.prev=17;_context10.t0=_context10["catch"](0);enableInteractions();sessionStorage.removeItem("paySource");return _context10.abrupt("return",ccErrorResponse(false,_context10.t0&&_context10.t0.message||"","Error",data));case 22:case"end":return _context10.stop()}},_callee10,null,[[0,17]])}));return function(_x63){return _ref34.apply(this,arguments)}}());widget.start().then(function(transactionData){sessionStorage.setItem("paySource","OPENPATH_IPAY");var openElementFormDetails=JSON.stringify(transactionData);callMethodApply(checkoutBtnDataId,null,openElementFormDetails)})["catch"](function(err){enableInteractions();sessionStorage.removeItem("paySource");console.log(err)})}function ccOpenPathLoadFailure(){ccShowBSAlert("Open Path script load failed","cc-open-path-alert",true,alertColorClass="alert-danger",boldText="Alert :")}function ccLoadOpenPathScript(){try{if(pageData&&pageData.pageTypeId===4&&ccOpenPathId&&ccOpenPathUser&&$("[name='emailAddress']").length&&$("[name='phoneNumber']").length){$(".cc-open-path-checkout").attr("onclick","");$(".cc-open-path-checkout").hide();$("head").append("<link rel=\"stylesheet\" href=\"https://elements.openpath.io/open-element.4.0.0.css\">");var openPathUrl="https://elements.openpath.io/open-element.4.0.0.js";loadScript(openPathUrl,ccOpenPathLoadSuccess,false,false,null,[{key:"async",value:true}],null,ccOpenPathLoadFailure)}}catch(err){console.log(err)}}function addValuesInExternalURL(route){try{if(route.includes("{")){var _orderData9=JSON.parse(sessionStorage.getItem("orderData"));if(_orderData9){["customerId"].forEach(function(value){if(_orderData9[value]){route=route.replace("{"+value+"}",_orderData9[value])}})}}}catch(er){}return route}function addOrderIdInExternalURL(route,orderId){if(orderId&&route&&!route.includes("orderId=")){route+=(route.includes("?")?"&":"?")+"orderId="+orderId.replace(/"/g,"")}return route}function handleMaskedInputChange(e){var name=e.target.getAttribute("name");switch(e.keyCode){// allows navigating thru input
case 20:// caplocks
case 17:// control
case 18:// option
case 16:// shift
case 37:// arrow keys
case 9:// tab (let blur handle tab)
return}var placeholder=e.target.getAttribute("placeholder");if(e.keyCode==8&&(e.target.value.length==2||e.target.value.length==3)&&placeholder.toUpperCase().substr(0,3)=="MM/"){document.getElementsByName(name)[0].value=e.target.value.substr(0,2)}else{document.getElementsByName(name)[0].value=handleCurrentValue(e)}}function handleCurrentValue(e){var placeholder=e.target.getAttribute("placeholder");if(e.target.getAttribute("name")==="phoneNumber"){var phoneNumberFormat=e.target.getAttribute("format");placeholder=phoneNumberFormat||placeholder}if(e.target.getAttribute("name")==="cardDate"){var cardDateSplit=placeholder.split("/");if(cardDateSplit&&cardDateSplit.length>1){placeholder=cardDateSplit[1].length===2?"MM/YY":"MM/YYYY"}else{placeholder="MMYY"}}var value=e.target.value,l=placeholder.length;var i,j,isInt,newValue="",isLetter,strippedValue;var maskedNumber="dDmMyY0123456789";// strip special characters
strippedValue=value.replace(integerRegex,"");var matchesNumber;for(i=0,j=0;i<l;i++){isInt=!isNaN(parseInt(strippedValue[j]));isLetter=strippedValue[j]?strippedValue[j].match(alphabetsRegex):false;matchesNumber=maskedNumber.indexOf(placeholder[i])>=0;if(matchesNumber&&isInt){newValue+=strippedValue[j++]}else if(matchesNumber&&!isInt){return newValue}else{newValue+=placeholder[i]}// break if no characters left and the pattern is non-special character
if(strippedValue[j]==undefined){break}}if(value==""){newValue=""}if(e.target.dataset.validDataExample){var retval=validateProgress(e,newValue);return retval}return newValue}function validateProgress(e,value){var validExample=e.target.dataset.validDataExample,pattern=new RegExp(e.target.dataset.pattern),placeholder=e.target.getAttribute("placeholder");var testValue="";//convert to months
if(value.length==1&&placeholder.toUpperCase().substr(0,2)=="MM"){if(value>1&&value<10){value="0"+value}return value}if(value.length==2&&placeholder.toUpperCase().substr(0,3)=="MM/"){return value+"/"}// test the value, removing the last character, until what you have is a submatch
for(i=value.length;i>=0;i--){testValue=value+validExample.substr(value.length);if(pattern.test(testValue)){return value}else{value=value.substr(0,value.length-1)}}return value}function hideInsureShipmentCheckbox(){// Hide checkbox from builder
var insureShipment=document.getElementsByName("insureShipment")[0];if(insureShipment){insureShipment.style.display="none";insureShipment.nextElementSibling.style.display="none"}}function facebookCustomerChat(){var facebookPageId=getAddOnKeyValue(findAddOn("FB_Page_Id"));var enableChatPlugin=getAddOnKeyValue(findAddOn("ENABLE_CHAT_PLUGIN"));if(facebookPageId&&enableChatPlugin==="1"){var fbRoot=document.createElement("div");fbRoot.id="fb-root";var chatbox=document.createElement("div");chatbox.id="fb-customer-chat";chatbox["class"]="fb-customerchat";fbRoot.appendChild(chatbox);$("body").append(fbRoot);chatbox=document.getElementById("fb-customer-chat");chatbox.setAttribute("class","fb-customerchat");chatbox.setAttribute("page_id",facebookPageId);chatbox.setAttribute("attribution","biz_inbox");window.fbAsyncInit=function(){FB.init({xfbml:true,version:"v10.0"})};(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk")}}function hideFBCheckboxPlugin(){// Hide checkbox from builder
document.getElementsByName("messenger")[0].style.display="none";document.getElementsByName("messenger")[0].nextElementSibling.style.display="none"}function configureFBMessengerCheckboxPlugin(){var fbCheckboxPlugin=document.getElementsByName("messenger")[0];var facebookAppId=getAddOnKeyValue(findAddOn("FB_App_Id"));var facebookPageId=getAddOnKeyValue(findAddOn("FB_Page_Id"));if(fbCheckboxPlugin&&facebookAppId&&facebookPageId){loadScript("https://connect.facebook.net/en_US/sdk.js");window.fbAsyncInit=function(){FB.init({appId:facebookAppId,autoLogAppEvents:true,xfbml:true,version:"v10.0"})};var input=document.createElement("input");input.type="hidden";input.id="fbMessengerCheckbox";document.forms[0].append(input);var div=document.createElement("div");div.setAttribute("class","fb-messenger-checkbox");div.setAttribute("origin",window.location.origin);div.setAttribute("page_id",facebookPageId);div.setAttribute("messenger_app_id",facebookAppId);div.setAttribute("user_ref",userRef);div.setAttribute("allow_login","true");div.setAttribute("size","small");div.setAttribute("skin","light");div.setAttribute("center_align","true");fbCheckboxPlugin.insertAdjacentElement("beforebegin",div);hideFBCheckboxPlugin()}else{var isBuildOrTemplate=checkBuildOrTemplate();!isBuildOrTemplate&&fbCheckboxPlugin&&hideFBCheckboxPlugin()}}function confirmOptIn(){return _confirmOptIn.apply(this,arguments)}function _confirmOptIn(){_confirmOptIn=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee54(){var facebookAppId,facebookPageId,fbCheckboxPlugin;return _regeneratorRuntime().wrap(function _callee54$(_context59){while(1)switch(_context59.prev=_context59.next){case 0:facebookAppId=getAddOnKeyValue(findAddOn("FB_App_Id"));facebookPageId=getAddOnKeyValue(findAddOn("FB_Page_Id"));fbCheckboxPlugin=document.getElementsByName("messenger")[0];if(!(fbCheckboxPlugin&&facebookAppId&&facebookPageId)){_context59.next=6;break}_context59.next=6;return FB.AppEvents.logEvent("MessengerCheckboxUserConfirmation",null,{"app_id":facebookAppId,"page_id":facebookPageId,"user_ref":userRef});case 6:case"end":return _context59.stop()}},_callee54)}));return _confirmOptIn.apply(this,arguments)}function handleCouponSplit(){var couponCodes=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";couponCodes=couponCodes.trim();return couponCodes!=""?couponCodes.split(","):[]}function setOrderDataForFinalizeTransaction(urlOrderData){sessionStorage.setItem("orderData",JSON.stringify(urlOrderData));sessionStorage.setItem("orderId",JSON.stringify(urlOrderData.orderId));window.history.replaceState(null,null,window.location.pathname);if(sessionStorage.getItem("multiPayRoute")&&sessionStorage.getItem("multiPayRebillProductId")){addOverlayEffectScripts();showOverlayEffect();processMultiPayRebill(urlOrderData)}}function ccUpdateProductPrices(){var items=pageData&&pageData.cartData&&pageData.cartData.items;items&&items.forEach(function(item){pageData.selectedCampaign.products.find(function(product){if(product.campaignProductId===item.campaignProductId){var _price6=parseFloat(item.unitPrice);if(item.variantId){product.variants&&product.variants.length&&product.variants.find(function(variant){if(variant.variantDetailId===item.variantId){variant.price=_price6;return true}})}else{product.cycle1_price=_price6;product.cycle2_price=_price6}return true}})})}function ccCallAddToCartEventForUrlProducts(){try{if(pageData&&pageData.pageTypeId!==4)return;var ccPageUrlProducts=sessionStorage.getItem("ccPageUrlProducts");ccPageUrlProducts=ccPageUrlProducts?JSON.parse(ccPageUrlProducts):{};if(Object.keys(ccPageUrlProducts).length){var _orderItems25=getOrderItemDetails();var cartProductMap={};for(var id in _orderItems25){var _product19=_orderItems25[id];cartProductMap[_product19.externalProductId]=id;cartProductMap[_product19.externalVariantDetailId]=id}var addToCartTriggerdUrlProducts=sessionStorage.getItem("ccAddToCartTriggerdUrlProducts");addToCartTriggerdUrlProducts=addToCartTriggerdUrlProducts?JSON.parse(addToCartTriggerdUrlProducts):{};for(var _id2 in ccPageUrlProducts){var _productId16=void 0;var _productData16=_id2.split(".");var urlProdId=_productData16[0];if(urlProdId!==null&&urlProdId!==void 0&&urlProdId.startsWith("EXT")){var extId=urlProdId.substring(3);if(cartProductMap[extId])_productId16=cartProductMap[extId]}else if(_orderItems25[_id2]){_productId16=_id2}if(_productId16&&!addToCartTriggerdUrlProducts[_productId16]){try{callAddToCartEvent(_productId16);addToCartTriggerdUrlProducts[_productId16]=1;sessionStorage.setItem("ccAddToCartTriggerdUrlProducts",JSON.stringify(addToCartTriggerdUrlProducts))}catch(err){err}}}}}catch(err){err}}function ccDisplayCartAfterProductLoad(){$(".cc-show-cart-on-product-load").removeClass("fk-display-none-on-load")}function swapCartProducts(){return _swapCartProducts.apply(this,arguments)}function _swapCartProducts(){_swapCartProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee55(){var _pageData13;var pageProducts,extVarDetailProduct,campaignId,pageElements,pageTypeId,merchantRedirectfkCart,merchantRedirectUpsalefkCart,cc3dsPageSubmitDetails,isFinalizeTransaction,urlOrderId,ccAlternatePaymentCurrencyCode,data,items,errorMessage,_orderId9,payload,_data7,sessionKeys,orderDataString,orderData,orderStatus,exchangeRate,sendingCurrencyTxn,sessionItemCpId,_productData21,globalRecommendations,orderItems,orderItemsLength,prevSuggestions,recommendationOption,recommendationValue,orderItemsIds,_i148,confirmOption,currentItem,currentItemProductId,pageProductIds,cartId,campaignFirstProduct,productHashMap,searchProducts,searchExternal,importedProducts,_params5,_response15,_data8,rebillCartCleanup,rebillCartExists,_loop47,_sessionItemCpId2,pageProductIdCollection,_params6,sessionCustomCart,customCartLength,extVar,_sessionItemCpId3,_productData23,itemKey,_product22,extVariantKey,extVariantId,newProductId,_i149,_cartKey,_itemKey2,_sessionItemCpId4,ckey,customCartData,_product23,_sessionItemCpId5,_productData24,_itemKey3,qty;return _regeneratorRuntime().wrap(function _callee55$(_context61){while(1)switch(_context61.prev=_context61.next){case 0:pageProducts=[];extVarDetailProduct=[];campaignId=pageData.selectedCampaign.campaignId;pageElements=document.querySelectorAll("button, a, input[type='radio'], input[type='checkbox'], .fk-product-section, select[name='productSelect']");pageElements.forEach(function(element){if(element.name==="productSelect"){var options=_toConsumableArray(element.childNodes);var productIds=[];options.forEach(function(opt){opt.value&&opt.value!==""&&pageProducts.push(opt.value)})}else if(!["shipProfileId"].includes(element.name)){var offer=element.getAttribute("offer"),upsell=element.getAttribute("upsell"),value=element.getAttribute("value");if(offer&&parseInt(offer)>0)pageProducts.push(offer);else if(upsell&&parseInt(upsell)>0)pageProducts.push(upsell);else if(value&&parseInt(value)>0)pageProducts.push(value)}});pageTypeId=pageData&&pageData.pageTypeId;merchantRedirectfkCart=sessionStorage.getItem("merchantRedirectfkCart");sessionStorage.removeItem("merchantRedirectfkCart");merchantRedirectUpsalefkCart=sessionStorage.getItem("merchantRedirectUpsalefkCart");merchantRedirectUpsalefkCart=merchantRedirectUpsalefkCart&&JSON.parse(merchantRedirectUpsalefkCart);cc3dsPageSubmitDetails=sessionStorage.getItem("cc3dsPageSubmitDetails");cc3dsPageSubmitDetails=cc3dsPageSubmitDetails?JSON.parse(cc3dsPageSubmitDetails):null;sessionStorage.removeItem("cc3dsPageSubmitDetails");isFinalizeTransaction=ccUrlParams.has("finalizeTransaction")&&ccUrlParams.get("finalizeTransaction")==="1";urlOrderId=ccUrlParams.has("orderId");ccAlternatePaymentCurrencyCode=sessionStorage.getItem("ccAlternatePaymentCurrencyCode");sessionStorage.removeItem("ccAlternatePaymentCurrencyCode");if(!([2,4].includes(pageTypeId)&&ccUrlParams.get("orderId"))){_context61.next=22;break}_context61.next=20;return orderQueryWithOrderId();case 20:data=_context61.sent;if(data){sessionStorage.setItem("ccOrderQueryWithOrderIdData",JSON.stringify(data));items=Object.keys(data.items);items.forEach(function(x){pageProducts.push(x)})}case 22:if(!(urlOrderId&&(isFinalizeTransaction||pageTypeId===5))){_context61.next=83;break}errorMessage="Error retrieving order details. Reason: ";_context61.prev=24;_orderId9=ccUrlParams.get("orderId");_orderId9=_orderId9&&_orderId9.trim();if(!_orderId9){_context61.next=77;break}payload=JSON.stringify({"orderId":_orderId9,"finalizeTransaction":1});_context61.next=31;return httpMethod("".concat(providerUrl,"/ClubMembership/OrderQueryByOrderId"),payload);case 31:_data7=_context61.sent;if(!(_data7&&_data7.result==="SUCCESS")){_context61.next=76;break}if(!ccAlternatePaymentCurrencyCode){_context61.next=44;break}_context61.prev=34;loadStaticCurrencyValues();convertStaticCurrencyValues();_context61.next=39;return setPriceAndCurrency(ccAlternatePaymentCurrencyCode);case 39:_context61.next=44;break;case 41:_context61.prev=41;_context61.t0=_context61["catch"](34);_context61.t0;case 44:sessionStorage.setItem("products",JSON.stringify(_data7.message.items));setOrderDataForFinalizeTransaction(_data7.message);if(!isFinalizeTransaction){_context61.next=74;break}registerClick(1,null,cc3dsPageSubmitDetails);if(!merchantRedirectfkCart){_context61.next=62;break}ccUpdateCartWithOrderData(_data7.message.items);sessionStorage.setItem("checkoutOrderData",JSON.stringify({items:_data7.message.items,totalAmount:_data7.message.totalAmount,taxTotal:_data7.message.taxTotal,shipTotal:_data7.message.shipTotal}));sessionStorage.setItem("importOrderSuccess",true);ccTrackSygnalEvents&&sessionStorage.setItem("importOrderSuccessSygnal",true);getProvidersData(1)&&sessionStorage.setItem("importOrderSuccessGA",true);getProvidersData(3)&&sessionStorage.setItem("importOrderSuccessSC",true);getProvidersData(4)&&sessionStorage.setItem("importOrderSuccessTTK",true);_context61.t1=ccEnableOfferEvents&&window.ccCallPageOfferEvents;if(!_context61.t1){_context61.next=60;break}_context61.next=60;return ccCallPageOfferEvents("offer-success");case 60:_context61.next=74;break;case 62:if(!(merchantRedirectUpsalefkCart&&orderPurchaseEvent)){_context61.next=74;break}merchantRedirectUpsalefkCart=ccGetPurchasedUpsells(merchantRedirectUpsalefkCart,_data7.message.items);sessionStorage.setItem("merchantRedirectUpsalefkCart",JSON.stringify(merchantRedirectUpsalefkCart));sessionStorage.setItem("importUpsellSuccess",true);ccTrackSygnalEvents&&sessionStorage.setItem("importUpsellSuccessSygnal",true);getProvidersData(1)&&sessionStorage.setItem("importUpsellSuccessGA",true);getProvidersData(3)&&sessionStorage.setItem("importUpsellSuccessSC",true);getProvidersData(4)&&sessionStorage.setItem("importUpsellSuccessTTK",true);_context61.t2=ccEnableUpsellEvents&&window.ccCallPageUpsellEvents;if(!_context61.t2){_context61.next=74;break}_context61.next=74;return ccCallPageUpsellEvents("upsell-success");case 74:_context61.next=77;break;case 76:if(_data7&&_data7.result==="ERROR"){alert(errorMessage+_data7.message)}case 77:_context61.next=82;break;case 79:_context61.prev=79;_context61.t3=_context61["catch"](24);alert(errorMessage+_context61.t3.message);case 82:if(isFinalizeTransaction){sessionKeys=Object.keys(sessionStorage);sessionKeys.forEach(function(key){if(key.indexOf("custom_")===0)sessionStorage.removeItem(key)});merchantRedirectUpsalefkCart&&mergeOfferUpsale(merchantRedirectUpsalefkCart)}case 83:window.ccCheckDisableAmazonPayV2Buttons&&ccCheckDisableAmazonPayV2Buttons();pageTypeId===5&&!sessionStorage.getItem("ccExternalSessionId")&&confirmation();orderDataString=sessionStorage.getItem("orderData");orderData=orderDataString&&JSON.parse(orderDataString);orderStatus=orderData&&["COMPLETE","PENDING","COD_PENDING"].includes(orderData.orderStatus);if(orderStatus){exchangeRate=Number(sessionStorage.getItem("exchangeRate"))||1;sendingCurrencyTxn=orderData.currencyCode===(returnCurrencyCode()||pageData.selectedCampaign.currency);ccProductPercentageValue=Number((Number(orderData.subTotal)*(sendingCurrencyTxn?1:exchangeRate)).toFixed(2))||0;sessionStorage.setItem("ccCartProductsPercentageTotal",ccProductPercentageValue)}ccConfigureAndInitializeAgeVerificationScript();window.ccLoadAgeCheckerScript&&window.ccLoadAgeCheckerScript();pageTypeId===3&&pageProducts.forEach(function(item){if(Number(item))ccUpsellPageFFLProducts[item]=1});fkCart=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):{};if(fkCart&&Object.keys(fkCart).length>0){for(sessionItemCpId in fkCart){_productData21=sessionItemCpId.split("~");if(_productData21.length>1){pageProducts.push(_productData21[1].split(".")[0])}else{pageProducts.push(sessionItemCpId.split(".")[0])}}}globalRecommendations=globalOrderData&&globalOrderData.recommendedProducts&&globalOrderData.recommendedProducts.length?globalOrderData.recommendedProducts:null;orderItems=globalOrderData&&globalOrderData.items;orderItemsLength=orderItems&&Object.keys(orderItems).length;prevSuggestions=![4].includes(pageData.pageTypeId)&&sessionStorage.getItem("prevSuggestions")!==null?JSON.parse(sessionStorage.getItem("prevSuggestions")):[];recommendationOption=(_pageData13=pageData)===null||_pageData13===void 0||(_pageData13=_pageData13.currentPage)===null||_pageData13===void 0||(_pageData13=_pageData13.pageProperties)===null||_pageData13===void 0?void 0:_pageData13.find(function(property){return property.pageAttributeName==="RecommendationOption"});recommendationValue=recommendationOption&&recommendationOption.pageAttributeValue;orderItemsIds=[];if(orderItemsLength){for(_i148=0;_i148<orderItemsLength;_i148++){orderItemsIds[_i148]=orderItems[_i148]&&orderItems[_i148].productId.toString()}}if(ccDynamicProductSection&&recommendationValue){if(orderItemsLength&&pageData.pageTypeId===3&&[2,3,4].includes(Number(recommendationValue))){prevSuggestions=ccSetRecommendationFromCart(orderItems,recommendationValue,prevSuggestions)}else if([0,1].includes(Number(recommendationValue))&&globalRecommendations){confirmOption=ccFilterRecommendations(globalRecommendations,"",orderItemsIds,prevSuggestions);prevSuggestions=ccHandleConfirmOption(confirmOption,prevSuggestions)}}currentItem=![7,9].includes(pageTypeId)&&sessionStorage.getItem("currentItem");currentItem=pageTypeId===13?sessionStorage.getItem("actionCurrentItem"):currentItem;if(currentItem){currentItemProductId=currentItem.split(".")[0];pageProducts.push(currentItemProductId)}pageProductIds={};pageProducts=new Set(pageProducts);pageProducts=Array.from(pageProducts);cartId=pageData.pageTypeId===4&&sessionStorage.getItem("cartId");campaignFirstProduct=(dynamicOrderBump||refreshOrderBumps.length||ccDynamicProductSection)&&!pageProducts.length&&pageData.selectedCampaign.products.find(function(product,index){return index===0});campaignFirstProduct&&pageProducts.push(campaignFirstProduct.campaignProductId.toString());if(!(pageProducts.length>0||cartId)){_context61.next=155;break}productHashMap={};pageData&&pageData.selectedCampaign&&pageData.selectedCampaign.products&&pageData.selectedCampaign.products.forEach(function(product){productHashMap[product.campaignProductId]=product;var extProductId=product.externalProductId;extProductId?productHashMap[extProductId]=product:null});searchProducts=[];searchExternal=[];pageProducts.forEach(function(sessionItemCpId){if(sessionItemCpId.startsWith("EXT")){var extSessionItemCpId=sessionItemCpId.substring(3);if(!productHashMap[extSessionItemCpId]){searchExternal.push(extSessionItemCpId)}else{pageProductIds[productHashMap[extSessionItemCpId].campaignProductId]=extSessionItemCpId}}else{if(!productHashMap[sessionItemCpId]||currentItemProductId==sessionItemCpId){searchProducts.push(sessionItemCpId)}else{pageProductIds[sessionItemCpId]=sessionItemCpId}}});importedProducts=[];searchProducts=searchProducts.filter(function(prodId){return Number(prodId)});searchExternal=searchExternal.filter(function(prodId){return Number(prodId)});if(!(searchProducts.length>0||searchExternal.length>0)){_context61.next=137;break}//call campaign query API passing in the campaignId, list of products, and list of externals
_params5={};_params5.campaignId=campaignId;if(searchProducts.length>0)_params5.campaignProductId=searchProducts.join(",");if(searchExternal.length>0)_params5.externalProductId=searchExternal.join(",");_context61.prev=126;campaignCalled=true;_context61.next=130;return httpMethod("".concat(providerUrl,"/Import/CampaignQuery"),JSON.stringify(_params5));case 130:_response15=_context61.sent;if(_response15&&_response15.result==="SUCCESS"){_data8=_response15.message&&_response15.message.data&&_response15.message.data[campaignId];if(_data8){importedProducts=_data8.products||[];//add the products returned to pageData.selectedCampaign.products
importedProducts.forEach(function(product){if(!productHashMap[product.campaignProductId]){pageData.selectedCampaign.products.push(product)}else if(product.campaignProductId==currentItemProductId){var currentItemIndex=pageData.selectedCampaign.products.findIndex(function(product){return product.campaignProductId==currentItemProductId});currentItemIndex!==-1?pageData.selectedCampaign.products[currentItemIndex]=product:null}productHashMap[product.campaignProductId]=product;var extProductId=product.externalProductId;var extVariantId=true;for(var externalId in searchExternal){if(extProductId==searchExternal[externalId]){productHashMap[extProductId]=product;extVariantId=false;break}}if(extVariantId){var _loop46=function _loop46(_externalId){var extVariant=product.variants.find(function(variant){return variant.externalVariantDetailId==searchExternal[_externalId]});if(extVariant&&extVariant.externalVariantDetailId){extVarDetailProduct[extVariant.externalVariantDetailId]=extVariant.variantDetailId;var campProdVariantId="EXTVAR"+extVariant.externalVariantDetailId;productHashMap[campProdVariantId]=product};};for(var _externalId in searchExternal){_loop46(_externalId)}}pageProductIds[product.campaignProductId]=product.campaignProductId});glOrderItems=null}}_context61.next=137;break;case 134:_context61.prev=134;_context61.t4=_context61["catch"](126);console.log(_context61.t4);case 137:rebillCartCleanup={};rebillCart=sessionStorage.getItem("rebillCart")!==null?JSON.parse(sessionStorage.getItem("rebillCart")):null;rebillCartExists=rebillCart&&Object.keys(rebillCart).length;if(!rebillCartExists){_context61.next=148;break}_loop47=/*#__PURE__*/_regeneratorRuntime().mark(function _loop47(_sessionItemCpId2){var cartKey,itemKey,_productData22,_product21,productForQuery,rebillProduct;return _regeneratorRuntime().wrap(function _loop47$(_context60){while(1)switch(_context60.prev=_context60.next){case 0:cartKey=_sessionItemCpId2.split("~");if(cartKey.length>1){itemKey=cartKey[1];_productData22=itemKey.split(".");//find the one time product (skip if product is recurring)
_product21=productHashMap[_productData22[0]];productForQuery=_product21.campaignProductId;if(_product21&&_product21.billingCycleType=="ONE_TIME"){//find the recurring product of same base product
rebillProduct=pageData.selectedCampaign.products.find(function(item){return item.productId==_product21.productId&&item.billingCycleType=="RECURRING"&&item.productName.toLowerCase().includes(rebillCart[_sessionItemCpId2].toLowerCase())});if(!rebillProduct){rebillProduct=pageData.selectedCampaign.products.find(function(item){return item.productId==_product21.productId&&item.billingCycleType=="RECURRING"})}if(rebillProduct){//change cart to rebill product
itemKey=_productData22.length>1?rebillProduct.campaignProductId+"."+_productData22[1]:rebillProduct.campaignProductId;productForQuery=rebillProduct.campaignProductId}}pageProductIds[productForQuery]=productForQuery;rebillCartCleanup[itemKey]=_sessionItemCpId2}case 2:case"end":return _context60.stop()}},_loop47)});_context61.t5=_regeneratorRuntime().keys(rebillCart);case 143:if((_context61.t6=_context61.t5()).done){_context61.next=148;break}_sessionItemCpId2=_context61.t6.value;return _context61.delegateYield(_loop47(_sessionItemCpId2),"t7",146);case 146:_context61.next=143;break;case 148:pageProductIdsOnly=Object.keys(pageProductIds);pageData.selectedCampaign.products.forEach(function(item){var campaignProductId=item.campaignProductId;if(item.clubPluginId&&!pageProductIds[campaignProductId]){pageProductIds[campaignProductId]=campaignProductId}});pageProductIdCollection=Object.keys(pageProductIds);// pageTypeId !== 3 && ccTrackProductViewEvent(pageProductIds);
if(pageProductIdCollection.length||cartId){try{_params6={campaignId:campaignId,campaignProductId:pageProductIdCollection.join(",")};if(cartId){_params6.cartId=cartId}campaignCalled=true;httpMethod("".concat(providerUrl,"/Import/CampaignQuery"),JSON.stringify(_params6)).then(function(response){if(response&&response.result==="SUCCESS"){var _data9=response.message&&response.message.data&&response.message.data[campaignId];if(!_data9){return}ccCampaignProductsData=response.message.data[campaignId].products;var pageCrmProducts=_data9.products||[];var pageCrmProductIds={};pageCrmProducts.forEach(function(prod){pageCrmProductIds[prod.campaignProductId]=1});var pageDataProducts=pageData.selectedCampaign.products.filter(function(product){if(!pageProductIds[product.campaignProductId]&&!pageCrmProductIds[product.campaignProductId]){return true}});pageData.selectedCampaign=_data9;ccUpdateCampaignId();var currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;ccSetCurrencyRules(currencyCode);var productsCollection=pageCrmProducts.concat(pageDataProducts);pageData.selectedCampaign.products=productsCollection;glOrderItems=null;var validDynamicUpsell=!recommendationFlag&&pageData.pageTypeId===3&&[0,1].includes(Number(recommendationValue));if(![13,18,34].includes(pageData.pageTypeId)&&(ccDynamicProductSection||refreshOrderBumps.length||dynamicOrderBump)){if(validDynamicUpsell||pageData.pageTypeId!==3)ccSetRecommendation(pageProductIdsOnly,prevSuggestions,orderItemsIds,globalRecommendations)}initializeCountryStates();replaceTokens();loadVariants();var productVariantElement=document.getElementsByClassName("fk-product-variant-select")[0];if(productVariantElement){productVariantElement.removeAttribute("name");constructProductVariantElement("",productVariantElement)}setUnselectedTiles();showVariantImageOnProductSection();if(pageData.pageTypeId===4&&document.getElementsByName("cardNumber").length){getVariants()}ccProductSectionsOnPage&&enableInteractions();var ccCartData=_data9.cartData;if(ccCartData){ccCartData.itemsInfo={};var _items=ccCartData.items||[];var ccCartItems=getOrderItems()||{};var emptyCart=!Object.keys(ccCartItems).length;_items.forEach(function(item){var productId=item.campaignProductId.toString();if(item.variantId){productId=productId+"."+item.variantId}if(ccCartItems[productId]||emptyCart){ccCartData.itemsInfo[productId]=true}});if(_items.length){sessionStorage.setItem("ccShopifyProducts",JSON.stringify({currency:ccCartData.currency,itemsInfo:ccCartData.itemsInfo}))}ccCartData.cartId=cartId;pageData.cartData=ccCartData;if(emptyCart){ccCartData.items.forEach(function(item){var productId=item.campaignProductId.toString();if(item.variantId){productId+="."+item.variantId}ccCartItems[productId]=Number(ccCartItems[productId])||item.qty});sessionStorage.setItem("fkCart",JSON.stringify(ccCartItems))}}pageData.cartData&&ccUpdateProductPrices();displayPrices()}else{ccProductSectionsOnPage&&enableInteractions()}ccDisplayCartAfterProductLoad();ccCallAddToCartEventForUrlProducts()})}catch(error){ccDisplayCartAfterProductLoad();ccProductSectionsOnPage&&enableInteractions();ccCallAddToCartEventForUrlProducts();console.log(error)}}else{ccDisplayCartAfterProductLoad();ccProductSectionsOnPage&&enableInteractions()}if(fkCart&&Object.keys(fkCart).length>0){sessionCustomCart=sessionStorage.getItem("customCart");customCart=sessionCustomCart&&sessionCustomCart!=="undefined"&&sessionCustomCart!=="null"?JSON.parse(sessionStorage.getItem("customCart")):{};customCartLength=Object.keys(customCart).length;//replace cart external id with campaign product id
extVar=[];for(_sessionItemCpId3 in fkCart){_productData23=_sessionItemCpId3.split("~");itemKey=_productData23[0].startsWith("EXT")?_productData23[0].substring(3):null;itemKey=_productData23.length>1&&_productData23[1].startsWith("EXT")?_productData23[1].substring(3):itemKey;if(itemKey){_product22=void 0;extVariantKey="EXTVAR"+itemKey;if(productHashMap[extVariantKey]&&!extVar[extVariantKey]){_product22=productHashMap[extVariantKey];extVar[extVariantKey]=1}else{_product22=productHashMap[itemKey]}if(_product22){extVariantId=extVarDetailProduct[itemKey];newProductId=extVariantId?_product22.campaignProductId+"."+extVariantId:_product22.campaignProductId;fkCart[newProductId]=fkCart[_sessionItemCpId3];delete fkCart[_sessionItemCpId3];if(customCartLength){for(_i149=0;_i149<customCartLength;_i149++){_cartKey=customCart[_i149].split("|");if(_cartKey[0]==_productData23[1]){_cartKey[0]=_product22.campaignProductId;customCart[_i149]=_cartKey.join("|")}}sessionStorage.setItem("customCart",JSON.stringify(customCart))}}}}//swap to recurring products
if(rebillCartExists){for(_itemKey2 in rebillCartCleanup){_sessionItemCpId4=rebillCartCleanup[_itemKey2];fkCart[_itemKey2]=fkCart[_sessionItemCpId4];rebillCart[_itemKey2]=rebillCart[_sessionItemCpId4];if(customCartLength){for(ckey in customCart){customCartData=customCart[ckey]&&customCart[ckey].split("|")||[];_product23=_sessionItemCpId4.split("~")[1];if(_product23&&customCartData[0]&&_product23===customCartData[0]){customCartData[0]=_itemKey2;customCart[ckey]=customCartData.join("|")}}sessionStorage.setItem("customCart",JSON.stringify(customCart))}delete fkCart[_sessionItemCpId4];delete rebillCart[_sessionItemCpId4]}sessionStorage.setItem("rebillCart",JSON.stringify(rebillCart))}//remove any remaining tilde in the cart
for(_sessionItemCpId5 in fkCart){_productData24=_sessionItemCpId5.split("~");if(_productData24.length>1){_itemKey3=_productData24[1];qty=fkCart[_itemKey3]?fkCart[_itemKey3]:0;fkCart[_itemKey3]=(parseInt(fkCart[_sessionItemCpId5])+parseInt(qty)).toString();delete fkCart[_sessionItemCpId5];fkCart=isSubscribeOn?swapSubscriptions(fkCart,_sessionItemCpId5):fkCart}}sessionStorage.setItem("fkCart",JSON.stringify(fkCart))}_context61.next=157;break;case 155:ccDisplayCartAfterProductLoad();ccProductSectionsOnPage&&enableInteractions();case 157:case"end":return _context61.stop()}},_callee55,null,[[24,79],[34,41],[126,134]])}));return _swapCartProducts.apply(this,arguments)}function setUnselectedTiles(){var productSections=$(".fk-variant-tile");var productSectionsLength=productSections.length;if(productSectionsLength){for(var _i136=0;_i136<productSectionsLength;_i136++){var section=productSections[_i136];for(var j=1;j<=3;j++){var variants=$(section).find("[data-selected=true][name=variant"+j+"]");if(!variants.length){var nonSelectedTitle=$(section).find("[data-selected=false][name=variant"+j+"]").first();if(nonSelectedTitle.length&&nonSelectedTitle[0].offsetHeight>0){nonSelectedTitle.click()}}}}}}function ccSetAltValues(element){try{var altValue=element.attr("altvalue");if(altValue){var productValue=element.attr("value");var offer=element.attr("offer");var upsell=element.attr("upsell");productValue=parseInt(offer)>0?offer:parseInt(upsell)>0?upsell:productValue;var variantValue=element.attr("variantvalue");if(variantValue)productValue=productValue+"."+variantValue;var quantity=element.attr("quantity");var unitPrice=element.attr("price");quantity=quantity?quantity:1;unitPrice=unitPrice?unitPrice:0;altValues[productValue+"|"+quantity]=quantity+"|"+unitPrice+"|"+altValue}}catch(err){err}}function loadAltValues(){var productElements=$(".fk-product-radio, .fk-product-checkbox, button, a");$(productElements).each(function(){ccSetAltValues($(this))})}function ccGetSessionVatPrice(sessionKey,exchangeRate,productValue,itemTotalPrice){var currencyCode=returnCurrencyCode()||pageData.selectedCampaign.currency;var matchedCurrency=pageData.selectedCampaign.currencies&&pageData.selectedCampaign.currencies.find(function(currency){return currency.currencyCode==currencyCode});var vatPrices=sessionStorage.getItem(sessionKey)!==null&&JSON.parse(sessionStorage.getItem(sessionKey));var productVatPrice=vatPrices&&parseFloat(vatPrices[productValue]&&vatPrices[productValue].replaceAll(",",""));productVatPrice=matchedCurrency&&!matchedCurrency.sendToGateway?parseFloat(productVatPrice)*parseFloat(exchangeRate):productVatPrice;return productVatPrice||itemTotalPrice}function ccGetProductCurrencyPrice(itemId){var _itemId$toString,_pageData8,_product$currencyPric;var cycleNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!itemId)return null;var _ref35=(itemId===null||itemId===void 0||(_itemId$toString=itemId.toString())===null||_itemId$toString===void 0?void 0:_itemId$toString.split("."))||[],_ref36=_slicedToArray(_ref35,2),productId=_ref36[0],variantId=_ref36[1];var product=(_pageData8=pageData)===null||_pageData8===void 0||(_pageData8=_pageData8.selectedCampaign)===null||_pageData8===void 0||(_pageData8=_pageData8.products)===null||_pageData8===void 0?void 0:_pageData8.find(function(o){return o.campaignProductId==productId});var currency=returnCurrencyCode()||pageData.selectedCampaign.currency;if(variantId){var _product$variants;var variant=product===null||product===void 0||(_product$variants=product.variants)===null||_product$variants===void 0?void 0:_product$variants.find(function(o){return o.variantDetailId==variantId});var variantCurrencyPrices=variant===null||variant===void 0?void 0:variant.currencyPrices;if(variantCurrencyPrices!==null&&variantCurrencyPrices!==void 0&&variantCurrencyPrices.length){if(!window.ccCampaignVariantCurrencies){var _pageData9;var obj={};(_pageData9=pageData)===null||_pageData9===void 0||(_pageData9=_pageData9.selectedCampaign)===null||_pageData9===void 0||(_pageData9=_pageData9.currencies)===null||_pageData9===void 0||_pageData9.forEach(function(o){if(o.sendToGateway&&o.currencyCode!==pageData.selectedCampaign.currency){obj[o.currencyCode]=true}});window.ccCampaignVariantCurrencies=obj}var variantCurrencyPrice=variantCurrencyPrices===null||variantCurrencyPrices===void 0?void 0:variantCurrencyPrices.find(function(o){return o.currency==currency&&window.ccCampaignVariantCurrencies[o.currency]});return(variantCurrencyPrice===null||variantCurrencyPrice===void 0?void 0:variantCurrencyPrice.price)||null}return null}var currencyPrice=product===null||product===void 0||(_product$currencyPric=product.currencyPrices)===null||_product$currencyPric===void 0?void 0:_product$currencyPric.find(function(o){return o.currency==currency&&o.cycleNum==cycleNumber});return(currencyPrice===null||currencyPrice===void 0?void 0:currencyPrice.price)||null}function getItemPrice(productValue,unitPrice,quantity,skipTax,skipExchangeRate,useVatCompareAtPriceIfExists,cycleNumber){//convert unitPrice to current currency
var exchangeRate=sessionStorage.getItem("exchangeRate")!==null?sessionStorage.getItem("exchangeRate"):1;var sessionExchangeRate=Number(exchangeRate)||1;var itemsInfo=pageData&&pageData.pageTypeId===4&&pageData.cartData&&pageData.cartData.itemsInfo&&pageData.cartData.itemsInfo[productValue];var shopifyCurrencyMatch=itemsInfo&&(returnCurrencyCode()||pageData.selectedCampaign.currency)===pageData.cartData.currency;if(itemsInfo&&shopifyCurrencyMatch||skipExchangeRate)exchangeRate=1;unitPrice=(parseFloat(unitPrice)*parseFloat(exchangeRate)).toFixed(2);var itemTotalPrice=parseFloat(unitPrice);var key=productValue+"|"+quantity;var currencyPrice=!shopifyCurrencyMatch&&!useVatCompareAtPriceIfExists&&!ccMemberPriceProductMap[productValue]&&ccGetProductCurrencyPrice(productValue,cycleNumber);if(currencyPrice)itemTotalPrice=currencyPrice;if(altValues[key]){var altValue=altValues[key].split("|");if(parseFloat(altValue[1])>0){itemTotalPrice=(parseFloat(altValue[1])*parseFloat(exchangeRate)).toFixed(2);quantity=1}}itemTotalPrice=shopifyCurrencyMatch||currencyPrice?itemTotalPrice:ccRoundingPrice(itemTotalPrice);if(!skipTax){var taxParams=getTaxRate();if(taxParams.isVat&&taxParams.addVatToPrice){if(skipTax===false){itemTotalPrice*=taxParams.vatTaxRate;if(useVatCompareAtPriceIfExists){itemTotalPrice=ccGetSessionVatPrice("vatCompareAtPrices",exchangeRate,productValue,itemTotalPrice);quantity=1}}else{itemTotalPrice=ccGetSessionVatPrice("vatPrices",itemsInfo?sessionExchangeRate:exchangeRate,productValue,itemTotalPrice);quantity=1}}}itemTotalPrice=itemTotalPrice*quantity;return itemTotalPrice}function getShipPrice(unitPrice,quantity,skipFixation,item){var exchangeRate=sessionStorage.getItem("exchangeRate")!==null?sessionStorage.getItem("exchangeRate"):1;unitPrice=parseFloat(unitPrice)*parseFloat(exchangeRate);var count=item&&item.itemCountThreshold?Math.min(parseInt(item.itemCountThreshold),quantity):quantity;var shipTotalPrice=parseFloat(skipFixation?unitPrice:unitPrice.toFixed(2))*count;return shipTotalPrice}function isFirstTime(){return window&&window.performance&&window.performance.navigation&&(window.performance.navigation.type===0||navigator.userAgent.indexOf("Firefox")!==-1&&window.performance.navigation.type===255)&&!ccUrlParams.has("token")}function getItemAlt(productValue,quantity){itemAlt=false;var key=productValue+"|"+quantity;if(altValues[key]){var altValue=altValues[key].split("|");itemAlt=altValue[2]}return itemAlt}function displayGatewayScripts(){$("afterpay-placement, affirm-placement").each(function(){$(this).remove()});var totals=JSON.parse(sessionStorage.getItem("totals"));if(totals){var grandTotal=totals.grandTotal;var payLaterBannerTagExists=$("div[data-pp-placement=product]").length;var afterPayDisplay=$(".afterpayButton").css("display")==="inline-block"?true:false;var selectedCurrency=returnCurrencyCode()||pageData.selectedCampaign.currency;afterPayDisplay&&$(".afterpayButton").each(function(){$(this).before("<afterpay-placement data-locale='en_US' data-currency='"+selectedCurrency+"' data-amount='"+grandTotal+"'></afterpay-placement>")});var affirmButtons=$(".affirmButton");var affirmUpdatedPrice=Math.trunc(grandTotal*100);// Covert $ to cents
var affirmElement="<affirm-placement class='affirm-as-low-as' style='display:block;' data-page-type='cart' data-amount='"+affirmUpdatedPrice+"'></affirm-placement>";var paypalPayLaterEnabled=getAddOnKeyValue(findAddOn("PayPal_PayLater"));paypalPayLaterEnabled=["1","true"].includes(paypalPayLaterEnabled);var paypalButtons=$(".btnPayPal2, .btnPayPal");var paypalPayLaterButtonExists=!payLaterBannerTagExists&&paypalButtons.length&&paypalPayLaterEnabled;var paypalPayLaterElement="<div data-pp-message data-pp-placement='product' data-pp-amount='"+grandTotal+"'></div>";var grandTotalElement=$(".grandTotal").filter(":not(.cc-cart-toggle .grandTotal)");if(grandTotalElement.length){var grandElementTotalParent=grandTotalElement.closest("div");paypalPayLaterButtonExists&&grandElementTotalParent.after(paypalPayLaterElement);affirmButtons.length&&grandElementTotalParent.after(affirmElement)}else{paypalPayLaterButtonExists&&paypalButtons.before(paypalPayLaterElement);affirmButtons.before(affirmElement)}if(payLaterBannerTagExists){$("div[data-pp-placement=product]").attr("data-pp-amount",grandTotal)}$("[data-pp-placement=product]").find("iframe").css({"opacity":1,"pointer-events":"auto"});if(window.hasOwnProperty("affirm")){affirm.ui.ready(function(){affirm.ui.refresh()})}}}function fetchNewProducts(eventType){var totalPrice=0;var contents=[];var orderData=JSON.parse(sessionStorage.getItem("orderData"));if(orderData&&orderData.hasOwnProperty("items")){var _fkCart3=sessionStorage.getItem("fkCart")!==null?JSON.parse(sessionStorage.getItem("fkCart")):[];var fkCartSent=sessionStorage.getItem("fkCartSent")!==null&&(eventType.toLowerCase()!=="purchase"||!isFirstTime())?JSON.parse(sessionStorage.getItem("fkCartSent")):[];var newItems=Object.keys(_fkCart3).filter(function(x){return!Object.keys(fkCartSent).includes(x)});if(newItems.length>0){orderData.items.forEach(function(item){var key=item.variantDetailId?item.productId.toString()+"."+item.variantDetailId.toString():item.productId.toString();if(newItems.includes(key)){contents.push({id:key,name:item.title?item.name+" "+item.title:item.name,quantity:parseInt(item.qty),price:item.price,sku:item.variantSku?item.variantSku:item.productSku,category:""});totalPrice+=parseFloat(item.price)}})}}var params={};params.event=eventType;params.transactionId=orderData?orderData.orderId:"";params.priceTotal=totalPrice.toFixed(2);params.currencyCode=orderData&&orderData.currencyCode||returnCurrencyCode()||pageData.selectedCampaign.currency;params.products=contents;if(eventType.toLowerCase()=="purchase"&&orderData&&orderData.shipAddress1){params.shippingAddress=orderData.shipAddress1;params.shippingAddress+=orderData.shipAddress2?" "+orderData.shipAddress2:"";params.shippingAddress+=" "+orderData.shipCity+" "+orderData.shipState+" "+orderData.shipCountry+" "+orderData.shipPostalCode}sessionStorage.setItem("fkCartSent",sessionStorage.getItem("fkCart"));return params}function fetchCartProducts(eventType){var totalPrice=0;var contents=[];var cartProducts=getOrderItemDetails();if(cartProducts&&Object.keys(cartProducts).length>0){var fkCartSent=sessionStorage.getItem("fkCartSent")!==null?JSON.parse(sessionStorage.getItem("fkCartSent")):[];var cartProductsEntries=Object.entries(cartProducts);var cartProductsEntriesLength=cartProductsEntries.length;for(var _i137=0;_i137<cartProductsEntriesLength;_i137++){var campaignProductId=cartProductsEntries[_i137][0];var _product20=cartProductsEntries[_i137][1];if(!fkCartSent[campaignProductId]){var unitPrice=_product20.variant&&parseFloat(_product20.variant.price)>0&&!_product20.isVariantBundle&&!_product20.isEditable?_product20.variant.price:_product20.cycle1_price;var _price7=getItemPrice(campaignProductId,unitPrice,_product20.currentOrderQuantity).toFixed(2);contents.push({id:campaignProductId.toString(),name:_product20.variant?_product20.productName+" "+_product20.variant.title:_product20.productName,quantity:_product20.currentOrderQuantity,price:_price7,sku:_product20.variant&&_product20.variant.productSku!==""?_product20.variant.productSku:_product20.productSku,category:""});totalPrice+=parseFloat(_price7)}}}var orderData=JSON.parse(sessionStorage.getItem("orderData"));var params={};params.event=eventType;params.transactionId=orderData?orderData.orderId:"";params.priceTotal=totalPrice.toFixed(2);params.currencyCode=orderData&&orderData.currencyCode||returnCurrencyCode()||pageData.selectedCampaign.currency;params.items=contents;sessionStorage.setItem("fkCartSent",sessionStorage.getItem("fkCart"));return params}function verifyShippingRequiredFields(required,paySource,requireAddressAddon){var baseFields;var orderItems=Object.values(getOrderItemDetails());var isOrderShippable=orderItems.some(function(item){return item.cycle1_isShippable});var address1Element=document.getElementsByName("address1")[0];var shipAddress1Element=document.getElementsByName("shipAddress1")[0];var shipProfile=getCurrentShipProfile();if(isOrderShippable&&requireAddressAddon==="true"&&(!shipProfile||shipProfile==="0")){baseFields=shipAddress1Element?["shipAddress1","shipCity","shipPostalCode"]:["address1","city","postalCode"]}else if(paySource==="PAYPAL"){if(shipAddress1Element){baseFields=shipAddress1Element.value?["shipCity","shipPostalCode"]:null}else if(address1Element){baseFields=address1Element.value?["city","postalCode"]:null}}if(baseFields){var countryField=shipAddress1Element?"shipCountry":"country";var country=document.getElementsByName(countryField)[0]?document.getElementsByName(countryField)[0].value:defaultCountryCode;if(["US","CA"].includes(country)){var stateField=shipAddress1Element?"shipState":"state";baseFields.push(stateField)}baseFields.forEach(function(name){var field=document.getElementsByName(name)[0];if(field){required.push(field)}})}}function setSplitSelected(currentPage){if(currentPage.splitReferenceId){sessionStorage.setItem(currentPage.splitReferenceId,window.location.href)}}function determineSplit(funnelReferenceId,splitReferenceId){var splitLoadedUrl=sessionStorage.getItem(splitReferenceId);if(splitLoadedUrl){return splitLoadedUrl}return"".concat(providerUrl,"/SplitTest/funnel/")+funnelReferenceId+"/split/"+splitReferenceId+"/redirect/true/funnelEnvironment/"+getEnvironment()}window.onbeforeunload=function(event){var countryAndStateInfoTrackerObj=JSON.parse(sessionStorage.getItem("ccCountryAndStateInfoTracker")||"{}");["shipCountry","country","shipState","state"].forEach(function(name){var _document$getElements;var value=(_document$getElements=document.getElementsByName(name)[0])===null||_document$getElements===void 0?void 0:_document$getElements.value;if(value){countryAndStateInfoTrackerObj[name]=value}});sessionStorage.setItem("ccCountryAndStateInfoTracker",JSON.stringify(countryAndStateInfoTrackerObj));if(pageData.pageTypeId===3){// FUN2-3434 : HOTFIX Remove confirm order. User might click back which is triggering the below call
// let params = {};
// params.orderId = JSON.parse(sessionStorage.getItem("orderId"));
// httpMethod("${providerUrl}/import/order/confirm", JSON.stringify(params));
// FUN2-3384
var purchaseEventType=pageData.funnelData.addOns.find(function(_ref37){var keyName=_ref37.keyName;return keyName==="Purchase_Event_FB"}).keyValue;if(purchaseEventType!=2&&purchaseEventType!=3){if(window.ltk)callPurchaseEventForLisTrak(window.ltk)}}};